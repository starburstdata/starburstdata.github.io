

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Hive metastore configuration &#8212; Starburst Enterprise Presto</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/presto.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ranger configuration" href="ranger-configuration.html" />
    <link rel="prev" title="SEP configuration" href="sep-configuration.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#k8s/hms-configuration" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Starburst Enterprise Presto"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise Presto logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise Presto</span>
          <span class="md-header-nav__topic"> Hive metastore configuration </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (350-e)" href="/350-e/">Latest LTS (350-e)</a>
      
          <a title="345-e LTS" href="/345-e/">345-e LTS</a>
      
          <a title="338-e LTS" href="/338-e/">338-e LTS</a>
      
          <a title="Latest STS (354-e)" href="/354-e/">Latest STS (354-e)</a>
      
          <a title="348-e STS" href="/348-e/">348-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../k8s.html" class="md-tabs__link">Kubernetes with Helm</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise Presto" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise Presto">Starburst Enterprise Presto</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../mission-control.html" class="md-nav__link">Mission Control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Amazon Web Services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Kubernetes with Helm</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="requirements.html" class="md-nav__link">Requirements</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sep-configuration.html" class="md-nav__link">SEP configuration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Hive metastore configuration </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Hive metastore configuration</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-hms-configuration--page-root" class="md-nav__link">Hive metastore configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#using-the-hms" class="md-nav__link">Using the HMS</a>
        </li>
        <li class="md-nav__item"><a href="#docker-image-and-registry" class="md-nav__link">Docker image and registry</a>
        </li>
        <li class="md-nav__item"><a href="#exposing-the-pod-to-outside-network" class="md-nav__link">Exposing the pod to outside network</a>
        </li>
        <li class="md-nav__item"><a href="#database-backend-for-hms" class="md-nav__link">Database backend for HMS</a>
        </li>
        <li class="md-nav__item"><a href="#server-start-up-configuration" class="md-nav__link">Server start up configuration</a>
        </li>
        <li class="md-nav__item"><a href="#additional-volumes" class="md-nav__link">Additional volumes</a>
        </li>
        <li class="md-nav__item"><a href="#storage" class="md-nav__link">Storage</a>
        </li>
        <li class="md-nav__item"><a href="#server-configuration" class="md-nav__link">Server configuration</a>
        </li>
        <li class="md-nav__item"><a href="#node-assignment" class="md-nav__link">Node assignment</a>
        </li>
        <li class="md-nav__item"><a href="#annotations" class="md-nav__link">Annotations</a>
        </li>
        <li class="md-nav__item"><a href="#environment-variables" class="md-nav__link">Environment variables</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ranger-configuration.html" class="md-nav__link">Ranger configuration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="operation.html" class="md-nav__link">Operation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="release-notes.html" class="md-nav__link">Helm chart release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="eks.html" class="md-nav__link">Amazon Elastic Kubernetes Service</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="gke.html" class="md-nav__link">Google Kubernetes Engine</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="gcp-marketplace.html" class="md-nav__link">GCP Marketplace</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="aks.html" class="md-nav__link">Microsoft Azure Kubernetes Service</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="openshift.html" class="md-nav__link">Red Hat OpenShift</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../migration.html" class="md-nav__link">Migration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">345-e.10 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">-</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-hms-configuration--page-root" class="md-nav__link">Hive metastore configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#using-the-hms" class="md-nav__link">Using the HMS</a>
        </li>
        <li class="md-nav__item"><a href="#docker-image-and-registry" class="md-nav__link">Docker image and registry</a>
        </li>
        <li class="md-nav__item"><a href="#exposing-the-pod-to-outside-network" class="md-nav__link">Exposing the pod to outside network</a>
        </li>
        <li class="md-nav__item"><a href="#database-backend-for-hms" class="md-nav__link">Database backend for HMS</a>
        </li>
        <li class="md-nav__item"><a href="#server-start-up-configuration" class="md-nav__link">Server start up configuration</a>
        </li>
        <li class="md-nav__item"><a href="#additional-volumes" class="md-nav__link">Additional volumes</a>
        </li>
        <li class="md-nav__item"><a href="#storage" class="md-nav__link">Storage</a>
        </li>
        <li class="md-nav__item"><a href="#server-configuration" class="md-nav__link">Server configuration</a>
        </li>
        <li class="md-nav__item"><a href="#node-assignment" class="md-nav__link">Node assignment</a>
        </li>
        <li class="md-nav__item"><a href="#annotations" class="md-nav__link">Annotations</a>
        </li>
        <li class="md-nav__item"><a href="#environment-variables" class="md-nav__link">Environment variables</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="k8s-hms-configuration--page-root">Hive metastore configuration<a class="headerlink" href="#k8s-hms-configuration--page-root" title="Permalink to this headline">#</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">starburst-hive</span></code> Helm chart configures a Hive Metastore Service HMS and
optionally the backing database in the cluster with the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file
detailed in the following sections.</p>
<p>A minimal values file <a class="reference internal" href="requirements.html#k8s-docker-registry"><span class="std std-ref">adds the registry credentials</span></a> and overrides any defaults to suitable values.</p>

<span id="helm-hms-using"></span><h2 id="using-the-hms">Using the HMS<a class="headerlink" href="#using-the-hms" title="Permalink to this headline">#</a></h2>
<p>The expose section configures the DNS availability of the HMS in the cluster. By
default the HMS is available at the hostname <code class="docutils literal notranslate"><span class="pre">hive</span></code> and port <code class="docutils literal notranslate"><span class="pre">9083</span></code>. As a
result the Thrift URL within the cluster is <code class="docutils literal notranslate"><span class="pre">thrift://hive:9083</span></code>.</p>
<p>You can use the URL for <a class="reference internal" href="sep-configuration.html#helm-sep-catalogs"><span class="std std-ref">any catalog</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">catalog</span><span class="p">:</span>
  <span class="nt">datalake</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=hive-hadoop2</span>
    <span class="no">hive.metastore.uri=thrift://hive:9083</span>
</pre></div>
</div>


<span id="helm-hms-image"></span><h2 id="docker-image-and-registry">Docker image and registry<a class="headerlink" href="#docker-image-and-registry" title="Permalink to this headline">#</a></h2>
<p>Same as <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Docker image and registry section for the Helm chart</span></a> for SEP.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">image</span><span class="p">:</span>
  <span class="nt">repository</span><span class="p">:</span> <span class="s">"harbor.starburstdata.net/starburstdata/hive"</span>
  <span class="nt">tag</span><span class="p">:</span> <span class="s">"345.10.0"</span>
  <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>

<span class="nt">registryCredentials</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">registry</span><span class="p">:</span>
  <span class="nt">username</span><span class="p">:</span>
  <span class="nt">password</span><span class="p">:</span>

<span class="nt">imagePullSecrets</span><span class="p">:</span>
 <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span>
</pre></div>
</div>


<span id="helm-hms-expose"></span><h2 id="exposing-the-pod-to-outside-network">Exposing the pod to outside network<a class="headerlink" href="#exposing-the-pod-to-outside-network" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">expose</span></code> section for the HMS works identical to the SEP server
<a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">expose section</span></a>. Differences are isolated to the
configured default values. The default type is <code class="docutils literal notranslate"><span class="pre">clusterIp</span></code>. Ensure to adapt
your configured catalogs to use the correct Thrift URL for HMS, when changing
this configuration.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"clusterIp"</span>
  <span class="nt">clusterIp</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"hive"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9083</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"nodePort"</span>
  <span class="nt">nodePort</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"hive"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9083</span>
        <span class="nt">nodePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30083</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"ingress"</span>
  <span class="nt">ingress</span><span class="p">:</span>
    <span class="nt">tls</span><span class="p">:</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">secretName</span><span class="p">:</span>
    <span class="nt">host</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<span id="helm-hms-database"></span><h2 id="database-backend-for-hms">Database backend for HMS<a class="headerlink" href="#database-backend-for-hms" title="Permalink to this headline">#</a></h2>
<p>The database backend for HMS is a PostgreSQL database internal to the
cluster by default:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">internal</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span>
      <span class="nt">repository</span><span class="p">:</span> <span class="s">"library/postgres"</span>
      <span class="nt">tag</span><span class="p">:</span> <span class="s">"10.6"</span>
      <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="c1"># use one of:</span>
      <span class="c1"># - existingVolumeClaim to specify existing PVC</span>
      <span class="c1"># - persistentVolumeClaim to specify spec for new PVC</span>
      <span class="c1"># - other volume type inline configuration, e.g. emptyDir</span>
      <span class="c1"># Examples:</span>
      <span class="c1"># existingVolumeClaim: "my_claim"</span>
      <span class="c1"># persistentVolumeClaim:</span>
      <span class="c1">#  storageClassName:</span>
      <span class="c1">#  accessModes:</span>
      <span class="c1">#    - ReadWriteOnce</span>
      <span class="c1">#  resources:</span>
      <span class="c1">#    requests:</span>
      <span class="c1">#      storage: "2Gi"</span>
      <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
    <span class="nt">resources</span><span class="p">:</span>
      <span class="nt">requests</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
      <span class="nt">limits</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">driver</span><span class="p">:</span> <span class="s">"org.postgresql.Driver"</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5432</span>
    <span class="nt">databaseName</span><span class="p">:</span> <span class="s">"hive"</span>
    <span class="nt">databaseUser</span><span class="p">:</span> <span class="s">"hive"</span>
    <span class="nt">databasePassword</span><span class="p">:</span> <span class="s">"HivePass1234"</span>
    <span class="nt">envFrom</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
    <span class="nt">env</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">database.internal.envFrom</span></code>: YAML sequence of mappings <a class="reference external" href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#envfromsource-v1-core">to define Secret or
Configmap</a>
as a source of <a class="reference internal" href="#helms-hms-environment-variables"><span class="std std-ref">environment variables</span></a>
for the internal PostgreSQL container.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.internal.env</span></code>: YAML sequence of mappings <a class="reference external" href="https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/">to define two keys</a>
environment variables for the internal PostgreSQL container.</p>
<p>For example, Openshift deployments often do not have access to pull from the
default Docker registry <code class="docutils literal notranslate"><span class="pre">library/postgres</span></code>. You can replace it with an image
from the Redhat registry, which requires additional <a class="reference internal" href="#helms-hms-environment-variables"><span class="std std-ref">environment variables</span></a> set with the parameter
<code class="docutils literal notranslate"><span class="pre">database.internal.env</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">internal</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span>
       <span class="nt">repository</span><span class="p">:</span> <span class="s">"registry.redhat.io/rhscl/postgresql-96-rhel7"</span>
       <span class="nt">tag</span><span class="p">:</span> <span class="s">"latest"</span>
    <span class="nt">env</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">POSTGRESQL_DATABASE</span>
        <span class="nt">value</span><span class="p">:</span> <span class="s">"hive"</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">POSTGRESQL_USER</span>
        <span class="nt">value</span><span class="p">:</span> <span class="s">"hive"</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">POSTGRESQL_PASSWORD</span>
        <span class="nt">value</span><span class="p">:</span> <span class="s">"HivePass1234"</span>
</pre></div>
</div>
<p>Another option is to create a Secret (ex. <code class="docutils literal notranslate"><span class="pre">postgresql-secret</span></code>) containing
variables needed by <code class="docutils literal notranslate"><span class="pre">postgresql</span></code> which are mentioned in previous code block,
and pass it to the container with <code class="docutils literal notranslate"><span class="pre">envFrom</span></code> parameter:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">internal</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span>
       <span class="nt">repository</span><span class="p">:</span> <span class="s">"registry.redhat.io/rhscl/postgresql-96-rhel7"</span>
       <span class="nt">tag</span><span class="p">:</span> <span class="s">"latest"</span>
    <span class="nt">envFrom</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">secretRef</span><span class="p">:</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgresql-secret</span>
</pre></div>
</div>
<p>Alternatively you can use an external PostgreSQL or MySQL database, by setting
<code class="docutils literal notranslate"><span class="pre">database.type</span></code> to <code class="docutils literal notranslate"><span class="pre">external</span></code> and configuring the nested properties.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external</span>
  <span class="nt">external</span><span class="p">:</span>
    <span class="nt">jdbcUrl</span><span class="p">:</span>
    <span class="nt">driver</span><span class="p">:</span>
    <span class="nt">user</span><span class="p">:</span>
    <span class="nt">password</span><span class="p">:</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">database.external.jdbcUrl</span></code>: JDBC URL to connect to the external database as
required by the database and used driver, including hostname and port. Ensure
you use a valid JDBC URL as required by the PostgreSQL or MySQL driver.
Typically the syntax requires the host, port and database name
<code class="docutils literal notranslate"><span class="pre">jdbc:postgresql://host:port/database</span></code> or <code class="docutils literal notranslate"><span class="pre">jdbc:mysql://host:port/database</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external.driver</span></code>:  Valid values are <code class="docutils literal notranslate"><span class="pre">com.mysql.jdbc.Driver</span></code> for an
external MySQL or compatible database or <code class="docutils literal notranslate"><span class="pre">org.postgresql.Driver</span></code> for a
PostgreSQL database.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external.user</span></code>: Database user name to access the external database
using JDBC.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external.password</span></code>: Password for the user configured to access the
external database using JDBC.</p>


<span id="helm-hms-startup"></span><h2 id="server-start-up-configuration">Server start up configuration<a class="headerlink" href="#server-start-up-configuration" title="Permalink to this headline">#</a></h2>
<p>You can create a startup shell script to customize how HMS is started,
and pass additional arguments to it.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span>
<span class="nt">extraArguments</span><span class="p">:</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">initFile</span></code></p>
<p>A shell script to run before HMS is launched. The content of the file has to
be an inline string in the YAML file. The original startup command is passed
as the first argument. The script needs to invoke it at the end
as <code class="docutils literal notranslate"><span class="pre">exec</span> <span class="pre">"$@"</span></code>. Use <code class="docutils literal notranslate"><span class="pre">exec</span> <span class="pre">"$1"</span></code> if passing any extra arguments.</p>
<p><code class="docutils literal notranslate"><span class="pre">extraArguments</span></code></p>
<p>List of extra arguments to pass to the <code class="docutils literal notranslate"><span class="pre">initFile</span></code> script.</p>
<p>The following example shows how you can use <code class="docutils literal notranslate"><span class="pre">initFile</span></code> to run a custom start
up script:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">#!/bin/bash</span>
  <span class="no">echo "Custom init for $2"</span>
  <span class="no">exec "$1"</span>
<span class="nt">extraArguments</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TEST_ARG</span>
</pre></div>
</div>


<span id="helm-hms-volumes"></span><h2 id="additional-volumes">Additional volumes<a class="headerlink" href="#additional-volumes" title="Permalink to this headline">#</a></h2>
<p>Additional volumes can be necessary for persisting files. These can be defined
in the <code class="docutils literal notranslate"><span class="pre">additionalVolumes</span></code> section. None are defined by default:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">additionalVolumes</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>
<p>You can add one or more <a class="reference external" href="https://kubernetes.io/docs/concepts/storage/volumes/#types-of-volumes">volumes supported by k8s</a>, to
all nodes in the cluster.</p>
<p>If you specify <code class="docutils literal notranslate"><span class="pre">path</span></code> only, a directory named in <code class="docutils literal notranslate"><span class="pre">path</span></code> is created. When
mounting ConfigMap or Secret, files are created in this directory for each key.</p>
<p>This also supports an optional <code class="docutils literal notranslate"><span class="pre">subPath</span></code> parameter which takes in an optional
key in the ConfigMap or Secret volume you create. If you specify <code class="docutils literal notranslate"><span class="pre">subPath</span></code>, a
specific key named <code class="docutils literal notranslate"><span class="pre">subPath</span></code> from ConfigMap or Secret is mounted as a file
with the  name provided by <code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">additionalVolumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/mnt/InContainer</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/hive/conf/test_config.txt</span>
    <span class="nt">subPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test_config.txt</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">configMap</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="s">"configmap-in-volume"</span>
</pre></div>
</div>


<span id="helm-hms-storage"></span><h2 id="storage">Storage<a class="headerlink" href="#storage" title="Permalink to this headline">#</a></h2>
<p>The chart allows you to configure the credentials to access the HDFS or object
storage. The credentials enable the HMS to access to storage for metadata
information including statistics gathering.</p>
<p>In addition you have to <a class="reference internal" href="sep-configuration.html#helm-sep-catalogs"><span class="std std-ref">configure the catalog</span></a> with
sufficient, corresponding credentials.</p>
<p>The default configuration includes no credentials:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">hdfs</span><span class="p">:</span>
  <span class="nt">hadoopUserName</span><span class="p">:</span>
<span class="nt">objectStorage</span><span class="p">:</span>
  <span class="nt">awsS3</span><span class="p">:</span>
    <span class="nt">region</span><span class="p">:</span>
    <span class="nt">endpoint</span><span class="p">:</span>
    <span class="nt">accessKey</span><span class="p">:</span>
    <span class="nt">secretKey</span><span class="p">:</span>
    <span class="nt">pathStyleAccess</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">gs</span><span class="p">:</span>
    <span class="nt">cloudKeyFileSecret</span><span class="p">:</span>
  <span class="nt">azure</span><span class="p">:</span>
    <span class="nt">abfs</span><span class="p">:</span>
      <span class="nt">authType</span><span class="p">:</span> <span class="s">"accessKey"</span>
      <span class="nt">accessKey</span><span class="p">:</span>
        <span class="nt">storageAccount</span><span class="p">:</span>
        <span class="nt">accessKey</span><span class="p">:</span>
      <span class="nt">oauth</span><span class="p">:</span>
        <span class="nt">clientId</span><span class="p">:</span>
        <span class="nt">secret</span><span class="p">:</span>
        <span class="nt">endpoint</span><span class="p">:</span>
    <span class="nt">wasb</span><span class="p">:</span>
      <span class="nt">storageAccount</span><span class="p">:</span>
      <span class="nt">accessKey</span><span class="p">:</span>
  <span class="nt">adl</span><span class="p">:</span>
    <span class="nt">oauth2</span><span class="p">:</span>
      <span class="nt">clientId</span><span class="p">:</span>
      <span class="nt">credential</span><span class="p">:</span>
      <span class="nt">refreshUrl</span><span class="p">:</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">hdfs.hadoopUserName</span></code>: User name for Hadoop HDFS access</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.*</span></code>: Configuration for AWS S3 access</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.region</span></code>: AWS region name</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.endpoint</span></code>: AWS S3 endpoint</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.accessKey</span></code>: Name of the access key for AWS S3</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.secretKey</span></code>: Name of the secret key for AWS S3</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.pathStyleAccess</span></code>:</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.gs.*</span></code>: Configuration for Google Storage access</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.gs.cloudKeyFileSecret</span></code>: Name of the secret with the file containing
the access key to the cloud storage. The key of the secret must be named <code class="docutils literal notranslate"><span class="pre">key.json</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.*</span></code>: Configuration for Microsoft Azure storage systems</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.*</span></code>: Configuration for Azure Blob Filesystem (ABFS)</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.authType</span></code>: Authentication to access ABFS, Valid
values are``accessKey`` or <code class="docutils literal notranslate"><span class="pre">oauth</span></code>, configuration in the following properties.</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.accessKey.*</span></code>: Configuration for access key
authentication to ABFS</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.accessKey.storageAccount</span></code>: Name of the ABFS account to access</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.accessKey.accessKey</span></code>: Actual access key to use for
ABFS  access</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.oauth.*</span></code>: Configuration for OAuth authentication to
ABFS</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.oauth.clientId</span></code>: Client identifier for OAuth
authentication.</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.oauth.secret</span></code>: Secret for OAuth.</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.oauth.endpoint</span></code>: Endpoint URL for OAuth.</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.wasb.*</span></code>: Configuration for Windows Azure Storage Blob
(WASB)</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.wasb.storageAccount</span></code>: Name of the storage account to use
for WASB.</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.wasb.accessKey</span></code>: Key to access WASB.</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl</span></code>: Configuration for Azure Data Lake (ADL)</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl.oauth2.*</span></code>: Configuration for OAuth authentication to
ADL</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl.oauth2.clientId</span></code>: Client identifier for OAuth access
to ADL</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl.oauth2.credential</span></code>: Credential for OAuth access to
ADL</p>
<p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl.oauth2.refreshUrl</span></code>: Refresh URL for the OAuth access
to ADL.</p>


<span id="helm-hms-server"></span><h2 id="server-configuration">Server configuration<a class="headerlink" href="#server-configuration" title="Permalink to this headline">#</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">heapSizePercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">85</span>

<span class="nt">resources</span><span class="p">:</span>
  <span class="nt">requests</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="nt">limits</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>


<h2 id="node-assignment">Node assignment<a class="headerlink" href="#node-assignment" title="Permalink to this headline">#</a></h2>
<p>You can add configuration to <a class="reference internal" href="installation.html#helm-node-assignment"><span class="std std-ref">determine the node and pod to use</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">nodeSelector</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">tolerations</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">affinity</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<h2 id="annotations">Annotations<a class="headerlink" href="#annotations" title="Permalink to this headline">#</a></h2>
<p>You can add configuration to annotate the deployment and pod:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">deploymentAnnotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">podAnnotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<span id="helms-hms-environment-variables"></span><h2 id="environment-variables">Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">#</a></h2>
<p>You can pass environment variables to the HMS container using the same mechanism
used for the internal database:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">envFrom</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">env</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>
<p>Both are specified as a mapping sequences for example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">envFrom</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">secretRef</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-secret-with-vars</span>
<span class="nt">env</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MY_VARIABLE</span>
    <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">some-value</span>
</pre></div>
</div>




          </article>
        </div>
      </div>
    </main>
  </div>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="sep-configuration.html" title="SEP configuration"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> SEP configuration </span>
              </div>
            </a>
          
          
            <a href="ranger-configuration.html" title="Ranger configuration"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Ranger configuration </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>

<!-- custom footer should go here in time -->

<div style="background: #000A2C; align-content: center; height: 5em;">

</div>
  </body>
</html>