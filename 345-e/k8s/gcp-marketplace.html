

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>GCP Marketplace &#8212; Starburst Enterprise Presto</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/presto.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Microsoft Azure Kubernetes Service" href="aks.html" />
    <link rel="prev" title="Google Kubernetes Engine" href="gke.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#k8s/gcp-marketplace" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Starburst Enterprise Presto"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise Presto logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise Presto</span>
          <span class="md-header-nav__topic"> GCP Marketplace </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (350-e)" href="/350-e/">Latest LTS (350-e)</a>
      
          <a title="345-e LTS" href="/345-e/">345-e LTS</a>
      
          <a title="338-e LTS" href="/338-e/">338-e LTS</a>
      
          <a title="Latest STS (355-e)" href="/355-e/">Latest STS (355-e)</a>
      
          <a title="354-e STS" href="/354-e/">354-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../k8s.html" class="md-tabs__link">Kubernetes with Helm</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise Presto" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise Presto">Starburst Enterprise Presto</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../mission-control.html" class="md-nav__link">Mission Control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Amazon Web Services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Kubernetes with Helm</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="requirements.html" class="md-nav__link">Requirements</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sep-configuration.html" class="md-nav__link">SEP configuration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hms-configuration.html" class="md-nav__link">Hive metastore configuration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ranger-configuration.html" class="md-nav__link">Ranger configuration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="operation.html" class="md-nav__link">Operation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="release-notes.html" class="md-nav__link">Helm chart release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="eks.html" class="md-nav__link">Amazon Elastic Kubernetes Service</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="gke.html" class="md-nav__link">Google Kubernetes Engine</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> GCP Marketplace </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">GCP Marketplace</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-gcp-marketplace--page-root" class="md-nav__link">GCP Marketplace</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#introduction" class="md-nav__link">Introduction</a>
        </li>
        <li class="md-nav__item"><a href="#getting-started" class="md-nav__link">Getting started</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#cluster-requirements" class="md-nav__link">Cluster requirements</a>
        </li>
        <li class="md-nav__item"><a href="#deployment" class="md-nav__link">Deployment</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#upgrade-sep" class="md-nav__link">Upgrade SEP</a>
        </li>
        <li class="md-nav__item"><a href="#enable-global-access-control-with-apache-ranger" class="md-nav__link">Enable global access control with Apache Ranger</a>
        </li>
        <li class="md-nav__item"><a href="#enable-the-hive-metastore-service" class="md-nav__link">Enable the Hive Metastore Service</a>
        </li>
        <li class="md-nav__item"><a href="#delete-the-deployment" class="md-nav__link">Delete the deployment</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="aks.html" class="md-nav__link">Microsoft Azure Kubernetes Service</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="openshift.html" class="md-nav__link">Red Hat OpenShift</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../migration.html" class="md-nav__link">Migration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">345-e.10 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">-</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-gcp-marketplace--page-root" class="md-nav__link">GCP Marketplace</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#introduction" class="md-nav__link">Introduction</a>
        </li>
        <li class="md-nav__item"><a href="#getting-started" class="md-nav__link">Getting started</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#cluster-requirements" class="md-nav__link">Cluster requirements</a>
        </li>
        <li class="md-nav__item"><a href="#deployment" class="md-nav__link">Deployment</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#upgrade-sep" class="md-nav__link">Upgrade SEP</a>
        </li>
        <li class="md-nav__item"><a href="#enable-global-access-control-with-apache-ranger" class="md-nav__link">Enable global access control with Apache Ranger</a>
        </li>
        <li class="md-nav__item"><a href="#enable-the-hive-metastore-service" class="md-nav__link">Enable the Hive Metastore Service</a>
        </li>
        <li class="md-nav__item"><a href="#delete-the-deployment" class="md-nav__link">Delete the deployment</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="k8s-gcp-marketplace--page-root">GCP Marketplace<a class="headerlink" href="#k8s-gcp-marketplace--page-root" title="Permalink to this headline">#</a></h1>
<p>Starburst Enterprise PrestoÂ® (SEP) is available on the Google Cloud Platform Marketplace. It offers a
simple and convenient way to get started with SEP running on Kubernetes.</p>
<p>The marketplace offering uses the <a class="reference internal" href="../k8s.html"><span class="doc">Kubernetes Helm charts</span></a> and is
listed on the <a class="reference external" href="https://console.cloud.google.com/marketplace/details/starburst-public/starburst-presto?">marketplace as starburst-presto</a>.</p>
<p>Further applicable information can be found in the <a class="reference internal" href="gke.html"><span class="doc">documentation for SEP
on the Google Kubernetes Engine</span></a>.</p>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h2>
<p>This user guide provides information on using the charts to deploy SEP and a
and eventually a cluster on the GCP Marketplace - Kubernetes Applications.</p>
<p>We recommend you to use the GCP Marketplace UI with <strong>Click to Deploy on GKE</strong>
to deploy. The command line <strong>Deploy via command line</strong> installation is not
supported.</p>


<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h2>
<p>Setting up and deploying SEP to a Google Kubernetes Engine (GKE) cluster using
Google Cloud Marketplace is pretty straightforward.</p>
<p>You can get started by simply following the UI instructions in the
<a class="reference external" href="https://console.cloud.google.com/marketplace/details/starburst-public/starburst-presto?">marketplace</a>.</p>

<h3 id="cluster-requirements">Cluster requirements<a class="headerlink" href="#cluster-requirements" title="Permalink to this headline">#</a></h3>
<p>You can either use an existing GKE cluster or create a new one. If using an
existing cluster make sure you have the GKE cluster configured with the
appropriate number and type of instances you may need to deploy a SEP
cluster. With insufficient resources available in the cluster, the deployed pods
may fail to be scheduled. Ensure you are aware of the <a class="reference internal" href="requirements.html"><span class="doc">requirements</span></a> for any additional prerequisites for your GKE cluster.</p>
<p>You can also choose to deploy a new cluster with minimal resources and default
configuration from the Marketplace offering configuration page. After the
default SEP chart deploys successfully in this cluster, you have to review the
cluster configuration before updating it to adjust configuration to the actual
desired needs. You need to ensure that the cluster is sufficiently large.</p>


<h3 id="deployment">Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline">#</a></h3>
<p>The default values of the configuration in the <a class="reference external" href="https://console.cloud.google.com/marketplace/details/starburst-public/starburst-presto?">UI</a>
work for most of the cases.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you are enabling <strong>Global Security</strong> using Ranger, as described in
<a class="reference internal" href="../security/global-ranger.html"><span class="doc">Global access control with Apache Ranger</span></a> make sure you note down the values of the
admin and service user passwords you provide in the UI for later use.</p>
</div>
<p>Once done, you can click on <strong>Deploy</strong> to install SEP in the cluster.
You can track the progress of the deployment in the <a class="reference external" href="https://console.cloud.google.com/kubernetes/application">applications page</a>.</p>
<p>Once the application is successfully deployed, SEP is deployed using the Helm
charts. If you enable <a class="reference internal" href="ranger-configuration.html"><span class="doc">Ranger</span></a> and/or
<a class="reference internal" href="hms-configuration.html"><span class="doc">Hive Metastore Service</span></a> these are also  deployed.
The deployment uses the values you provide in the UI and some default values
when deployed the first time. If you want to upgrade or change the deployment
configuration you can either use the <strong>Application info</strong> from the <a class="reference external" href="https://console.cloud.google.com/kubernetes/application">application
page</a> or the
<a class="reference internal" href="#upgrade-gcp-mp-presto"><span class="std std-ref">SEP deployment</span></a> documentation.</p>



<span id="upgrade-gcp-mp-presto"></span><h2 id="upgrade-sep">Upgrade SEP<a class="headerlink" href="#upgrade-sep" title="Permalink to this headline">#</a></h2>
<p>You can upgrade SEP using the <a class="reference external" href="https://cloud.google.com/kubernetes-engine/docs/quickstart#choosing_a_shell">cloud shell</a>
or local shell with <code class="docutils literal notranslate"><span class="pre">helm</span></code> and <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> configured to your GKE cluster.</p>
<p>You need to download the Helm charts and extract them to modify the
deployment.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TAG</span><span class="o">=</span><span class="m">2</span>.0.1
<span class="nb">export</span> <span class="nv">APP_INSTANCE_NAME</span><span class="o">=</span>&lt;name of the application instance&gt;
wget https://console.cloud.google.com/storage/browser/starburst-enterprise-presto/helmCharts/presto-gcp/starburst-enterprise-presto-charts-<span class="nv">$TAG</span>.tgz<span class="p">;</span>
tar -zxvf starburst-enterprise-presto-charts-<span class="nv">$TAG</span>.tgz<span class="p">;</span>
</pre></div>
</div>
<p>Now update the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> in the umbrella chart folder
(<code class="docutils literal notranslate"><span class="pre">starburst-enterprise-presto-charts-$TAG</span></code>) before you apply the manifest
file. Alternatively, you can use <code class="docutils literal notranslate"><span class="pre">--set</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">template</span></code>
command to update the chart configuration. The values set in <code class="docutils literal notranslate"><span class="pre">--set</span></code> takes
precedence over the ones set in <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code>.</p>
<p>Once you have the manifest created, apply (<code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">apply</span></code>) the file to update
the deployment.</p>
<p>More details about the SEP configuration are <a class="reference internal" href="sep-configuration.html"><span class="doc">reference documentation</span></a>.</p>
<p>Make sure you have <code class="docutils literal notranslate"><span class="pre">usageMetrics</span></code> enabled in your SEP configuration. Our GCP
offering relies on the metrics and if disabled, the deployment is terminated
after 36 hours.</p>
<p>The minimum set of parameters required for the upgrade are shown below:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm template starburst-enterprise-presto-charts-<span class="nv">$TAG</span>/ <span class="se">\</span>
  --name-template<span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">"</span> <span class="se">\</span>
  --set deployerHelm.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/deployer:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">reportingSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">-reporting-secret"</span> <span class="se">\</span>
  --set image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto"</span> <span class="se">\</span>
  --set image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set initImage.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/presto-init"</span> <span class="se">\</span>
  --set initImage.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set metricsReporter.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/metrics_reporter:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">imageUbbagent</span><span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace-tools/metering/ubbagent:latest"</span> <span class="se">\</span>
  --set <span class="o">[</span>PUT OTHER CHART PARAMETERS YOU WANT TO UPDATE<span class="o">]</span> &gt; presto_manifest.yaml
</pre></div>
</div>
<p>The following example shows how to update the number of Presto workers:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm template starburst-enterprise-presto-charts-<span class="nv">$TAG</span>/ <span class="se">\</span>
  --name-template<span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">"</span> <span class="se">\</span>
  --set deployerHelm.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/deployer:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">reportingSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">-reporting-secret"</span> <span class="se">\</span>
  --set image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto"</span> <span class="se">\</span>
  --set image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set initImage.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/presto-init"</span> <span class="se">\</span>
  --set initImage.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set metricsReporter.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/metrics_reporter:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">imageUbbagent</span><span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace-tools/metering/ubbagent:latest"</span> <span class="se">\</span>
  --set worker.count &gt; presto_manifest.yaml
</pre></div>
</div>
<p>Configure <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to point at your cluster and then apply the configuration:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl apply -f presto_manifest.yaml
</pre></div>
</div>


<h2 id="enable-global-access-control-with-apache-ranger">Enable global access control with Apache Ranger<a class="headerlink" href="#enable-global-access-control-with-apache-ranger" title="Permalink to this headline">#</a></h2>
<p>You can deploy or upgrade Ranger <a class="reference internal" href="../security/global-ranger.html"><span class="doc">Global access control with Apache Ranger</span></a> for global
security by creating manifest file with Ranger parameters set.</p>
<p>You can either update the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> in the umbrella chart folder
<code class="docutils literal notranslate"><span class="pre">starburst-enterprise-presto-charts-$TAG</span></code> for the configuration
(<code class="docutils literal notranslate"><span class="pre">starburst-ranger</span></code>) prior to generating the manifest file or or use <code class="docutils literal notranslate"><span class="pre">--set</span></code>
parameter while creating the manifest file. The <code class="docutils literal notranslate"><span class="pre">--set</span></code> parameters must be
prefixed by <code class="docutils literal notranslate"><span class="pre">starburst-ranger</span></code>.</p>
<p>The complete reference of the chart configuration can be found in the
<a class="reference internal" href="ranger-configuration.html"><span class="doc">Ranger chart documentation</span></a>.</p>
<p>Example with Ranger enabled:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm template starburst-enterprise-presto-charts-<span class="nv">$TAG</span>/ <span class="se">\</span>
  --name-template<span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">"</span> <span class="se">\</span>
  --set deployerHelm.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/deployer:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">reportingSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">-reporting-secret"</span> <span class="se">\</span>
  --set image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto"</span> <span class="se">\</span>
  --set image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set initImage.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/presto-init"</span> <span class="se">\</span>
  --set initImage.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set metricsReporter.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/metrics_reporter:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">imageUbbagent</span><span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace-tools/metering/ubbagent:latest"</span> <span class="se">\</span>
  --set starburst-ranger.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
  --set <span class="o">[</span>PUT OTHER CHART PARAMETERS YOU WANT TO UPDATE<span class="o">]</span> &gt; presto_manifest.yaml
</pre></div>
</div>


<h2 id="enable-the-hive-metastore-service">Enable the Hive Metastore Service<a class="headerlink" href="#enable-the-hive-metastore-service" title="Permalink to this headline">#</a></h2>
<p>Similar to Ranger, to deploy or upgrade the Hive Metastore Service (HMS)
provided by Starburst, generate a manifest file with Hive chart parameters set.
You can either use <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> (for <code class="docutils literal notranslate"><span class="pre">starburst-hive</span></code>) or use the <code class="docutils literal notranslate"><span class="pre">--set</span></code>
parameters. For Hive charts, the <code class="docutils literal notranslate"><span class="pre">--set</span></code> parameters must be prefixed by
<code class="docutils literal notranslate"><span class="pre">starburst-hive</span></code>.</p>
<p>The complete reference of the chart configuration for the metastore can be found
in the <a class="reference internal" href="hms-configuration.html"><span class="doc">HMS documentation</span></a>.</p>
<p>Example with HMS enabled:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm template starburst-enterprise-presto-charts-<span class="nv">$TAG</span>/ <span class="se">\</span>
    --name-template<span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">"</span> <span class="se">\</span>
    --set deployerHelm.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/deployer:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
    --set <span class="nv">reportingSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">-reporting-secret"</span> <span class="se">\</span>
    --set image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto"</span> <span class="se">\</span>
    --set image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
    --set initImage.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/presto-init"</span> <span class="se">\</span>
    --set initImage.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
    --set metricsReporter.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/metrics_reporter:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
    --set <span class="nv">imageUbbagent</span><span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace-tools/metering/ubbagent:latest"</span> <span class="se">\</span>
    --set starburst-hive.image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/hive"</span> <span class="se">\</span>
    --set starburst-hive.image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
    --set starburst-hive.enabled<span class="o">=</span><span class="nb">true</span> &gt; presto_manifest.yaml
</pre></div>
</div>
<p>Configure <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to point at your cluster and then apply the configuration:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl apply -f presto_manifest.yaml
</pre></div>
</div>


<h2 id="delete-the-deployment">Delete the deployment<a class="headerlink" href="#delete-the-deployment" title="Permalink to this headline">#</a></h2>
<p>To delete the deployment:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl delete -f presto_manifest.yaml
</pre></div>
</div>




          </article>
        </div>
      </div>
    </main>
  </div>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="gke.html" title="Google Kubernetes Engine"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Google Kubernetes Engine </span>
              </div>
            </a>
          
          
            <a href="aks.html" title="Microsoft Azure Kubernetes Service"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Microsoft Azure Kubernetes Service </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>

<!-- custom footer should go here in time -->

<div style="background: #000A2C; align-content: center; height: 5em;">

</div>
  </body>
</html>