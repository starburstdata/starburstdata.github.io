

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>PEM, keystore, and truststore files &#8212; Starburst Enterprise Presto</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Password File Authentication" href="password-file.html" />
    <link rel="prev" title="HTTPS and TLS" href="https.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/tls" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Starburst Enterprise Presto"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise Presto logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise Presto</span>
          <span class="md-header-nav__topic"> PEM, keystore, and truststore files </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (360-e)" href="/360-e/">Latest LTS (360-e)</a>
      
          <a title="356-e LTS" href="/356-e/">356-e LTS</a>
      
          <a title="350-e LTS" href="/350-e/">350-e LTS</a>
      
          <a title="345-e LTS" href="/345-e/">345-e LTS</a>
      
          <a title="Latest STS (361-e)" href="/361-e/">Latest STS (361-e)</a>
      
          <a title="359-e STS" href="/359-e/">359-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise Presto" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise Presto">Starburst Enterprise Presto</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../mission-control.html" class="md-nav__link">Mission Control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Amazon Web Services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Kubernetes with Helm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="security-overview.html" class="md-nav__link">Security overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="https.html" class="md-nav__link">HTTPS and TLS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> PEM, keystore, and truststore files </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">PEM, keystore, and truststore files</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-tls--page-root" class="md-nav__link">PEM, keystore, and truststore files</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#pem-certificate" class="md-nav__link">PEM certificate</a>
        </li>
        <li class="md-nav__item"><a href="#java-keystore" class="md-nav__link">Java keystore</a>
        </li>
        <li class="md-nav__item"><a href="#java-truststore-files" class="md-nav__link">Java truststore files</a>
        </li>
        <li class="md-nav__item"><a href="#limitations-of-self-signed-certificates" class="md-nav__link">Limitations of self-signed certificates</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#generate-self-signed-pem" class="md-nav__link">Generate self-signed PEM</a>
        </li>
        <li class="md-nav__item"><a href="#generate-self-signed-jks-keystore" class="md-nav__link">Generate self-signed JKS keystore</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="password-file.html" class="md-nav__link">Password file authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ldap.html" class="md-nav__link">LDAP authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="salesforce.html" class="md-nav__link">Salesforce authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="okta-authentication.html" class="md-nav__link">Okta authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="server.html" class="md-nav__link">Kerberos authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cli.html" class="md-nav__link">Kerberos authentication with CLI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="user-mapping.html" class="md-nav__link">User mapping</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="group-file.html" class="md-nav__link">File-based group provider</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ldap-group-provider.html" class="md-nav__link">LDAP group provider</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="access-control.html" class="md-nav__link">Access control overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="built-in-system-access-control.html" class="md-nav__link">Built-in system access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="file-system-access-control.html" class="md-nav__link">File-based system access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="impersonation.html" class="md-nav__link">User impersonation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="password-passthrough.html" class="md-nav__link">Password credential passthrough</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kerberos-passthrough.html" class="md-nav__link">Kerberos credential passthrough</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ranger-overview.html" class="md-nav__link">Apache Ranger overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="global-ranger.html" class="md-nav__link">Global access control with Apache Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-ranger.html" class="md-nav__link">Hive access control with Apache Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="global-privacera.html" class="md-nav__link">Global access control with Privacera Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-privacera.html" class="md-nav__link">Hive access control with Privacera Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-sentry.html" class="md-nav__link">Hive access control with Apache Sentry</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internal-communication.html" class="md-nav__link">Secure internal communication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="secrets.html" class="md-nav__link">Secrets management</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="audit.html" class="md-nav__link">Query audit</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="event-logger.html" class="md-nav__link">Event logger</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../migration.html" class="md-nav__link">Migration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">345-e.14 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">-</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-tls--page-root" class="md-nav__link">PEM, keystore, and truststore files</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#pem-certificate" class="md-nav__link">PEM certificate</a>
        </li>
        <li class="md-nav__item"><a href="#java-keystore" class="md-nav__link">Java keystore</a>
        </li>
        <li class="md-nav__item"><a href="#java-truststore-files" class="md-nav__link">Java truststore files</a>
        </li>
        <li class="md-nav__item"><a href="#limitations-of-self-signed-certificates" class="md-nav__link">Limitations of self-signed certificates</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#generate-self-signed-pem" class="md-nav__link">Generate self-signed PEM</a>
        </li>
        <li class="md-nav__item"><a href="#generate-self-signed-jks-keystore" class="md-nav__link">Generate self-signed JKS keystore</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="security-tls--page-root">PEM, keystore, and truststore files<a class="headerlink" href="#security-tls--page-root" title="Permalink to this headline">#</a></h1>
<p>This guide describes the <a class="reference internal" href="#pem-certs"><span class="std std-ref">PEM</span></a> and <a class="reference internal" href="#server-java-keystore"><span class="std std-ref">JKS</span></a> certificate formats accepted by Presto for client access
and for communication within the cluster.</p>

<span id="pem-certs"></span><h2 id="pem-certificate">PEM certificate<a class="headerlink" href="#pem-certificate" title="Permalink to this headline">#</a></h2>
<p>PEM is a container format used to hold <a class="reference external" href="https://en.wikipedia.org/wiki/X.509">X.509 certificate information</a>. Presto has direct support for <a class="reference external" href="https://en.wikipedia.org/wiki/PKCS_8">PKCS #8</a> and <a class="reference external" href="https://en.wikipedia.org/wiki/PKCS_1">PKCS #1</a> formats in PEM containers.</p>
<p>A single PEM file can contain both certificate and private key information.
Because the certificate portion derives from a recognized Certificate Authority
(CA), it does not need a separate trust store.</p>
<p>If you receive a PEM certificate from your network group or a vendor
<a class="reference internal" href="https.html#inspect-pems"><span class="std std-ref">inspect</span></a> and <a class="reference internal" href="https.html#validate-pems"><span class="std std-ref">validate the PEM file</span></a> to
ensure its readiness to work with Presto. Then <a class="reference internal" href="https.html#cert-placement"><span class="std std-ref">place the file</span></a> and <a class="reference internal" href="https.html#configure-https"><span class="std std-ref">configure Presto</span></a> to accept client
connections using HTTPS.</p>
<p>You can generate your own self-signed PEM to send to a Certificate Authority for
signing, as described in <a class="reference internal" href="#pem-selfsigned"><span class="std std-ref">Generate self-signed PEM</span></a>.</p>


<span id="server-java-keystore"></span><h2 id="java-keystore">Java keystore<a class="headerlink" href="#java-keystore" title="Permalink to this headline">#</a></h2>
<p>The Presto server recognizes <a class="reference internal" href="#pem-certs"><span class="std std-ref">PEM</span></a> and JKS certificates for
configuring access to the Presto server using HTTPS.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="#pem-certs"><span class="std std-ref">PEM certificate</span></a> above for information on the preferred certificate
format.</p>
</div>
<p>The Java KeyStore (JKS) system is provided as part of your Java installation.
Private keys for your server are stored in a JKS keystore file. The keystore
file is always password-protected.</p>
<p>To be recognized as valid by the <a class="reference internal" href="../installation/cli.html"><span class="doc">Presto CLI</span></a> and
modern browsers, the JKS key must be signed by a trusted Certificate Authority
(CA). For JKS keys, this means either that the signing authority for a key must
be listed in the current machine’s <a class="reference internal" href="#cli-java-truststore"><span class="std std-ref">Java truststore files</span></a>, or that the
certificate received from a CA is chained all the way back to a recognized CA.</p>
<p>If you receive a JKS keystore file from your network group or from a vendor,
<a class="reference internal" href="https.html#troubleshooting-keystore"><span class="std std-ref">inspect the keystore’s readiness</span></a> to work with
Presto. Then <a class="reference internal" href="https.html#cert-placement"><span class="std std-ref">place the file</span></a> and <a class="reference internal" href="https.html#configure-https"><span class="std std-ref">configure Presto</span></a> to accept client connections using HTTPS.</p>
<p>You can generate your own self-signed keystore to send to a Certificate
Authority for signing, as described in <a class="reference internal" href="#jks-selfsigned"><span class="std std-ref">Generate self-signed JKS keystore</span></a>.</p>


<span id="cli-java-truststore"></span><h2 id="java-truststore-files">Java truststore files<a class="headerlink" href="#java-truststore-files" title="Permalink to this headline">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>JKS truststore files are not used if your server certificate is in
<a class="reference internal" href="#pem-certs"><span class="std std-ref">PEM certificate</span></a> format.</p>
</div>
<p>The JKS truststore file is a list of Certificate Authorities trusted by Java to
validate private keys. The truststore file is provided as part of your Java
installation.</p>
<p>Truststore files contain certificates of trusted TLS/SSL servers, or of
Certificate Authorities trusted to identify servers. For securing access to the
Presto coordinator through HTTPS, the clients can configure truststores. For the
Presto CLI to trust the Presto coordinator, the coordinator’s certificate must
be imported to the CLI’s truststore.</p>
<p>You can either import the certificate to a custom truststore, or to the system
default truststore. However, the default truststore is likely to be overwritten
by the next Java version update, so a custom truststore is recommended.</p>
<p>Use <strong class="command">keytool</strong> to import the certificate to the truststore. For one
example below, we import <code class="docutils literal notranslate"><span class="pre">presto_certificate.cer</span></code> to a custom truststore
<code class="docutils literal notranslate"><span class="pre">presto_trust.jks</span></code>; you are prompted for whether or not the certificate can be
trusted. Study the man page for <code class="docutils literal notranslate"><span class="pre">keytool</span></code> for alternative commands.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ keytool -import -v -trustcacerts -alias presto_trust -file presto_certificate.cer -keystore presto_trust.jks -keypass &lt;truststore_pass&gt;
</pre></div>
</div>


<h2 id="limitations-of-self-signed-certificates">Limitations of self-signed certificates<a class="headerlink" href="#limitations-of-self-signed-certificates" title="Permalink to this headline">#</a></h2>
<p>You can generate a self-signed certificate with either the <code class="docutils literal notranslate"><span class="pre">openssl</span></code> or
<code class="docutils literal notranslate"><span class="pre">keytool</span></code> commands. These are meant to be forwarded to a CA, which return a
certificate to add to the key.</p>
<p>You cannot use a self-signed key without certification. Modern browsers detect
servers running with such keys and either put up connection roadblocks or refuse
outright to open such sites. Likewise, the Presto CLI detects a Presto server
running with a self-signed cert and either warns against connecting or blocks
the connection entirely.</p>
<p>In order for a CA to validate your Signing Request, you must generate the key
for use on a specific server that has a external DNS address that can be
verified by the CA. This requirement prevents signed certs that are valid one
one site from being copied and re-used on another site. Modern browsers detect
cases of valid certs used on the wrong server, and block attempts to connect to
them.</p>

<span id="pem-selfsigned"></span><h3 id="generate-self-signed-pem">Generate self-signed PEM<a class="headerlink" href="#generate-self-signed-pem" title="Permalink to this headline">#</a></h3>
<p>Generate a self-signed PEM cert with the <code class="docutils literal notranslate"><span class="pre">openssl</span></code> command with commands like
the following. This is one possible set of commands; consult <code class="docutils literal notranslate"><span class="pre">openssl</span></code>
documentation for other options.</p>
<p>Generate your private key and public certificate. This command is following by a
questionnaire that prompts for the components of your server’s Common Name.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>openssl req -newkey rsa:2048 -nodes -keyout key.pem -x509 -days 365 -out cert.pem
</pre></div>
</div>
<p>Review the generated certificate:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>openssl x509 -text -noout -in cert.pem
</pre></div>
</div>
<p>Combine your key and certificate into a PKCS#12 (P12) bundle:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>openssl pkcs12 -inkey key.pem -in cert.pem -export -out cert.p12
</pre></div>
</div>
<p>Validate your P12 file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>openssl pkcs12 -in cert.p12 -noout -info
</pre></div>
</div>


<span id="jks-selfsigned"></span><h3 id="generate-self-signed-jks-keystore">Generate self-signed JKS keystore<a class="headerlink" href="#generate-self-signed-jks-keystore" title="Permalink to this headline">#</a></h3>
<p>Generate a self-signed JKS keystore with the <code class="docutils literal notranslate"><span class="pre">keytool</span></code> command using a command
like the following. This is one possible command; consult <code class="docutils literal notranslate"><span class="pre">keytool</span></code>
documentation for other options.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>keytool -genkeypair -alias presto -keyalg RSA -keystore keystore.jks -validity 360 -keysize 2048
</pre></div>
</div>
<p>This command prompts you for a password to assign to the new keystore:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Enter keystore password:
Re-enter new password:
</pre></div>
</div>
<p>Following next is a questionnaire that lets <code class="docutils literal notranslate"><span class="pre">keytool</span></code> construct the Common
Name for your server. For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>What is your first and last name?
What is the name of your organizational unit?
What is the name of your organization?
What is the name of your City or Locality?
What is the name of your State or Province?
What is the two-letter country code for this unit?
Is CN= ... correct?
  [no]:  yes
</pre></div>
</div>
<p>Finally, the command prompts for a password to assign to the generated key,
independent of the keystore’s password assigned above. <strong>To avoid complications,
press RETURN to use the same password for both.</strong></p>
<blockquote>
<div><dl class="simple">
<dt>Enter key password for &lt;presto&gt;</dt><dd><p>(RETURN if same as keystore password):</p>
</dd>
</dl>
</div></blockquote>
<p>Verify the newly created keystore:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>keytool -list -v -keystore keystore.jks
</pre></div>
</div>
<p>Next, generate a Certificate Signing Request to send to a Certificate Authority:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>keytool -keystore keystore.jks -certreq -alias presto -keyalg rsa -file prestoserver.csr
</pre></div>
</div>





          </article>
        </div>
      </div>
    </main>
  </div>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="https.html" title="HTTPS and TLS"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> HTTPS and TLS </span>
              </div>
            </a>
          
          
            <a href="password-file.html" title="Password File Authentication"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Password File Authentication </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>

<!-- custom footer should go here in time -->

<div style="background: #000A2C; align-content: center; height: 5em;">

</div>
  </body>
</html>