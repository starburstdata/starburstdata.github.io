

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Apache Ranger overview &#8212; Starburst Enterprise Presto</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/presto.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Global access control with Apache Ranger" href="global-ranger.html" />
    <link rel="prev" title="Kerberos credential passthrough" href="kerberos-passthrough.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/ranger-overview" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Starburst Enterprise Presto"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise Presto logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise Presto</span>
          <span class="md-header-nav__topic"> Apache Ranger overview </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (350-e)" href="/350-e/">Latest LTS (350-e)</a>
      
          <a title="345-e LTS" href="/345-e/">345-e LTS</a>
      
          <a title="338-e LTS" href="/338-e/">338-e LTS</a>
      
          <a title="Latest STS (354-e)" href="/354-e/">Latest STS (354-e)</a>
      
          <a title="348-e STS" href="/348-e/">348-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise Presto" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise Presto">Starburst Enterprise Presto</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../mission-control.html" class="md-nav__link">Mission Control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Amazon Web Services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Kubernetes with Helm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="security-overview.html" class="md-nav__link">Security overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="https.html" class="md-nav__link">HTTPS and TLS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tls.html" class="md-nav__link">PEM, keystore, and truststore files</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="password-file.html" class="md-nav__link">Password file authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ldap.html" class="md-nav__link">LDAP authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="salesforce.html" class="md-nav__link">Salesforce authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="okta-authentication.html" class="md-nav__link">Okta authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="server.html" class="md-nav__link">Kerberos authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cli.html" class="md-nav__link">Kerberos authentication with CLI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="user-mapping.html" class="md-nav__link">User mapping</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="group-file.html" class="md-nav__link">File-based group provider</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ldap-group-provider.html" class="md-nav__link">LDAP group provider</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="access-control.html" class="md-nav__link">Access control overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="built-in-system-access-control.html" class="md-nav__link">Built-in system access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="file-system-access-control.html" class="md-nav__link">File-based system access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="impersonation.html" class="md-nav__link">User impersonation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="password-passthrough.html" class="md-nav__link">Password credential passthrough</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kerberos-passthrough.html" class="md-nav__link">Kerberos credential passthrough</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Apache Ranger overview </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Apache Ranger overview</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-ranger-overview--page-root" class="md-nav__link">Apache Ranger overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#ranger-usage-options" class="md-nav__link">Ranger usage options</a>
        </li>
        <li class="md-nav__item"><a href="#key-concepts" class="md-nav__link">Key concepts</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#policies" class="md-nav__link">Policies</a>
        </li>
        <li class="md-nav__item"><a href="#privilege-sets" class="md-nav__link">Privilege sets</a>
        </li>
        <li class="md-nav__item"><a href="#users-groups-and-roles" class="md-nav__link">Users, groups, and roles</a>
        </li>
        <li class="md-nav__item"><a href="#column-level-authorization" class="md-nav__link">Column-level authorization</a>
        </li>
        <li class="md-nav__item"><a href="#column-masking" class="md-nav__link">Column masking</a>
        </li>
        <li class="md-nav__item"><a href="#service-and-catalog-integrations" class="md-nav__link">Service and catalog integrations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#features-and-use-cases" class="md-nav__link">Features and use cases</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-and-other-catalog-authorization-set-up" class="md-nav__link">Hive and other catalog authorization set up</a>
        </li>
        <li class="md-nav__item"><a href="#controlling-access-to-user-defined-functions-with-ranger" class="md-nav__link">Controlling access to User Defined Functions with Ranger</a>
        </li>
        <li class="md-nav__item"><a href="#audit" class="md-nav__link">Audit</a>
        </li>
        <li class="md-nav__item"><a href="#caching" class="md-nav__link">Caching</a>
        </li>
        <li class="md-nav__item"><a href="#authorization-limitations" class="md-nav__link">Authorization limitations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#ensuring-ranger-works-with-ssl" class="md-nav__link">Ensuring Ranger works with SSL</a>
        </li>
        <li class="md-nav__item"><a href="#ensuring-ranger-works-with-your-authorization-service" class="md-nav__link">Ensuring Ranger works with your authorization service</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#ldap" class="md-nav__link">LDAP</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos" class="md-nav__link">Kerberos</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="global-ranger.html" class="md-nav__link">Global access control with Apache Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-ranger.html" class="md-nav__link">Hive access control with Apache Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="global-privacera.html" class="md-nav__link">Global access control with Privacera Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-privacera.html" class="md-nav__link">Hive access control with Privacera Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-sentry.html" class="md-nav__link">Hive access control with Apache Sentry</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internal-communication.html" class="md-nav__link">Secure internal communication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="secrets.html" class="md-nav__link">Secrets management</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="audit.html" class="md-nav__link">Query audit</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="event-logger.html" class="md-nav__link">Event logger</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../migration.html" class="md-nav__link">Migration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">345-e.9 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">-</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-ranger-overview--page-root" class="md-nav__link">Apache Ranger overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#ranger-usage-options" class="md-nav__link">Ranger usage options</a>
        </li>
        <li class="md-nav__item"><a href="#key-concepts" class="md-nav__link">Key concepts</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#policies" class="md-nav__link">Policies</a>
        </li>
        <li class="md-nav__item"><a href="#privilege-sets" class="md-nav__link">Privilege sets</a>
        </li>
        <li class="md-nav__item"><a href="#users-groups-and-roles" class="md-nav__link">Users, groups, and roles</a>
        </li>
        <li class="md-nav__item"><a href="#column-level-authorization" class="md-nav__link">Column-level authorization</a>
        </li>
        <li class="md-nav__item"><a href="#column-masking" class="md-nav__link">Column masking</a>
        </li>
        <li class="md-nav__item"><a href="#service-and-catalog-integrations" class="md-nav__link">Service and catalog integrations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#features-and-use-cases" class="md-nav__link">Features and use cases</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-and-other-catalog-authorization-set-up" class="md-nav__link">Hive and other catalog authorization set up</a>
        </li>
        <li class="md-nav__item"><a href="#controlling-access-to-user-defined-functions-with-ranger" class="md-nav__link">Controlling access to User Defined Functions with Ranger</a>
        </li>
        <li class="md-nav__item"><a href="#audit" class="md-nav__link">Audit</a>
        </li>
        <li class="md-nav__item"><a href="#caching" class="md-nav__link">Caching</a>
        </li>
        <li class="md-nav__item"><a href="#authorization-limitations" class="md-nav__link">Authorization limitations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#ensuring-ranger-works-with-ssl" class="md-nav__link">Ensuring Ranger works with SSL</a>
        </li>
        <li class="md-nav__item"><a href="#ensuring-ranger-works-with-your-authorization-service" class="md-nav__link">Ensuring Ranger works with your authorization service</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#ldap" class="md-nav__link">LDAP</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos" class="md-nav__link">Kerberos</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="security-ranger-overview--page-root">Apache Ranger overview<a class="headerlink" href="#security-ranger-overview--page-root" title="Permalink to this headline">#</a></h1>
<p>Apache Ranger is a tool to manage access control policies for Hadoop/Hive and
related object storage systems. It provides a simple and intuitive web-based
console for creating and managing policies controlling access to the data.</p>
<p>Presto can be integrated with Ranger as a access control system. When a query is
submitted to Presto, Presto parses and analyzes the query to understand the
privileges required by the user to access objects such as schemas and tables.
Once a list of these objects is created, Presto communicates with the Ranger
service to determine if the request is valid. If the request is valid, the query
continues to execute. If the request is invalid, because the user does not have
the necessary privileges to query an object, an error is returned. Ranger
policies are cached in Presto to improve performance.</p>
<p>Authentication is handled outside of Ranger, for example using LDAP, and Ranger
uses the authenticated user and user groups to associate with the policy
definition.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SEP integration with Ranger requires a valid
<a class="reference internal" href="../installation/license-requirements.html"><span class="doc">Starburst Enterprise Presto license</span></a>.</p>
</div>

<h2 id="ranger-usage-options">Ranger usage options<a class="headerlink" href="#ranger-usage-options" title="Permalink to this headline">#</a></h2>
<p>SEP offers the following different integrations with Ranger:</p>
<ul class="simple">
<li><p><a class="reference internal" href="global-ranger.html"><span class="doc">Global access control with Apache Ranger</span></a>,
which works for any catalog using any connector and requires the Presto
Ranger plugin to be installed with Ranger.</p></li>
<li><p><a class="reference internal" href="hive-ranger.html"><span class="doc">Hive access control with Apache Ranger</span></a>,
which works for any catalog using the Hive connector and can use an
unmodified Apache Ranger.</p></li>
<li><p><a class="reference internal" href="global-privacera.html"><span class="doc">Global access control with Privacera Ranger</span></a>, which works for any catalog using any
connector and requires the Presto Ranger plugin to be installed with
Privacera Ranger.</p></li>
<li><p><a class="reference internal" href="hive-privacera.html"><span class="doc">Hive access control with Privacera Ranger</span></a>,
which works for any catalog using the Hive connector and uses Privacera Ranger</p></li>
</ul>
<p>We highly recommend implementing Ranger for global access control. This allows
you to use Ranger policies for all configured catalogs.</p>


<span id="ranger-concepts"></span><h2 id="key-concepts">Key concepts<a class="headerlink" href="#key-concepts" title="Permalink to this headline">#</a></h2>
<p>The concepts and features described in the following section apply to all Ranger
usage.</p>

<h3 id="policies">Policies<a class="headerlink" href="#policies" title="Permalink to this headline">#</a></h3>
<p>A policy is a combination of set of resources and the associated privileges.
Ranger provides a user interface, or optionally a REST API, to create and manage
these access control policies.</p>


<h3 id="privilege-sets">Privilege sets<a class="headerlink" href="#privilege-sets" title="Permalink to this headline">#</a></h3>
<p>A set of privileges consists of one or more user groups, roles and users, and a
set of access types for the specified resource set. Privileges can allow or
deny operations.</p>
<p>The catalog, schema, table and column resources, which grant access to resources
for queries, have the following access types.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code> to read data from the resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INSERT</span></code> to add data to the resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> to change data in the resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code> to remove data from the resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OWNERSHIP</span></code> to claim ownership of the resource, which provides complete
access.</p></li>
</ul>


<h3 id="users-groups-and-roles">Users, groups, and roles<a class="headerlink" href="#users-groups-and-roles" title="Permalink to this headline">#</a></h3>
<p>Users, groups, and roles are sourced from your configured authentication system,
ideally a connected LDAP directory, and are used the target users for each
policy.</p>


<h3 id="column-level-authorization">Column-level authorization<a class="headerlink" href="#column-level-authorization" title="Permalink to this headline">#</a></h3>
<p>Presto enforces column-level privileges granted to roles. For example, if a user
is only granted access to a subset of table columns, they are only able to query
from these columns. If they execute an SQL statement that refers to other
columns, the query fails with an error.</p>


<h3 id="column-masking">Column masking<a class="headerlink" href="#column-masking" title="Permalink to this headline">#</a></h3>
<p>Presto’s Apache Ranger integration supports most of the column masking methods
that are supported in Hive with Ranger. Presto does not distinguish upper case,
lower case and digital characters when masking. <code class="docutils literal notranslate"><span class="pre">x</span></code> is used for all mentioned
character types.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the case of usage of any unsupported column masking, <code class="docutils literal notranslate"><span class="pre">MASK_NULL</span></code> is used.</p>
</div>


<h3 id="service-and-catalog-integrations">Service and catalog integrations<a class="headerlink" href="#service-and-catalog-integrations" title="Permalink to this headline">#</a></h3>
<p>In addition to enforcing the policies in Apache Ranger, Presto integrates with
the Apache Ranger Key Management Service, and has support for AWS Glue Data
Catalog, row level filtering and tag-based policies.</p>



<h2 id="features-and-use-cases">Features and use cases<a class="headerlink" href="#features-and-use-cases" title="Permalink to this headline">#</a></h2>
<p>The following features and use cases are applicable with all Ranger usage.</p>

<h3 id="hive-and-other-catalog-authorization-set-up">Hive and other catalog authorization set up<a class="headerlink" href="#hive-and-other-catalog-authorization-set-up" title="Permalink to this headline">#</a></h3>
<p>The Ranger integrations replace any other authorization setup for the data
source.</p>
<p>For example, you have to treat is as a replacement for authorization by the user
configured for the connection to the data source, or any restrictions in the
data source utilized by user impersonation or credential passthrough. It is
important to avoid these other configurations, and let Ranger manage all access
to keep the overall setup simple and manageable.</p>
<p>When catalogs use the Hive connector, disable the other <a class="reference internal" href="../connector/hive-security.html"><span class="doc">Hive authorization
checks</span></a> in each catalog properties file. Edit the
catalog properties file with the following configuration:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">hive.security</span><span class="o">=</span><span class="s">allow-all</span>
</pre></div>
</div>


<h3 id="controlling-access-to-user-defined-functions-with-ranger">Controlling access to User Defined Functions with Ranger<a class="headerlink" href="#controlling-access-to-user-defined-functions-with-ranger" title="Permalink to this headline">#</a></h3>
<p>You can use the Ranger system access control to enforce User Defined Function
(UDF) policies. A UDF in Presto is deployed as a plugin
(<a class="reference internal" href="../develop/functions.html"><span class="doc">Functions</span></a>) and stored in the Presto global namespace. This
global namespace is managed at the <a class="reference internal" href="../develop/system-access-control.html"><span class="doc">system access control level</span></a>.</p>
<p>This is independent of the global and Hive access control with Ranger and
Privacera.</p>
<p>The Ranger resource hierarchy for all UDF policies requires an associated
database (or schema) namespace when creating the policy. Because the global
namespace is independent of any connector namespace, this poses a slight
challenge to control access to UDFs using Ranger. To overcome this you must
specify <code class="docutils literal notranslate"><span class="pre">$presto</span></code> as the database name in Ranger. This keeps all Presto
functions under the <code class="docutils literal notranslate"><span class="pre">$presto</span></code> database in Ranger resource hierarchy.</p>
<p>To configure Ranger system access control for UDFs, you need to add the
following to a system access control property file e.g. named
<code class="docutils literal notranslate"><span class="pre">etc/access-control-ranger-udf.properties</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>access-control.name=ranger-system-access-control
ranger.policy-rest-url=https://ranger-host:6182
ranger.service-name=hive

ranger.authentication-type=KERBEROS
ranger.kerberos-principal=presto-server/presto-server-node@EXAMPLE.COM
ranger.kerberos-keytab=/etc/presto/conf/presto-server.keytab
ranger.plugin-policy-ssl-config-file=/etc/hive/conf/ranger-policymgr-ssl.xml
</pre></div>
</div>
<p>All Ranger properties supported for Hive access control with Ranger are
supported in the system access control file. However Ranger properties related
to row filtering or column masking are ignored. This additional configuration is
needed because the Ranger system access control uses an independent Ranger
client from the Hive access control. Only one Ranger system access control can
be defined, while Hive access control can be configured separated for each Hive
catalog. In the scenario where there are multiple Hive catalogs and multiple
Ranger services, only one of those Ranger services can be used to managed the
UDF policies.</p>


<span id="ranger-audit"></span><h3 id="audit">Audit<a class="headerlink" href="#audit" title="Permalink to this headline">#</a></h3>
<p>When Ranger audit is implemented, whenever access is granted or denied through
Ranger, an audit event is logged if auditing is enabled in a given resource
policy.</p>
<p>Ranger audit is configured in the Ranger-specific file
<code class="docutils literal notranslate"><span class="pre">/etc/hive/conf/ranger-hive-audit.xml</span></code>. Configuring Ranger audit is complex,
and outside the scope of Starburst documentation; please refer to your Ranger
documentation to learn how to set up audit optimally for your environment.</p>
<p>For Audit to work with Presto, the location of the file must be specified in
your catalog properties file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ranger.config-resources=/etc/hive/conf/ranger-hive-audit.xml
</pre></div>
</div>
<p><em>Caveat regarding performance</em></p>
<p>Ranger audits are performed by accessing the internal table
<code class="docutils literal notranslate"><span class="pre">system.runtime.queries</span></code>. Any access to the table is logged.</p>
<p>The <a class="reference internal" href="../admin/web-interface.html"><span class="doc">Web UI</span></a> makes heavy use of the queries table. The
property <code class="docutils literal notranslate"><span class="pre">ranger.audit.system-runtime-queries.enabled</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> by
default and controls this logging behavior.  Using the web interface causes a
flood of audit events. Setting the property to <code class="docutils literal notranslate"><span class="pre">false</span></code> disables this audit
logging.</p>


<h3 id="caching">Caching<a class="headerlink" href="#caching" title="Permalink to this headline">#</a></h3>
<p>Caching is used to improve performance and reduce the number of requests to the
Ranger service. Caching is enabled through configuration properties, which can
be found in the <a class="reference internal" href="#ranger-config-properties"><span class="std std-ref">Ranger installation and configuration</span></a> page.</p>


<h3 id="authorization-limitations">Authorization limitations<a class="headerlink" href="#authorization-limitations" title="Permalink to this headline">#</a></h3>
<p>Authorization information cannot be accessed by querying the following tables
such as <code class="docutils literal notranslate"><span class="pre">information_schema.roles</span></code>, <code class="docutils literal notranslate"><span class="pre">information_schema.applicable_roles</span></code>,
<code class="docutils literal notranslate"><span class="pre">information_schema.enabled_roles</span></code>, and
<code class="docutils literal notranslate"><span class="pre">information_schema.table_privileges</span></code>.</p>



<span id="ranger-config-properties"></span><h2 id="configuration-properties">Configuration properties<a class="headerlink" href="#configuration-properties" title="Permalink to this headline">#</a></h2>
<p>The properties listed in this table apply to all Ranger-related configurations
in system access control properties files as as well catalog files using the
Hive connector for Hive access control with Apache Ranger or Privacera.</p>
<table id="id1">
<caption><span class="caption-text">Ranger properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 20%"/>
<col style="width: 20%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-rest-url</span></code></p></td>
<td></td>
<td><p>URL address of the Ranger REST service, required to use HTTPS with
Kerberos authenticationpolicy-rest-url``.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.service-name</span></code></p></td>
<td></td>
<td><p>Ranger Presto plugin service name</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.authentication-type</span></code></p></td>
<td><p>BASIC</p></td>
<td><p>Authentication type for Presto connecting to Ranger, <code class="docutils literal notranslate"><span class="pre">BASIC</span></code>
or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.presto-plugin-username</span></code></p></td>
<td></td>
<td><p>Ranger Presto plugin user name. This property is used when <code class="docutils literal notranslate"><span class="pre">ranger.</span>
<span class="pre">authentication-type=BASIC</span></code> is set.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.presto-plugin-password</span></code></p></td>
<td></td>
<td><p>Ranger Presto plugin user password. This property is used when
<code class="docutils literal notranslate"><span class="pre">ranger.authentication-type=BASIC</span></code> is set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.kerberos-principal</span></code></p></td>
<td></td>
<td><p>Ranger service kerberos principal</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.kerberos-keytab</span></code></p></td>
<td></td>
<td><p>Path to the Ranger service kerberos keytab file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.plugin-policy-ssl-config-file</span></code></p></td>
<td></td>
<td><p>Path to Ranger plugin SSL configuration</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-cache-dir</span></code></p></td>
<td></td>
<td><p>Ranger’s client persistent cache for policies</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-refresh-interval</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
<td><p>Interval determining how often authorization polices are refreshed. The
highest latency after which changes in Ranger authorization policies are
visible in Presto.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-connection-timeout</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">120s</span></code></p></td>
<td><p>Ranger service connection timeout.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-read-timeout</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
<td><p>Ranger service read timeout.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.policy-cache-dir</span></code></p></td>
<td></td>
<td><p>Path to ranger cache dir for policies. It allows to load policies from
cache on startup, even though Ranger Policy Admin was not available at
the moment.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.cache-ttl</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30s</span></code></p></td>
<td><p>Period how long group mapping information is cached in Presto. <code class="docutils literal notranslate"><span class="pre">0ms</span></code>
disables the cache.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.cache-refresh-interval</span></code></p></td>
<td><p>Disabled, <code class="docutils literal notranslate"><span class="pre">0ms</span></code></p></td>
<td><p>Period how long group mapping information is refreshed in Presto. Any
value greater than <code class="docutils literal notranslate"><span class="pre">ranger.cache-ttl</span></code> disables it.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.row-filtering.enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>To enable row filtering set this flag to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Note that there are
semantic differences between Presto SQL and Hive QL.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.wild-card-resource-matching-for-row-filtering</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>To enable resource wild card matching for row filtering set this flag to
<code class="docutils literal notranslate"><span class="pre">true</span></code>. When two policies are matching single resource, the one without
wildcards is used. When multiple wildcard policies match, it is
undetermined which one is used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.wild-card-resource-matching-for-column-masking</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>To enable resource wild card matching for column masking set this flag to
<code class="docutils literal notranslate"><span class="pre">true</span></code>. When two policies are matching single resource, the one without
wildcards is used. When multiple wildcard policies match, it is
undetermined which one is used.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.config-resources</span></code></p></td>
<td></td>
<td><p>Additional XML configuration files which is read before applying Presto
Ranger configuration. Useful for reusing existing HIVE-LEVEL RANGER
configuration with things like Ranger Audit configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ranger.sql.enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Enable <a class="reference internal" href="hive-ranger.html#hive-ranger-sql"><span class="std std-ref">Ranger policy management with SQL</span></a> as
supported for Hive access control only.</p></td>
</tr>
</tbody>
</table>


<h2 id="ensuring-ranger-works-with-ssl">Ensuring Ranger works with SSL<a class="headerlink" href="#ensuring-ranger-works-with-ssl" title="Permalink to this headline">#</a></h2>
<p>If your organization implements SSL, you must ensure that Ranger is correctly
configured for it, as connectors also use the configuration via the
<code class="docutils literal notranslate"><span class="pre">ranger.plugin-policy-ssl-config-file</span> <span class="pre">property</span></code>. The following is a sample of
Ranger SSL configuration file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;configuration&gt;
    &lt;!--  The following properties are used for 2-way SSL client server validation --&gt;
    &lt;property&gt;
        &lt;name&gt;xasecure.policymgr.clientssl.keystore&lt;/name&gt;
        &lt;value&gt;/etc/hive/conf/ranger-plugin-keystore.jks&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;xasecure.policymgr.clientssl.truststore&lt;/name&gt;
        &lt;value&gt;/etc/hive/conf/ranger-plugin-truststore.jks&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;xasecure.policymgr.clientssl.keystore.credential.file&lt;/name&gt;
        &lt;value&gt;jceks://file/etc/ranger/hivedev/cred.jceks&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;xasecure.policymgr.clientssl.truststore.credential.file&lt;/name&gt;
        &lt;value&gt;jceks://file/etc/ranger/hivedev/cred.jceks&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
</div>


<h2 id="ensuring-ranger-works-with-your-authorization-service">Ensuring Ranger works with your authorization service<a class="headerlink" href="#ensuring-ranger-works-with-your-authorization-service" title="Permalink to this headline">#</a></h2>
<p>You need to configure Presto to work with the authentication service used by
Ranger. While Starburst does offer Kerberos support, Starburst encourages the
use of LDAP. The following configuration property is provided:</p>

<h3 id="ldap">LDAP<a class="headerlink" href="#ldap" title="Permalink to this headline">#</a></h3>
<p>If your organization uses LDAP system for user and group information, Ranger can
use that information to define role-based access to catalogs using any
connector, as well as a number of other system resources. Policies in Ranger
define access and authorization, and are created with the Ranger user interface.
Users, groups, and roles are sourced from your connected LDAP directory and are
used to target users for a Ranger policy. Each policy combines user and group
information with a resource and access rights to the resource.</p>
<p>Ranger needs to access the information about your users, groups and roles in
your LDAP system. With the K8s and AWS installation methods, all details are
already configured. For existing Ranger usage or manual installation, you must
ensure that Ranger is connected to your LDAP directory provider, and that a
synchronization process is in place.</p>
<p>The process of connecting your existing Ranger installation depends on your
particular LDAP implementation as well as your Ranger configuration. Learn more
about that in the <a class="reference internal" href="ldap.html"><span class="doc">Presto LDAP Authentication</span></a> page.</p>


<h3 id="kerberos">Kerberos<a class="headerlink" href="#kerberos" title="Permalink to this headline">#</a></h3>
<p>SEP can use <a class="reference internal" href="server.html"><span class="doc">Kerberos authentication</span></a> page, and the
Ranger integration also support Kerberos.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Most organizations that use Kerberos also use LDAP. We strongly encourage you
to use LDAP instead of Kerberos, due to the relative unreliability of
Kerberos servers, their lack of clear error messaging, and their rigid OS and
JVM dependencies.</p>
</div>
<p>A sys admin Ranger user (user with role <code class="docutils literal notranslate"><span class="pre">ROLE_SYS_ADMIN</span></code>) must exist that
matches Presto Kerberos principal <code class="docutils literal notranslate"><span class="pre">ranger.kerberos-principal</span></code> when  or Ranger
Presto plugin username <code class="docutils literal notranslate"><span class="pre">ranger.presto-plugin-username</span></code> and password
<code class="docutils literal notranslate"><span class="pre">ranger.presto-plugin-password</span></code>, if <code class="docutils literal notranslate"><span class="pre">BASIC</span></code> auth is used.</p>
<p>Presto Kerberos principal is translated to Ranger user name via
<code class="docutils literal notranslate"><span class="pre">auth-to-local</span></code> hadoop rules from <code class="docutils literal notranslate"><span class="pre">core-site.xml</span></code>.</p>





          </article>
        </div>
      </div>
    </main>
  </div>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="kerberos-passthrough.html" title="Kerberos credential passthrough"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Kerberos credential passthrough </span>
              </div>
            </a>
          
          
            <a href="global-ranger.html" title="Global access control with Apache Ranger"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Global access control with Apache Ranger </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>

<!-- custom footer should go here in time -->

<div style="background: #000A2C; align-content: center; height: 5em;">

</div>
  </body>
</html>