

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Starburst Enterprise in Google Cloud Marketplace &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sidebar.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/main.js"></script>
    <script src="../../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Microsoft Azure" href="../microsoft/index.html" />
    <link rel="prev" title="Google Kubernetes Engine deployments" href="gke.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/ecosystems/google/gcp-marketplace.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#ecosystems/google/gcp-marketplace" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 443-e.27 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 443-e.27 LTS</a>
          <span class="md-header-nav__topic"> Starburst Enterprise in Google Cloud Marketplace </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (468-e)" href="/468-e/">Latest LTS (468-e)</a>
      
          <a title="462-e LTS" href="/462-e/">462-e LTS</a>
      
          <a title="453-e LTS" href="/453-e/">453-e LTS</a>
      
          <a title="443-e LTS" href="/443-e/">443-e LTS</a>
      
          <a title="Latest STS (474-e)" href="/474-e/">Latest STS (474-e)</a>
      
          <a title="472-e STS" href="/472-e/">472-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Google Cloud</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../index.html"
       title="Starburst Enterprise">Starburst Enterprise 443-e.27 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get-started/starburst-enterprise.html">What is Starburst Enterprise?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get-started/try/try-sep.html">Try Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learn/index.html">Learn Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">Product versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.starburst.io/support.html">Get support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optimizer.html">Query optimizer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../object-storage-connectors.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../non-object-storage-connectors.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connector/starburst-connectors.html">Starburst connectors feature matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-engineering/cost-and-performance/index.html">Monitor and manage cost and performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../aws/index.html">AWS ecosystem</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Google Cloud</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gke.html">Google Kubernetes Engine</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Google Cloud Marketplace</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#deployment-options">Deployment options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#marketplace-support">Marketplace support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-your-subscription">Set up your subscription</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-the-gke-cluster">Set up the GKE cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sep-license-requirements">SEP license requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-from-google-cloud-marketplace">Deploy from Google Cloud Marketplace</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get-marketplace-license-file">Get Marketplace license file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-the-umbrella-helm-chart">Get the umbrella Helm Chart</a></li>
<li class="toctree-l4"><a class="reference internal" href="#check-the-deployment-files">Check the deployment files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-the-values-yaml-file">Build the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#deploy-a-basic-sep-cluster">Deploy a basic SEP cluster</a></li>
<li class="toctree-l5"><a class="reference internal" href="#deploy-a-custom-sep-cluster">Deploy a custom SEP cluster</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#run-the-helm-deployment">Run the Helm deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#validate-your-deployment">Validate your deployment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sep-on-google-kubernetes-engine-gke">SEP on Google Kubernetes Engine (GKE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sep-on-google-cloud-compute-engine">SEP on Google Cloud Compute Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sep-on-google-cloud-marketplace">SEP on Google Cloud Marketplace</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#support-for-sep">Support for SEP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../develop.html">Trino developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#ecosystems-google-gcp-marketplace--page-root" class="md-nav__link">Starburst Enterprise in Google Cloud Marketplace</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#deployment-options" class="md-nav__link">Deployment options</a>
        </li>
        <li class="md-nav__item"><a href="#marketplace-support" class="md-nav__link">Marketplace support</a>
        </li>
        <li class="md-nav__item"><a href="#set-up-your-subscription" class="md-nav__link">Set up your subscription</a>
        </li>
        <li class="md-nav__item"><a href="#set-up-the-gke-cluster" class="md-nav__link">Set up the GKE cluster</a>
        </li>
        <li class="md-nav__item"><a href="#sep-license-requirements" class="md-nav__link">SEP license requirements</a>
        </li>
        <li class="md-nav__item"><a href="#deploy-from-google-cloud-marketplace" class="md-nav__link">Deploy from Google Cloud Marketplace</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#get-marketplace-license-file" class="md-nav__link">Get Marketplace license file</a>
        </li>
        <li class="md-nav__item"><a href="#get-the-umbrella-helm-chart" class="md-nav__link">Get the umbrella Helm Chart</a>
        </li>
        <li class="md-nav__item"><a href="#check-the-deployment-files" class="md-nav__link">Check the deployment files</a>
        </li>
        <li class="md-nav__item"><a href="#build-the-values-yaml-file" class="md-nav__link">Build the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#deploy-a-basic-sep-cluster" class="md-nav__link">Deploy a basic SEP cluster</a>
        </li>
        <li class="md-nav__item"><a href="#deploy-a-custom-sep-cluster" class="md-nav__link">Deploy a custom SEP cluster</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#run-the-helm-deployment" class="md-nav__link">Run the Helm deployment</a>
        </li>
        <li class="md-nav__item"><a href="#validate-your-deployment" class="md-nav__link">Validate your deployment</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#next-steps" class="md-nav__link">Next steps</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="starburst-enterprise-in-google-cloud-marketplace">
<h1 id="ecosystems-google-gcp-marketplace--page-root">Starburst Enterprise in Google Cloud Marketplace<a class="headerlink" href="#ecosystems-google-gcp-marketplace--page-root" title="Permalink to this heading">#</a></h1>
<p>Starburst Enterprise platform (SEP) is available directly through the <a class="reference external" href="https://console.cloud.google.com/marketplace/product/starburst-public/starburst-enterprise">Google Cloud Platform
Marketplace</a>
to run on a variety of instance types. Our Google Cloud Marketplace offering
allows you to easily set up a monthly contract, after which you can deploy
SEP using the command line or Google’s <strong>Click to Deploy</strong> on Google
Kubernetes Engine (GKE).</p>
<section id="deployment-options">
<h2 id="deployment-options">Deployment options<a class="headerlink" href="#deployment-options" title="Permalink to this heading">#</a></h2>
<p>We strongly recommend that you deploy using the command line. Google’s <strong>Click
to Deploy</strong> option is best suited for small proofs-of-concept and limits your
customization options.</p>
<p>After you have deployed using the command line, you can customize SEP
including adding catalogs and services such as:</p>
<ul class="simple">
<li><p>Hive Metastore (HMS)</p></li>
<li><p>Apache Ranger</p></li>
<li><p>Starburst Cache Service</p></li>
</ul>
</section>
<section id="marketplace-support">
<h2 id="marketplace-support">Marketplace support<a class="headerlink" href="#marketplace-support" title="Permalink to this heading">#</a></h2>
<p>Starburst Enterprise offers the following support for our marketplace
subscribers:</p>
<ul class="simple">
<li><p>Email-only support</p></li>
<li><p>Five email issues to <a class="reference external" href="mailto:gcpsupport%40starburstdata.com">gcpsupport<span>@</span>starburstdata<span>.</span>com</a> per month</p></li>
<li><p>First response SLA of one business day</p></li>
<li><p>Support hours between 9 AM - 6 PM US Eastern Time</p></li>
</ul>
</section>
<section id="set-up-your-subscription">
<h2 id="set-up-your-subscription">Set up your subscription<a class="headerlink" href="#set-up-your-subscription" title="Permalink to this heading">#</a></h2>
<p>Before you begin, you must have a Google Cloud login with the ability to
subscribe to services.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the following steps, if the blue button says
<strong>Purchase</strong> instead of <strong>Configure</strong>, the Google Cloud account you are using is
not setup for subscription billing.</p>
</div>
<p>To subscribe to SEP through the Google Cloud Marketplace:</p>
<ol class="arabic simple">
<li><p>Log in with your billable subscriber account and
<a class="reference external" href="https://console.cloud.google.com/marketplace/product/starburst-public/starburst-enterprise">access the Starburst Enterprise offering directly</a>,
or enter “Starburst Enterprise” in the marketplace search field and
select <strong>Starburst Enterprise - Distributed SQL Query Engine</strong>.</p></li>
<li><p>Click <strong>Configure</strong>.</p></li>
<li><p>On the resulting screen, select <strong>Deploy via command line</strong>. <strong>Click to
Deploy on GKE</strong> is not supported.</p></li>
</ol>
</section>
<section id="set-up-the-gke-cluster">
<h2 id="set-up-the-gke-cluster">Set up the GKE cluster<a class="headerlink" href="#set-up-the-gke-cluster" title="Permalink to this heading">#</a></h2>
<p>Create a GKE Standard cluster with two nodepools. One nodepool is for SEP
while the other is for Ranger and HMS, so if you don’t need these additional
services then the default nodepool for SEP is sufficient. The following are the
recommended minimal specifications to use for a
proof-of-concept deployment:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">Cluster name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-sep-cluster</span>
<span class="nt">Location type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zonal (lower latency)</span>
<span class="nt">K8s version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.20.9-gke.1001</span>
<span class="nt">Primary nodepool name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default-nodepool</span>
   <span class="l l-Scalar l-Scalar-Plain">Number of nodes</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
   <span class="l l-Scalar l-Scalar-Plain">Machine configuration</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">e2-standard-16 (16 CPU and 64 GB RAM)</span>
<span class="nt">Supplementary nodepool name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nonsep</span>
   <span class="l l-Scalar l-Scalar-Plain">Number of nodes</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
   <span class="l l-Scalar l-Scalar-Plain">Machine configuration</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">e2-standard-8 (8 CPU and 32 GB RAM)</span>
</pre></div>
</div>
</section>
<section id="sep-license-requirements">
<h2 id="sep-license-requirements">SEP license requirements<a class="headerlink" href="#sep-license-requirements" title="Permalink to this heading">#</a></h2>
<p>SEP on Google Cloud is licensed with a pay-as-you-go (PAYGO) model.</p>
<p>PAYGO requires the metering agent and the billing reporter agent, both of
which are preconfigured. You must pass the reference to your unique reporting
secret. No license file is embedded. Instead, the license must be created first,
then the secret must be referenced in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> using the
<code class="docutils literal notranslate"><span class="pre">starburst-enterprise.starburstPlatformLicense</span></code> configuration property.</p>
</section>
<section id="deploy-from-google-cloud-marketplace">
<h2 id="deploy-from-google-cloud-marketplace">Deploy from Google Cloud Marketplace<a class="headerlink" href="#deploy-from-google-cloud-marketplace" title="Permalink to this heading">#</a></h2>
<p>The following CLI deployment sections describe how to deploy SEP with the
Google Cloud Marketplace.</p>
<section id="get-marketplace-license-file">
<h3 id="get-marketplace-license-file">Get Marketplace license file<a class="headerlink" href="#get-marketplace-license-file" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>Navigate to the Google Cloud Marketplace SEP offering and
select <strong>Configure</strong>.</p></li>
<li><p>Set <strong>App instance name</strong> and switch to the <strong>Deploy via command line</strong> tab.</p></li>
<li><p>Select the appropriate reporting/cluster service account and click
<strong>Generate license key</strong>.</p></li>
<li><p>Apply the downloaded license file with the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ kubectl apply -f license.yaml
</pre></div>
</div>
</li>
<li><p>Confirm the <code class="docutils literal notranslate"><span class="pre">starburst-enterprise-license-&lt;unique_suffix&gt;</span></code> reporting secret
has been created:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ kubectl get secrets <span class="p">|</span> grep starburst-enterprise-license
$ kubectl describe secret starburst-enterprise-license-&lt;unique_suffix&gt;
</pre></div>
</div>
</li>
<li><p>Record the license name that was loaded into your cluster for later use. For
example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">Name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">starburst-enterprise-license-121212</span>
<span class="nt">Namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">Labels</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;none&gt;</span>
<span class="nt">Annotations</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;none&gt;</span>
<span class="nt">Type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Opaque</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="get-the-umbrella-helm-chart">
<h3 id="get-the-umbrella-helm-chart">Get the umbrella Helm Chart<a class="headerlink" href="#get-the-umbrella-helm-chart" title="Permalink to this heading">#</a></h3>
<p>The version of the Helm Chart is 3.6.4. The associated Starburst Enterprise version is
435.4.0.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not extract the contents
of the archive downloaded in these steps.</p>
</div>
<ol class="arabic">
<li><p>Download the chart as shown:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ wget https://storage.googleapis.com/starburst-enterprise/helmCharts/sep-gcp/starburst-enterprise-platform-charts-3.6.4.tgz
</pre></div>
</div>
</li>
<li><p>Apply <strong>Application CRD</strong> to avoid errors:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ kubectl apply -f <span class="s2">"https://raw.githubusercontent.com/GoogleCloudPlatform/marketplace-k8s-app-tools/master/crd/app-crd.yaml"</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="check-the-deployment-files">
<h3 id="check-the-deployment-files">Check the deployment files<a class="headerlink" href="#check-the-deployment-files" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>Check the content of the default values distributed with the umbrella Helm
chart:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ helm show values starburst-enterprise-platform-charts-3.6.4.tgz
</pre></div>
</div>
</li>
<li><p>Check the default values.yaml for subcharts to ensure that they are using
the Helm chart version. The correct Helm chart version matches the number
found in the marketplace listing page in the <code class="docutils literal notranslate"><span class="pre">Tag</span></code> field. (Note: Tag numbers
may omit the revision number.) For example, if version 3.6.4
uses Helm charts in version 435.4.0, then for Starburst
Enterprise Helm chart run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ helm show values starburstdata/starburst-enterprise --version <span class="m">435</span>.4.0
</pre></div>
</div>
<p>The same command can be used to print the values.yaml for Starburst Hive and
Ranger Helm charts.</p>
</li>
</ol>
</section>
<section id="build-the-values-yaml-file">
<h3 id="build-the-values-yaml-file">Build the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file<a class="headerlink" href="#build-the-values-yaml-file" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file contains the configuration for your SEP
cluster. You can either use the default content for a basic configuration to
start, or build the content yourself for a more custom initial deployment.</p>
<section id="deploy-a-basic-sep-cluster">
<h4 id="deploy-a-basic-sep-cluster">Deploy a basic SEP cluster<a class="headerlink" href="#deploy-a-basic-sep-cluster" title="Permalink to this heading">#</a></h4>
<p>Deploy the default <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> content for a basic SEP
cluster configuration. This YAML requires the
<code class="docutils literal notranslate"><span class="pre">starburst-enterprise.reportingSecret</span></code> value to deploy an SEP cluster</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ helm install starburst-enterprise starburst-enterprise-platform-charts-3.6.4.tgz --set starburst-enterprise.reportingSecret<span class="o">=</span>starburst-enterprise-license-&lt;unique_suffix&gt;
</pre></div>
</div>
<p>To deploy with support for <a class="reference internal" href="../../data-engineering/cost-and-performance/set-mode-ws.html"><span class="doc">Starburst Warp Speed</span></a>, you must append a secret
with an SEP license key to: <code class="docutils literal notranslate"><span class="pre">--set</span> <span class="pre">starburst-enterprise.starburstPlatformLicense=&lt;secret_with_sep_license&gt;</span></code>.</p>
</section>
<section id="deploy-a-custom-sep-cluster">
<h4 id="deploy-a-custom-sep-cluster">Deploy a custom SEP cluster<a class="headerlink" href="#deploy-a-custom-sep-cluster" title="Permalink to this heading">#</a></h4>
<p>Create a <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file with the configuration you wish to deploy, following
the license requirements for your license type. You can include catalog
configuration for your data sources at this time, or add them later.</p>
<p><strong>Example</strong></p>
<p>Copy the below example template and overwrite the defaults with values specific
to Google Cloud marketplace:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Starburst Enterprise chart</span>
<span class="nt">starburst-enterprise</span><span class="p">:</span>
  <span class="nt">reportingSecret</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ENTERPRISE_LICENSE_NAME</span>

  <span class="nt">catalogs</span><span class="p">:</span>
    <span class="nt">bigquery</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">connector.name=bigquery</span>
      <span class="no">bigquery.project-id=GOOGLE_PROJECT_ID</span>
    <span class="nt">hive</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">connector.name=hive</span>
      <span class="no">hive.metastore.uri=thrift://hive:9083</span>
    <span class="nt">starburst-insights</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">connector.name=postgresql</span>
      <span class="no">connection-url=jdbc:postgresql://INSIGHTS_DATABASE_INSTANCE:5432/insights</span>
      <span class="no">connection-user=postgres</span>
      <span class="no">connection-password=INSIGHTS_DATABASE_PASSWORD</span>

  <span class="nt">coordinator</span><span class="p">:</span>
    <span class="nt">additionalProperties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">insights.persistence-enabled=true</span>
      <span class="no">insights.metrics-persistence-enabled=true</span>
      <span class="no">insights.jdbc.url=jdbc:postgresql://INSIGHTS_DATABASE_INSTANCE:5432/insights</span>
      <span class="no">insights.jdbc.user=postgres</span>
      <span class="no">insights.jdbc.password=INSIGHTS_DATABASE_PASSWORD</span>
      <span class="no">insights.authorized-users=.*</span>
    <span class="nt">etcFiles</span><span class="p">:</span>
      <span class="nt">properties</span><span class="p">:</span>
        <span class="nt">config.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
          <span class="no">http-server.authentication.allow-insecure-over-http=true</span>
          <span class="no">http-server.process-forwarded=true</span>
        <span class="nt">password-authenticator.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
          <span class="no">password-authenticator.name=file</span>
    <span class="nt">nodeSelector</span><span class="p">:</span>
      <span class="nt">starburstpool</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">STARBURST_COORDINATOR_NODE_POOL</span>
    <span class="nt">resources</span><span class="p">:</span>
      <span class="nt">limits</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">56Gi</span>
      <span class="nt">requests</span><span class="p">:</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">56Gi</span>

  <span class="nt">expose</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">clusterIp</span>
    <span class="nt">ingress</span><span class="p">:</span>
      <span class="nt">serviceName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">starburst</span>
      <span class="nt">servicePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
      <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">STARBURST_URL</span>
      <span class="nt">path</span><span class="p">:</span> <span class="s">"/"</span>
      <span class="nt">pathType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Prefix</span>
      <span class="nt">tls</span><span class="p">:</span>
        <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">secretName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tls-secret-starburst</span>
      <span class="nt">annotations</span><span class="p">:</span>
        <span class="nt">kubernetes.io/ingress.class</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
        <span class="nt">cert-manager.io/cluster-issuer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">letsencrypt</span>

  <span class="nt">userDatabase</span><span class="p">:</span>
    <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">users</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ADMIN_PASSWORD</span>
      <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ADMIN_USERNAME</span>

  <span class="nt">worker</span><span class="p">:</span>
    <span class="nt">autoscaling</span><span class="p">:</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">maxReplicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
      <span class="nt">minReplicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
      <span class="nt">targetCPUUtilizationPercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
    <span class="nt">deploymentTerminationGracePeriodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>
    <span class="nt">nodeSelector</span><span class="p">:</span>
      <span class="nt">starburstpool</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">STARBURST_WORKER_NODE_POOL</span>
    <span class="nt">resources</span><span class="p">:</span>
      <span class="nt">limits</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">56Gi</span>
      <span class="nt">requests</span><span class="p">:</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">56Gi</span>
    <span class="nt">starburstWorkerShutdownGracePeriodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">120</span>

<span class="c1"># Hive Chart</span>
<span class="nt">starburst-hive</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="nt">gcpExtraNodePool</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EXTRA_NODE_POOL</span>

  <span class="nt">database</span><span class="p">:</span>
    <span class="nt">external</span><span class="p">:</span>
      <span class="nt">driver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">org.postgresql.Driver</span>
      <span class="nt">jdbcUrl</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jdbc:postgresql://HIVE_DATABASE_INSTANCE:5432/hive</span>
      <span class="nt">user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres</span>
      <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">HIVE_DATABASE_PASSWORD</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external</span>

  <span class="nt">objectStorage</span><span class="p">:</span>
    <span class="nt">gs</span><span class="p">:</span>
      <span class="nt">cloudKeyFileSecret</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">service-account-key</span>

  <span class="nt">expose</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">clusterIp</span>

<span class="c1"># Ranger Chart</span>
<span class="nt">starburst-ranger</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="nt">admin</span><span class="p">:</span>
    <span class="nt">resources</span><span class="p">:</span>
      <span class="nt">limits</span><span class="p">:</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1Gi</span>
      <span class="nt">requests</span><span class="p">:</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1Gi</span>
    <span class="nt">serviceUser</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ADMIN_USERNAME</span>

  <span class="nt">gcpExtraNodePool</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EXTRA_NODE_POOL</span>

  <span class="nt">usersync</span><span class="p">:</span>
    <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="nt">database</span><span class="p">:</span>
    <span class="nt">external</span><span class="p">:</span>
      <span class="nt">databaseName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ranger</span>
      <span class="nt">databasePassword</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">RANGER_DATABASE_PASSWORD</span>
      <span class="nt">databaseRootPassword</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">RANGER_DATABASE_ROOT_PASSWORD</span>
      <span class="nt">databaseRootUser</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres</span>
      <span class="nt">databaseUser</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ranger</span>
      <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">RANGER_DATABASE_INSTANCE</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5432</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external</span>

  <span class="nt">datasources</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">coordinator</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">starburst-enterprise</span>
    <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ADMIN_PASSWORD</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ADMIN_USERNAME</span>

  <span class="nt">expose</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">clusterIp</span>
    <span class="nt">loadBalancer</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ranger</span>
      <span class="nt">ports</span><span class="p">:</span>
        <span class="nt">http</span><span class="p">:</span>
          <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6080</span>
    <span class="nt">ingress</span><span class="p">:</span>
      <span class="nt">serviceName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ranger</span>
      <span class="nt">servicePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6080</span>
      <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">RANGER_URL</span>
      <span class="nt">path</span><span class="p">:</span> <span class="s">"/"</span>
      <span class="nt">pathType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Prefix</span>
      <span class="nt">tls</span><span class="p">:</span>
        <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">secretName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tls-secret-ranger</span>
      <span class="nt">annotations</span><span class="p">:</span>
        <span class="nt">kubernetes.io/ingress.class</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
        <span class="nt">cert-manager.io/cluster-issuer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">letsencrypt</span>

  <span class="nt">initFile</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">files/initFile.sh</span>
</pre></div>
</div>
<p>Confirm that you have set the following placeholder entries in the above yaml to
match your environment and configuration. You can also include any other
configuration required, such as SSO, LDAP, Ingress and custom catalogs to this
file:</p>
<ul class="simple">
<li><p>ENTERPRISE_LICENSE_NAME - The name of the license in <code class="docutils literal notranslate"><span class="pre">license.yaml</span></code> that was
uploaded using <code class="docutils literal notranslate"><span class="pre">kubectl</span></code>.</p></li>
<li><p>GOOGLE_PROJECT_ID - The Google Project you are deploying to.</p></li>
<li><p>INSIGHTS_DATABASE_INSTANCE - Hostname/IP for the ‘Starburst Insights’ database
instance.</p></li>
<li><p>INSIGHTS_DATABASE_PASSWORD - <code class="docutils literal notranslate"><span class="pre">postgres</span></code> user password for the Insights
database.</p></li>
<li><p>STARBURST_COORDINATOR_NODE_POOL - Node Pool for the Coordinator (optional).</p></li>
<li><p>STARBURST_WORKER_NODE_POOL - Node Pool for the worker nodes. Can be the same
as Coordinator (optional).</p></li>
<li><p>EXTRA_NODE_POOL - Node pool for Ranger and Hive (optional).</p></li>
<li><p>ADMIN_USERNAME - Starburst Enterprise web UI login user.</p></li>
<li><p>ADMIN_PASSWORD - Starburst Enterprise web UI login password.</p></li>
<li><p>HIVE_DATABASE_INSTANCE - Hostname/IP for the Hive database instance.</p></li>
<li><p>HIVE_DATABASE_PASSWORD - <code class="docutils literal notranslate"><span class="pre">postgres</span></code> user password for the Hive database.</p></li>
<li><p>RANGER_DATABASE_INSTANCE - Hostname/IP for the Ranger database instance.</p></li>
<li><p>RANGER_DATABASE_ROOT_PASSWORD - <code class="docutils literal notranslate"><span class="pre">postgres</span></code> user password for the Ranger
database.</p></li>
<li><p>RANGER_DATABASE_PASSWORD - <code class="docutils literal notranslate"><span class="pre">ranger</span></code> user password for the Ranger database.</p></li>
</ul>
</section>
</section>
<section id="run-the-helm-deployment">
<h3 id="run-the-helm-deployment">Run the Helm deployment<a class="headerlink" href="#run-the-helm-deployment" title="Permalink to this heading">#</a></h3>
<p>After you have configured the values file for your environment, run the
following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ helm install starburst-enterprise starburst-enterprise-platform-charts-3.6.4.tgz --values values.yaml
</pre></div>
</div>
</section>
<section id="validate-your-deployment">
<h3 id="validate-your-deployment">Validate your deployment<a class="headerlink" href="#validate-your-deployment" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>You can verify that all pods are in a running state or a completed state:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>   $ kubectl get pods -o wide
NAME                           READY   STATUS    RESTARTS   AGE   IP            NODE                                             NOMINATED NODE   READINESS GATES
coordinator-6f646d7996-dttk4   <span class="m">4</span>/4     Running   <span class="m">0</span>          25m   <span class="m">10</span>.104.0.19   gke-test-mp-cluster-default-pool-5b89684f-6g3b   &lt;none&gt;           &lt;none&gt;
hive-7c8b5b5495-v9gwz          <span class="m">2</span>/2     Running   <span class="m">0</span>          25m   <span class="m">10</span>.28.0.27    gke-test-mp-cluster-nonsep-0be06378-b718         &lt;none&gt;           &lt;none&gt;
ranger-7c6b59bdd5-b9v8s        <span class="m">2</span>/2     Running   <span class="m">0</span>          25m   <span class="m">10</span>.28.0.28    gke-test-mp-cluster-nonsep-0be06378-b718         &lt;none&gt;           &lt;none&gt;
worker-76598b766c-dvgd7        <span class="m">3</span>/3     Running   <span class="m">0</span>          25m   <span class="m">10</span>.104.0.18   gke-test-mp-cluster-default-pool-5b89684f-6g3b   &lt;none&gt;           &lt;none&gt;
worker-76598b766c-pqg9p        <span class="m">3</span>/3     Running   <span class="m">0</span>          25m   <span class="m">10</span>.104.0.17   gke-test-mp-cluster-default-pool-5b89684f-6g3b   &lt;none&gt;           &lt;none&gt;
</pre></div>
</div>
<ol class="arabic">
<li><p>After deployment, confirm that the metrics reporter is able to submit metrics
to Google Cloud metering service:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ kubectl logs deployment/coordinator -c metrics-reporter
<span class="m">2022</span>-11-17 <span class="m">08</span>:57:01 INFO     Starting a new job with Billing Handler...
<span class="m">2022</span>-11-17 <span class="m">08</span>:57:01 INFO     Trying to get usage metrics from coordinator...
<span class="m">2022</span>-11-17 <span class="m">08</span>:57:01 ERROR    Failure to get usage metrics from the coordinator because of metrics usage unavailability: Expecting value: line <span class="m">1</span> column <span class="m">1</span> <span class="o">(</span>char <span class="m">0</span><span class="o">)</span>
<span class="m">2022</span>-11-17 <span class="m">08</span>:57:01 WARNING  The coordinator failed to respond. Make sure it is up and running! Exiting...
<span class="m">2022</span>-11-17 <span class="m">08</span>:57:01 INFO     Done
<span class="m">2022</span>-11-17 <span class="m">08</span>:58:02 INFO     Starting a new job with Billing Handler...
<span class="m">2022</span>-11-17 <span class="m">08</span>:58:02 INFO     Trying to get usage metrics from coordinator...
<span class="m">2022</span>-11-17 <span class="m">08</span>:58:02 INFO     Number of cores in this <span class="m">60</span> second cycle: <span class="m">45</span>
<span class="m">2022</span>-11-17 <span class="m">08</span>:58:02 INFO     Report submission status: <span class="m">200</span> : OK :
<span class="m">2022</span>-11-17 <span class="m">08</span>:58:02 INFO     Trying to get status from the Billing agent...
<span class="m">2022</span>-11-17 <span class="m">08</span>:58:02 INFO     Status response from the Billing agent: <span class="o">{</span><span class="s2">"lastReportSuccess"</span>:<span class="s2">"2022-11-17T08:56:48.771289323Z"</span>,<span class="s2">"currentFailureCount"</span>:0,<span class="s2">"totalFailureCount"</span>:0<span class="o">}</span>
<span class="m">2022</span>-11-17 <span class="m">08</span>:58:02 INFO     Done
</pre></div>
</div>
<p>Every minute you should see:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Report</span> <span class="pre">submission</span> <span class="pre">status:</span> <span class="pre">200</span> <span class="pre">:</span> <span class="pre">OK</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">cores</span> <span class="pre">in</span> <span class="pre">this</span> <span class="pre">60</span> <span class="pre">second</span> <span class="pre">cycle:</span> <span class="pre">45:</span></code></p></li>
<li><p>1 coordinator * 15 vCPUs + 2 workers * 15 vCPUs = 45 vCPUs in total</p></li>
</ul>
</li>
<li><p>Please also verify that there are no errors reported by <code class="docutils literal notranslate"><span class="pre">ubbagent</span></code>:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>   $ kubectl logs deployment/coordinator -c ubbagent
   Listening locally on port <span class="m">6080</span>
   I1117 <span class="m">08</span>:56:48.616602       <span class="m">1</span> servicecontrol.go:88<span class="o">]</span> ServiceControlEndpoint:Send<span class="o">()</span>: serviceName:  starburst-presto.mp-starburst-public.appspot.com  body:  <span class="o">{</span><span class="s2">"operations"</span>:<span class="o">[{</span><span class="s2">"consumerId"</span>:<span class="s2">"project:pr-a19b90ff70ab666"</span>,<span class="s2">"endTime"</span>:<span class="s2">"2022-11-17T08:56:48Z"</span>,<span class="s2">"metricValueSets"</span>:<span class="o">[{</span><span class="s2">"metricName"</span>:<span class="s2">"starburst-presto.mp-starburst-public.appspot.com/cpu_usage_in_seconds_pricing"</span>,<span class="s2">"metricValues"</span>:<span class="o">[{</span><span class="s2">"endTime"</span>:<span class="s2">"2022-11-17T08:56:48Z"</span>,<span class="s2">"int64Value"</span>:<span class="s2">"0"</span>,<span class="s2">"startTime"</span>:<span class="s2">"2022-11-17T08:56:48Z"</span><span class="o">}]}]</span>,<span class="s2">"operationId"</span>:<span class="s2">"71f2590e-27b6-4be0-9720-eee5918e4c00"</span>,<span class="s2">"operationName"</span>:<span class="s2">"starburst-presto.mp-starburst-public.appspot.com/report"</span>,<span class="s2">"startTime"</span>:<span class="s2">"2022-11-17T08:56:48Z"</span>,<span class="s2">"userLabels"</span>:<span class="o">{</span><span class="s2">"goog-ubb-agent-id"</span>:<span class="s2">"b33d9a75-56c8-4965-92ec-644346960142"</span><span class="o">}}]}</span>
   I1117 <span class="m">08</span>:56:48.771219       <span class="m">1</span> servicecontrol.go:112<span class="o">]</span> ServiceControlEndpoint:Send<span class="o">()</span>: success
   I1117 <span class="m">08</span>:58:02.425575       <span class="m">1</span> servicecontrol.go:88<span class="o">]</span> ServiceControlEndpoint:Send<span class="o">()</span>: serviceName:  starburst-presto.mp-starburst-public.appspot.com  body:  <span class="o">{</span><span class="s2">"operations"</span>:<span class="o">[{</span><span class="s2">"consumerId"</span>:<span class="s2">"project:pr-a19b90ff70ab666"</span>,<span class="s2">"endTime"</span>:<span class="s2">"2022-11-17T08:58:02Z"</span>,<span class="s2">"metricValueSets"</span>:<span class="o">[{</span><span class="s2">"metricName"</span>:<span class="s2">"starburst-presto.mp-starburst-public.appspot.com/cpu_usage_in_seconds_pricing"</span>,<span class="s2">"metricValues"</span>:<span class="o">[{</span><span class="s2">"endTime"</span>:<span class="s2">"2022-11-17T08:58:02Z"</span>,<span class="s2">"int64Value"</span>:<span class="s2">"2700"</span>,<span class="s2">"startTime"</span>:<span class="s2">"2022-11-17T08:58:02Z"</span><span class="o">}]}]</span>,<span class="s2">"operationId"</span>:<span class="s2">"e61490ef-6a1c-4aa3-8c2f-788de8b1a900"</span>,<span class="s2">"operationName"</span>:<span class="s2">"starburst-presto.mp-starburst-public.appspot.com/report"</span>,<span class="s2">"startTime"</span>:<span class="s2">"2022-11-17T08:58:02Z"</span>,<span class="s2">"userLabels"</span>:<span class="o">{</span><span class="s2">"goog-ubb-agent-id"</span>:<span class="s2">"b69d9a75-56c8-4965-92ec-644346960142"</span><span class="o">}}]}</span>
   I1117 <span class="m">08</span>:58:02.499010       <span class="m">1</span> servicecontrol.go:112<span class="o">]</span> ServiceControlEndpoint:Send<span class="o">()</span>: success
</pre></div>
</div>
</section>
</section>
<section id="next-steps">
<h2 id="next-steps">Next steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<p>Review our Kubernetes configuration documentation:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../k8s/sep-configuration.html"><span class="doc">Starburst Enterprise</span></a></p></li>
<li><p><a class="reference internal" href="../../connector/hive-gcs-tutorial.html"><span class="doc">Hive Metastore (HMS)</span></a></p></li>
<li><p><a class="reference internal" href="../../k8s/ranger-configuration.html"><span class="doc">Ranger</span></a></p></li>
<li><p><a class="reference internal" href="../../k8s/cache-service-configuration.html"><span class="doc">Cache services</span></a></p></li>
</ul>
<p>The following pages introduce key concepts and features in SEP:</p>
<ul class="simple">
<li><p><a class="external reference" href="../../../introduction/data-sources-catalogs.html">Data sources and catalogs</a></p></li>
<li><p><a class="reference internal" href="../../catalogs.html"><span class="doc">Catalogs</span></a> and</p></li>
<li><p><a class="reference internal" href="../../connector/starburst-connectors.html"><span class="doc">Connectors</span></a></p></li>
<li><p><a class="reference internal" href="../../admin-topics/security.html"><span class="doc">Security</span></a></p></li>
<li><p><a class="reference internal" href="../../admin-topics/performance-tuning.html"><span class="doc">Performance</span></a></p></li>
</ul>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Email</button>
        <a onclick="skip()" class="feedback-skip">Cancel</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="gke.html" title="Google Kubernetes Engine deployments"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Google Kubernetes Engine deployments </span>
              </div>
            </a>
          
          
            <a href="../microsoft/index.html" title="Microsoft Azure"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Microsoft Azure </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 443-e.27 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2024<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/443-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/443-e/_static/searchbox.js" data-versions="{'Latest LTS (468-e)': '/468-e/', '462-e LTS': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', 'Latest STS (474-e)': '/474-e/', '472-e STS': '/472-e/'}"></script>
<script src="https://docs.starburst.io/443-e/_static/searchresults.js" data-versions="{'Latest LTS (468-e)': '/468-e/', '462-e LTS': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', 'Latest STS (474-e)': '/474-e/', '472-e STS': '/472-e/'}"></script>
  </body>
</html>