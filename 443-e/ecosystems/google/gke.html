

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Google Kubernetes Engine deployments &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sidebar.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/main.js"></script>
    <script src="../../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Starburst Enterprise in Google Cloud Marketplace" href="gcp-marketplace.html" />
    <link rel="prev" title="Google Cloud" href="index.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/ecosystems/google/gke.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#ecosystems/google/gke" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 443-e.13 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 443-e.13 LTS</a>
          <span class="md-header-nav__topic"> Google Kubernetes Engine deployments </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (453-e)" href="/453-e/">Latest LTS (453-e)</a>
      
          <a title="443-e LTS" href="/443-e/">443-e LTS</a>
      
          <a title="435-e LTS" href="/435-e/">435-e LTS</a>
      
          <a title="429-e LTS" href="/429-e/">429-e LTS</a>
      
          <a title="Latest STS (454-e)" href="/454-e/">Latest STS (454-e)</a>
      
          <a title="451-e LTS" href="/451-e/">451-e LTS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Google Cloud</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../index.html"
       title="Starburst Enterprise">Starburst Enterprise 443-e.13 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get-started/starburst-enterprise.html">What is Starburst Enterprise?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get-started/try/try-sep.html">Try Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learn/index.html">Learn Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">Product versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.starburst.io/support.html">Get support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optimizer.html">Query optimizer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../object-storage-connectors.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../non-object-storage-connectors.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connector/starburst-connectors.html">Starburst connectors feature matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-engineering/cost-and-performance/index.html">Monitor and manage cost and performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../aws/index.html">AWS ecosystem</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Google Cloud</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Google Kubernetes Engine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-started">Getting started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cluster-requirements">Cluster requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#networking">Networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deploying">Deploying</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-sep">Upgrading SEP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-global-access-control-with-apache-ranger">Enabling global access control with Apache Ranger</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-the-hive-metastore-service">Enabling the Hive Metastore Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deleting-a-deployment">Deleting a deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gcp-marketplace.html">Google Cloud Marketplace</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sep-on-google-kubernetes-engine-gke">SEP on Google Kubernetes Engine (GKE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sep-on-google-cloud-compute-engine">SEP on Google Cloud Compute Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#sep-on-google-cloud-marketplace">SEP on Google Cloud Marketplace</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#support-for-sep">Support for SEP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../develop.html">Trino developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#ecosystems-google-gke--page-root" class="md-nav__link">Google Kubernetes Engine deployments</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#introduction" class="md-nav__link">Introduction</a>
        </li>
        <li class="md-nav__item"><a href="#getting-started" class="md-nav__link">Getting started</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#cluster-requirements" class="md-nav__link">Cluster requirements</a>
        </li>
        <li class="md-nav__item"><a href="#networking" class="md-nav__link">Networking</a>
        </li>
        <li class="md-nav__item"><a href="#deploying" class="md-nav__link">Deploying</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#upgrading-sep" class="md-nav__link">Upgrading SEP</a>
        </li>
        <li class="md-nav__item"><a href="#enabling-global-access-control-with-apache-ranger" class="md-nav__link">Enabling global access control with Apache Ranger</a>
        </li>
        <li class="md-nav__item"><a href="#enabling-the-hive-metastore-service" class="md-nav__link">Enabling the Hive Metastore Service</a>
        </li>
        <li class="md-nav__item"><a href="#deleting-a-deployment" class="md-nav__link">Deleting a deployment</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="google-kubernetes-engine-deployments">
<h1 id="ecosystems-google-gke--page-root">Google Kubernetes Engine deployments<a class="headerlink" href="#ecosystems-google-gke--page-root" title="Permalink to this heading">#</a></h1>
<p>The <a class="reference external" href="https://cloud.google.com/kubernetes-engine">Google Kubernetes
Engine</a> (GKE), is certified to work
with Starburst Enterprise platform (SEP).</p>
<section id="introduction">
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>This user guide provides information on using Helm charts to deploy SEP in
Google Cloud - Kubernetes Applications. For more information about deploying on
Kubernetes, see our <a class="reference internal" href="../../k8s/requirements.html"><span class="doc">Kubernetes guide</span></a> with
customization guide, examples, and tips and the <a class="reference internal" href="../../k8s.html"><span class="doc">Kubernetes reference documentation</span></a>.</p>
<p>We recommend that you use Google Cloud’s Marketplace UI with <strong>Click to Deploy
on GKE</strong> to deploy. The command line <strong>Deploy via command line</strong> installation is
not supported.</p>
</section>
<section id="getting-started">
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h2>
<p>Setting up and deploying SEP to a Google Kubernetes Engine
cluster using Google Cloud is pretty straightforward.</p>
<p>You can get started by simply following the UI instructions in the
<a class="reference external" href="https://console.cloud.google.com/marketplace/details/starburst-public/starburst-presto">marketplace</a>.</p>
<section id="cluster-requirements">
<h3 id="cluster-requirements">Cluster requirements<a class="headerlink" href="#cluster-requirements" title="Permalink to this heading">#</a></h3>
<p>SEP can be deployed to an existing GKE cluster, or to a newly created one.
If using an existing GKE cluster, make sure it is configured with the
appropriate number and type of instances needed to deploy an SEP cluster.
Review the SEP <a class="reference internal" href="../../k8s/requirements.html"><span class="doc">requirements</span></a> to ensure that
you have sufficient resources. With insufficient resources available in the
cluster, the deployed pods may fail to be scheduled.</p>
<p>You can also choose to deploy a new cluster with minimal resources and default
configuration from the marketplace offering configuration page. After the
default SEP chart deploys successfully in this cluster, you must review the
cluster configuration before updating it and making any adjustments to ensure
that the cluster is sufficiently large.</p>
</section>
<section id="networking">
<h3 id="networking">Networking<a class="headerlink" href="#networking" title="Permalink to this heading">#</a></h3>
<p>When using GKE with a Google Cloud External Load Balancer,
<code class="docutils literal notranslate"><span class="pre">expose.ingress.path:</span></code> you must have a wildcarded path ending with <code class="docutils literal notranslate"><span class="pre">/\*</span></code> to
ensure that routing is not limited to a single URL. The <code class="docutils literal notranslate"><span class="pre">\*</span></code> character is the
only supported wildcard character. It must follow a forward slash <code class="docutils literal notranslate"><span class="pre">/</span></code> and must
be the last character in the pattern. See the <a class="reference external" href="https://cloud.google.com/load-balancing/docs/url-map">Google URL Maps
documentation</a>
for more information about path limitations and pattern matching in GKE.</p>
</section>
<section id="deploying">
<h3 id="deploying">Deploying<a class="headerlink" href="#deploying" title="Permalink to this heading">#</a></h3>
<p>The default values of the SEP configuration <a class="reference external" href="https://console.cloud.google.com/marketplace/details/starburst-public/starburst-presto">in the
UI</a>
work for most of the cases.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you are enabling global access control using Ranger, make sure you note down
the values of the admin and service user passwords you provide in the UI for
later use.</p>
</div>
<p>Once done, you can click on <strong>Deploy</strong> to install SEP in the cluster. You
can track the progress of the deployment in the <a class="reference external" href="https://console.cloud.google.com/kubernetes/application">applications
page</a>.</p>
<p>Once the application is successfully deployed, SEP is deployed using the
Helm charts. If you enable either or both of <a class="reference internal" href="../../k8s/ranger-configuration.html"><span class="doc">Ranger</span></a> and <a class="reference internal" href="../../k8s/hms-configuration.html"><span class="doc">Hive Metastore Service</span></a> these are also deployed. The deployment uses the
values you provide in the UI and some default values when deployed the first
time. If you want to upgrade or change the deployment configuration, you can
either use the <strong>Application info</strong> from the <a class="reference external" href="https://console.cloud.google.com/kubernetes/application">application
page</a> or the
following SEP upgrade instructions.</p>
</section>
</section>
<section id="upgrading-sep">
<h2 id="upgrading-sep">Upgrading SEP<a class="headerlink" href="#upgrading-sep" title="Permalink to this heading">#</a></h2>
<p>You can upgrade SEP using the <a class="exteranl reference external" href="https://cloud.google.com/kubernetes-engine/docs/quickstart#choosing_a_shell">cloud
shell</a>.</p>
<p>You need to download the Helm charts and extract them to modify the deployment,
as shown in the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TAG</span><span class="o">=</span><span class="m">2</span>.0.1
<span class="nb">export</span> <span class="nv">APP_INSTANCE_NAME</span><span class="o">=</span>&lt;name of the application instance&gt;
wget https://console.cloud.google.com/storage/browser/starburst-enterprise-presto/helmCharts/presto-gcp/starburst-enterprise-presto-charts-<span class="nv">$TAG</span>.tgz<span class="p">;</span>
tar -zxvf starburst-enterprise-presto-charts-<span class="nv">$TAG</span>.tgz<span class="p">;</span>
</pre></div>
</div>
<p>Now update the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> in the umbrella chart folder
(<code class="docutils literal notranslate"><span class="pre">starburst-enterprise-presto-charts-$TAG</span></code>) before you apply the manifest
file. Alternatively, you can use <code class="docutils literal notranslate"><span class="pre">--set</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">template</span></code>
command to update the chart configuration. The values set in <code class="docutils literal notranslate"><span class="pre">--set</span></code> takes
precedence over the ones set in <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code>.</p>
<p>Once you have the manifest created, apply (<code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">apply</span></code>) the file to update
the deployment.</p>
<p>More details about the SEP configuration are found in the <a class="reference internal" href="../../k8s/sep-configuration.html"><span class="doc">reference documentation</span></a>.</p>
<p>Make sure you have <a class="reference internal" href="../../k8s/sep-configuration.html"><span class="doc">usage metrics</span></a> enabled in
your SEP configuration. Our Google Cloud offering relies on the metrics and
if disabled, the deployment is terminated after 36 hours.</p>
<p>The minimum set of parameters required for the upgrade are shown below:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm template starburst-enterprise-presto-charts-<span class="nv">$TAG</span>/ <span class="se">\</span>
  --name-template<span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">"</span> <span class="se">\</span>
  --set deployerHelm.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/deployer:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">reportingSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">-reporting-secret"</span> <span class="se">\</span>
  --set image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto"</span> <span class="se">\</span>
  --set image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set initImage.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/presto-init"</span> <span class="se">\</span>
  --set initImage.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set metricsReporter.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/metrics_reporter:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">imageUbbagent</span><span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace-tools/metering/ubbagent:latest"</span> <span class="se">\</span>
  --set <span class="o">[</span>PUT OTHER CHART PARAMETERS YOU WANT TO UPDATE<span class="o">]</span> &gt; presto_manifest.yaml
</pre></div>
</div>
<p>The following example shows how to update the number of SEP workers:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm template starburst-enterprise-presto-charts-<span class="nv">$TAG</span>/ <span class="se">\</span>
  --name-template<span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">"</span> <span class="se">\</span>
  --set deployerHelm.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/deployer:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">reportingSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">-reporting-secret"</span> <span class="se">\</span>
  --set image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto"</span> <span class="se">\</span>
  --set image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set initImage.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/presto-init"</span> <span class="se">\</span>
  --set initImage.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set metricsReporter.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/metrics_reporter:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">imageUbbagent</span><span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace-tools/metering/ubbagent:latest"</span> <span class="se">\</span>
  --set worker.count &gt; presto_manifest.yaml
</pre></div>
</div>
<p>Configure <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to point at your cluster and then apply the configuration:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl apply -f presto_manifest.yaml
</pre></div>
</div>
</section>
<section id="enabling-global-access-control-with-apache-ranger">
<h2 id="enabling-global-access-control-with-apache-ranger">Enabling global access control with Apache Ranger<a class="headerlink" href="#enabling-global-access-control-with-apache-ranger" title="Permalink to this heading">#</a></h2>
<p>You can deploy or upgrade Ranger for <a class="reference internal" href="../../security/global-ranger.html"><span class="doc">global access control</span></a> by creating a manifest file with Ranger
parameters set.</p>
<p>You can either update the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> in the umbrella chart folder
<code class="docutils literal notranslate"><span class="pre">starburst-enterprise-presto-charts-$TAG</span></code> for the configuration
(<code class="docutils literal notranslate"><span class="pre">starburst-ranger</span></code>) prior to generating the manifest file or or use <code class="docutils literal notranslate"><span class="pre">--set</span></code>
parameter while creating the manifest file. The <code class="docutils literal notranslate"><span class="pre">--set</span></code> parameters must be
prefixed by <code class="docutils literal notranslate"><span class="pre">starburst-ranger</span></code>.</p>
<p>The complete reference of the chart configuration can be found in the
<a class="reference internal" href="../../k8s/ranger-configuration.html"><span class="doc">Ranger chart documentation</span></a>.</p>
<p>Example with Ranger enabled:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm template starburst-enterprise-presto-charts-<span class="nv">$TAG</span>/ <span class="se">\</span>
  --name-template<span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">"</span> <span class="se">\</span>
  --set deployerHelm.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/deployer:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">reportingSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">-reporting-secret"</span> <span class="se">\</span>
  --set image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto"</span> <span class="se">\</span>
  --set image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set initImage.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/presto-init"</span> <span class="se">\</span>
  --set initImage.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set metricsReporter.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/metrics_reporter:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">imageUbbagent</span><span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace-tools/metering/ubbagent:latest"</span> <span class="se">\</span>
  --set starburst-ranger.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
  --set <span class="o">[</span>PUT OTHER CHART PARAMETERS YOU WANT TO UPDATE<span class="o">]</span> &gt; presto_manifest.yaml
</pre></div>
</div>
</section>
<section id="enabling-the-hive-metastore-service">
<h2 id="enabling-the-hive-metastore-service">Enabling the Hive Metastore Service<a class="headerlink" href="#enabling-the-hive-metastore-service" title="Permalink to this heading">#</a></h2>
<p>Similar to Ranger, to deploy or upgrade the Hive Metastore Service (HMS)
provided by Starburst, generate a manifest file with Hive chart
parameters set. You can either use <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> (for <code class="docutils literal notranslate"><span class="pre">starburst-hive</span></code>) or
use the <code class="docutils literal notranslate"><span class="pre">--set</span></code> parameters. For Hive charts, the <code class="docutils literal notranslate"><span class="pre">--set</span></code> parameters must be
prefixed by <code class="docutils literal notranslate"><span class="pre">starburst-hive</span></code>.</p>
<p>The complete reference of the chart configuration for the metastore can be found
in the <a class="reference internal" href="../../k8s/hms-configuration.html"><span class="doc">HMS documentation</span></a>.</p>
<p>Example with HMS enabled:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm template starburst-enterprise-presto-charts-<span class="nv">$TAG</span>/ <span class="se">\</span>
  --name-template<span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">"</span> <span class="se">\</span>
  --set deployerHelm.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/deployer:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">reportingSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$APP_INSTANCE_NAME</span><span class="s2">-reporting-secret"</span> <span class="se">\</span>
  --set image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto"</span> <span class="se">\</span>
  --set image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set initImage.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/presto-init"</span> <span class="se">\</span>
  --set initImage.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set metricsReporter.image<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/metrics_reporter:</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set <span class="nv">imageUbbagent</span><span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace-tools/metering/ubbagent:latest"</span> <span class="se">\</span>
  --set starburst-hive.image.repository<span class="o">=</span><span class="s2">"gcr.io/cloud-marketplace/starburst-public/starburst-presto/hive"</span> <span class="se">\</span>
  --set starburst-hive.image.tag<span class="o">=</span><span class="s2">"</span><span class="nv">$TAG</span><span class="s2">"</span> <span class="se">\</span>
  --set starburst-hive.enabled<span class="o">=</span><span class="nb">true</span> &gt; presto_manifest.yaml
</pre></div>
</div>
<p>Configure <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to point at your cluster and then apply the configuration:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl apply -f presto_manifest.yaml
</pre></div>
</div>
</section>
<section id="deleting-a-deployment">
<h2 id="deleting-a-deployment">Deleting a deployment<a class="headerlink" href="#deleting-a-deployment" title="Permalink to this heading">#</a></h2>
<p>To delete a GKE deployment, run the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl delete -f presto_manifest.yaml
</pre></div>
</div>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Email</button>
        <a onclick="skip()" class="feedback-skip">Cancel</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="index.html" title="Google Cloud"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Google Cloud </span>
              </div>
            </a>
          
          
            <a href="gcp-marketplace.html" title="Starburst Enterprise in Google Cloud Marketplace"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Starburst Enterprise in Google Cloud Marketplace </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 443-e.13 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2024<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/443-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/443-e/_static/searchbox.js" data-versions="{'Latest LTS (453-e)': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', '429-e LTS': '/429-e/', 'Latest STS (454-e)': '/454-e/', '451-e LTS': '/451-e/'}"></script>
<script src="https://docs.starburst.io/443-e/_static/searchresults.js" data-versions="{'Latest LTS (453-e)': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', '429-e LTS': '/429-e/', 'Latest STS (454-e)': '/454-e/', '451-e LTS': '/451-e/'}"></script>
  </body>
</html>