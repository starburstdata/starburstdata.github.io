

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../../../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', 'G-CY10FQPGJS', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>EKS cluster creation &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sidebar.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/main.js"></script>
    <script src="../../../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Prepare to install Starburst Enterprise in EKS" href="sep.html" />
    <link rel="prev" title="Configure IAM in EKS clusters" href="iam.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/ecosystems/aws/eks/cluster-creation.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#ecosystems/aws/eks/cluster-creation" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../../../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 453-e.2 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 453-e.2 LTS</a>
          <span class="md-header-nav__topic"> EKS cluster creation </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (453-e)" href="/453-e/">Latest LTS (453-e)</a>
      
          <a title="443-e LTS" href="/443-e/">443-e LTS</a>
      
          <a title="435-e LTS" href="/435-e/">435-e LTS</a>
      
          <a title="429-e LTS" href="/429-e/">429-e LTS</a>
      
          <a title="Latest STS (451-e)" href="/451-e/">Latest STS (451-e)</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Amazon AWS</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Amazon EKS overview</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../../../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../../index.html"
       title="Starburst Enterprise">Starburst Enterprise 453-e.2 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../get-started/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../get-started/starburst-enterprise.html">What is Starburst Enterprise?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../get-started/try/try-sep.html">Try Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../learn/index.html">Learn Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../versions.html">Product versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.starburst.io/support.html">Get support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../object-storage.html">Object storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../optimizer.html">Query optimizer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../object-storage-connectors.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../non-object-storage-connectors.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../connector/starburst-connectors.html">Starburst connectors feature matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data-engineering/cost-and-performance/index.html">Monitor and manage cost and performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">AWS ecosystem</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#starburst-enterprise">Starburst Enterprise</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../marketplace/index.html">AWS Marketplace for CFT and EKS users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cft/index.html">AWS CFT</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">AWS EKS</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="networking.html">EKS networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="iam.html">Configuring IAM in EKS</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Cluster creation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l5"><a class="reference internal" href="#create-your-sep-eks-cluster-yaml-file">Create your <code class="docutils literal notranslate"><span class="pre">sep_eks_cluster.yaml</span></code> file</a></li>
<li class="toctree-l5"><a class="reference internal" href="#specify-your-networking">Specify your networking</a></li>
<li class="toctree-l5"><a class="reference internal" href="#create-your-eks-managednodegroups">Create your EKS <code class="docutils literal notranslate"><span class="pre">managedNodeGroups:</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="#spot-instances">Spot instances</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#save-your-file-and-create-your-cluster">Save your file and create your cluster</a></li>
<li class="toctree-l5"><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="sep.html">Intalling EKS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#sep-on-amazon-eks">SEP on Amazon EKS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#sep-on-amazon-ec2">SEP on Amazon EC2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#support-for-sep">Support for SEP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../google/index.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../develop.html">Trino developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#ecosystems-aws-eks-cluster-creation--page-root" class="md-nav__link">EKS cluster creation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#prerequisites" class="md-nav__link">Prerequisites</a>
        </li>
        <li class="md-nav__item"><a href="#create-your-sep-eks-cluster-yaml-file" class="md-nav__link">Create your <code class="docutils literal notranslate"><span class="pre">sep_eks_cluster.yaml</span></code> file</a>
        </li>
        <li class="md-nav__item"><a href="#specify-your-networking" class="md-nav__link">Specify your networking</a>
        </li>
        <li class="md-nav__item"><a href="#create-your-eks-managednodegroups" class="md-nav__link">Create your EKS <code class="docutils literal notranslate"><span class="pre">managedNodeGroups:</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#spot-instances" class="md-nav__link">Spot instances</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#save-your-file-and-create-your-cluster" class="md-nav__link">Save your file and create your cluster</a>
        </li>
        <li class="md-nav__item"><a href="#next-steps" class="md-nav__link">Next steps</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="eks-cluster-creation">
<h1 id="ecosystems-aws-eks-cluster-creation--page-root">EKS cluster creation<a class="headerlink" href="#ecosystems-aws-eks-cluster-creation--page-root" title="Permalink to this heading">#</a></h1>
<p>This topic covers creating and networking the cluster where
Starburst Enterprise platform (SEP) is installed to ensure that all
SEP resources are co-located and follow best practices.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This topic assumes that you have read and have a working knowledge of the
following topics:<br/><br/></p>
<ul class="simple">
<li><p>AWS EKS <a class="reference internal" href="networking.html"><span class="doc">networking best practices</span></a> for SEP <br/></p></li>
<li><p><a class="reference internal" href="iam.html"><span class="doc">Configuring IAM</span></a> for in EKS <br/></p></li>
</ul>
</div>
<p>After your cluster is created as described in this topic, you are ready to begin
installing SEP.</p>
<section id="prerequisites">
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">#</a></h2>
<p>The following tools, policies, and certificates are required to create an
SEP cluster in EKS:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">helm</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kubectl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eksctl</span></code> version 0.54.0 or later</p></li>
<li><p>IAM Polices for Glue, S3, as desired</p></li>
<li><p>CA-signed certificate for HTTPS/TLS (e.g., <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">starburst.example.com</span></code>)
if using AD/LDAP authentication</p></li>
</ul>
<p>The following example IAM add-on policies must be present for each node group:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">managedNodeGroups</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SEP-MANAGED-NODE-GROUP-EXAMPLE</span>
    <span class="nt">iam</span><span class="p">:</span>
      <span class="nt">withAddonPolicies</span><span class="p">:</span>
        <span class="nt">externalDNS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">albIngress</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>SEP has specific requirements for sizing, placement, and sharing of resources.
You must ensure that your EKS cluster meets all requirements described in our
<a class="reference internal" href="../../../k8s/requirements.html#k8s-cluster-requirements"><span class="std std-ref">cluster requirements section</span></a>. In addition, you
must use only EC2-based instance types.</p>
</div>
</section>
<section id="create-your-sep-eks-cluster-yaml-file">
<h2 id="create-your-sep-eks-cluster-yaml-file">Create your <code class="docutils literal notranslate"><span class="pre">sep_eks_cluster.yaml</span></code> file<a class="headerlink" href="#create-your-sep-eks-cluster-yaml-file" title="Permalink to this heading">#</a></h2>
<p>Your YAML file should start with the following two lines:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eksctl.io/v1alpha5</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ClusterConfig</span>
</pre></div>
</div>
<p>Next, add the <code class="docutils literal notranslate"><span class="pre">metadata:</span></code> section to describe your cluster. The following
example shows the minimum required fields, as well as suggested tags for a
staging cluster running in <code class="docutils literal notranslate"><span class="pre">us-east-2</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-sep-cluster</span>
  <span class="nt">region</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">us-east-2</span>
  <span class="nt">version</span><span class="p">:</span> <span class="s">"VERSION_NUMBER"</span>
  <span class="nt">tags</span><span class="p">:</span>
    <span class="nt">cloud</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws</span>
    <span class="nt">environment</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staging</span>
    <span class="nt">info</span><span class="p">:</span> <span class="s">"EKS</span><span class="nv"> </span><span class="s">cluster</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">Starburst</span><span class="nv"> </span><span class="s">Enterprise</span><span class="nv"> </span><span class="s">staging</span><span class="nv"> </span><span class="s">environment"</span>
    <span class="nt">user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">USER_NAME</span>
</pre></div>
</div>
<p>Replace the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">VERSION_NUMBER</span></code> with the correct <code class="docutils literal notranslate"><span class="pre">eksctl</span></code> version number.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">USER_NAME</span></code> with the name of your <code class="docutils literal notranslate"><span class="pre">user</span></code> tag.</p></li>
</ul>
</section>
<section id="specify-your-networking">
<h2 id="specify-your-networking">Specify your networking<a class="headerlink" href="#specify-your-networking" title="Permalink to this heading">#</a></h2>
<p>Add the two required AZs, and the existing subnets associated with them:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">vpc</span><span class="p">:</span>
  <span class="nt">subnets</span><span class="p">:</span>
     <span class="nt">private</span><span class="p">:</span>
       <span class="nt">us-east-2a</span><span class="p">:</span>
         <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">subnet-0Subnet1ID8String2</span>
       <span class="nt">us-east-2b</span><span class="p">:</span>
         <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">subnet-0Subnet0ID2String3</span>
</pre></div>
</div>
<p>For purposes of this example, we set up SEP in the <code class="docutils literal notranslate"><span class="pre">us-east-2a</span></code> AZ. While
AWS EKS does require two AZs to be defined, best practice is to use only one of
the two to set up your managed node group for SEP.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>AWS requires EKS clusters to have a minimum of two availability zones (AZs), but
SEP best practices requires that the coordinator and workers reside in a single
AZ in a single subnet.</p>
</div>
<p>Continue configuring your DNS and ingress access as determined in the EKS
networking guide.</p>
</section>
<section id="create-your-eks-managednodegroups">
<h2 id="create-your-eks-managednodegroups">Create your EKS <code class="docutils literal notranslate"><span class="pre">managedNodeGroups:</span></code><a class="headerlink" href="#create-your-eks-managednodegroups" title="Permalink to this heading">#</a></h2>
<p>Starburst recommends using <code class="docutils literal notranslate"><span class="pre">managedNodeGroups:</span></code> to create the pools of instances
available to SEP and its associated services. <code class="docutils literal notranslate"><span class="pre">managedNodeGroups:</span></code> in EKS
have the additional benefit of automating SIGTERM delivery to SEP workers
and the coordinator when a Spot instance is removed to enable graceful shutdown.
With <code class="docutils literal notranslate"><span class="pre">nodeGroups:</span></code> additional development must be done, outside of SEP, to
allow for graceful shutdown.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The interruption mechanism of Spot instances can cause query failures. Review
the <a class="reference internal" href="#eks-spot-instances"><span class="std std-ref">Spot instances guidance</span></a> before deploying.</p>
</div>
<p>In this example, a managed node group called
<code class="docutils literal notranslate"><span class="pre">SEP-SERVICES-MANAGED-NODE-GROUP-EXAMPLE</span></code> is created alongside the <code class="docutils literal notranslate"><span class="pre">coordinator</span></code>
and <code class="docutils literal notranslate"><span class="pre">worker</span></code> managed node groups. This managed node group runs the HMS and
Ranger services, if they are required in your environment.</p>
<p>The coordinator is required for a functioning SEP cluster, and SEP
architecture only allows for one coordinator at a time. You must ensure that
resource availability is maximized. This can be done in two ways:</p>
<ul class="simple">
<li><p><strong>Create a separate node group for the coordinator with two or more instances
on cold standby.</strong> In the case that the instance the coordinator is running on
goes down, having two or more instances allows the coordinator pod to be
restarted on the unaffected instance.</p></li>
<li><p><strong>Define a priority class for the coordinator.</strong> This allows the cluster to
eject a worker pod and start on that machine without waiting for a new node to
start if the coordinator’s instance of the same size is lost. The worker’s
termination grace period, which is five minutes by default, is still
respected.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>AWS best practices typically recommend creating a cluster with three node
groups, each in a different availability zone (AZ) to tolerate the loss of an
AZ. This approach comes with significant performance and cost penalties for SEP,
as internode traffic crosses availability zones. We <strong>strongly recommend</strong> all
node groups remain within the same AZ, with failure tolerance handled by using
multiple clusters.</p>
</div>
<p>EKS requires the first three IAM policy ARNs shown in the following example for
both node groups. The fourth policy ARN for Glue illustrates using an additional
policy to allow access to EKS, S3, and Glue in the account used for the EKS
cluster without supplying credentials. It is not required.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must repeat all tags specified in the
metadata tags in both entries in <code class="docutils literal notranslate"><span class="pre">managedNodeGroups:</span></code>.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">managedNodeGroups</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">coordinator</span>
    <span class="nt">tags</span><span class="p">:</span>
      <span class="nt">cloud</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws</span>
      <span class="nt">environment</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staging</span>
      <span class="nt">info</span><span class="p">:</span> <span class="s">"EKS</span><span class="nv"> </span><span class="s">cluster</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">Starburst</span><span class="nv"> </span><span class="s">Enterprise</span><span class="nv"> </span><span class="s">staging</span><span class="nv"> </span><span class="s">environment"</span>
      <span class="nt">user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">USER_NAME</span>
    <span class="c1"># Ensure all mangedNode groups have the same availabiityZone set.</span>
    <span class="nt">availabilityZones</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">us-east-2a</span><span class="p p-Indicator">]</span>
    <span class="nt">labels</span><span class="p">:</span>
      <span class="nt">allow</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">coordinator</span>
    <span class="c1"># It is recommended to not use spot instances for the coordinator.</span>
    <span class="nt">spot</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="nt">instanceType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">m5.8xlarge</span>
    <span class="nt">desiredCapacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">minSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">maxSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">privateNetworking</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="c1"># The following ssh key section is optional and can be removed if not desired.</span>
    <span class="c1"># It allows you to ssh directly to the EKS workers.</span>
    <span class="nt">ssh</span><span class="p">:</span>
      <span class="nt">allow</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">publicKeyName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PUBLIC_KEY_NAME</span>
    <span class="nt">iam</span><span class="p">:</span>
      <span class="nt">attachPolicyARNs</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy</span>
        <span class="c1"># The following policy is optional and can be removed if not desired.</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam:</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">POLICY_ID</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">workers</span>
    <span class="nt">tags</span><span class="p">:</span>
      <span class="nt">cloud</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws</span>
      <span class="nt">environment</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staging</span>
      <span class="nt">info</span><span class="p">:</span> <span class="s">"EKS</span><span class="nv"> </span><span class="s">cluster</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">Starburst</span><span class="nv"> </span><span class="s">Enterprise</span><span class="nv"> </span><span class="s">staging</span><span class="nv"> </span><span class="s">environment"</span>
      <span class="nt">user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">USER_NAME</span>
    <span class="c1"># Ensure all mangedNode groups have the same availabiityZone set.</span>
    <span class="nt">availabilityZones</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">us-east-2a</span><span class="p p-Indicator">]</span>
    <span class="nt">labels</span><span class="p">:</span>
      <span class="nt">allow</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">workers</span>
    <span class="nt">spot</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="nt">instanceType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">m5.8xlarge</span>
    <span class="c1"># If spot instances are desired then comment out or remove the two lines above.</span>
    <span class="c1"># Then remove the comments from below.</span>
    <span class="c1">#spot: true</span>
    <span class="c1">#instanceTypes: ["m5.8xlarge", "m5a.8xlarge", "m5ad.8xlarge"]</span>
    <span class="c1">#</span>
    <span class="c1"># The following can be adjusted to the desired number of workers for your environment.</span>
    <span class="nt">desiredCapacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">minSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">maxSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
    <span class="nt">privateNetworking</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="c1"># The following ssh key section is optional and can be removed if not desired.</span>
    <span class="c1"># It allows you to ssh directly to the EKS workers.</span>
    <span class="nt">ssh</span><span class="p">:</span>
      <span class="nt">allow</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">publicKeyName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PUBLIC_KEY_NAME</span>
    <span class="nt">iam</span><span class="p">:</span>
      <span class="nt">attachPolicyARNs</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy</span>
        <span class="c1"># The following policy is optional and can be removed if not desired.</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam:</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">POLICY_ID</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SEP-SERVICES-MANAGED-NODE-GROUP-EXAMPLE</span>
    <span class="nt">tags</span><span class="p">:</span>
      <span class="nt">cloud</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aws</span>
      <span class="nt">environment</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staging</span>
      <span class="nt">info</span><span class="p">:</span> <span class="s">"EKS</span><span class="nv"> </span><span class="s">cluster</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">Starburst</span><span class="nv"> </span><span class="s">Enterprise</span><span class="nv"> </span><span class="s">staging</span><span class="nv"> </span><span class="s">environment"</span>
      <span class="nt">user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">USER_NAME</span>
    <span class="c1"># Ensure all mangedNode groups have the same availabiityZone set.</span>
    <span class="nt">availabilityZones</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">us-east-2a</span><span class="p p-Indicator">]</span>
    <span class="nt">labels</span><span class="p">:</span>
      <span class="nt">allow</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">support</span>
    <span class="nt">spot</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="nt">instanceType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">m5.xlarge</span>
    <span class="c1"># If spot instances are desired then comment out or remove the two lines above.</span>
    <span class="c1"># Then remove the comments from below.</span>
    <span class="c1">#spot: true</span>
    <span class="c1">#instanceTypes: ["m5.xlarge", "m5a.xlarge", "m5ad.xlarge"]</span>
    <span class="nt">desiredCapacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">minSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">maxSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">privateNetworking</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="c1"># The following ssh key section is optional and can be removed if not desired.</span>
    <span class="c1"># It allows you to ssh directly to the EKS workers.</span>
    <span class="nt">ssh</span><span class="p">:</span>
      <span class="nt">allow</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">publicKeyName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PUBLIC_KEY_NAME</span>
    <span class="nt">iam</span><span class="p">:</span>
      <span class="nt">attachPolicyARNs</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy</span>
        <span class="c1"># The following policy is optional and can be removed if not desired.</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">arn:aws:iam:</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">POLICY_ID</span>
</pre></div>
</div>
<p>Replace the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">USER_NAME</span></code> with the name of your <code class="docutils literal notranslate"><span class="pre">user</span></code> tag.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PUBLIC_KEY_NAME</span></code> with the name of your public <code class="docutils literal notranslate"><span class="pre">ssh</span></code> key.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">POLICY_ID</span></code> with the IAM policy id.</p></li>
</ul>
<section id="spot-instances">
<span id="eks-spot-instances"></span><h3 id="spot-instances">Spot instances<a class="headerlink" href="#spot-instances" title="Permalink to this heading">#</a></h3>
<p>AWS EC2 Spot is a cost optimization and scaling tool that allows you to deploy
resources on <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-spot-instances.html">Spot
Instances</a>,
with the caveat that they can be recalled by the EC2 platform at any time.
Because of how SEP drives performance by dividing query processing for any
single query, sudden removal of an expected resource can cause failures.
Further, when using a single AZ, Spot instance rebalancing is diminished, as
pools in only the single AZ are available to it.</p>
<p>To use Spot instances for the SEP workers, create a third node group to
contain them, separating the non-Spot coordinator node group from the Spot
worker node group. The remaining node group contains support services as before.</p>
<p>If you decide to use Spot instances for your SEP deployment, review the AWS
<a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-best-practices.html">best practices for EC2
Spot</a>.
SEP can be deployed in autoscaling groups of Spot instances with any of the
following Allocation Strategies:</p>
<ul class="simple">
<li><p>General Purpose</p></li>
<li><p>Memory Optimized</p></li>
<li><p>Compute Optimized</p></li>
</ul>
<p>Best practice for SEP with Spot is to utilize <code class="docutils literal notranslate"><span class="pre">m5.xlarge</span></code> or smaller
instances to reduce the likelihood of query failure from a worker going down. To
enable Spot instances for a node group, update your configuration YAML with the
desired instance sizes and add <code class="docutils literal notranslate"><span class="pre">spot:</span> <span class="pre">true</span></code> to the <code class="docutils literal notranslate"><span class="pre">managedNodeGroups</span></code> entry:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">managedNodeGroups</span><span class="p">:</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SEP-MANAGED-NODE-GROUP-EXAMPLE</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="nt">instanceTypes</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">"m5.xlarge"</span><span class="p p-Indicator">,</span> <span class="s">"m5a.xlarge"</span><span class="p p-Indicator">,</span> <span class="s">"m5ad.xlarge"</span><span class="p p-Indicator">]</span>
    <span class="nt">spot</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>The appropriate strategy for your deployment may differ based on workload
requirements. Consult Starburst Support for guidance on which strategy is best for
you.</p>
</section>
</section>
<section id="save-your-file-and-create-your-cluster">
<h2 id="save-your-file-and-create-your-cluster">Save your file and create your cluster<a class="headerlink" href="#save-your-file-and-create-your-cluster" title="Permalink to this heading">#</a></h2>
<p>When you are finished adding the required content to your <code class="docutils literal notranslate"><span class="pre">sep_eks_cluster.yaml</span></code>
file, save it and use it to create your cluster with <code class="docutils literal notranslate"><span class="pre">eksctl</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ eksctl create cluster -f sep_eks_cluster.yaml
</pre></div>
</div>
<p>When the command completes successfully, the following message appears in your
terminal:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="m">2021</span>-07-14 <span class="m">14</span>:28:56 <span class="o">[</span>✓<span class="o">]</span> EKS cluster <span class="s2">"my-sep-cluster"</span> in <span class="s2">"us-east-2"</span> region is ready
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you get an error about not being able to deploy
Kubernetes 1.20, ensure you are running <code class="docutils literal notranslate"><span class="pre">eksctl</span></code> version 0.54.0 or later.</p>
</div>
</section>
<section id="next-steps">
<h2 id="next-steps">Next steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Consider enabling <a class="reference internal" href="../../../data-engineering/cost-and-performance/autoscaling.html"><span class="doc">autoscaling</span></a>.
This is not a requirement, and you can review that topic at any time, even
after installation.</p></li>
<li><p><a class="reference internal" href="sep.html"><span class="doc">Prepare to install</span></a>.</p></li>
</ul>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Email</button>
        <a onclick="skip()" class="feedback-skip">Cancel</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="iam.html" title="Configure IAM in EKS clusters"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Configure IAM in EKS clusters </span>
              </div>
            </a>
          
          
            <a href="sep.html" title="Prepare to install Starburst Enterprise in EKS"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Prepare to install Starburst Enterprise in EKS </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../../../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 453-e.2 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2024<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/latest/_static/algolia.js"></script>
<script src="https://docs.starburst.io/latest/_static/searchbox.js" data-versions="{'Latest LTS (453-e)': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', '429-e LTS': '/429-e/', 'Latest STS (451-e)': '/451-e/'}"></script>
<script src="https://docs.starburst.io/latest/_static/searchresults.js" data-versions="{'Latest LTS (453-e)': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', '429-e LTS': '/429-e/', 'Latest STS (451-e)': '/451-e/'}"></script>
  </body>
</html>