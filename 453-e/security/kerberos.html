

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', 'G-CY10FQPGJS', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Kerberos authentication &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sidebar.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Certificate authentication" href="certificate.html" />
    <link rel="prev" title="Okta authentication" href="okta-authentication.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/security/kerberos.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/kerberos" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 453-e.22 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 453-e.22 LTS</a>
          <span class="md-header-nav__topic"> Kerberos authentication </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (474-e)" href="/474-e/">Latest LTS (474-e)</a>
      
          <a title="468-e LTS" href="/468-e/">468-e LTS</a>
      
          <a title="462-e LTS" href="/462-e/">462-e LTS</a>
      
          <a title="453-e LTS" href="/453-e/">453-e LTS</a>
      
          <a title="Latest STS (475-e)" href="/475-e/">Latest STS (475-e)</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
          <li class="md-tabs__item"><a href="authentication-types.html" class="md-tabs__link">Authentication types</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 453-e.22 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get-started/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get-started/starburst-enterprise.html">What is Starburst Enterprise?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get-started/try/try-sep.html">Try Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learn/index.html">Learn Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Product versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.starburst.io/support.html">Get support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">Query optimizer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage-connectors.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../non-object-storage-connectors.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/starburst-connectors.html">Starburst connectors feature matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/cost-and-performance/index.html">Monitor and manage cost and performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../security.html">Security</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Security overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../security.html#security-topic-areas">Security topic areas</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../security.html#built-in-access-control">Built-in access control</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../security.html#user-authentication-and-client-security">User authentication and client security</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="authentication-types.html">Authentication types</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="password-file.html">Password files</a></li>
<li class="toctree-l5"><a class="reference internal" href="ldap.html">LDAP</a></li>
<li class="toctree-l5"><a class="reference internal" href="ldap-group-provider.html">LDAP group provider</a></li>
<li class="toctree-l5"><a class="reference internal" href="scim-provisioning.html">SCIM user and group synchronization</a></li>
<li class="toctree-l5"><a class="reference internal" href="salesforce.html">Salesforce</a></li>
<li class="toctree-l5"><a class="reference internal" href="oauth2.html">OAuth2 over HTTPS</a></li>
<li class="toctree-l5"><a class="reference internal" href="oauth2-providers.html">OAuth2 providers</a></li>
<li class="toctree-l5"><a class="reference internal" href="saml.html">SAML 2.0 over HTTPS</a></li>
<li class="toctree-l5"><a class="reference internal" href="okta-authentication.html">Okta</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">Kerberos</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#environment-configuration">Environment configuration</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#kerberos-services">Kerberos services</a></li>
<li class="toctree-l7"><a class="reference internal" href="#mit-kerberos-configuration">MIT Kerberos configuration</a></li>
<li class="toctree-l7"><a class="reference internal" href="#kerberos-principals-and-keytab-files">Kerberos principals and keytab files</a></li>
<li class="toctree-l7"><a class="reference internal" href="#configuration-for-tls">Configuration for TLS</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#system-access-control-plugin">System access control plugin</a></li>
<li class="toctree-l6"><a class="reference internal" href="#trino-coordinator-node-configuration">Trino coordinator node configuration</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#config-properties">config.properties</a></li>
<li class="toctree-l7"><a class="reference internal" href="#access-control-properties">access-control.properties</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#user-mapping">User mapping</a></li>
<li class="toctree-l6"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#kerberos-verification">Kerberos verification</a></li>
<li class="toctree-l7"><a class="reference internal" href="#java-keystore-file-verification">Java keystore file verification</a></li>
<li class="toctree-l7"><a class="reference internal" href="#additional-kerberos-debugging-information">Additional Kerberos debugging information</a></li>
<li class="toctree-l7"><a class="reference internal" href="#additional-resources">Additional resources</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="certificate.html">Certificate</a></li>
<li class="toctree-l5"><a class="reference internal" href="jwt.html">JWT</a></li>
<li class="toctree-l5"><a class="reference internal" href="../develop/header-authenticator.html">Header</a></li>
<li class="toctree-l5"><a class="reference internal" href="password-passthrough.html">Password pass-through</a></li>
<li class="toctree-l5"><a class="reference internal" href="oauth2-passthrough.html">OAuth 2.0 token pass-through</a></li>
<li class="toctree-l5"><a class="reference internal" href="kerberos-passthrough.html">Kerberos credential pass-through</a></li>
<li class="toctree-l5"><a class="reference internal" href="authentication-types.html#multiple-authentication-types">Multiple authentication types</a></li>
<li class="toctree-l5"><a class="reference internal" href="authentication-types.html#multiple-password-authenticators">Multiple password authenticators</a></li>
<li class="toctree-l5"><a class="reference internal" href="authentication-types.html#multiple-header-authenticators">Multiple header authenticators</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../security.html#cluster-security">Cluster security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security.html#third-party-access-control">Third-party access control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security.html#miscellaneous-security-options">Miscellaneous security options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/aws/index.html">AWS ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/google/index.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Trino developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-kerberos--page-root" class="md-nav__link">Kerberos authentication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#environment-configuration" class="md-nav__link">Environment configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#kerberos-services" class="md-nav__link">Kerberos services</a>
        </li>
        <li class="md-nav__item"><a href="#mit-kerberos-configuration" class="md-nav__link">MIT Kerberos configuration</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-principals-and-keytab-files" class="md-nav__link">Kerberos principals and keytab files</a>
        </li>
        <li class="md-nav__item"><a href="#configuration-for-tls" class="md-nav__link">Configuration for TLS</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#system-access-control-plugin" class="md-nav__link">System access control plugin</a>
        </li>
        <li class="md-nav__item"><a href="#trino-coordinator-node-configuration" class="md-nav__link">Trino coordinator node configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#config-properties" class="md-nav__link">config.properties</a>
        </li>
        <li class="md-nav__item"><a href="#access-control-properties" class="md-nav__link">access-control.properties</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#user-mapping" class="md-nav__link">User mapping</a>
        </li>
        <li class="md-nav__item"><a href="#troubleshooting" class="md-nav__link">Troubleshooting</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#kerberos-verification" class="md-nav__link">Kerberos verification</a>
        </li>
        <li class="md-nav__item"><a href="#java-keystore-file-verification" class="md-nav__link">Java keystore file verification</a>
        </li>
        <li class="md-nav__item"><a href="#additional-kerberos-debugging-information" class="md-nav__link">Additional Kerberos debugging information</a>
        </li>
        <li class="md-nav__item"><a href="#additional-resources" class="md-nav__link">Additional resources</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="kerberos-authentication">
<h1 id="security-kerberos--page-root">Kerberos authentication<a class="headerlink" href="#security-kerberos--page-root" title="Permalink to this heading">#</a></h1>
<p>Trino can be configured to enable Kerberos authentication over HTTPS for
clients, such as the <a class="reference internal" href="../client/cli.html"><span class="doc">Trino CLI</span></a>, or the JDBC and ODBC
drivers.</p>
<p>To enable Kerberos authentication for Trino, Kerberos-related configuration
changes are made on the Trino coordinator.</p>
<p>Using <a class="reference internal" href="tls.html"><span class="doc">TLS</span></a> and <a class="reference internal" href="internal-communication.html"><span class="doc">a configured shared secret</span></a> is required for Kerberos authentication.</p>
<section id="environment-configuration">
<h2 id="environment-configuration">Environment configuration<a class="headerlink" href="#environment-configuration" title="Permalink to this heading">#</a></h2>
<section id="kerberos-services">
<span id="server-kerberos-services"></span><h3 id="kerberos-services">Kerberos services<a class="headerlink" href="#kerberos-services" title="Permalink to this heading">#</a></h3>
<p>You will need a Kerberos <abbr title="Key Distribution Center">KDC</abbr> running on a
node that the Trino coordinator can reach over the network. The KDC is
responsible for authenticating principals and issuing session keys that can be
used with Kerberos-enabled services. KDCs typically run on port 88, which is
the IANA-assigned port for Kerberos.</p>
</section>
<section id="mit-kerberos-configuration">
<span id="server-kerberos-configuration"></span><h3 id="mit-kerberos-configuration">MIT Kerberos configuration<a class="headerlink" href="#mit-kerberos-configuration" title="Permalink to this heading">#</a></h3>
<p>Kerberos needs to be configured on the Trino coordinator. At a minimum, there needs
to be a <code class="docutils literal notranslate"><span class="pre">kdc</span></code> entry in the <code class="docutils literal notranslate"><span class="pre">[realms]</span></code> section of the <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code>
file. You may also want to include an <code class="docutils literal notranslate"><span class="pre">admin_server</span></code> entry and ensure that
the Trino coordinator can reach the Kerberos admin server on port 749.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[realms]
  TRINO.EXAMPLE.COM = {
    kdc = kdc.example.com
    admin_server = kdc.example.com
  }

[domain_realm]
  .trino.example.com = TRINO.EXAMPLE.COM
  trino.example.com = TRINO.EXAMPLE.COM
</pre></div>
</div>
<p>The complete <a class="reference external" href="http://web.mit.edu/kerberos/krb5-latest/doc/admin/conf_files/kdc_conf.html">documentation</a>
for <code class="docutils literal notranslate"><span class="pre">krb5.conf</span></code> is hosted by the MIT Kerberos Project. If you are using a
different implementation of the Kerberos protocol, you will need to adapt the
configuration to your environment.</p>
</section>
<section id="kerberos-principals-and-keytab-files">
<span id="server-kerberos-principals"></span><h3 id="kerberos-principals-and-keytab-files">Kerberos principals and keytab files<a class="headerlink" href="#kerberos-principals-and-keytab-files" title="Permalink to this heading">#</a></h3>
<p>The Trino coordinator needs a Kerberos principal, as do users who are going to
connect to the Trino coordinator. You need to create these users in Kerberos
using <a class="reference external" href="http://web.mit.edu/kerberos/krb5-latest/doc/admin/admin_commands/kadmin_local.html">kadmin</a>.</p>
<p>In addition, the Trino coordinator needs a <a class="reference external" href="http://web.mit.edu/kerberos/krb5-devel/doc/basic/keytab_def.html">keytab file</a>. After you
create the principal, you can create the keytab file using <strong class="command">kadmin</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>kadmin
&gt; addprinc -randkey trino@EXAMPLE.COM
&gt; addprinc -randkey trino/trino-coordinator.example.com@EXAMPLE.COM
&gt; ktadd -k /etc/trino/trino.keytab trino@EXAMPLE.COM
&gt; ktadd -k /etc/trino/trino.keytab trino/trino-coordinator.example.com@EXAMPLE.COM
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running <strong class="command">ktadd</strong> randomizes the principal’s keys. If you have just
created the principal, this does not matter. If the principal already exists,
and if existing users or services rely on being able to authenticate using a
password or a keytab, use the <code class="docutils literal notranslate"><span class="pre">-norandkey</span></code> option to <strong class="command">ktadd</strong>.</p>
</div>
</section>
<section id="configuration-for-tls">
<h3 id="configuration-for-tls">Configuration for TLS<a class="headerlink" href="#configuration-for-tls" title="Permalink to this heading">#</a></h3>
<p>When using Kerberos authentication, access to the Trino coordinator must be
through <a class="reference internal" href="tls.html"><span class="doc">TLS and HTTPS</span></a>.</p>
</section>
</section>
<section id="system-access-control-plugin">
<h2 id="system-access-control-plugin">System access control plugin<a class="headerlink" href="#system-access-control-plugin" title="Permalink to this heading">#</a></h2>
<p>A Trino coordinator with Kerberos enabled probably needs a
<a class="reference internal" href="../develop/system-access-control.html"><span class="doc">System access control</span></a> plugin to achieve the desired level of
security.</p>
</section>
<section id="trino-coordinator-node-configuration">
<h2 id="trino-coordinator-node-configuration">Trino coordinator node configuration<a class="headerlink" href="#trino-coordinator-node-configuration" title="Permalink to this heading">#</a></h2>
<p>You must make the above changes to the environment prior to configuring the
Trino coordinator to use Kerberos authentication and HTTPS. After making the
following environment changes, you can make the changes to the Trino
configuration files.</p>
<ul class="simple">
<li><p><a class="reference internal" href="tls.html"><span class="doc">TLS and HTTPS</span></a></p></li>
<li><p><a class="reference internal" href="#server-kerberos-services"><span class="std std-ref">Kerberos services</span></a></p></li>
<li><p><a class="reference internal" href="#server-kerberos-configuration"><span class="std std-ref">MIT Kerberos configuration</span></a></p></li>
<li><p><a class="reference internal" href="#server-kerberos-principals"><span class="std std-ref">Kerberos principals and keytab files</span></a></p></li>
<li><p><a class="reference internal" href="../develop/system-access-control.html"><span class="doc">System Access Control Plugin</span></a></p></li>
</ul>
<section id="config-properties">
<h3 id="config-properties">config.properties<a class="headerlink" href="#config-properties" title="Permalink to this heading">#</a></h3>
<p>Kerberos authentication is configured in the coordinator node’s
<code class="file docutils literal notranslate"><span class="pre">config.properties</span></code> file. The entries that need to be added are listed
below.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http-server.authentication.type=KERBEROS

http-server.authentication.krb5.service-name=trino
http-server.authentication.krb5.principal-hostname=trino.example.com
http-server.authentication.krb5.keytab=/etc/trino/trino.keytab
http.authentication.krb5.config=/etc/krb5.conf

http-server.https.enabled=true
http-server.https.port=7778

http-server.https.keystore.path=/etc/trino/keystore.jks
http-server.https.keystore.key=keystore_password

node.internal-address-source=FQDN
</pre></div>
</div>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.authentication.type</span></code></p></td>
<td><p>Authentication type for the Trino coordinator. Must be set to <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.authentication.krb5.service-name</span></code></p></td>
<td><p>The Kerberos service name for the Trino coordinator. Must match the Kerberos principal.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.authentication.krb5.principal-hostname</span></code></p></td>
<td><p>The Kerberos hostname for the Trino coordinator. Must match the Kerberos principal. This parameter is optional. If included, Trino uses this value in the host part of the Kerberos principal instead of the machine’s hostname.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.authentication.krb5.keytab</span></code></p></td>
<td><p>The location of the keytab that can be used to authenticate the Kerberos principal.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http.authentication.krb5.config</span></code></p></td>
<td><p>The location of the Kerberos configuration file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.enabled</span></code></p></td>
<td><p>Enables HTTPS access for the Trino coordinator. Should be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.port</span></code></p></td>
<td><p>HTTPS server port.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.keystore.path</span></code></p></td>
<td><p>The location of the Java Keystore file that is used to secure TLS.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.keystore.key</span></code></p></td>
<td><p>The password for the keystore. This must match the password you specified when creating the keystore.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.authentication.krb5.user-mapping.pattern</span></code></p></td>
<td><p>Regex to match against user.  If matched, user will be replaced with first regex group. If not matched, authentication is denied.  Default is <code class="docutils literal notranslate"><span class="pre">(.*)</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.authentication.krb5.user-mapping.file</span></code></p></td>
<td><p>File containing rules for mapping user.  See <a class="reference internal" href="user-mapping.html"><span class="doc">User mapping</span></a> for more information.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">node.internal-address-source</span></code></p></td>
<td><p>Kerberos is typically sensitive to DNS names. Setting this property to use <code class="docutils literal notranslate"><span class="pre">FQDN</span></code> ensures correct operation and usage of valid DNS host names.</p></td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="tls.html#tls-version-and-ciphers"><span class="std std-ref">Standards supported</span></a> for a discussion of the
supported TLS versions and cipher suites.</p>
</section>
<section id="access-control-properties">
<h3 id="access-control-properties">access-control.properties<a class="headerlink" href="#access-control-properties" title="Permalink to this heading">#</a></h3>
<p>At a minimum, an <code class="file docutils literal notranslate"><span class="pre">access-control.properties</span></code> file must contain an
<code class="docutils literal notranslate"><span class="pre">access-control.name</span></code> property.  All other configuration is specific for the
implementation being configured. See <a class="reference internal" href="../develop/system-access-control.html"><span class="doc">System access control</span></a> for
details.</p>
</section>
</section>
<section id="user-mapping">
<span id="coordinator-troubleshooting"></span><h2 id="user-mapping">User mapping<a class="headerlink" href="#user-mapping" title="Permalink to this heading">#</a></h2>
<p>After authenticating with Kerberos, the Trino server receives the user’s
principal which is typically similar to an email address. For example, when
<code class="docutils literal notranslate"><span class="pre">alice</span></code> logs in Trino might receive <code class="docutils literal notranslate"><span class="pre">alice@example.com</span></code>. By default, Trino
uses the full Kerberos principal name, but this can be mapped to a shorter
name using a user-mapping pattern. For simple mapping rules, the
<code class="docutils literal notranslate"><span class="pre">http-server.authentication.krb5.user-mapping.pattern</span></code> configuration property
can be set to a Java regular expression, and Trino uses the value of the
first matcher group. If the regular expression does not match, the
authentication is denied. For more complex user-mapping rules, see
<a class="reference internal" href="user-mapping.html"><span class="doc">User mapping</span></a>.</p>
</section>
<section id="troubleshooting">
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">#</a></h2>
<p>Getting Kerberos authentication working can be challenging. You can
independently verify some of the configuration outside of Trino to help narrow
your focus when trying to solve a problem.</p>
<section id="kerberos-verification">
<h3 id="kerberos-verification">Kerberos verification<a class="headerlink" href="#kerberos-verification" title="Permalink to this heading">#</a></h3>
<p>Ensure that you can connect to the KDC from the Trino coordinator using
<strong class="command">telnet</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ telnet kdc.example.com 88
</pre></div>
</div>
<p>Verify that the keytab file can be used to successfully obtain a ticket using
<a class="reference external" href="http://web.mit.edu/kerberos/krb5-1.12/doc/user/user_commands/kinit.html">kinit</a> and
<a class="reference external" href="http://web.mit.edu/kerberos/krb5-1.12/doc/user/user_commands/klist.html">klist</a></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ kinit -kt /etc/trino/trino.keytab trino@EXAMPLE.COM
$ klist
</pre></div>
</div>
</section>
<section id="java-keystore-file-verification">
<h3 id="java-keystore-file-verification">Java keystore file verification<a class="headerlink" href="#java-keystore-file-verification" title="Permalink to this heading">#</a></h3>
<p>Verify the password for a keystore file and view its contents using
<a class="reference internal" href="inspect-jks.html#troubleshooting-keystore"><span class="std std-ref">Inspect and validate keystore</span></a>.</p>
</section>
<section id="additional-kerberos-debugging-information">
<span id="kerberos-debug"></span><h3 id="additional-kerberos-debugging-information">Additional Kerberos debugging information<a class="headerlink" href="#additional-kerberos-debugging-information" title="Permalink to this heading">#</a></h3>
<p>You can enable additional Kerberos debugging information for the Trino
coordinator process by adding the following lines to the Trino <code class="docutils literal notranslate"><span class="pre">jvm.config</span></code>
file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-Dsun.security.krb5.debug=true
-Dlog.enable-console=true
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">-Dsun.security.krb5.debug=true</span></code> enables Kerberos debugging output from the
JRE Kerberos libraries. The debugging output goes to <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, which Trino
redirects to the logging system. <code class="docutils literal notranslate"><span class="pre">-Dlog.enable-console=true</span></code> enables output
to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> to appear in the logs.</p>
<p>The amount and usefulness of the information the Kerberos debugging output
sends to the logs varies depending on where the authentication is failing.
Exception messages and stack traces can provide useful clues about the
nature of the problem.</p>
<p>See <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/security/troubleshooting-security.html">Troubleshooting Security</a>
in the Java documentation for more details about the <code class="docutils literal notranslate"><span class="pre">-Djava.security.debug</span></code>
flag, and <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/security/troubleshooting.html">Troubleshooting</a> for
more details about the Java GSS-API and Kerberos issues.</p>
</section>
<section id="additional-resources">
<span id="server-additional-resources"></span><h3 id="additional-resources">Additional resources<a class="headerlink" href="#additional-resources" title="Permalink to this heading">#</a></h3>
<p><a class="reference external" href="http://docs.oracle.com/cd/E19253-01/816-4557/trouble-6/index.html">Common Kerberos Error Messages (A-M)</a></p>
<p><a class="reference external" href="http://docs.oracle.com/cd/E19253-01/816-4557/trouble-27/index.html">Common Kerberos Error Messages (N-Z)</a></p>
<p><a class="reference external" href="http://web.mit.edu/kerberos/krb5-latest/doc/admin/troubleshoot.html">MIT Kerberos Documentation: Troubleshooting</a></p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Email</button>
        <a onclick="skip()" class="feedback-skip">Cancel</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="okta-authentication.html" title="Okta authentication"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Okta authentication </span>
              </div>
            </a>
          
          
            <a href="certificate.html" title="Certificate authentication"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Certificate authentication </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 453-e.22 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2024<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/453-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/453-e/_static/searchbox.js" data-versions="{'Latest LTS (474-e)': '/474-e/', '468-e LTS': '/468-e/', '462-e LTS': '/462-e/', '453-e LTS': '/453-e/', 'Latest STS (475-e)': '/475-e/'}"></script>
<script src="https://docs.starburst.io/453-e/_static/searchresults.js" data-versions="{'Latest LTS (474-e)': '/474-e/', '468-e LTS': '/468-e/', '462-e LTS': '/462-e/', '453-e LTS': '/453-e/', 'Latest STS (475-e)': '/475-e/'}"></script>
  </body>
</html>