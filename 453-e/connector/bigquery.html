

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', 'G-CY10FQPGJS', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>BigQuery connector &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sidebar.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Elasticsearch connector" href="elasticsearch.html" />
    <link rel="prev" title="Starburst Vertica connector" href="starburst-vertica.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/connector/bigquery.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#connector/bigquery" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 453-e.7 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 453-e.7 LTS</a>
          <span class="md-header-nav__topic"> BigQuery connector </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (462-e)" href="/462-e/">Latest LTS (462-e)</a>
      
          <a title="453-e LTS" href="/453-e/">453-e LTS</a>
      
          <a title="443-e LTS" href="/443-e/">443-e LTS</a>
      
          <a title="435-e LTS" href="/435-e/">435-e LTS</a>
      
          <a title="Latest STS (458-e)" href="/458-e/">Latest STS (458-e)</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../non-object-storage-connectors.html" class="md-tabs__link">Non-object storage connectors</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 453-e.7 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get-started/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get-started/starburst-enterprise.html">What is Starburst Enterprise?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get-started/try/try-sep.html">Try Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learn/index.html">Learn Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Product versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.starburst.io/support.html">Get support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">Query optimizer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage-connectors.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../non-object-storage-connectors.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="starburst-connectors.html">Starburst connectors feature matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/cost-and-performance/index.html">Monitor and manage cost and performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/aws/index.html">AWS ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/google/index.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Trino developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-bigquery--page-root" class="md-nav__link">BigQuery connector</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#bigquery-storage-api" class="md-nav__link">BigQuery Storage API</a>
        </li>
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#configuration" class="md-nav__link">Configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#multiple-gcp-projects" class="md-nav__link">Multiple GCP projects</a>
        </li>
        <li class="md-nav__item"><a href="#arrow-serialization-support" class="md-nav__link">Arrow serialization support</a>
        </li>
        <li class="md-nav__item"><a href="#reading-from-views" class="md-nav__link">Reading from views</a>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#fault-tolerant-execution-support" class="md-nav__link">Fault-tolerant execution support</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#type-mapping" class="md-nav__link">Type mapping</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#bigquery-type-to-trino-type-mapping" class="md-nav__link">BigQuery type to Trino type mapping</a>
        </li>
        <li class="md-nav__item"><a href="#trino-type-to-bigquery-type-mapping" class="md-nav__link">Trino type to BigQuery type mapping</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#system-tables" class="md-nav__link">System tables</a>
        </li>
        <li class="md-nav__item"><a href="#special-columns" class="md-nav__link">Special columns</a>
        </li>
        <li class="md-nav__item"><a href="#sql-support" class="md-nav__link">SQL support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#sql-delete" class="md-nav__link">SQL DELETE</a>
        </li>
        <li class="md-nav__item"><a href="#table-functions" class="md-nav__link">Table functions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#query-varchar-table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">query(varchar)</span> <span class="pre">-&gt;</span> <span class="pre">table</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#faq" class="md-nav__link">FAQ</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#what-is-the-pricing-for-the-storage-api" class="md-nav__link">What is the Pricing for the Storage API?</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="bigquery-connector">
<h1 id="connector-bigquery--page-root">BigQuery connector<a class="headerlink" href="#connector-bigquery--page-root" title="Permalink to this heading">#</a></h1>
<img class="connector-logo" src="../_static/img/bigquery.png"/><p>The BigQuery connector allows querying the data stored in <a class="reference external" href="https://cloud.google.com/bigquery/">BigQuery</a>. This can be used to join data between
different systems like BigQuery and Hive. The connector uses the <a class="reference external" href="https://cloud.google.com/bigquery/docs/reference/storage/">BigQuery
Storage API</a> to
read the data from the tables.</p>
<section id="bigquery-storage-api">
<h2 id="bigquery-storage-api">BigQuery Storage API<a class="headerlink" href="#bigquery-storage-api" title="Permalink to this heading">#</a></h2>
<p>The Storage API streams data in parallel directly from BigQuery via gRPC without
using Google Cloud Storage as an intermediary.
It has a number of advantages over using the previous export-based read flow
that should generally lead to better read performance:</p>
<dl class="simple myst">
<dt><strong>Direct Streaming</strong></dt><dd><p>It does not leave any temporary files in Google Cloud Storage. Rows are read
directly from BigQuery servers using an Avro wire format.</p>
</dd>
<dt><strong>Column Filtering</strong></dt><dd><p>The new API allows column filtering to only read the data you are interested in.
<a class="reference external" href="https://cloud.google.com/blog/products/bigquery/inside-capacitor-bigquerys-next-generation-columnar-storage-format">Backed by a columnar datastore</a>,
it can efficiently stream data without reading all columns.</p>
</dd>
<dt><strong>Dynamic Sharding</strong></dt><dd><p>The API rebalances records between readers until they all complete. This means
that all Map phases will finish nearly concurrently. See this blog article on
<a class="reference external" href="https://cloud.google.com/blog/products/gcp/no-shard-left-behind-dynamic-work-rebalancing-in-google-cloud-dataflow">how dynamic sharding is similarly used in Google Cloud Dataflow</a>.</p>
</dd>
</dl>
</section>
<section id="requirements">
<span id="bigquery-requirements"></span><h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<p>To connect to BigQuery, you need:</p>
<ul>
<li><p>To enable the <a class="reference external" href="https://cloud.google.com/bigquery/docs/reference/storage/#enabling_the_api">BigQuery Storage Read API</a>.</p></li>
<li><p>Network access from your Trino coordinator and workers to the
Google Cloud API service endpoint. This endpoint uses HTTPS, or port 443.</p></li>
<li><p>To configure BigQuery so that the Trino coordinator and workers have <a class="reference external" href="https://cloud.google.com/bigquery/docs/reference/storage#permissions">permissions
in BigQuery</a>.</p></li>
<li><p>To set up authentication. Your authentiation options differ depending on whether
you are using Dataproc/Google Compute Engine (GCE) or not.</p>
<p><strong>On Dataproc/GCE</strong> the authentication is done from the machine’s role.</p>
<p><strong>Outside Dataproc/GCE</strong> you have 3 options:</p>
<ul class="simple">
<li><p>Use a service account JSON key and <code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code> as
described in the Google Cloud authentication <a class="reference external" href="https://cloud.google.com/docs/authentication/getting-started">getting started guide</a>.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">bigquery.credentials-key</span></code> in the catalog properties file. It should
contain the contents of the JSON file, encoded using base64.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">bigquery.credentials-file</span></code> in the catalog properties file. It should
point to the location of the JSON file.</p></li>
</ul>
</li>
</ul>
</section>
<section id="configuration">
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">#</a></h2>
<p>To configure the BigQuery connector, create a catalog properties file in
<code class="docutils literal notranslate"><span class="pre">etc/catalog</span></code> named <code class="docutils literal notranslate"><span class="pre">example.properties</span></code>, to mount the BigQuery connector as
the <code class="docutils literal notranslate"><span class="pre">example</span></code> catalog. Create the file with the following contents, replacing
the connection properties as appropriate for your setup:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>connector.name=bigquery
bigquery.project-id=&lt;your Google Cloud Platform project id&gt;
</pre></div>
</div>
<section id="multiple-gcp-projects">
<h3 id="multiple-gcp-projects">Multiple GCP projects<a class="headerlink" href="#multiple-gcp-projects" title="Permalink to this heading">#</a></h3>
<p>The BigQuery connector can only access a single GCP project.Thus, if you have
data in multiple GCP projects, You need to create several catalogs, each
pointing to a different GCP project. For example, if you have two GCP projects,
one for the sales and one for analytics, you can create two properties files in
<code class="docutils literal notranslate"><span class="pre">etc/catalog</span></code> named <code class="docutils literal notranslate"><span class="pre">sales.properties</span></code> and <code class="docutils literal notranslate"><span class="pre">analytics.properties</span></code>, both
having <code class="docutils literal notranslate"><span class="pre">connector.name=bigquery</span></code> but with different <code class="docutils literal notranslate"><span class="pre">project-id</span></code>. This will
create the two catalogs, <code class="docutils literal notranslate"><span class="pre">sales</span></code> and <code class="docutils literal notranslate"><span class="pre">analytics</span></code> respectively.</p>
</section>
<section id="arrow-serialization-support">
<span id="bigquery-arrow-serialization-support"></span><h3 id="arrow-serialization-support">Arrow serialization support<a class="headerlink" href="#arrow-serialization-support" title="Permalink to this heading">#</a></h3>
<p>This is a feature which introduces support for using Apache Arrow
as the serialization format when reading from BigQuery.  Please note there are
a few caveats:</p>
<ul class="simple">
<li><p>Using Apache Arrow serialization is enabled by default. Add
<code class="docutils literal notranslate"><span class="pre">--add-opens=java.base/java.nio=ALL-UNNAMED</span></code> to the Trino
<a class="reference internal" href="../installation/deployment.html#jvm-config"><span class="std std-ref">JVM config</span></a>.</p></li>
</ul>
</section>
<section id="reading-from-views">
<span id="bigquery-reading-from-views"></span><h3 id="reading-from-views">Reading from views<a class="headerlink" href="#reading-from-views" title="Permalink to this heading">#</a></h3>
<p>The connector has a preliminary support for reading from <a class="reference external" href="https://cloud.google.com/bigquery/docs/views-intro">BigQuery views</a>. Please note there are
a few caveats:</p>
<ul class="simple">
<li><p>Reading from views is disabled by default. In order to enable it, set the
<code class="docutils literal notranslate"><span class="pre">bigquery.views-enabled</span></code> configuration property to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>BigQuery views are not materialized by default, which means that the
connector needs to materialize them before it can read them. This process
affects the read performance.</p></li>
<li><p>The materialization process can also incur additional costs to your BigQuery bill.</p></li>
<li><p>By default, the materialized views are created in the same project and
dataset. Those can be configured by the optional <code class="docutils literal notranslate"><span class="pre">bigquery.view-materialization-project</span></code>
and <code class="docutils literal notranslate"><span class="pre">bigquery.view-materialization-dataset</span></code> properties, respectively. The
service account must have write permission to the project and the dataset in
order to materialize the view.</p></li>
</ul>
</section>
<section id="configuration-properties">
<h3 id="configuration-properties">Configuration properties<a class="headerlink" href="#configuration-properties" title="Permalink to this heading">#</a></h3>
<table id="id1">
<caption><span class="caption-text">BigQuery configuration properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 55%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.project-id</span></code></p></td>
<td><p>The Google Cloud Project ID where the data reside.</p></td>
<td><p>Taken from the service account</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.parent-project-id</span></code></p></td>
<td><p>The project ID Google Cloud Project to bill for the export.</p></td>
<td><p>Taken from the service account</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.views-enabled</span></code></p></td>
<td><p>Enables the connector to read from views and not only tables. Please read
<a class="reference internal" href="#bigquery-reading-from-views"><span class="std std-ref">this section</span></a> before enabling this feature.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.view-expire-duration</span></code></p></td>
<td><p>Expire duration for the materialized view.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">24h</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.view-materialization-project</span></code></p></td>
<td><p>The project where the materialized view is going to be created.</p></td>
<td><p>The view’s project</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.view-materialization-dataset</span></code></p></td>
<td><p>The dataset where the materialized view is going to be created.</p></td>
<td><p>The view’s project</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.skip-view-materialization</span></code></p></td>
<td><p>Use REST API to access views instead of Storage API. BigQuery <code class="docutils literal notranslate"><span class="pre">BIGNUMERIC</span></code>
and <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> types are unsupported.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.view-materialization-with-filter</span></code></p></td>
<td><p>Use filter conditions when materializing views.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.views-cache-ttl</span></code></p></td>
<td><p>Duration for which the materialization of a view will be cached and reused.
Set to <code class="docutils literal notranslate"><span class="pre">0ms</span></code> to disable the cache.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">15m</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.metadata.cache-ttl</span></code></p></td>
<td><p>Duration for which metadata retrieved from BigQuery is cached and reused.
Set to <code class="docutils literal notranslate"><span class="pre">0ms</span></code> to disable the cache.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0ms</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.max-read-rows-retries</span></code></p></td>
<td><p>The number of retries in case of retryable server issues.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.credentials-key</span></code></p></td>
<td><p>The base64 encoded credentials key.</p></td>
<td><p>None. See the <a class="reference internal" href="#bigquery-requirements"><span class="std std-ref">requirements</span></a> section</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.credentials-file</span></code></p></td>
<td><p>The path to the JSON credentials file.</p></td>
<td><p>None. See the <a class="reference internal" href="#bigquery-requirements"><span class="std std-ref">requirements</span></a> section</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.case-insensitive-name-matching</span></code></p></td>
<td><p>Match dataset and table names case-insensitively.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.case-insensitive-name-matching.cache-ttl</span></code></p></td>
<td><p><a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">Duration</span></a> for which case insensitive schema and table
names are cached. Set to <code class="docutils literal notranslate"><span class="pre">0ms</span></code> to disable the cache.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0ms</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.query-results-cache.enabled</span></code></p></td>
<td><p>Enable <a class="reference external" href="https://cloud.google.com/bigquery/docs/cached-results">query results cache</a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.arrow-serialization.enabled</span></code></p></td>
<td><p>Enable using Apache Arrow serialization when reading data from BigQuery.
Please read this <a class="reference internal" href="#bigquery-arrow-serialization-support"><span class="std std-ref">section</span></a> before using this feature.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.enabled</span></code></p></td>
<td><p>Use a proxy for communication with BigQuery.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.uri</span></code></p></td>
<td><p>Proxy URI to use if connecting through a proxy.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.username</span></code></p></td>
<td><p>Proxy user name to use if connecting through a proxy.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.password</span></code></p></td>
<td><p>Proxy password to use if connecting through a proxy.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.keystore-path</span></code></p></td>
<td><p>Keystore containing client certificates to present to proxy if connecting
through a proxy. Only required if proxy uses mutual TLS.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.keystore-password</span></code></p></td>
<td><p>Password of the keystore specified by <code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.keystore-path</span></code>.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.truststore-path</span></code></p></td>
<td><p>Truststore containing certificates of the proxy server if connecting
through a proxy.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.truststore-password</span></code></p></td>
<td><p>Password of the truststore specified by <code class="docutils literal notranslate"><span class="pre">bigquery.rpc-proxy.truststore-path</span></code>.</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fault-tolerant-execution-support">
<span id="bigquery-fte-support"></span><h3 id="fault-tolerant-execution-support">Fault-tolerant execution support<a class="headerlink" href="#fault-tolerant-execution-support" title="Permalink to this heading">#</a></h3>
<p>The connector supports <a class="reference internal" href="../admin/fault-tolerant-execution.html"><span class="doc">Fault-tolerant execution</span></a> of query
processing. Read and write operations are both supported with any retry policy.</p>
</section>
</section>
<section id="type-mapping">
<span id="bigquery-type-mapping"></span><h2 id="type-mapping">Type mapping<a class="headerlink" href="#type-mapping" title="Permalink to this heading">#</a></h2>
<p>Because Trino and BigQuery each support types that the other does not, this
connector <a class="reference internal" href="../language/types.html#type-mapping-overview"><span class="std std-ref">modifies some types</span></a> when reading or
writing data. Data types may not map the same way in both directions between
Trino and the data source. Refer to the following sections for type mapping in
each direction.</p>
<section id="bigquery-type-to-trino-type-mapping">
<h3 id="bigquery-type-to-trino-type-mapping">BigQuery type to Trino type mapping<a class="headerlink" href="#bigquery-type-to-trino-type-mapping" title="Permalink to this heading">#</a></h3>
<p>The connector maps BigQuery types to the corresponding Trino types according
to the following table:</p>
<table id="id2">
<caption><span class="caption-text">BigQuery type to Trino type mapping</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 27%"/>
<col style="width: 27%"/>
<col style="width: 45%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>BigQuery type</p></th>
<th class="head"><p>Trino type</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INT64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">TINYINT</span></code>, and <code class="docutils literal notranslate"><span class="pre">BYTEINT</span></code> are aliases
for <code class="docutils literal notranslate"><span class="pre">INT64</span></code> in BigQuery.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FLOAT64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NUMERIC</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(P,S)</span></code></p></td>
<td><p>The default precision and scale of <code class="docutils literal notranslate"><span class="pre">NUMERIC</span></code> is <code class="docutils literal notranslate"><span class="pre">(38,</span> <span class="pre">9)</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGNUMERIC</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(P,S)</span></code></p></td>
<td><p>Precision &gt; 38 is not supported. The default precision and scale of
<code class="docutils literal notranslate"><span class="pre">BIGNUMERIC</span></code> is <code class="docutils literal notranslate"><span class="pre">(77,</span> <span class="pre">38)</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DATETIME</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(6)</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">STRING</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BYTES</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIME(6)</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(6)</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p></td>
<td><p>Time zone is UTC</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">GEOGRAPHY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p>In <a class="reference external" href="https://wikipedia.org/wiki/Well-known_text_representation_of_geometry">Well-known text
(WKT)</a>
format</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">JSON</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">JSON</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RECORD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ROW</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
<p>No other types are supported.</p>
</section>
<section id="trino-type-to-bigquery-type-mapping">
<h3 id="trino-type-to-bigquery-type-mapping">Trino type to BigQuery type mapping<a class="headerlink" href="#trino-type-to-bigquery-type-mapping" title="Permalink to this heading">#</a></h3>
<p>The connector maps Trino types to the corresponding BigQuery types according
to the following table:</p>
<table id="id3">
<caption><span class="caption-text">Trino type to BigQuery type mapping</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 27%"/>
<col style="width: 27%"/>
<col style="width: 45%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino type</p></th>
<th class="head"><p>BigQuery type</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTES</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">TINYINT</span></code>, and
<code class="docutils literal notranslate"><span class="pre">BYTEINT</span></code> are aliases for <code class="docutils literal notranslate"><span class="pre">INT64</span></code> in BigQuery.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(P,S)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NUMERIC</span></code></p></td>
<td><p>The default precision and scale of <code class="docutils literal notranslate"><span class="pre">NUMERIC</span></code> is <code class="docutils literal notranslate"><span class="pre">(38,</span> <span class="pre">9)</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">STRING</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(6)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATETIME</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
<p>No other types are supported.</p>
</section>
</section>
<section id="system-tables">
<h2 id="system-tables">System tables<a class="headerlink" href="#system-tables" title="Permalink to this heading">#</a></h2>
<p>For each Trino table which maps to BigQuery view there exists a system table
which exposes BigQuery view definition. Given a BigQuery view <code class="docutils literal notranslate"><span class="pre">example_view</span></code>
you can send query <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">example_view$view_definition</span></code> to see the SQL
which defines view in BigQuery.</p>
</section>
<section id="special-columns">
<span id="bigquery-special-columns"></span><h2 id="special-columns">Special columns<a class="headerlink" href="#special-columns" title="Permalink to this heading">#</a></h2>
<p>In addition to the defined columns, the BigQuery connector exposes
partition information in a number of hidden columns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$partition_date</span></code>: Equivalent to <code class="docutils literal notranslate"><span class="pre">_PARTITIONDATE</span></code> pseudo-column in BigQuery</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$partition_time</span></code>: Equivalent to <code class="docutils literal notranslate"><span class="pre">_PARTITIONTIME</span></code> pseudo-column in BigQuery</p></li>
</ul>
<p>You can use these columns in your SQL statements like any other column. They
can be selected directly, or used in conditional statements. For example, you
can inspect the partition date and time for each record:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span><span class="p">,</span> <span class="ss">"$partition_date"</span><span class="p">,</span> <span class="ss">"$partition_time"</span>
<span class="k">FROM</span> <span class="n">example</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">page_views</span><span class="p">;</span>
</pre></div>
</div>
<p>Retrieve all records stored in the partition <code class="docutils literal notranslate"><span class="pre">_PARTITIONDATE</span> <span class="pre">=</span> <span class="pre">'2022-04-07'</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">example</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">page_views</span>
<span class="k">WHERE</span> <span class="ss">"$partition_date"</span> <span class="o">=</span> <span class="nb">date</span> <span class="s1">'2022-04-07'</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Two special partitions <code class="docutils literal notranslate"><span class="pre">__NULL__</span></code> and <code class="docutils literal notranslate"><span class="pre">__UNPARTITIONED__</span></code> are not supported.</p>
</div>
</section>
<section id="sql-support">
<span id="bigquery-sql-support"></span><h2 id="sql-support">SQL support<a class="headerlink" href="#sql-support" title="Permalink to this heading">#</a></h2>
<p>The connector provides read and write access to data and metadata in the
BigQuery database. In addition to the
<a class="reference internal" href="../language/sql-support.html#sql-globally-available"><span class="std std-ref">globally available</span></a> and
<a class="reference internal" href="../language/sql-support.html#sql-read-operations"><span class="std std-ref">read operation</span></a> statements, the connector supports
the following features:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT</span></a></p></li>
<li><p><a class="reference internal" href="../sql/delete.html"><span class="doc">DELETE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/truncate.html"><span class="doc">TRUNCATE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/create-table.html"><span class="doc">CREATE TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/create-table-as.html"><span class="doc">CREATE TABLE AS</span></a></p></li>
<li><p><a class="reference internal" href="../sql/drop-table.html"><span class="doc">DROP TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/create-schema.html"><span class="doc">CREATE SCHEMA</span></a></p></li>
<li><p><a class="reference internal" href="../sql/drop-schema.html"><span class="doc">DROP SCHEMA</span></a></p></li>
<li><p><a class="reference internal" href="../sql/comment.html"><span class="doc">COMMENT</span></a></p></li>
</ul>
<section id="sql-delete">
<h3 id="sql-delete">SQL DELETE<a class="headerlink" href="#sql-delete" title="Permalink to this heading">#</a></h3>
<p>If a <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause is specified, the <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> operation only works if the
predicate in the clause can be fully pushed down to the data source.</p>
</section>
<section id="table-functions">
<h3 id="table-functions">Table functions<a class="headerlink" href="#table-functions" title="Permalink to this heading">#</a></h3>
<p>The connector provides specific <a class="reference internal" href="../functions/table.html"><span class="doc">table functions</span></a> to
access BigQuery.</p>
<section id="query-varchar-table">
<span id="bigquery-query-function"></span><h4 id="query-varchar-table"><code class="docutils literal notranslate"><span class="pre">query(varchar)</span> <span class="pre">-&gt;</span> <span class="pre">table</span></code><a class="headerlink" href="#query-varchar-table" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">query</span></code> function allows you to query the underlying BigQuery directly. It
requires syntax native to BigQuery, because the full query is pushed down and
processed by BigQuery. This can be useful for accessing native features which are
not available in Trino or for improving query performance in situations where
running a query natively may be faster.</p>
<p>The native query passed to the underlying data source is required to return a
table as a result set. Only the data source performs validation or security
checks for these queries using its own configuration. Trino does not perform
these tasks. Only use passthrough queries to read data.</p>
<p>For example, query the <code class="docutils literal notranslate"><span class="pre">example</span></code> catalog and group and concatenate all
employee IDs by manager ID:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="o">*</span>
<span class="k">FROM</span>
  <span class="k">TABLE</span><span class="p">(</span>
    <span class="n">example</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">query</span><span class="p">(</span>
      <span class="n">query</span> <span class="o">=&gt;</span> <span class="s1">'SELECT</span>
<span class="s1">        manager_id, STRING_AGG(employee_id)</span>
<span class="s1">      FROM</span>
<span class="s1">        company.employees</span>
<span class="s1">      GROUP BY</span>
<span class="s1">        manager_id'</span>
    <span class="p">)</span>
  <span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The query engine does not preserve the order of the results of this
function. If the passed query contains an <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause, the
function result may not be ordered as expected.</p>
</div>
</section>
</section>
</section>
<section id="faq">
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permalink to this heading">#</a></h2>
<section id="what-is-the-pricing-for-the-storage-api">
<h3 id="what-is-the-pricing-for-the-storage-api">What is the Pricing for the Storage API?<a class="headerlink" href="#what-is-the-pricing-for-the-storage-api" title="Permalink to this heading">#</a></h3>
<p>See the <a class="reference external" href="https://cloud.google.com/bigquery/pricing#storage-api">BigQuery pricing documentation</a>.</p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Email</button>
        <a onclick="skip()" class="feedback-skip">Cancel</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="starburst-vertica.html" title="Starburst Vertica connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Starburst Vertica connector </span>
              </div>
            </a>
          
          
            <a href="elasticsearch.html" title="Elasticsearch connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Elasticsearch connector </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 453-e.7 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2024<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/453-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/453-e/_static/searchbox.js" data-versions="{'Latest LTS (462-e)': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', 'Latest STS (458-e)': '/458-e/'}"></script>
<script src="https://docs.starburst.io/453-e/_static/searchresults.js" data-versions="{'Latest LTS (462-e)': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', 'Latest STS (458-e)': '/458-e/'}"></script>
  </body>
</html>