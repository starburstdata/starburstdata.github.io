

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', 'G-CY10FQPGJS', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>SQL Server connector &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sidebar.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Starburst Synapse connector" href="starburst-synapse.html" />
    <link rel="prev" title="Starburst Splunk connector" href="starburst-splunk.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/connector/sqlserver.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#connector/sqlserver" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 453-e.13 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 453-e.13 LTS</a>
          <span class="md-header-nav__topic"> SQL Server connector </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (468-e)" href="/468-e/">Latest LTS (468-e)</a>
      
          <a title="462-e LTS" href="/462-e/">462-e LTS</a>
      
          <a title="453-e LTS" href="/453-e/">453-e LTS</a>
      
          <a title="443-e LTS" href="/443-e/">443-e LTS</a>
      
          <a title="Latest STS (471-e)" href="/471-e/">Latest STS (471-e)</a>
      
          <a title="469-e STS" href="/469-e/">469-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../non-object-storage-connectors.html" class="md-tabs__link">Non-object storage connectors</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 453-e.13 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get-started/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get-started/starburst-enterprise.html">What is Starburst Enterprise?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get-started/try/try-sep.html">Try Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learn/index.html">Learn Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Product versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.starburst.io/support.html">Get support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">Query optimizer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage-connectors.html">Object storage connectors</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../non-object-storage-connectors.html">Non-object storage connectors</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="starburst-cosmosdb.html">Cosmos DB connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-bigquery.html">BigQuery connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-dynamodb.html">DynamoDB connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-db2.html">IBM Db2 connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-elasticsearch.html">Elasticsearch connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-generic-jdbc.html">Generic JDBC connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-greenplum.html">Greenplum connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-kafka.html">Kafka connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-kudu.html">Kudu connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-maxcompute.html">MaxCompute connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-mongodb.html">MongoDB connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">MySQL connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-neo4j.html">Neo4j connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-netezza.html">Netezza connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracle.html">Oracle connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql.html">PostgreSQL connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redshift.html">Redshift connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-salesforce.html">Salesforce connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-sap-hana.html">SAP HANA connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="singlestore.html">SingleStore connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="snowflake.html">Snowflake connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-splunk.html">Splunk connector</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SQL Server connector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#connection-security">Connection security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-source-authentication">Data source authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multiple-sql-server-databases-or-servers">Multiple SQL Server databases or servers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-catalog-selection">Dynamic catalog selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-configuration-properties">General configuration properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#appending-query-metadata">Appending query metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="#domain-compaction-threshold">Domain compaction threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specific-configuration-properties">Specific configuration properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#case-insensitive-matching">Case insensitive matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#non-transactional-insert">Non-transactional INSERT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fault-tolerant-execution-support">Fault-tolerant execution support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#querying-sql-server">Querying SQL Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-mapping">Type mapping</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sql-server-type-to-trino-type-mapping">SQL Server type to Trino type mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trino-type-to-sql-server-type-mapping">Trino type to SQL Server type mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#numeric-type-mapping">Numeric type mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#character-type-mapping">Character type mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-mapping-configuration-properties">Type mapping configuration properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sql-support">SQL support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#update">UPDATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sql-delete">SQL DELETE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#alter-table-execute">ALTER TABLE EXECUTE</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#collect-statistics">collect_statistics</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#alter-table-rename-to">ALTER TABLE RENAME TO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#insert">INSERT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#procedures">Procedures</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#system-flush-metadata-cache"><code class="docutils literal notranslate"><span class="pre">system.flush_metadata_cache()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#system-execute-query"><code class="docutils literal notranslate"><span class="pre">system.execute('query')</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#table-functions">Table functions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#query-varchar-table"><code class="docutils literal notranslate"><span class="pre">query(varchar)</span> <span class="pre">-&gt;</span> <span class="pre">table</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#procedure-varchar-table"><code class="docutils literal notranslate"><span class="pre">procedure(varchar)</span> <span class="pre">-&gt;</span> <span class="pre">table</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#performance">Performance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parallelism">Parallelism</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-filtering">Dynamic filtering</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#wait-timeout">Wait timeout</a></li>
<li class="toctree-l5"><a class="reference internal" href="#compaction">Compaction</a></li>
<li class="toctree-l5"><a class="reference internal" href="#metrics">Metrics</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#table-statistics">Table statistics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#managed-statistics">Managed statistics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pushdown">Pushdown</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#cost-based-join-pushdown">Cost-based join pushdown</a></li>
<li class="toctree-l5"><a class="reference internal" href="#predicate-pushdown-support">Predicate pushdown support</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#bulk-insert">Bulk insert</a></li>
<li class="toctree-l4"><a class="reference internal" href="#starburst-cached-views">Starburst Cached Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-compression">Data compression</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#security">Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#user-impersonation">User impersonation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kerberos-authentication">Kerberos authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kerberos-credential-pass-through">Kerberos credential pass-through</a></li>
<li class="toctree-l4"><a class="reference internal" href="#password-credential-pass-through">Password credential pass-through</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ntlm-authentication">NTLM authentication</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#tls-https-settings">TLS/HTTPS settings</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ntlm-credential-pass-through">NTLM credential pass-through</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="starburst-synapse.html">Synapse connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata.html">Teradata connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-vertica.html">Vertica connector</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="starburst-connectors.html">Starburst connectors feature matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/cost-and-performance/index.html">Monitor and manage cost and performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/aws/index.html">AWS ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/google/index.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Trino developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-sqlserver--page-root" class="md-nav__link">SQL Server connector</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#configuration" class="md-nav__link">Configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#connection-security" class="md-nav__link">Connection security</a>
        </li>
        <li class="md-nav__item"><a href="#data-source-authentication" class="md-nav__link">Data source authentication</a>
        </li>
        <li class="md-nav__item"><a href="#multiple-sql-server-databases-or-servers" class="md-nav__link">Multiple SQL Server databases or servers</a>
        </li>
        <li class="md-nav__item"><a href="#dynamic-catalog-selection" class="md-nav__link">Dynamic catalog selection</a>
        </li>
        <li class="md-nav__item"><a href="#general-configuration-properties" class="md-nav__link">General configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#appending-query-metadata" class="md-nav__link">Appending query metadata</a>
        </li>
        <li class="md-nav__item"><a href="#domain-compaction-threshold" class="md-nav__link">Domain compaction threshold</a>
        </li>
        <li class="md-nav__item"><a href="#specific-configuration-properties" class="md-nav__link">Specific configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#case-insensitive-matching" class="md-nav__link">Case insensitive matching</a>
        </li>
        <li class="md-nav__item"><a href="#non-transactional-insert" class="md-nav__link">Non-transactional INSERT</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#fault-tolerant-execution-support" class="md-nav__link">Fault-tolerant execution support</a>
        </li>
        <li class="md-nav__item"><a href="#querying-sql-server" class="md-nav__link">Querying SQL Server</a>
        </li>
        <li class="md-nav__item"><a href="#type-mapping" class="md-nav__link">Type mapping</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#sql-server-type-to-trino-type-mapping" class="md-nav__link">SQL Server type to Trino type mapping</a>
        </li>
        <li class="md-nav__item"><a href="#trino-type-to-sql-server-type-mapping" class="md-nav__link">Trino type to SQL Server type mapping</a>
        </li>
        <li class="md-nav__item"><a href="#numeric-type-mapping" class="md-nav__link">Numeric type mapping</a>
        </li>
        <li class="md-nav__item"><a href="#character-type-mapping" class="md-nav__link">Character type mapping</a>
        </li>
        <li class="md-nav__item"><a href="#type-mapping-configuration-properties" class="md-nav__link">Type mapping configuration properties</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#sql-support" class="md-nav__link">SQL support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#update" class="md-nav__link">UPDATE</a>
        </li>
        <li class="md-nav__item"><a href="#sql-delete" class="md-nav__link">SQL DELETE</a>
        </li>
        <li class="md-nav__item"><a href="#alter-table-execute" class="md-nav__link">ALTER TABLE EXECUTE</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#collect-statistics" class="md-nav__link">collect_statistics</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#alter-table-rename-to" class="md-nav__link">ALTER TABLE RENAME TO</a>
        </li>
        <li class="md-nav__item"><a href="#insert" class="md-nav__link">INSERT</a>
        </li>
        <li class="md-nav__item"><a href="#procedures" class="md-nav__link">Procedures</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#system-flush-metadata-cache" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">system.flush_metadata_cache()</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#system-execute-query" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">system.execute('query')</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#table-functions" class="md-nav__link">Table functions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#query-varchar-table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">query(varchar)</span> <span class="pre">-&gt;</span> <span class="pre">table</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#procedure-varchar-table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">procedure(varchar)</span> <span class="pre">-&gt;</span> <span class="pre">table</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#performance" class="md-nav__link">Performance</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#parallelism" class="md-nav__link">Parallelism</a>
        </li>
        <li class="md-nav__item"><a href="#dynamic-filtering" class="md-nav__link">Dynamic filtering</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#wait-timeout" class="md-nav__link">Wait timeout</a>
        </li>
        <li class="md-nav__item"><a href="#compaction" class="md-nav__link">Compaction</a>
        </li>
        <li class="md-nav__item"><a href="#metrics" class="md-nav__link">Metrics</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#table-statistics" class="md-nav__link">Table statistics</a>
        </li>
        <li class="md-nav__item"><a href="#managed-statistics" class="md-nav__link">Managed statistics</a>
        </li>
        <li class="md-nav__item"><a href="#pushdown" class="md-nav__link">Pushdown</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#cost-based-join-pushdown" class="md-nav__link">Cost-based join pushdown</a>
        </li>
        <li class="md-nav__item"><a href="#predicate-pushdown-support" class="md-nav__link">Predicate pushdown support</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#bulk-insert" class="md-nav__link">Bulk insert</a>
        </li>
        <li class="md-nav__item"><a href="#starburst-cached-views" class="md-nav__link">Starburst Cached Views</a>
        </li>
        <li class="md-nav__item"><a href="#data-compression" class="md-nav__link">Data compression</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#security" class="md-nav__link">Security</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#user-impersonation" class="md-nav__link">User impersonation</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-authentication" class="md-nav__link">Kerberos authentication</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-credential-pass-through" class="md-nav__link">Kerberos credential pass-through</a>
        </li>
        <li class="md-nav__item"><a href="#password-credential-pass-through" class="md-nav__link">Password credential pass-through</a>
        </li>
        <li class="md-nav__item"><a href="#ntlm-authentication" class="md-nav__link">NTLM authentication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#tls-https-settings" class="md-nav__link">TLS/HTTPS settings</a>
        </li>
        <li class="md-nav__item"><a href="#ntlm-credential-pass-through" class="md-nav__link">NTLM credential pass-through</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="sql-server-connector">
<h1 id="connector-sqlserver--page-root">SQL Server connector<a class="headerlink" href="#connector-sqlserver--page-root" title="Permalink to this heading">#</a></h1>
<img class="connector-logo" src="../_static/img/sqlserver.png"/><p>The SQL Server connector lets you query and create tables in an external
<a class="reference external" href="https://www.microsoft.com/sql-server/">Microsoft SQL Server</a> database. This can
be used to join data between different systems like SQL Server and Hive, or
between two different SQL Server instances.</p>
<p>SEP includes additional enterprise features that are built on top of the
existing Trino connector functionality. For more information on key feature
differences between Trino and SEP, see the <a class="reference internal" href="starburst-connectors.html#sb-connectors-rdbms"><span class="std std-ref">connectors feature matrix</span></a>.</p>
<section id="requirements">
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<p>To connect to SQL Server, you need:</p>
<ul class="simple">
<li><p>SQL Server 2012 or higher, or Azure SQL Database.</p></li>
<li><p>Network access from the SEP coordinator and workers to SQL Server.
Port 1433 is the default port.</p></li>
<li><p>A valid <a class="reference internal" href="../license-requirements.html"><span class="doc">Starburst Enterprise license</span></a>.</p></li>
</ul>
</section>
<section id="configuration">
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">#</a></h2>
<p>To configure the SQL Server connector, create a catalog properties file that
specifies the SQL Server connector by setting the <code class="docutils literal notranslate"><span class="pre">connector.name</span></code> to
<code class="docutils literal notranslate"><span class="pre">sqlserver</span></code>.</p>
<p>For example, to access a database as <code class="docutils literal notranslate"><span class="pre">example</span></code>, create the file
<code class="docutils literal notranslate"><span class="pre">etc/catalog/example.properties</span></code>. Replace the connection properties as
appropriate for your setup:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connector.name</span><span class="o">=</span><span class="s">sqlserver</span>
<span class="na">connection-url</span><span class="o">=</span><span class="s">jdbc:sqlserver://&lt;host&gt;:&lt;port&gt;;databaseName=&lt;databaseName&gt;;encrypt=false</span>
<span class="na">connection-user</span><span class="o">=</span><span class="s">root</span>
<span class="na">connection-password</span><span class="o">=</span><span class="s">secret</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">connection-url</span></code> defines the connection information and parameters to pass
to the SQL Server JDBC driver. The supported parameters for the URL are
available in the <a class="reference external" href="https://docs.microsoft.com/sql/connect/jdbc/building-the-connection-url">SQL Server JDBC driver
documentation</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">connection-user</span></code> and <code class="docutils literal notranslate"><span class="pre">connection-password</span></code> are typically required and
determine the user credentials for the connection, often a service user. You can
use <a class="reference internal" href="../security/secrets.html"><span class="doc">secrets</span></a> to avoid exposing actual values in the
catalog properties files.</p>
<section id="connection-security">
<span id="sqlserver-tls"></span><h3 id="connection-security">Connection security<a class="headerlink" href="#connection-security" title="Permalink to this heading">#</a></h3>
<p>The JDBC driver and the connector automatically use Transport Layer
Security (TLS) encryption and certificate validation. This requires a suitable
TLS certificate configured on your SQL Server database host.</p>
<p>If you do not have the necessary configuration established, you can disable
encryption in the connection string with the <code class="docutils literal notranslate"><span class="pre">encrypt</span></code> property:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connection-url</span><span class="o">=</span><span class="s">jdbc:sqlserver://&lt;host&gt;:&lt;port&gt;;databaseName=&lt;databaseName&gt;;encrypt=false</span>
</pre></div>
</div>
<p>Additional parameters like <code class="docutils literal notranslate"><span class="pre">trustServerCertificate</span></code>, <code class="docutils literal notranslate"><span class="pre">hostNameInCertificate</span></code>,
<code class="docutils literal notranslate"><span class="pre">trustStore</span></code>, and <code class="docutils literal notranslate"><span class="pre">trustStorePassword</span></code> are detailed in the <a class="reference external" href="https://docs.microsoft.com/sql/connect/jdbc/using-ssl-encryption">TLS section of SQL
Server JDBC driver
documentation</a>.</p>
</section>
<section id="data-source-authentication">
<h3 id="data-source-authentication">Data source authentication<a class="headerlink" href="#data-source-authentication" title="Permalink to this heading">#</a></h3>
<p>The connector can provide credentials for the data source connection
in multiple ways:</p>
<ul class="simple">
<li><p>inline, in the connector configuration file</p></li>
<li><p>in a separate properties file</p></li>
<li><p>in a key store file</p></li>
<li><p>as extra credentials set when connecting to Trino</p></li>
</ul>
<p>You can use <a class="reference internal" href="../security/secrets.html"><span class="doc">secrets</span></a> to avoid storing sensitive
values in the catalog properties files.</p>
<p>The following table describes configuration properties
for connection credentials:</p>
<table>
<colgroup>
<col style="width: 40%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">credential-provider.type</span></code></p></td>
<td><p>Type of the credential provider. Must be one of <code class="docutils literal notranslate"><span class="pre">INLINE</span></code>, <code class="docutils literal notranslate"><span class="pre">FILE</span></code>, or
<code class="docutils literal notranslate"><span class="pre">KEYSTORE</span></code>; defaults to <code class="docutils literal notranslate"><span class="pre">INLINE</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">connection-user</span></code></p></td>
<td><p>Connection user name.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">connection-password</span></code></p></td>
<td><p>Connection password.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">user-credential-name</span></code></p></td>
<td><p>Name of the extra credentials property, whose value to use as the user
name. See <code class="docutils literal notranslate"><span class="pre">extraCredentials</span></code> in <a class="reference internal" href="../client/jdbc.html#jdbc-parameter-reference"><span class="std std-ref">Parameter
reference</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">password-credential-name</span></code></p></td>
<td><p>Name of the extra credentials property, whose value to use as the
password.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">connection-credential-file</span></code></p></td>
<td><p>Location of the properties file where credentials are present. It must
contain the <code class="docutils literal notranslate"><span class="pre">connection-user</span></code> and <code class="docutils literal notranslate"><span class="pre">connection-password</span></code> properties.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keystore-file-path</span></code></p></td>
<td><p>The location of the Java Keystore file, from which to read credentials.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">keystore-type</span></code></p></td>
<td><p>File format of the keystore file, for example <code class="docutils literal notranslate"><span class="pre">JKS</span></code> or <code class="docutils literal notranslate"><span class="pre">PEM</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keystore-password</span></code></p></td>
<td><p>Password for the key store.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">keystore-user-credential-name</span></code></p></td>
<td><p>Name of the key store entity to use as the user name.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keystore-user-credential-password</span></code></p></td>
<td><p>Password for the user name key store entity.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">keystore-password-credential-name</span></code></p></td>
<td><p>Name of the key store entity to use as the password.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keystore-password-credential-password</span></code></p></td>
<td><p>Password for the password key store entity.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="multiple-sql-server-databases-or-servers">
<h3 id="multiple-sql-server-databases-or-servers">Multiple SQL Server databases or servers<a class="headerlink" href="#multiple-sql-server-databases-or-servers" title="Permalink to this heading">#</a></h3>
<p>The SQL Server connector can only access a single SQL Server database within a
single catalog. If you have multiple SQL Server databases, or want to connect to
multiple SQL Server instances, you must configure multiple instances of the SQL
Server connector. See also, <a class="reference internal" href="#sqlserver-dynamic-catalogs"><span class="std std-ref">Dynamic catalog selection</span></a></p>
<p>To add another catalog, add a new properties file to <code class="docutils literal notranslate"><span class="pre">etc/catalog</span></code>. For example,
if you name the property file <code class="docutils literal notranslate"><span class="pre">sales.properties</span></code>, SEP creates a catalog
named <code class="docutils literal notranslate"><span class="pre">sales</span></code>.</p>
<p>Another option to access multiple databases on a SQL Server cluster is to enable
the <code class="docutils literal notranslate"><span class="pre">sqlserver.database-prefix-for-schema.enabled</span></code> catalog configuration
property, as described in the following table:</p>
<table id="id1">
<caption><span class="caption-text">Starburst SQL Server connector configuration properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 50%"/>
<col style="width: 20%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sqlserver.database-prefix-for-schema.enabled</span></code></p></td>
<td><p>Allow access to other databases in SQL Server by including the database
name in double quotes with the schema name:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span>    <span class="k">SELECT</span> <span class="o">*</span>
    <span class="k">FROM</span> <span class="k">catalog</span><span class="p">.</span><span class="ss">"database.schema"</span><span class="p">.</span><span class="k">table</span>
</pre></div>
</div>
<p>When enabled, <code class="docutils literal notranslate"><span class="pre">"database.schema"</span></code>, including the double quotes, is
required at all times as part of the fully-qualified name.</p>
</td>
<td><p>false</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dynamic-catalog-selection">
<span id="sqlserver-dynamic-catalogs"></span><h3 id="dynamic-catalog-selection">Dynamic catalog selection<a class="headerlink" href="#dynamic-catalog-selection" title="Permalink to this heading">#</a></h3>
<p>The default configuration, similar to the  <code class="docutils literal notranslate"><span class="pre">etc/example.properties</span></code> file,
enables the connection to one database running on a SQL Server instance.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connector.name</span><span class="o">=</span><span class="s">sqlserver</span>
<span class="na">connection-url</span><span class="o">=</span><span class="s">jdbc:sqlserver://dbserver.example.com:1443/exampledb;encrypt=false</span>
</pre></div>
</div>
<p>The connector supports connecting to multiple SQL Server databases using a
single catalog by setting an <code class="docutils literal notranslate"><span class="pre">override_catalog</span></code> session property. This support
has to be enabled in the catalog properties file with the
<code class="docutils literal notranslate"><span class="pre">sqlserver.override-catalog.enabled</span></code> property:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connector.name</span><span class="o">=</span><span class="s">sqlserver</span>
<span class="na">connection-url</span><span class="o">=</span><span class="s">jdbc:sqlserver://dbserver.example.com:1443/exampledb;encrypt=false</span>
<span class="na">sqlserver.override-catalog.enabled</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>The previously mentioned example lets you query any table in any schema in the
database <code class="docutils literal notranslate"><span class="pre">exampledb</span></code> on the SQL Server <code class="docutils literal notranslate"><span class="pre">dbserver</span></code>. The user that was specified
in <code class="docutils literal notranslate"><span class="pre">connection-user</span></code> must have sufficient access rights.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">example</span><span class="p">.</span><span class="n">exampleschema</span><span class="p">.</span><span class="n">exampletable</span><span class="p">;</span>
</pre></div>
</div>
<p>In order to query another database, such as <code class="docutils literal notranslate"><span class="pre">testdb</span></code>, you must override the
database configured in the catalog. Then you can query that database in
the current user session:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SET</span> <span class="k">SESSION</span> <span class="n">example</span><span class="p">.</span><span class="n">override_catalog</span><span class="o">=</span><span class="n">testdb</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">example</span><span class="p">.</span><span class="n">testdbschema</span><span class="p">.</span><span class="n">testdbtable</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The access rights to the databases, schemas, tables, and actual rows are
determined by the configured user for the connection. This also applies to other
security setups like impersonation or Apache Ranger integration. Make sure these
access rights are as restrictive as required.</p>
</div>
</section>
<section id="general-configuration-properties">
<h3 id="general-configuration-properties">General configuration properties<a class="headerlink" href="#general-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The following table describes general catalog configuration properties for the
connector:</p>
<table>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">case-insensitive-name-matching</span></code></p></td>
<td><p>Support case insensitive schema and table names. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">case-insensitive-name-matching.cache-ttl</span></code></p></td>
<td><p><a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">Duration</span></a> for which case insensitive schema and table
names are cached. Defaults to <code class="docutils literal notranslate"><span class="pre">1m</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">case-insensitive-name-matching.config-file</span></code></p></td>
<td><p>Path to a name mapping configuration file in JSON format that allows
Trino to disambiguate between schemas and tables with similar names in
different cases. Defaults to <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">case-insensitive-name-matching.config-file.refresh-period</span></code></p></td>
<td><p>Frequency with which Trino checks the name matching configuration file
for changes. The <a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration value</span></a> defaults to <code class="docutils literal notranslate"><span class="pre">0s</span></code>
(refresh disabled).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">metadata.cache-ttl</span></code></p></td>
<td><p><a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">Duration</span></a> for which metadata, including table and
column statistics, is cached. Defaults to <code class="docutils literal notranslate"><span class="pre">0s</span></code> (caching disabled).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">metadata.cache-missing</span></code></p></td>
<td><p>Cache the fact that metadata, including table and column statistics, is
not available. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">metadata.schemas.cache-ttl</span></code></p></td>
<td><p><a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">Duration</span></a> for which schema metadata is cached.
Defaults to the value of <code class="docutils literal notranslate"><span class="pre">metadata.cache-ttl</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">metadata.tables.cache-ttl</span></code></p></td>
<td><p><a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">Duration</span></a> for which table metadata is cached.
Defaults to the value of <code class="docutils literal notranslate"><span class="pre">metadata.cache-ttl</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">metadata.statistics.cache-ttl</span></code></p></td>
<td><p><a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">Duration</span></a> for which tables statistics are cached.
Defaults to the value of <code class="docutils literal notranslate"><span class="pre">metadata.cache-ttl</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">metadata.cache-maximum-size</span></code></p></td>
<td><p>Maximum number of objects stored in the metadata cache. Defaults to <code class="docutils literal notranslate"><span class="pre">10000</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">write.batch-size</span></code></p></td>
<td><p>Maximum number of statements in a batched execution. Do not change
this setting from the default. Non-default values may negatively
impact performance. Defaults to <code class="docutils literal notranslate"><span class="pre">1000</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic-filtering.enabled</span></code></p></td>
<td><p>Push down dynamic filters into JDBC queries. Defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic-filtering.wait-timeout</span></code></p></td>
<td><p>Maximum <a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration</span></a> for which Trino waits for dynamic
filters to be collected from the build side of joins before starting a
JDBC query. Using a large timeout can potentially result in more detailed
dynamic filters. However, it can also increase latency for some queries.
Defaults to <code class="docutils literal notranslate"><span class="pre">20s</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="appending-query-metadata">
<h3 id="appending-query-metadata">Appending query metadata<a class="headerlink" href="#appending-query-metadata" title="Permalink to this heading">#</a></h3>
<p>The optional parameter <code class="docutils literal notranslate"><span class="pre">query.comment-format</span></code> allows you to configure a SQL
comment that is sent to the datasource with each query. The format of this
comment can contain any characters and the following metadata:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$QUERY_ID</span></code>: The identifier of the query.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$USER</span></code>: The name of the user who submits the query to Trino.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$SOURCE</span></code>: The identifier of the client tool used to submit the query, for
example <code class="docutils literal notranslate"><span class="pre">trino-cli</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$TRACE_TOKEN</span></code>: The trace token configured with the client tool.</p></li>
</ul>
<p>The comment can provide more context about the query. This additional
information is available in the logs of the datasource. To include environment
variables from the Trino cluster with the comment , use the
<code class="docutils literal notranslate"><span class="pre">${ENV:VARIABLE-NAME}</span></code> syntax.</p>
<p>The following example sets a simple comment that identifies each query sent by
Trino:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>query.comment-format=Query sent by Trino.
</pre></div>
</div>
<p>With this configuration, a query such as <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">example_table;</span></code> is
sent to the datasource with the comment appended:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT * FROM example_table; /*Query sent by Trino.*/
</pre></div>
</div>
<p>The following example improves on the preceding example by using metadata:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>query.comment-format=Query $QUERY_ID sent by user $USER from Trino.
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">Jane</span></code> sent the query with the query identifier
<code class="docutils literal notranslate"><span class="pre">20230622_180528_00000_bkizg</span></code>, the following comment string is sent to the
datasource:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SELECT * FROM example_table; /*Query 20230622_180528_00000_bkizg sent by user Jane from Trino.*/
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Certain JDBC driver settings and logging configurations might cause the
comment to be removed.</p>
</div>
</section>
<section id="domain-compaction-threshold">
<h3 id="domain-compaction-threshold">Domain compaction threshold<a class="headerlink" href="#domain-compaction-threshold" title="Permalink to this heading">#</a></h3>
<p>Pushing down a large list of predicates to the data source can compromise
performance. Trino compacts large predicates into a simpler range predicate
by default to ensure a balance between performance and predicate pushdown.
If necessary, the threshold for this compaction can be increased to improve
performance when the data source is capable of taking advantage of large
predicates. Increasing this threshold may improve pushdown of large
<a class="reference internal" href="../admin/dynamic-filtering.html"><span class="doc">dynamic filters</span></a>.
The <code class="docutils literal notranslate"><span class="pre">domain-compaction-threshold</span></code> catalog configuration property or the
<code class="docutils literal notranslate"><span class="pre">domain_compaction_threshold</span></code> <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">catalog session property</span></a> can be used to adjust the default value of
<code class="docutils literal notranslate"><span class="pre">32</span></code> for this threshold.</p>
</section>
<section id="specific-configuration-properties">
<h3 id="specific-configuration-properties">Specific configuration properties<a class="headerlink" href="#specific-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The SQL Server connector supports additional catalog properties to configure the
behavior of the connector.</p>
<table>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sqlserver.snapshot-isolation.disabled</span></code></p></td>
<td><p>Control the automatic use of snapshot isolation for transactions issued by
Trino in SQL Server. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>, which means that snapshot
isolation is enabled.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="case-insensitive-matching">
<h3 id="case-insensitive-matching">Case insensitive matching<a class="headerlink" href="#case-insensitive-matching" title="Permalink to this heading">#</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">case-insensitive-name-matching</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, Trino
is able to query non-lowercase schemas and tables by maintaining a mapping of
the lowercase name to the actual name in the remote system. However, if two
schemas and/or tables have names that differ only in case (such as customers
and Customers) then Trino fails to query them due to ambiguity.</p>
<p>In these cases, use the <code class="docutils literal notranslate"><span class="pre">case-insensitive-name-matching.config-file</span></code> catalog
configuration property to specify a configuration file that maps these remote
schemas/tables to their respective Trino schemas/tables:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"schemas"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"remoteSchema"</span><span class="p">:</span> <span class="s2">"CaseSensitiveName"</span><span class="p">,</span>
      <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"case_insensitive_1"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"remoteSchema"</span><span class="p">:</span> <span class="s2">"cASEsENSITIVEnAME"</span><span class="p">,</span>
      <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"case_insensitive_2"</span>
    <span class="p">}],</span>
  <span class="nt">"tables"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"remoteSchema"</span><span class="p">:</span> <span class="s2">"CaseSensitiveName"</span><span class="p">,</span>
      <span class="nt">"remoteTable"</span><span class="p">:</span> <span class="s2">"tablex"</span><span class="p">,</span>
      <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"table_1"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"remoteSchema"</span><span class="p">:</span> <span class="s2">"CaseSensitiveName"</span><span class="p">,</span>
      <span class="nt">"remoteTable"</span><span class="p">:</span> <span class="s2">"TABLEX"</span><span class="p">,</span>
      <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"table_2"</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Queries against one of the tables or schemes defined in the <code class="docutils literal notranslate"><span class="pre">mapping</span></code>
attributes are run against the corresponding remote entity. For example, a query
against tables in the <code class="docutils literal notranslate"><span class="pre">case_insensitive_1</span></code> schema is forwarded to the
CaseSensitiveName schema and a query against <code class="docutils literal notranslate"><span class="pre">case_insensitive_2</span></code> is forwarded
to the <code class="docutils literal notranslate"><span class="pre">cASEsENSITIVEnAME</span></code> schema.</p>
<p>At the table mapping level, a query on <code class="docutils literal notranslate"><span class="pre">case_insensitive_1.table_1</span></code> as
configured above is forwarded to <code class="docutils literal notranslate"><span class="pre">CaseSensitiveName.tablex</span></code>, and a query on
<code class="docutils literal notranslate"><span class="pre">case_insensitive_1.table_2</span></code> is forwarded to <code class="docutils literal notranslate"><span class="pre">CaseSensitiveName.TABLEX</span></code>.</p>
<p>By default, when a change is made to the mapping configuration file, Trino must
be restarted to load the changes. Optionally, you can set the
<code class="docutils literal notranslate"><span class="pre">case-insensitive-name-mapping.refresh-period</span></code> to have Trino refresh the
properties without requiring a restart:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">case-insensitive-name-mapping.refresh-period</span><span class="o">=</span><span class="s">30s</span>
</pre></div>
</div>
</section>
<section id="non-transactional-insert">
<h3 id="non-transactional-insert">Non-transactional INSERT<a class="headerlink" href="#non-transactional-insert" title="Permalink to this heading">#</a></h3>
<p>The connector supports adding rows using <a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT statements</span></a>.
By default, data insertion is performed by writing data to a temporary table.
You can skip this step to improve performance and write directly to the target
table. Set the <code class="docutils literal notranslate"><span class="pre">insert.non-transactional-insert.enabled</span></code> catalog property
or the corresponding <code class="docutils literal notranslate"><span class="pre">non_transactional_insert</span></code> catalog session property to
<code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>Note that with this property enabled, data can be corrupted in rare cases where
exceptions occur during the insert operation. With transactions disabled, no
rollback can be performed.</p>
</section>
</section>
<section id="fault-tolerant-execution-support">
<span id="sqlserver-fte-support"></span><h2 id="fault-tolerant-execution-support">Fault-tolerant execution support<a class="headerlink" href="#fault-tolerant-execution-support" title="Permalink to this heading">#</a></h2>
<p>The connector supports <a class="reference internal" href="../admin/fault-tolerant-execution.html"><span class="doc">Fault-tolerant execution</span></a> of query
processing. Read and write operations are both supported with any retry policy.</p>
</section>
<section id="querying-sql-server">
<h2 id="querying-sql-server">Querying SQL Server<a class="headerlink" href="#querying-sql-server" title="Permalink to this heading">#</a></h2>
<p>The SQL Server connector provides access to all schemas visible to the specified
user in the configured database.</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">SCHEMAS</span></code> to see all the abvailable schemas in your SQL server
database:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SHOW</span> <span class="n">SCHEMAS</span> <span class="k">FROM</span> <span class="n">example</span><span class="p">;</span>
</pre></div>
</div>
<p>If you used a different name for your catalog properties file, use that catalog
name instead of <code class="docutils literal notranslate"><span class="pre">example</span></code>.</p>
<p><strong>Example:</strong></p>
<p>If you have a schema named <code class="docutils literal notranslate"><span class="pre">web</span></code>, you can run <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">TABLES</span></code> to view the tables
in the schema:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SHOW</span> <span class="n">TABLES</span> <span class="k">FROM</span> <span class="n">example</span><span class="p">.</span><span class="n">web</span><span class="p">;</span>
</pre></div>
</div>
<p>To see a list of the columns in the <code class="docutils literal notranslate"><span class="pre">clicks</span></code> table in the <code class="docutils literal notranslate"><span class="pre">web</span></code> database, run
either of the following:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DESCRIBE</span> <span class="n">example</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">clicks</span><span class="p">;</span>
<span class="k">SHOW</span> <span class="n">COLUMNS</span> <span class="k">FROM</span> <span class="n">example</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">clicks</span><span class="p">;</span>
</pre></div>
</div>
<p>To access the <code class="docutils literal notranslate"><span class="pre">clicks</span></code> table in the <code class="docutils literal notranslate"><span class="pre">web</span></code> database, run the following:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">example</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">clicks</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="type-mapping">
<span id="sqlserver-type-mapping"></span><h2 id="type-mapping">Type mapping<a class="headerlink" href="#type-mapping" title="Permalink to this heading">#</a></h2>
<p>Because Trino and SQL Server each support types that the other does not, this
connector <a class="reference internal" href="../language/types.html#type-mapping-overview"><span class="std std-ref">modifies some types</span></a> when reading or
writing data. Data types may not map the same way in both directions between
Trino and the data source. Refer to the following sections for type mapping in
each direction.</p>
<section id="sql-server-type-to-trino-type-mapping">
<h3 id="sql-server-type-to-trino-type-mapping">SQL Server type to Trino type mapping<a class="headerlink" href="#sql-server-type-to-trino-type-mapping" title="Permalink to this heading">#</a></h3>
<p>The connector maps SQL Server types to the corresponding Trino types following
this table:</p>
<table id="id2">
<caption><span class="caption-text">SQL Server type to Trino type mapping</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 30%"/>
<col style="width: 40%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>SQL Server database type</p></th>
<th class="head"><p>Trino type</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td><p>SQL Server <code class="docutils literal notranslate"><span class="pre">TINYINT</span></code> is actually <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">TINYINT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span> <span class="pre">PRECISION</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FLOAT[(n)]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code> or <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p>See <a class="reference internal" href="#sqlserver-numeric-mapping"><span class="std std-ref">Numeric type mapping</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL[(p[,</span> <span class="pre">s])]</span></code>, <code class="docutils literal notranslate"><span class="pre">NUMERIC[(p[,</span> <span class="pre">s])]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(p,</span> <span class="pre">s)</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CHAR[(n)]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHAR(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">8000</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NCHAR[(n)]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHAR(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">4000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR[(n</span> <span class="pre">|</span> <span class="pre">max)]</span></code>, <code class="docutils literal notranslate"><span class="pre">NVARCHAR[(n</span> <span class="pre">|</span> <span class="pre">max)]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">8000</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">=</span> <span class="pre">2147483647</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR(2147483647)</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NTEXT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR(1073741823)</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY[(n</span> <span class="pre">|</span> <span class="pre">max)]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">8000</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">=</span> <span class="pre">2147483647</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TIME[(n)]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIME(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">7</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DATETIME2[(n)]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">7</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SMALLDATETIME</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(0)</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DATETIMEOFFSET[(n)]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(n)</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">7</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="trino-type-to-sql-server-type-mapping">
<h3 id="trino-type-to-sql-server-type-mapping">Trino type to SQL Server type mapping<a class="headerlink" href="#trino-type-to-sql-server-type-mapping" title="Permalink to this heading">#</a></h3>
<p>The connector maps Trino types to the corresponding SQL Server types following
this table:</p>
<table id="id3">
<caption><span class="caption-text">Trino type to SQL Server type mapping</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 30%"/>
<col style="width: 40%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino type</p></th>
<th class="head"><p>SQL Server type</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIT</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></td>
<td><p>Trino only supports writing values belonging to <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">127]</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span> <span class="pre">PRECISION</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(p,</span> <span class="pre">s)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(p,</span> <span class="pre">s)</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CHAR(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NCHAR(n)</span></code> or <code class="docutils literal notranslate"><span class="pre">NVARCHAR(max)</span></code></p></td>
<td><p>See <a class="reference internal" href="#sqlserver-character-mapping"><span class="std std-ref">Character type mapping</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NVARCHAR(n)</span></code> or <code class="docutils literal notranslate"><span class="pre">NVARCHAR(max)</span></code></p></td>
<td><p>See <a class="reference internal" href="#sqlserver-character-mapping"><span class="std std-ref">Character type mapping</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY(max)</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TIME(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIME(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">7</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATETIME2(n)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">7</span></code></p></td>
</tr>
</tbody>
</table>
<p>See the Microsoft documentation for the complete list of <a class="reference external" href="https://msdn.microsoft.com/library/ms187752.aspx">SQL Server data
types</a>.</p>
</section>
<section id="numeric-type-mapping">
<span id="sqlserver-numeric-mapping"></span><h3 id="numeric-type-mapping">Numeric type mapping<a class="headerlink" href="#numeric-type-mapping" title="Permalink to this heading">#</a></h3>
<p>For SQL Server <code class="docutils literal notranslate"><span class="pre">FLOAT[(n)]</span></code>:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">n</span></code> is not specified maps to Trino <code class="docutils literal notranslate"><span class="pre">Double</span></code></p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">24</span></code> maps to Trino <code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">24</span> <span class="pre">&lt;</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">53</span></code> maps to Trino <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></li>
</ul>
</section>
<section id="character-type-mapping">
<span id="sqlserver-character-mapping"></span><h3 id="character-type-mapping">Character type mapping<a class="headerlink" href="#character-type-mapping" title="Permalink to this heading">#</a></h3>
<p>For Trino <code class="docutils literal notranslate"><span class="pre">CHAR(n)</span></code>:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">4000</span></code> maps SQL Server <code class="docutils literal notranslate"><span class="pre">NCHAR(n)</span></code></p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&gt;</span> <span class="pre">4000</span></code> maps SQL Server <code class="docutils literal notranslate"><span class="pre">NVARCHAR(max)</span></code></p></li>
</ul>
<p>For Trino <code class="docutils literal notranslate"><span class="pre">VARCHAR(n)</span></code>:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">4000</span></code> maps SQL Server <code class="docutils literal notranslate"><span class="pre">NVARCHAR(n)</span></code></p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&gt;</span> <span class="pre">4000</span></code> maps SQL Server <code class="docutils literal notranslate"><span class="pre">NVARCHAR(max)</span></code></p></li>
</ul>
</section>
<section id="type-mapping-configuration-properties">
<h3 id="type-mapping-configuration-properties">Type mapping configuration properties<a class="headerlink" href="#type-mapping-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The following properties can be used to configure how data types from the
connected data source are mapped to Trino data types and how the metadata is
cached in Trino.</p>
<table>
<colgroup>
<col style="width: 30%"/>
<col style="width: 40%"/>
<col style="width: 30%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unsupported-type-handling</span></code></p></td>
<td><p>Configure how unsupported column data types are handled:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IGNORE</span></code>, column is not accessible.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONVERT_TO_VARCHAR</span></code>, column is converted to unbounded <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code>.</p></li>
</ul>
<p>The respective catalog session property is <code class="docutils literal notranslate"><span class="pre">unsupported_type_handling</span></code>.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">IGNORE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">jdbc-types-mapped-to-varchar</span></code></p></td>
<td><p>Allow forced mapping of comma separated lists of data types to convert to
unbounded <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="sql-support">
<span id="sqlserver-sql-support"></span><h2 id="sql-support">SQL support<a class="headerlink" href="#sql-support" title="Permalink to this heading">#</a></h2>
<p>The connector provides read access and write access to data and metadata in SQL
Server. In addition to the <a class="reference internal" href="../language/sql-support.html#sql-globally-available"><span class="std std-ref">globally available</span></a>
and <a class="reference internal" href="../language/sql-support.html#sql-read-operations"><span class="std std-ref">read operation</span></a> statements, the connector
supports the following statements:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT</span></a></p></li>
<li><p><a class="reference internal" href="../sql/update.html"><span class="doc">UPDATE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/delete.html"><span class="doc">DELETE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/truncate.html"><span class="doc">TRUNCATE</span></a></p></li>
<li><p><a class="reference internal" href="../language/sql-support.html#sql-schema-table-management"><span class="std std-ref">Schema and table management</span></a></p></li>
</ul>
<section id="update">
<h3 id="update">UPDATE<a class="headerlink" href="#update" title="Permalink to this heading">#</a></h3>
<p>Only <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> statements with constant assignments and predicates are
supported. For example, the following statement is supported because the values
assigned are constants:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span> <span class="k">table</span> <span class="k">SET</span> <span class="n">col1</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">WHERE</span> <span class="n">col3</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Arithmetic expressions, function calls, and other non-constant <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>
statements are not supported. For example, the following statement is not
supported because arithmetic expressions cannot be used with the <code class="docutils literal notranslate"><span class="pre">SET</span></code>
command:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span> <span class="k">table</span> <span class="k">SET</span> <span class="n">col1</span> <span class="o">=</span> <span class="n">col2</span> <span class="o">+</span> <span class="mi">2</span> <span class="k">WHERE</span> <span class="n">col3</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>All column values of a table row cannot be updated simultaneously. For a three
column table, the following statement is not supported:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span> <span class="k">table</span> <span class="k">SET</span> <span class="n">col1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">col2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">col3</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">WHERE</span> <span class="n">col3</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="sql-delete">
<h3 id="sql-delete">SQL DELETE<a class="headerlink" href="#sql-delete" title="Permalink to this heading">#</a></h3>
<p>If a <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause is specified, the <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> operation only works if the
predicate in the clause can be fully pushed down to the data source.</p>
</section>
<section id="alter-table-execute">
<span id="sqlserver-collect-statistics"></span><h3 id="alter-table-execute">ALTER TABLE EXECUTE<a class="headerlink" href="#alter-table-execute" title="Permalink to this heading">#</a></h3>
<p>This connector supports the following commands for use with
<a class="reference internal" href="../sql/alter-table.html#alter-table-execute"><span class="std std-ref">ALTER TABLE EXECUTE</span></a>:</p>
<section id="collect-statistics">
<h4 id="collect-statistics">collect_statistics<a class="headerlink" href="#collect-statistics" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">collect_statistics</span></code> command is used with
<a class="reference internal" href="../optimizer/managed-statistics.html"><span class="doc">Managed statistics</span></a> to collect statistics for a table
and its columns.</p>
<p>The following statement collects statistics for the <code class="docutils literal notranslate"><span class="pre">example_table</span></code> table
and all of its columns:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">example_table</span> <span class="k">EXECUTE</span> <span class="n">collect_statistics</span><span class="p">;</span>
</pre></div>
</div>
<p>Collecting statistics for all columns in a table may be unnecessarily
performance-intensive, especially for wide tables. To only collect statistics
for a subset of columns, you can include the <code class="docutils literal notranslate"><span class="pre">columns</span></code> parameter with an
array of column names. For example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">example_table</span>
    <span class="k">EXECUTE</span> <span class="n">collect_statistics</span><span class="p">(</span><span class="n">columns</span> <span class="o">=&gt;</span> <span class="nb">ARRAY</span><span class="p">[</span><span class="s1">'customer'</span><span class="p">,</span><span class="s1">'line_item'</span><span class="p">]);</span>
</pre></div>
</div>
</section>
</section>
<section id="alter-table-rename-to">
<h3 id="alter-table-rename-to">ALTER TABLE RENAME TO<a class="headerlink" href="#alter-table-rename-to" title="Permalink to this heading">#</a></h3>
<p>The connector does not support renaming tables across multiple schemas. For
example, the following statement is supported:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">example</span><span class="p">.</span><span class="n">schema_one</span><span class="p">.</span><span class="n">table_one</span> <span class="k">RENAME</span> <span class="k">TO</span> <span class="n">example</span><span class="p">.</span><span class="n">schema_one</span><span class="p">.</span><span class="n">table_two</span>
</pre></div>
</div>
<p>The following statement attempts to rename a table across schemas, and therefore
is not supported:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">example</span><span class="p">.</span><span class="n">schema_one</span><span class="p">.</span><span class="n">table_one</span> <span class="k">RENAME</span> <span class="k">TO</span> <span class="n">example</span><span class="p">.</span><span class="n">schema_two</span><span class="p">.</span><span class="n">table_two</span>
</pre></div>
</div>
</section>
<section id="insert">
<span id="sqlserver-insert"></span><h3 id="insert">INSERT<a class="headerlink" href="#insert" title="Permalink to this heading">#</a></h3>
<p>The connector supports adding rows using <a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT statements</span></a>.
By default, data insertion is performed by writing data to a temporary table.
You can skip this step to improve performance and write directly to the target
table.</p>
<p>Set the catalog property <code class="docutils literal notranslate"><span class="pre">sqlserver.non-transactional-insert.enabled</span></code> or the
corresponding catalog session property <code class="docutils literal notranslate"><span class="pre">non_transactional_insert</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>In rare cases when exceptions occur during the insert operation, data in
the target table can be corrupted. Since transactions have been disabled, no
rollback can be performed.</p>
</section>
<section id="procedures">
<h3 id="procedures">Procedures<a class="headerlink" href="#procedures" title="Permalink to this heading">#</a></h3>
<section id="system-flush-metadata-cache">
<h4 id="system-flush-metadata-cache"><code class="docutils literal notranslate"><span class="pre">system.flush_metadata_cache()</span></code><a class="headerlink" href="#system-flush-metadata-cache" title="Permalink to this heading">#</a></h4>
<p>Flush JDBC metadata caches. For example, the following system call
flushes the metadata caches for all schemas in the <code class="docutils literal notranslate"><span class="pre">example</span></code> catalog</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">USE</span> <span class="n">example</span><span class="p">.</span><span class="n">example_schema</span><span class="p">;</span>
<span class="k">CALL</span> <span class="k">system</span><span class="p">.</span><span class="n">flush_metadata_cache</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="system-execute-query">
<h4 id="system-execute-query"><code class="docutils literal notranslate"><span class="pre">system.execute('query')</span></code><a class="headerlink" href="#system-execute-query" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">execute</span></code> procedure allows you to execute a query in the underlying data
source directly. The query must use supported syntax of the connected data
source. Use the procedure to access features which are not available in Trino
or to execute queries that return no result set and therefore can not be used
with the <code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">raw_query</span></code> pass-through table function. Typical use cases
are statements that create or alter objects, and require native feature such
as constraints, default values, automatic identifier creation, or indexes.
Queries can also invoke statements that insert, update, or delete data, and do
not return any data as a result.</p>
<p>The query text is not parsed by Trino, only passed through, and therefore only
subject to any security or access control of the underlying data source.</p>
<p>The following example sets the current database to the <code class="docutils literal notranslate"><span class="pre">example_schema</span></code> of the
<code class="docutils literal notranslate"><span class="pre">example</span></code> catalog. Then it calls the procedure in that schema to drop the
default value from <code class="docutils literal notranslate"><span class="pre">your_column</span></code> on <code class="docutils literal notranslate"><span class="pre">your_table</span></code> table using the standard SQL
syntax in the parameter value assigned for <code class="docutils literal notranslate"><span class="pre">query</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">USE</span> <span class="n">example</span><span class="p">.</span><span class="n">example_schema</span><span class="p">;</span>
<span class="k">CALL</span> <span class="k">system</span><span class="p">.</span><span class="k">execute</span><span class="p">(</span><span class="n">query</span> <span class="o">=&gt;</span> <span class="s1">'ALTER TABLE your_table ALTER COLUMN your_column DROP DEFAULT'</span><span class="p">);</span>
</pre></div>
</div>
<p>Verify that the specific database supports this syntax, and adapt as necessary
based on the documentation for the specific connected database and database
version.</p>
</section>
</section>
<section id="table-functions">
<h3 id="table-functions">Table functions<a class="headerlink" href="#table-functions" title="Permalink to this heading">#</a></h3>
<p>The connector provides specific <a class="reference internal" href="../functions/table.html"><span class="doc">table functions</span></a> to
access SQL Server.</p>
<section id="query-varchar-table">
<span id="sqlserver-query-function"></span><h4 id="query-varchar-table"><code class="docutils literal notranslate"><span class="pre">query(varchar)</span> <span class="pre">-&gt;</span> <span class="pre">table</span></code><a class="headerlink" href="#query-varchar-table" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">query</span></code> function lets you to query the underlying database directly. It
requires syntax native to SQL Server, because the full query is pushed down and
processed in SQL Server. This can be useful for accessing native features which
are not implemented in SEP or for improving query performance in situations
where running a query natively may be faster.</p>
<p>The native query passed to the underlying data source is required to return a
table as a result set. Only the data source performs validation or security
checks for these queries using its own configuration. Trino does not perform
these tasks. Only use passthrough queries to read data.</p>
<p>For example, query the <code class="docutils literal notranslate"><span class="pre">example</span></code> catalog and select the top 10 percent of
nations by population:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="o">*</span>
<span class="k">FROM</span>
  <span class="k">TABLE</span><span class="p">(</span>
    <span class="n">example</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">query</span><span class="p">(</span>
      <span class="n">query</span> <span class="o">=&gt;</span> <span class="s1">'SELECT</span>
<span class="s1">        TOP(10) PERCENT *</span>
<span class="s1">      FROM</span>
<span class="s1">        tpch.nation</span>
<span class="s1">      ORDER BY</span>
<span class="s1">        population DESC'</span>
    <span class="p">)</span>
  <span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="procedure-varchar-table">
<span id="sqlserver-procedure-function"></span><h3 id="procedure-varchar-table"><code class="docutils literal notranslate"><span class="pre">procedure(varchar)</span> <span class="pre">-&gt;</span> <span class="pre">table</span></code><a class="headerlink" href="#procedure-varchar-table" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">procedure</span></code> function lets you run stored procedures on the underlying
database directly. It requires syntax native to SQL Server, because the full
query is pushed down and processed in SQL Server. In order to use this table
function set <code class="docutils literal notranslate"><span class="pre">sqlserver.experimental.stored-procedure-table-function-enabled</span></code> to
<code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">procedure</span></code> function does not support running StoredProcedures that return
multiple statements, use a non-select statement, use output parameters, or use
conditional statements.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature is experimental only. The function has security implication and
syntax might change and be backward incompatible.</p>
</div>
<p>The following example runs the stored procedure <code class="docutils literal notranslate"><span class="pre">employee_sp</span></code> in the <code class="docutils literal notranslate"><span class="pre">example</span></code>
catalog and the <code class="docutils literal notranslate"><span class="pre">example_schema</span></code> schema in the underlying SQL Server database:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="o">*</span>
<span class="k">FROM</span>
  <span class="k">TABLE</span><span class="p">(</span>
    <span class="n">example</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="k">procedure</span><span class="p">(</span>
      <span class="n">query</span> <span class="o">=&gt;</span> <span class="s1">'EXECUTE example_schema.employee_sp'</span>
    <span class="p">)</span>
  <span class="p">);</span>
</pre></div>
</div>
<p>If the stored procedure <code class="docutils literal notranslate"><span class="pre">employee_sp</span></code> requires any input append the parameter
value to the procedure statement:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="o">*</span>
<span class="k">FROM</span>
  <span class="k">TABLE</span><span class="p">(</span>
    <span class="n">example</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="k">procedure</span><span class="p">(</span>
      <span class="n">query</span> <span class="o">=&gt;</span> <span class="s1">'EXECUTE example_schema.employee_sp 0'</span>
    <span class="p">)</span>
  <span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The query engine does not preserve the order of the results of this
function. If the passed query contains an <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause, the
function result may not be ordered as expected.</p>
</div>
</section>
</section>
<section id="performance">
<h2 id="performance">Performance<a class="headerlink" href="#performance" title="Permalink to this heading">#</a></h2>
<p>The connector includes a number of performance features, detailed in the
following sections.</p>
<section id="parallelism">
<span id="sqlserver-parallelism"></span><h3 id="parallelism">Parallelism<a class="headerlink" href="#parallelism" title="Permalink to this heading">#</a></h3>
<p>The connector is able to read data from SQL Server using multiple parallel
connections for tables partitioned as described in the <a class="reference external" href="https://learn.microsoft.com/sql/relational-databases/partitions/partitioned-tables-and-indexes?view=sql-server-ver16">SQL Server partitioning
documentation</a>.</p>
<table id="id4">
<caption><span class="caption-text">SQL Server parallelism configuration properties</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 25%"/>
<col style="width: 50%"/>
<col style="width: 25%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sqlserver.parallel.connections_count</span></code></p></td>
<td><p>Defines the maximum number of parallel splits during query execution. Use
this property to limit the number of splits for tables with a large number
of partitions to avoid opening a large number of connections. The default
value of <code class="docutils literal notranslate"><span class="pre">1</span></code> disables parallelism. The maximum number of connections is
automatically limited to the number of partitions in the table; if this
number is set higher, it is ignored, and the number of partitions used
instead. The equivalent catalog session property is
<code class="docutils literal notranslate"><span class="pre">parallel_connections_count</span></code>.</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<p>In the event that multiple parallel connections result in a deadlocked state,
the connector attempts to retry the operation up to 3 times.</p>
</section>
<section id="dynamic-filtering">
<h3 id="dynamic-filtering">Dynamic filtering<a class="headerlink" href="#dynamic-filtering" title="Permalink to this heading">#</a></h3>
<p><a class="reference internal" href="../admin/dynamic-filtering.html"><span class="doc">Dynamic filtering</span></a> is enabled by default. It
causes the connector to wait for dynamic filtering to complete before starting a
JDBC query.</p>
<p>You can disable dynamic filtering by setting the  <code class="docutils literal notranslate"><span class="pre">dynamic-filtering.enabled</span></code>
property in your catalog configuration file to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<section id="wait-timeout">
<h4 id="wait-timeout">Wait timeout<a class="headerlink" href="#wait-timeout" title="Permalink to this heading">#</a></h4>
<p>By default, table scans on the connector are delayed up to 20 seconds until
dynamic filters are collected from the build side of joins. Using a large
timeout can potentially result in more detailed dynamic filters.
However, it can also increase latency for some queries.</p>
<p>You can configure the <code class="docutils literal notranslate"><span class="pre">dynamic-filtering.wait-timeout</span></code> property in your
catalog properties file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">dynamic-filtering.wait-timeout</span><span class="o">=</span><span class="s">1m</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">dynamic_filtering_wait_timeout</span></code> <a class="reference internal" href="../sql/set-session.html"><span class="doc">catalog session property</span></a> in a specific session:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SET SESSION example.dynamic_filtering_wait_timeout = 1s;
</pre></div>
</div>
</section>
<section id="compaction">
<h4 id="compaction">Compaction<a class="headerlink" href="#compaction" title="Permalink to this heading">#</a></h4>
<p>The maximum size of dynamic filter predicate, that is pushed down to the
connector during table scan for a column, is configured using the
<code class="docutils literal notranslate"><span class="pre">domain-compaction-threshold</span></code> property in the catalog
properties file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">domain-compaction-threshold</span><span class="o">=</span><span class="s">100</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">domain_compaction_threshold</span></code> catalog
session property:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SET SESSION domain_compaction_threshold = 10;
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">domain-compaction-threshold</span></code> is set to <code class="docutils literal notranslate"><span class="pre">32</span></code>.
When the dynamic predicate for a column exceeds this threshold, it is compacted
into a single range predicate.</p>
<p>For example, if the dynamic filter collected for a date column <code class="docutils literal notranslate"><span class="pre">dt</span></code> on the
fact table selects more than 32 days, the filtering condition is simplified from
<code class="docutils literal notranslate"><span class="pre">dt</span> <span class="pre">IN</span> <span class="pre">('2020-01-10',</span> <span class="pre">'2020-01-12',...,</span> <span class="pre">'2020-05-30')</span></code> to <code class="docutils literal notranslate"><span class="pre">dt</span> <span class="pre">BETWEEN</span> <span class="pre">'2020-01-10'</span> <span class="pre">AND</span> <span class="pre">'2020-05-30'</span></code>. Using a large threshold can result in increased
table scan overhead due to a large <code class="docutils literal notranslate"><span class="pre">IN</span></code> list getting pushed down to the data
source.</p>
</section>
<section id="metrics">
<h4 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permalink to this heading">#</a></h4>
<p>Metrics about dynamic filtering are reported in a JMX table for each catalog:</p>
<p><code class="docutils literal notranslate"><span class="pre">jmx.current."io.trino.plugin.jdbc:name=example,type=dynamicfilteringstats"</span></code></p>
<p>Metrics include information about the total number of dynamic filters, the
number of completed dynamic filters, the number of available dynamic filters and
the time spent waiting for dynamic filters.</p>
</section>
</section>
<section id="table-statistics">
<span id="sqlserver-table-statistics"></span><h3 id="table-statistics">Table statistics<a class="headerlink" href="#table-statistics" title="Permalink to this heading">#</a></h3>
<p>The SQL Server connector can use <a class="reference internal" href="../optimizer/statistics.html"><span class="doc">table and column statistics</span></a> for <a class="reference internal" href="../optimizer/cost-based-optimizations.html"><span class="doc">cost based optimizations</span></a> to improve query processing performance
based on the actual data in the data source.</p>
<p>The statistics are collected by SQL Server and retrieved by the connector.</p>
<p>The connector can use information stored in single-column statistics. SQL Server
Database can automatically create column statistics for certain columns. To
manually create statistics for a certain column, run the following statement:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">STATISTICS</span> <span class="n">example_statistics_name</span> <span class="k">ON</span> <span class="n">table_schema</span><span class="p">.</span><span class="k">table_name</span> <span class="p">(</span><span class="k">column_name</span><span class="p">);</span>
</pre></div>
</div>
<p>SQL Server Database routinely updates the statistics. In some cases, you may
want to manually update statistics. To manually update statistics, run the
following statement in SQL Server Database.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span> <span class="k">STATISTICS</span> <span class="n">table_schema</span><span class="p">.</span><span class="k">table_name</span><span class="p">;</span>
</pre></div>
</div>
<p>Refer to <a class="reference external" href="https://learn.microsoft.com/sql/t-sql/statements/update-statistics-transact-sql?view=sql-server-ver16#limitations">SQL Server
documentation</a>
for information about options, limitations, and additional considerations.</p>
</section>
<section id="managed-statistics">
<h3 id="managed-statistics">Managed statistics<a class="headerlink" href="#managed-statistics" title="Permalink to this heading">#</a></h3>
<p>The connector supports <a class="reference internal" href="../optimizer/managed-statistics.html"><span class="doc">Managed statistics</span></a> which lets SEP
collect and store table and column statistics that can then be used for
performance optimizations in query planning.</p>
<p>Statistics must be collected manually using the built-in <code class="docutils literal notranslate"><span class="pre">collect_statistics</span></code>
command, see <a class="reference internal" href="#sqlserver-collect-statistics"><span class="std std-ref">ALTER TABLE EXECUTE</span></a> for details and
examples.</p>
</section>
<section id="pushdown">
<span id="sqlserver-pushdown"></span><h3 id="pushdown">Pushdown<a class="headerlink" href="#pushdown" title="Permalink to this heading">#</a></h3>
<p>The connector supports <a class="reference internal" href="../optimizer/pushdown.html"><span class="doc">pushdown</span></a> for a number of
operations:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../optimizer/pushdown.html#join-pushdown"><span class="std std-ref">Join pushdown</span></a></p></li>
<li><p><a class="reference internal" href="../optimizer/pushdown.html#limit-pushdown"><span class="std std-ref">Limit pushdown</span></a></p></li>
<li><p><a class="reference internal" href="../optimizer/pushdown.html#topn-pushdown"><span class="std std-ref">Top-N pushdown</span></a></p></li>
</ul>
<p>In addition, the connector supports<a class="reference internal" href="../optimizer/pushdown.html#aggregation-pushdown"><span class="std std-ref">Aggregate pushdown</span></a> for the following functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../functions/aggregate.html#avg" title="avg"><code class="xref py py-func docutils literal notranslate"><span class="pre">avg()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#count" title="count"><code class="xref py py-func docutils literal notranslate"><span class="pre">count()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#max" title="max"><code class="xref py py-func docutils literal notranslate"><span class="pre">max()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#min" title="min"><code class="xref py py-func docutils literal notranslate"><span class="pre">min()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#sum" title="sum"><code class="xref py py-func docutils literal notranslate"><span class="pre">sum()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#stddev" title="stddev"><code class="xref py py-func docutils literal notranslate"><span class="pre">stddev()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#stddev_pop" title="stddev_pop"><code class="xref py py-func docutils literal notranslate"><span class="pre">stddev_pop()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#stddev_samp" title="stddev_samp"><code class="xref py py-func docutils literal notranslate"><span class="pre">stddev_samp()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#variance" title="variance"><code class="xref py py-func docutils literal notranslate"><span class="pre">variance()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#var_pop" title="var_pop"><code class="xref py py-func docutils literal notranslate"><span class="pre">var_pop()</span></code></a></p></li>
<li><p><a class="reference internal" href="../functions/aggregate.html#var_samp" title="var_samp"><code class="xref py py-func docutils literal notranslate"><span class="pre">var_samp()</span></code></a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The connector performs pushdown where performance may be improved, but in
order to preserve correctness an operation may not be pushed down. When
pushdown of an operation may result in better performance but risks
correctness, the connector prioritizes correctness.</p>
</div>
<section id="cost-based-join-pushdown">
<h4 id="cost-based-join-pushdown">Cost-based join pushdown<a class="headerlink" href="#cost-based-join-pushdown" title="Permalink to this heading">#</a></h4>
<p>The connector supports cost-based <a class="reference internal" href="../optimizer/pushdown.html#join-pushdown"><span class="std std-ref">Join pushdown</span></a> to make intelligent
decisions about whether to push down a join operation to the data source.</p>
<p>When cost-based join pushdown is enabled, the connector only pushes down join
operations if the available <a class="reference internal" href="../optimizer/statistics.html"><span class="doc">Table statistics</span></a> suggest that doing so
improves performance. Note that if no table statistics are available, join
operation pushdown does not occur to avoid a potential decrease in query
performance.</p>
<p>The following table describes catalog configuration properties for
join pushdown:</p>
<table>
<colgroup>
<col style="width: 30%"/>
<col style="width: 40%"/>
<col style="width: 30%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">join-pushdown.enabled</span></code></p></td>
<td><p>Enable <a class="reference internal" href="../optimizer/pushdown.html#join-pushdown"><span class="std std-ref">join pushdown</span></a>. Equivalent <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">catalog
session property</span></a> is
<code class="docutils literal notranslate"><span class="pre">join_pushdown_enabled</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">join-pushdown.strategy</span></code></p></td>
<td><p>Strategy used to evaluate whether join operations are pushed down. Set to
<code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code> to enable cost-based join pushdown, or <code class="docutils literal notranslate"><span class="pre">EAGER</span></code> to
push down joins whenever possible. Note that <code class="docutils literal notranslate"><span class="pre">EAGER</span></code> can push down joins
even when table statistics are unavailable, which may result in degraded
query performance. Because of this, <code class="docutils literal notranslate"><span class="pre">EAGER</span></code> is only recommended for
testing and troubleshooting purposes.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="predicate-pushdown-support">
<h4 id="predicate-pushdown-support">Predicate pushdown support<a class="headerlink" href="#predicate-pushdown-support" title="Permalink to this heading">#</a></h4>
<p>The connector supports pushdown of predicates on <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> and <code class="docutils literal notranslate"><span class="pre">NVARCHAR</span></code>
columns if the underlying columns in SQL Server use a case-sensitive
<a class="reference external" href="https://learn.microsoft.com/sql/relational-databases/collations/collation-and-unicode-support?view=sql-server-ver16">collation</a>.</p>
<p>The following operators are pushed down:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">=</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">IN</span></code></p></li>
</ul>
<p>To ensure correct results, operators are not pushed down for columns using a
case-insensitive collation.</p>
</section>
</section>
<section id="bulk-insert">
<span id="sqlserver-bulk-insert"></span><h3 id="bulk-insert">Bulk insert<a class="headerlink" href="#bulk-insert" title="Permalink to this heading">#</a></h3>
<p>Use the <a class="reference external" href="https://docs.microsoft.com/sql/connect/jdbc/use-bulk-copy-api-batch-insert-operation">bulk copy
API</a>
to drastically speed up write operations.</p>
<p>Enable bulk copying and a lock on the destination table to meet <a class="reference external" href="https://docs.microsoft.com/sql/relational-databases/import-export/prerequisites-for-minimal-logging-in-bulk-import">minimal
logging requirements</a>.</p>
<p>The following table shows the relevant catalog configuration properties and
their default values:</p>
<table id="id5">
<caption><span class="caption-text">Bulk load properties</span><a class="headerlink" href="#id5" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 60%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sqlserver.bulk-copy-for-write.enabled</span></code></p></td>
<td><p>Use the SQL Server bulk copy API for writes. The corresponding catalog
session property is <code class="docutils literal notranslate"><span class="pre">bulk_copy_for_write</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sqlserver.bulk-copy-for-write.lock-destination-table</span></code></p></td>
<td><p>Obtain a bulk update lock on the destination table for write operations. The
corresponding catalog session property is
<code class="docutils literal notranslate"><span class="pre">bulk_copy_for_write_lock_destination_table</span></code>. Setting is only used when
<code class="docutils literal notranslate"><span class="pre">bulk-copy-for-write.enabled=true</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
</tbody>
</table>
<p>Limitations:</p>
<ul class="simple">
<li><p>Column names with leading and trailing spaces are not supported.</p></li>
</ul>
</section>
<section id="starburst-cached-views">
<h3 id="starburst-cached-views">Starburst Cached Views<a class="headerlink" href="#starburst-cached-views" title="Permalink to this heading">#</a></h3>
<p>The connector supports <a class="reference internal" href="../admin/table-scan-redirection.html"><span class="doc">table scan redirection</span></a> to improve performance and reduce load on the
data source.</p>
</section>
<section id="data-compression">
<h3 id="data-compression">Data compression<a class="headerlink" href="#data-compression" title="Permalink to this heading">#</a></h3>
<p>You can specify the <a class="reference external" href="https://docs.microsoft.com/sql/relational-databases/data-compression/data-compression">data compression policy for SQL Server
tables</a>
with the <code class="docutils literal notranslate"><span class="pre">data_compression</span></code> table property. Valid policies are <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, <code class="docutils literal notranslate"><span class="pre">ROW</span></code> or
<code class="docutils literal notranslate"><span class="pre">PAGE</span></code>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">example_schema</span><span class="p">.</span><span class="n">scientists</span> <span class="p">(</span>
  <span class="n">recordkey</span> <span class="nb">VARCHAR</span><span class="p">,</span>
  <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">,</span>
  <span class="n">age</span> <span class="nb">BIGINT</span><span class="p">,</span>
  <span class="n">birthday</span> <span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span> <span class="p">(</span>
  <span class="n">data_compression</span> <span class="o">=</span> <span class="s1">'ROW'</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="security">
<h2 id="security">Security<a class="headerlink" href="#security" title="Permalink to this heading">#</a></h2>
<p>The connector includes a number of security-related features, detailed in the
following sections.</p>
<section id="user-impersonation">
<h3 id="user-impersonation">User impersonation<a class="headerlink" href="#user-impersonation" title="Permalink to this heading">#</a></h3>
<p>The connector supports <a class="reference internal" href="../security/impersonation.html"><span class="doc">user impersonation</span></a>.</p>
<p>To enable user impersonation in the catalog file, add the following property:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">sqlserver.impersonation.enabled</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>User impersonation in SQL Server connector is based on <code class="docutils literal notranslate"><span class="pre">EXECUTE</span> <span class="pre">AS</span> <span class="pre">USER</span></code>. For
more information, see the <a class="reference external" href="https://docs.microsoft.com/sql/t-sql/statements/execute-as-transact-sql?view=sql-server-2017">SQL Server
documentation</a>.</p>
</section>
<section id="kerberos-authentication">
<h3 id="kerberos-authentication">Kerberos authentication<a class="headerlink" href="#kerberos-authentication" title="Permalink to this heading">#</a></h3>
<p>The connector supports <a class="reference internal" href="../security/kerberos.html"><span class="doc">Kerberos authentication</span></a> using a keytab. To configure
Kerberos authentication, add the following properties to the catalog properties
file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">sqlserver.authentication.type</span><span class="o">=</span><span class="s">KERBEROS</span>
<span class="na">kerberos.client.principal</span><span class="o">=</span><span class="s">example@example.com</span>
<span class="na">kerberos.client.keytab</span><span class="o">=</span><span class="s">etc/kerberos/example.keytab</span>
<span class="na">kerberos.config</span><span class="o">=</span><span class="s">etc/kerberos/krb5.conf</span>
</pre></div>
</div>
<p>In this configuration, the user <code class="docutils literal notranslate"><span class="pre">example@example.com</span></code> connects to the database.
The related Kerberos service ticket is located in the
<code class="docutils literal notranslate"><span class="pre">etc/kerberos/example.keytab</span></code> file defined in the <code class="docutils literal notranslate"><span class="pre">kerberos.client.keytab</span></code>
property.</p>
</section>
<section id="kerberos-credential-pass-through">
<span id="sqlserver-kerberos-passthrough"></span><h3 id="kerberos-credential-pass-through">Kerberos credential pass-through<a class="headerlink" href="#kerberos-credential-pass-through" title="Permalink to this heading">#</a></h3>
<p>You can configure SQL Server to pass through Kerberos credentials, received by
SEP, to the SQL server database. To configure credential pass-through in
Kerberos and SEP, see <a class="reference internal" href="../security/kerberos-passthrough.html"><span class="doc">Kerberos credential pass-through</span></a>.</p>
<p>After you configure Kerberos and SEP, edit the catalog properties file to
enable the connector to pass the credentials to the SQL Server
database.</p>
<p>Confirm the correct Kerberos client configuration properties in
the catalog properties file. For example:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">sqlserver.authentication.type</span><span class="o">=</span><span class="s">KERBEROS_PASS_THROUGH</span>
<span class="na">http.authentication.krb5.config</span><span class="o">=</span><span class="s">/etc/krb5.conf</span>
<span class="na">http-server.authentication.krb5.service-name</span><span class="o">=</span><span class="s">exampleServiceName</span>
<span class="na">http-server.authentication.krb5.keytab</span><span class="o">=</span><span class="s">/path/to/Keytab/File</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <a class="reference internal" href="../overview/sep-ui.html#ui-kerberos-auth"><span class="std std-ref">delegated Kerberos authentication</span></a> is configured
for the Starburst Enterprise web UI, make sure the <code class="docutils literal notranslate"><span class="pre">http-server.authentication.krb5.service-name</span></code>
value is set to <code class="docutils literal notranslate"><span class="pre">HTTP</span></code> to match the configured Kerberos service name.</p>
</div>
<p>Now any SQL server database accessed using SEP is subject to the
Kerberos-defined data access restrictions and permissions.</p>
</section>
<section id="password-credential-pass-through">
<h3 id="password-credential-pass-through">Password credential pass-through<a class="headerlink" href="#password-credential-pass-through" title="Permalink to this heading">#</a></h3>
<p>The connector supports <a class="reference internal" href="../security/password-passthrough.html"><span class="doc">password credential pass-through</span></a>. To enable it, edit the catalog properties
file to include the authentication type:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">sqlserver.authentication.type</span><span class="o">=</span><span class="s">PASSWORD_PASS_THROUGH</span>
</pre></div>
</div>
</section>
<section id="ntlm-authentication">
<h3 id="ntlm-authentication">NTLM authentication<a class="headerlink" href="#ntlm-authentication" title="Permalink to this heading">#</a></h3>
<p>The connector supports NTLM authentication as an alternative to Kerberos
authentication for environments where Kerberos auth is not feasible.</p>
<p>To enable NTLM authentication, configure the following properties in the catalog
properties file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connection-user</span><span class="o">=</span><span class="s">ad_username</span>
<span class="na">connection-password</span><span class="o">=</span><span class="s">ad_password</span>
<span class="na">sqlserver.authentication.type</span><span class="o">=</span><span class="s">NTLM_PASSWORD</span>
</pre></div>
</div>
<p>In this configuration, the user <code class="docutils literal notranslate"><span class="pre">ad_username</span></code> and password <code class="docutils literal notranslate"><span class="pre">ad_password</span></code> are
Active Directory credentials for a single user who has underlying access to the
data source.</p>
<section id="tls-https-settings">
<h4 id="tls-https-settings">TLS/HTTPS settings<a class="headerlink" href="#tls-https-settings" title="Permalink to this heading">#</a></h4>
<p>Microsoft strongly suggests <a class="reference external" href="https://docs.microsoft.com/sql/connect/jdbc/using-ntlm-authentication-to-connect-to-sql-server?view=sql-server-ver15#security-risks">encrypting traffic using
TLS</a>
when using NTLM authentication.</p>
<p>If you have globally-trusted certificates installed on both SEP and the data
source, enable TLS by appending the <code class="docutils literal notranslate"><span class="pre">encrypt=true</span></code> parameter to the
<code class="docutils literal notranslate"><span class="pre">connection-url</span></code> catalog configuration property:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connection-url</span><span class="o">=</span><span class="s">jdbc:sqlserver://&lt;host&gt;:&lt;port&gt;;databaseName=&lt;databaseName&gt;;encrypt=true</span>
</pre></div>
</div>
<p>If you do not have globally-trusted certificates installed, you can instead
use certificates trusted by a custom truststore.</p>
<p>The following catalog configuration properties manage custom truststore
configuration for the SQL Server connector:</p>
<table id="id6">
<caption><span class="caption-text">TLS truststore configuration properties</span><a class="headerlink" href="#id6" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 33%"/>
<col style="width: 67%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sqlserver.tls.truststore-path</span></code></p></td>
<td><p>Path to the truststore file in SEP.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sqlserver.tls.truststore-password</span></code></p></td>
<td><p>Password used to generate the truststore file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sqlserver.tls.truststore-type</span></code></p></td>
<td><p>The type of truststore. Supports either <code class="docutils literal notranslate"><span class="pre">JKS</span></code> or <code class="docutils literal notranslate"><span class="pre">PKCS12</span></code> as values.</p></td>
</tr>
</tbody>
</table>
<p>The following catalog properties configuration specifies a custom JKS truststore
to enable TLS for NTLM authentication:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">sqlserver.tls.truststore-path</span><span class="o">=</span><span class="s">path/to/truststore.jks</span>
<span class="na">sqlserver.tls.truststore-password</span><span class="o">=</span><span class="s">insecurepassword</span>
<span class="na">sqlserver.tls.truststore-type</span><span class="o">=</span><span class="s">JKS</span>
</pre></div>
</div>
</section>
<section id="ntlm-credential-pass-through">
<h4 id="ntlm-credential-pass-through">NTLM credential pass-through<a class="headerlink" href="#ntlm-credential-pass-through" title="Permalink to this heading">#</a></h4>
<p>The connector supports NTLM credential pass-through. To enable this, edit the
catalog properties file to include the authentication type:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">sqlserver.authentication.type</span><span class="o">=</span><span class="s">NTLM_PASSWORD_PASS_THROUGH</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Email</button>
        <a onclick="skip()" class="feedback-skip">Cancel</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="starburst-splunk.html" title="Starburst Splunk connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Starburst Splunk connector </span>
              </div>
            </a>
          
          
            <a href="starburst-synapse.html" title="Starburst Synapse connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Starburst Synapse connector </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 453-e.13 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright  2017-2024<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/453-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/453-e/_static/searchbox.js" data-versions="{'Latest LTS (468-e)': '/468-e/', '462-e LTS': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', 'Latest STS (471-e)': '/471-e/', '469-e STS': '/469-e/'}"></script>
<script src="https://docs.starburst.io/453-e/_static/searchresults.js" data-versions="{'Latest LTS (468-e)': '/468-e/', '462-e LTS': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', 'Latest STS (471-e)': '/471-e/', '469-e STS': '/469-e/'}"></script>
  </body>
</html>