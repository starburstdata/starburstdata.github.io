

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.9. Usage Metrics &mdash; Starburst Enterprise Presto</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="7. Administration" href="../admin.html"/>
        <link rel="next" title="8. Query Optimizer" href="../optimizer.html"/>
        <link rel="prev" title="7.8. Distributed Sort" href="dist-sort.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">3. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">5. Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">6. Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../admin.html">7. Administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="web-interface.html">7.1. Web UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuning.html">7.2. Tuning Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="jmx.html">7.3. Monitoring with JMX</a></li>
<li class="toctree-l2"><a class="reference internal" href="properties.html">7.4. Properties Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="spill.html">7.5. Spill to Disk</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-groups.html">7.6. Resource Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="session-property-managers.html">7.7. Session Property Managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="dist-sort.html">7.8. Distributed Sort</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7.9. Usage Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging-details">Logging Details</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">8. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">9. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">10. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">11. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">12. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">13. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">14. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">15. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">16. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">334-e STS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/338-e/">Latest LTS (338-e)</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/340-e/">Latest STS (340-e)</option>
    <option value="/339-e/">339-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">334-e STS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../admin.html">7. Administration</a> &raquo;</li>
      
    <li>7.9. Usage Metrics</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage-metrics">
<h1>7.9. Usage Metrics<a class="headerlink" href="#usage-metrics" title="Permalink to this headline">#</a></h1>
<p>Usage metrics collection enables Presto to log information about all nodes in
the cluster. This feature is mostly used for <a class="reference internal" href="../mission-control.html"><span class="doc">Mission Control</span></a> and other management solutions. Users can use the resulting
log information for their own monitoring and operational purposes.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#configuration" id="id2">Configuration</a></li>
<li><a class="reference internal" href="#logging-details" id="id3">Logging Details</a></li>
</ul>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#id2">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h2>
<p>Usage metrics collection is configured by a number of properties, that you can
add in <code class="docutils literal"><span class="pre">etc/config.properties</span></code> to configure details.</p>
<table border="1" class="colwidths-given docutils" id="id1">
<caption><span class="caption-text">Usage Metrics Configuration Properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col width="15%" />
<col width="70%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property name</th>
<th class="head">Description</th>
<th class="head">Default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">usage-metrics.log.path</span></code></td>
<td>Base path of the usage log files</td>
<td>var/log/presto/usage-metrics.log</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">usage-metrics.log.max-size</span></code></td>
<td>Maximum size of a single usage log file</td>
<td>100 MB, minimum 1MB</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">usage-metrics.log.max-history</span></code></td>
<td>Maximum number of usage log files</td>
<td>1000</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">usage-metrics.cloud-watch-logs-directory</span></code></td>
<td>Path to the directory on the node in which log files are stored, for
example, <code class="docutils literal"><span class="pre">/var/log/presto/cloudwatch</span></code>. Amazon CloudWatch is
automatically enabled by the Presto CFT and the usage metrics data is
available in <code class="docutils literal"><span class="pre">usage-metrics-*</span></code> log streams.</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">usage-metrics.gathering.initial-delay</span></code></td>
<td>The initial delay to before tracking usage, allowing the cluster to start
up before metrics gathering starts.</td>
<td>1 min</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">usage-metrics.gathering.interval</span></code></td>
<td>Length of the interval between usage metric log entry creation.</td>
<td>1 min</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">usage-metrics.gatherer-threads</span></code></td>
<td>Number of threads used to gather and write all usage information.</td>
<td>100, minimum 10</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">usage-metrics.cluster-usage-resource.enabled</span></code></td>
<td>Expose the usage metrics, aggregated for all nodes since cluster start,
on a REST API end point on the coordinator at <code class="docutils literal"><span class="pre">/v1/cluster/usage</span></code></td>
<td>false</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="logging-details">
<h2><a class="toc-backref" href="#id3">Logging Details</a><a class="headerlink" href="#logging-details" title="Permalink to this headline">#</a></h2>
<p>The logged information includes details about number of nodes, number of cores,
start time, cpu time, and other data about the cluster and nodes in the
cluster. The log uses JSON format for each entry.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../optimizer.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="8. Query Optimizer" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dist-sort.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="7.8. Distributed Sort" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'334',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>