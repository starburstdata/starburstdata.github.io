<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst | AWS EKS networking</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst - AWS EKS networking">
    <meta property="og:description" content="Your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/logo/starburst-reverse.png"">

    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/style.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114610397-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114610397-1');
</script>

<script>
  var ALGOLIA_INSIGHTS_SRC = "https://cdn.jsdelivr.net/npm/search-insights@2.2.1";

  !function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){
  (e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],
  i.async=1,i.src=n,c.parentNode.insertBefore(i,c)
  }(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");
</script>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>AWS EKS networking | Starburst</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="AWS EKS networking" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Your hub to all knowledge about Starburst products." />
<meta property="og:description" content="Your hub to all knowledge about Starburst products." />
<link rel="canonical" href="https://docs.starburst.io/ecosystems/amazon/eks/eks-networking.html" />
<meta property="og:url" content="https://docs.starburst.io/ecosystems/amazon/eks/eks-networking.html" />
<meta property="og:site_name" content="Starburst" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="AWS EKS networking" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Your hub to all knowledge about Starburst products.","headline":"AWS EKS networking","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.starburst.io/assets/img/logo/starburst-reverse.png"}},"url":"https://docs.starburst.io/ecosystems/amazon/eks/eks-networking.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>


<div class="wrap">
  

<header style="padding-top:74px;">
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="navbar-left-container">
      <a class="navbar-brand" href="https://www.starburst.io/">
        <img src="/assets/img/logo/starburst-reverse.png" height="40" alt=" Starburst">
      </a>
      <span class="navbar-divider"></span>
      <a href="/" class="nav-item nav-link">DOCUMENTATION</a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
          <a id="get-started"
             class="nav-link dropdown-toggle" 
            aria-haspopup="true" aria-label="Get started" data-is-click="false"
            href="/get-started/index.html">GET STARTED</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/get-started/index.html">Overview</a>
            <a class="dropdown-item" href="/get-started/choose-your-starburst-product.html">Choose your product</a>
            <a class="dropdown-item" href="/get-started/concepts.html">Concepts</a>
            <a class="dropdown-item" href="/data-consumer/index.html">Data consumer</a>
            <a class="dropdown-item" href="/data-engineer/index.html">Data engineer</a>
            <a class="dropdown-item" href="/platform-administrator/index.html">Platform administrator</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a id="starburst-enterprise"
             class="nav-link dropdown-toggle" 
            aria-haspopup="true" aria-label="Get started" data-is-click="false"
            href="/starburst-enterprise/index.html">STARBURST ENTERPRISE</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/starburst-enterprise/index.html">Overview</a>
            <a class="dropdown-item" href="/starburst-enterprise/try/index.html">Try Starburst Enterprise</a>
            <a class="dropdown-item" href="/starburst-enterprise/web-ui/index.html">Web UI</a>
            <a class="dropdown-item" href="/starburst-enterprise/sql.html">SQL</a>
            <a class="dropdown-item" href="/starburst-enterprise/k8s/index.html">Kubernetes</a>
            <a class="dropdown-item" href="/starburst-enterprise/starburst-admin/index.html">Starburst Admin</a>
            <a class="dropdown-item" href="/latest/index.html">Reference documentation</a>

          </div>
        </li>
        <li class="nav-item dropdown">
          <a id="starburst-galaxy"
             class="nav-link dropdown-toggle" 
            aria-haspopup="true" aria-label="Starburst Galaxy" data-is-click="false"
            href="/starburst-galaxy/index.html">STARBURST GALAXY</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/starburst-galaxy/index.html">Overview</a>
            <a class="dropdown-item" href="/starburst-galaxy/query-editor/index.html">Query editor</a>
            <a class="dropdown-item" href="/starburst-galaxy/catalogs/index.html">Catalogs</a>
            <a class="dropdown-item" href="/starburst-galaxy/clusters/index.html">Clusters</a>
            <a class="dropdown-item" href="/starburst-galaxy/sql/index.html">SQL</a>
            <a class="dropdown-item" href="/starburst-galaxy/account/index.html">Account</a>
            <a class="dropdown-item" href="/starburst-galaxy/security/index.html">Security</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a id="ecosystems"
             class="nav-link dropdown-toggle active"
            
            aria-haspopup="true" aria-label="Get started" data-is-click="false"
            href="/ecosystems/index.html">ECOSYSTEMS</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/ecosystems/index.html">Overview</a>
            <a class="dropdown-item" href="/ecosystems/amazon/index.html">Amazon AWS</a>
            <a class="dropdown-item" href="/ecosystems/google/index.html">Google Cloud</a>
            <a class="dropdown-item" href="/ecosystems/microsoft/index.html">Microsoft Azure</a>
            <a class="dropdown-item" href="/ecosystems/redhat/index.html">Red Hat OpenShift</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a id="resources"
             class="nav-link dropdown-toggle" 
            aria-haspopup="true" aria-label="resources" data-is-click="false"
            >RESOURCES</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/support.html">Support</a>
            <a class="dropdown-item" href="/security/index.html">Security</a>
            <a class="dropdown-item" href="/blog/index.html">Developer blog</a>
            <a class="dropdown-item" href="/videos/index.html">Video library</a>
            <a class="dropdown-item" href="/glossary.html">Glossary</a>
            <a class="dropdown-item" href="https://www.trinoforum.org/">Trino forum</a>
          </div>
        </li>
        
        <li class="nav-item dropdown" id="site-search">
  <a id="dropdownSearch">
    <i class="fa fa-search" style="color: #ffffff; vertical-align: sub"></i>
  </a>
  <div id="dropdownSearchDisplay" class="dropdown-menu" aria-labelledby="dropdownSearch">
    <div id="algolia-search">
      <div id="searchbox"></div>
      <div id="refinement-list">
        <h6>Filter:</h6>
      </div>
      <div id="hits"></div>
      <div id="stats"></div>
    </div>
  </div>
</li>

        
      </ul>
    </div>
  </nav>
</header>

  
  <div class="content">
    <div class="row">
      <div class="col-md-3 side-navigation">
        <div class="spacer-60 toc-sticky left-nav">
          
          <div>
    <h6 class="overline product-nav-title">Amazon AWS ecosystem</h6>
</div>
<hr />

 
  
    
    
<li >
  <a href="/ecosystems/amazon/index.html" >Overview</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('data');">
  <a>
    Data sources
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="data" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/data-sources/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/data-sources/s3.html" >Amazon S3</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/data-sources/glue.html" >AWS Glue</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/data-sources/rds.html" >Amazon RDS</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/data-sources/redshift.html" >Amazon Redshift</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/data-sources/dynamodb.html" >Amazon Dynamodb</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('aws-marketplace');">
  <a>
    AWS Marketplace offerings
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="aws-marketplace" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/aws-marketplace/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/aws-marketplace/aws-marketplace-cft.html" >AWS Marketplace CFT</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/aws-marketplace/aws-marketplace-eks.html" >AWS Marketplace EKS</a>
  </li>
  
  
</ul>



 





<li  class="active" 
    onclick="toggle_navigation_visibility('eks');">
  <a>
    Amazon EKS
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="eks" class="doc-subnav ">
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/eks/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/eks/eks-cluster-creation.html" >Cluster creation</a>
  </li>
  
  
  
    
    
    
  <li class="active"
      
    >
    <a href="/ecosystems/amazon/eks/eks-networking.html" >Networking</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/eks/eks-iam.html" >Configure IAM in EKS</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/eks/eks-sep.html" >Install SEP in EKS</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('cft');">
  <a>
    Amazon CFT
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="cft" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/cft/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/cft/cft-connection-info.html" >Connection parameters in CFT</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/ecosystems/amazon/cft/operate-sep-in-aws.html" >Operate SEP in AWS</a>
  </li>
  
  
</ul>



<div style="padding-top: 3em;">
  <h6 class="overline product-nav-title">Resources</h6>
</div>
<hr />

 
  
    
    
<li >
  <a href="/support.html" >Support</a>
</li>
  



 
  
    
    
<li >
  <a href="/security/index.html" >Security</a>
</li>
  



 
  
    
    
<li >
  <a href="/blog/index.html" >Developer blog</a>
</li>
  



 
  
    
    
<li >
  <a href="/videos/index.html" >Video library</a>
</li>
  



 
  
    
    
<li >
  <a href="/glossary.html" >Glossary</a>
</li>
  



 
  
    
    
<li >
  <a href="https://www.trinoforum.org/" >Trino Forum</a>
</li>
  




          
        </div>
      </div>
      <div class="col-md-9 col-lg-6 spacer-30 docs-content">
        



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/ecosystems/"
        style="text-transform: uppercase"
      > ecosystems</a> >
    
  
    
      <a href="/ecosystems/amazon/"
        style="text-transform: uppercase"
      > amazon</a> >
    
  
    
      <a href="/ecosystems/amazon/eks/"
        style="text-transform: uppercase"
      > eks</a> >
    
  
    
      AWS EKS networking
    
  </p>
</div>

        <h1 id="aws-eks-networking">
        
        
          AWS EKS networking <a href="#aws-eks-networking" class="titleAnchor">#</a>
        
        
      </h1>
    

<p>This document helps you to understand networking requirements and configuration
for Starburst Enterprise platform (SEP) on AWS EKS.</p>
      <h2 id="best-practice-use-a-single-availability-zone-inside-your-existing-vpc">
        
        
          Best practice: Use a single availability zone inside your existing VPC <a href="#best-practice-use-a-single-availability-zone-inside-your-existing-vpc" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>When deploying SEP into an AWS EKS cluster, it is important
to ensure that your cluster resources are located with the following in mind:</p>

<ul>
  <li>cluster communications latency</li>
  <li>data ingress/egress costs</li>
  <li>IP address availability</li>
</ul>

<p>Using your existing VPC is a key cost control measure. It ensures that costs
associated with data ingress and egress are kept to a minimum. Every new VPC
comes with a NAT gateway. And, while NAT gateways are inexpensive, costs for
data transferred through that gateway add up very quickly. As a best practice,
placing your SEP inside of your existing VPC, co-resident with as
many of your data sources as possible not only keeps costs down, it also greatly
simplify networking and security.</p>

<p>Equally as important is performance. No matter if you use an existing or new
VPC, SEP must run in a single availability zone (AZ) to ensure
the best performance possible. To accomplish this, use node groups. The node
groups are then tied to a single AZ using affinity or node selection rules.</p>

<p>For SEP, two <a href="./eks-cluster-creation.html">managed node
groups</a> are required. The SEP
coordinator and workers are deployed to one group while support services, such
as HMS, Ranger and nginx, are deployed to the second node group.</p>

<div class="alert alert-danger" role="alert">
  <i class="fa fa-radiation"></i> <b>Warning:</b>

  You must use an existing VPC in order to
enforce the use of a single AZ. Do not use eksctl to create a new VPC at cluster
creation time.

</div>
      <h3 id="spot-instances-and-single-azs">
        
        
          Spot instances and single AZs <a href="#spot-instances-and-single-azs" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>AWS EC2 <a href="https://docs.aws.amazon.com/es_es/whitepapers/latest/cost-optimization-leveraging-ec2-spot-instances/how-spot-instances-work.html">Spot
instances</a>
are sometimes desireable to keep costs down. However, they are inherently
unreliable, as they can be recalled by the EC2 platform at any time. Because of
how SEP drives performance by dividing query processing for any
single query, sudden removal of an expected resource can cause failures.
Further, when using a single AZ, Spot instance rebalancing is diminished, as
pools in only the single AZ are available to it. Using Spot instances may still
be desirable in some cases. In this case, to use Spot instances for the
SEP workers, create a third node group to contain them,
separating the non-Spot coordinator node group from the Spot worker node group.
The remaining node group contains support services as before.</p>
      <h3 id="ip-address-requirements">
        
        
          IP address requirements <a href="#ip-address-requirements" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>An important consideration in using an existing VPC is IP address availability.
As part of standing up your SEP cluster, you must ensure that
sufficient IP addresses are reliably available for use by your
SEP instances.</p>

<p>In EKS clusters, AWS creates one subnet per availability zone. Usually, these
are configured as /20 Classless Inter-Domain Routings (CIDR) with 4,091 IP
addresses available for use (an additional 5 are reserved by the cluster
itself). SEP requires that all hosts, both workers and
coordinators, are sized identically. Each of these instances has a maximum
number of IP addresses that can be assigned to it, and EKS reserves twice that
number of addresses for it.</p>

<p>For purposes of this discussion, we assume an SEP deployment
involving six m5.xlarge workers and one m5.xlarge coordinator. Each of this
instances can have a maximum of 15 IP addresses in use, one per each of the 15
interfaces it comes with. An additional 15 are reserved, for a total of 30 IP
addresses needed per instance. Those seven instances together then require 210
IP addresses:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">(</span> 7 m5.xlarge instances<span class="o">)</span>
x <span class="o">(</span> 15 interfaces per instance <span class="o">)</span>
x <span class="o">(</span> 2 IPs per interface <span class="o">)</span>
<span class="o">=</span> 210 IP addresses needed
</code></pre></div></div>

<p>In this example, you must ensure that a minimum of 210 IP addresses are
reliably available for use by your SEP instances at all times.</p>

<div class="alert alert-info" role="alert">
  <i class="fa fa-info-circle"></i>
  <b>Note: </b>
  If you are taking advantage of AWS EKS
autoscaling, you must calculate the number of addresses needed on the maximum
allowable number of workers.</div>
      <h3 id="using-subnets">
        
        
          Using subnets <a href="#using-subnets" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>You can use an existing subnet or create a new one. It must be configured with a
route out to the Internet either via a NAT gateway or an IGW to allow your EKS
cluster to communicate with the AWS EKS management backplane. Cost
considerations for these communications are minimal.</p>
      <h3 id="considerations-if-you-must-use-vpc-peering">
        
        
          Considerations if you must use VPC peering <a href="#considerations-if-you-must-use-vpc-peering" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>If you cannot place SEP within your current VPC because of a
scarcity of IP addresses, as an alternative you can create a peering connection
with the new EKS cluster’s VPC to avoid the often cost-prohibitive operation of
all data passing through the NAT gateway. VPC peering requires additional setup,
and comes with potential downsides:</p>

<ul>
  <li>Does not scale well.</li>
  <li>Transitive routing is not available.</li>
  <li>Peering connections are a resource that must be managed.</li>
  <li>Firewall rules must be carefully managed.</li>
</ul>

<p>Additionally, you must ensure that the CIDR you set for the new
SEP VPC does not match or overlap with your existing VPC’s CIDR.
VPCs with overlapping CIDRs cannot create peering connections.</p>

<p>The following are required when using internet-facing ALBs:</p>

<ul>
  <li>Subnets tagged with kubernetes.io/cluster/cluster-name → shared</li>
  <li>Subnets tagged with kubernetes.io/role/elb → 1</li>
</ul>

<p>The following is required when using ALBs that are not internet-facing:</p>

<ul>
  <li>kubernetes.io/role/internal-elb → 1</li>
</ul>
      <h2 id="configure-dns">
        
        
          Configure DNS <a href="#configure-dns" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Install the
<a href="https://artifacthub.io/packages/helm/bitnami/external-dns#parameters">ExternalDNS</a>
add-on to automatically add DNS entries to <a href="https://aws.amazon.com/route53/">Amazon Route
53</a> once ingress resources are created, as
shown in the following example <code class="language-plaintext highlighter-rouge">external-dns.yaml</code> file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">provider</span><span class="pi">:</span> <span class="s">aws</span>
<span class="na">aws</span><span class="pi">:</span>
  <span class="na">zoneType</span><span class="pi">:</span> <span class="s">public</span>
  <span class="na">region</span><span class="pi">:</span> <span class="s">us-east-2</span>
<span class="na">txtOwnerId</span><span class="pi">:</span> <span class="s">&lt;txtOwnerId&gt;</span>   <span class="c1"># Identify this</span>
<span class="na">txtPrefix</span><span class="pi">:</span> <span class="s">&lt;txtPrefix&gt;</span>     <span class="c1"># external DNS instance</span>
<span class="na">zoneIdFilters</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">&lt;HostedZoneID&gt;</span> <span class="c1"># ID of AWS R53 Hosted Zone</span>

<span class="c1"># This allows external-dns to delete entries as well</span>
<span class="na">policy</span><span class="pi">:</span> <span class="s">sync</span>
</code></pre></div></div>

<p>Run the following commands to complete the install. Be sure to use the latest
artifact of
<a href="https://artifacthub.io/packages/helm/bitnami/external-dns">external-dns</a> and
specify its version in the command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>helm repo add bitnami https://charts.bitnami.com/bitnami
<span class="nv">$ </span>helm repo update
<span class="nv">$ </span>helm upgrade external-dns bitnami/external-dns <span class="nt">--namespace</span> kube-system <span class="nt">--install</span> <span class="nt">--version</span> &lt;X.Y.Z&gt; <span class="se">\</span>
  <span class="nt">--values</span> external-dns.yaml
</code></pre></div></div>
      <h2 id="best-practice-configure-ingress-access-for-sep-and-ranger-through-a-controller">
        
        
          Best practice: Configure ingress access for SEP and Ranger through a controller <a href="#best-practice-configure-ingress-access-for-sep-and-ranger-through-a-controller" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Accessing your SEP cluster from external clients requires access
to the coordinator and Ranger pods within the K8s cluster. This can be handled
either through an AWS layer 7 <a href="https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html">load balancer (ALB) ingress
controller</a>,
or by deploying an Nginx ingress controller behind a classic layer 4 load
balancer.</p>

<p>There are technical considerations for either approach:</p>

<ul>
  <li>Using an ALB ingress controller
    <ul>
      <li>TLS termination is taken care of in the load balancer.</li>
      <li>Easy to integrate AWS Certificate Manager for publicly-signed
certificates.</li>
      <li>A separate load balancer resource is be created for each service
(Starburst, Ranger, etc.)</li>
    </ul>
  </li>
  <li>Using an Nginx ingress controller
    <ul>
      <li>Nginx can route traffic to different services using a single load balancer.</li>
      <li>Internal or alternate CA issue certificates, as it is not possible to use
Amazon Certificate Manager with an Nginx pod.</li>
    </ul>
  </li>
</ul>

<p>For either approach, you must first configure and apply changes to your
cluster’s <code class="language-plaintext highlighter-rouge">ingress.yaml</code> file. When you have verified that the ingress for the
cluster is working properly, proceed with configuring and deploying your ingress
controller of choice.</p>

<div class="alert alert-warning" role="alert">
  <i class="fa fa-exclamation-triangle"></i> <b>Caution:</b>

  While it is possible to set up ingress directly
in Starburst Helm charts, it is not recommended. Using standard K8s controllers
as outlined here avoids complex networking and certificate issues inherent in
connecting directly through application-specific ingress configurations. 

</div>
      <h3 id="configure-ingressyaml">
        
        
          Configure <code class="language-plaintext highlighter-rouge">ingress.yaml</code> <a href="#configure-ingressyaml" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The following <code class="language-plaintext highlighter-rouge">ingress.yaml</code> file provides the necessary networking
configuration for both SEP and Ranger. You can safely ignore the
Ranger configuration if your organization does not use it:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">starburst</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s">alb</span>
    <span class="s">alb.ingress.kubernetes.io/group.name</span><span class="pi">:</span> <span class="s">sep</span>
    <span class="s">alb.ingress.kubernetes.io/scheme</span><span class="pi">:</span> <span class="s">internet-facing</span>
    <span class="s">alb.ingress.kubernetes.io/listen-ports</span><span class="pi">:</span> <span class="s1">'</span><span class="s">[{"HTTP":</span><span class="nv"> </span><span class="s">80},{"HTTPS":</span><span class="nv"> </span><span class="s">443}]'</span>
    <span class="s">alb.ingress.kubernetes.io/ssl-redirect</span><span class="pi">:</span> <span class="s1">'</span><span class="s">443'</span>
    <span class="s">alb.ingress.kubernetes.io/success-codes</span><span class="pi">:</span> <span class="s">200,303</span>
    <span class="s">alb.ingress.kubernetes.io/tags</span><span class="pi">:</span> <span class="s">key1=value1, key2=value2</span>
    <span class="s">alb.ingress.kubernetes.io/certificate-arn</span><span class="pi">:</span> <span class="s">&lt;cert-??&gt;</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tls</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">&lt;starburst-hostname&gt;</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">&lt;starburst-hostname&gt;</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">starburst</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">number</span><span class="pi">:</span> <span class="m">8080</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ranger</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s">alb</span>
    <span class="s">alb.ingress.kubernetes.io/group.name</span><span class="pi">:</span> <span class="s">sep</span>
    <span class="s">alb.ingress.kubernetes.io/scheme</span><span class="pi">:</span> <span class="s">internet-facing</span>
    <span class="s">alb.ingress.kubernetes.io/listen-ports</span><span class="pi">:</span> <span class="s1">'</span><span class="s">[{"HTTP":</span><span class="nv"> </span><span class="s">80},{"HTTPS":</span><span class="nv"> </span><span class="s">443}]'</span>
    <span class="s">alb.ingress.kubernetes.io/ssl-redirect</span><span class="pi">:</span> <span class="s1">'</span><span class="s">443'</span>
    <span class="s">alb.ingress.kubernetes.io/success-codes</span><span class="pi">:</span> <span class="s">200,302</span>
    <span class="s">alb.ingress.kubernetes.io/tags</span><span class="pi">:</span> <span class="s">key1=value1, key2=value2</span>
    <span class="s">alb.ingress.kubernetes.io/certificate-arn</span><span class="pi">:</span> <span class="s">&lt;cert-??&gt;</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">tls</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">&lt;ranger-hostname&gt;</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">&lt;ranger-hostname&gt;</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">ranger</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">number</span><span class="pi">:</span> <span class="m">6080</span>

</code></pre></div></div>

<p>The following are important to remember as you modify the preceding example
with the particulars of your organization:</p>

<ul>
  <li><strong>alb.ingress.kubernetes.io/certificate-arn</strong> - If AWS ACM contains multiple
certificates matching the hostname, specify certificate ARN explicitly,
otherwise you can remove this annotation.</li>
  <li><strong>alb.ingress.kubernetes.io/group.name</strong> - SEP forces the ALB
controller to combine multiple Kubernetes ingress resources into a single ALB
on AWS, reducing costs.</li>
  <li><strong>alb.ingress.kubernetes.io/success-code</strong> - Contains HTTP response codes of
the root (/) resource that are used by target group health checks. By default
they accept only 200, but SEP responds with 303, and Ranger with 302.</li>
  <li><strong>alb.ingress.kubernetes.io/listen-ports</strong> - Ensures that ALB listens on both
HTTP and HTTPS ports</li>
  <li><strong>alb.ingress.kubernetes.io/ssl-redirect</strong> - Redirects from HTTP to HTTPS</li>
</ul>

<p>Once all changes to <code class="language-plaintext highlighter-rouge">ingress.yaml</code> are made, apply the customizations using the
following command in the namespace that contains SEP:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl apply <span class="nt">-f</span> ingress.yaml
</code></pre></div></div>

<p>You must wait until the ALB status changes from <code class="language-plaintext highlighter-rouge">Provisioning</code> to <code class="language-plaintext highlighter-rouge">Ready</code> before
the networking behaves as expected with the configuration changes.</p>
      <h3 id="using-an-aws-load-balancer-controller">
        
        
          Using an AWS load balancer controller <a href="#using-an-aws-load-balancer-controller" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The <a href="https://docs.aws.amazon.com/eks/latest/userguide/aws-load-balancer-controller.html">AWS
documentation</a>
provides complete instructions for installing the ALB ingress controller on your
EKS cluster. The following example commands provide an overview of the process
to install ALB controller that automatically discovers ingress resources and
propagates them to AWS ALB and target groups.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>helm repo add eks https://aws.github.io/eks-charts
<span class="nv">$ </span>helm repo update
<span class="nv">$helm</span> upgrade <span class="nt">-i</span> aws-load-balancer-controller eks/aws-load-balancer-controller <span class="nt">-n</span> kube-system <span class="se">\</span>
  <span class="nt">--set</span> <span class="nv">clusterName</span><span class="o">=</span>&lt;cluster-name&gt;
</code></pre></div></div>

<p>Once the ALB controller is installed, you must define ingress in your
SEP chart:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">expose</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ingress"</span>
  <span class="na">ingress</span><span class="pi">:</span>
    <span class="na">ingressName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">starburst-ingress"</span>
    <span class="na">serviceName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">starburst"</span>
    <span class="na">servicePort</span><span class="pi">:</span> <span class="m">8080</span>
    <span class="na">tls</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">starburst.example.com"</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/*"</span>
    <span class="na">annotations</span><span class="pi">:</span>
      <span class="s">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s">alb</span>
      <span class="s">alb.ingress.kubernetes.io/scheme</span><span class="pi">:</span> <span class="s">interal</span>
      <span class="s">alb.ingress.kubernetes.io/target-type</span><span class="pi">:</span> <span class="s">ip</span>
</code></pre></div></div>

<p>With the defined host, the ingress controller automatically associates
certificates in ACM with a matching Subject Alternative Name or with a wildcard
such as “*.example.com” with this load balancer.</p>

<p>By default, the controller creates an ALB, configures it with TLS certificate
stored in the AWS Certificate Manager (private key is not exposed to
Kubernetes), and terminate TLS at ALB.</p>

<p>Target groups are configured to send traffic to ports on Kubernetes worker
nodes. A NodePort service type must be configured in Kubernetes to expose
specific ports across all nodes.</p>

<p>The following traffic flows apply when using “ingress” as the <code class="language-plaintext highlighter-rouge">expose:</code> type:</p>

<ul>
  <li>Kubernetes pod: Runs the workload and listens on a port</li>
  <li>kube-proxy: Listens on NodePort, proxies traffic to the pods in cluster</li>
  <li>Target Groups: Discover EKS worker nodes, run health checks</li>
  <li>ALB: Terminates TLS, performs HTTP routing</li>
  <li>Route 53 A record: Points to ALB endpoints in public subnets</li>
</ul>

<div class="alert alert-warning" role="alert">
  <i class="fa fa-exclamation-triangle"></i> <b>Caution:</b>

  When using ingress, you must specify the TLS
certificate as a Kubernetes secret if TLS is enabled.

</div>
      <h3 id="using-nginx">
        
        
          Using Nginx <a href="#using-nginx" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The <a href="https://docs.nginx.com/nginx-ingress-controller/installation/installation-with-helm/">Nginx
controller</a>
is deployed as an additional pod in the EKS cluster. Certificate management for
HTTPS connections is implemented using one of the following Helm-managed
certificates:</p>

<ul>
  <li>A self-signed certificate</li>
  <li>A internal CA-signed certificate</li>
  <li>A Let’s Encrypt-issued certificate using <a href="https://cert-manager.io/docs/tutorials/acme/nginx-ingress/">cert-manager.io</a></li>
</ul>

<p>The following is an example of Nginx chart to control access to an
SEP cluster:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nginx-ingress</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="s">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s">nginx</span>
    <span class="s">service.beta.kubernetes.io/aws-load-balancer-internal</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
    <span class="s">service.beta.kubernetes.io/aws-load-balancer-type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">nlb"</span>
<span class="na">spec</span><span class="pi">:</span> <span class="na">tls</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">starburst.example.com</span>
    <span class="na">secretName</span><span class="pi">:</span> <span class="s">tls-secret</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">starburst.example.com</span>
<span class="na">http</span><span class="pi">:</span> <span class="na">paths</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">backend</span><span class="pi">:</span>
          <span class="na">serviceName</span><span class="pi">:</span> <span class="s">trino</span>
          <span class="na">servicePort</span><span class="pi">:</span> <span class="m">8080</span>
<span class="err"> </span><span class="na">controller</span><span class="pi">:</span>
  <span class="na">extraArgs</span><span class="pi">:</span>
    <span class="c1">##   default-ssl-certificate: "&lt;namespace&gt;/&lt;secret_name&gt;"</span>
    <span class="na">default-ssl-certificate</span><span class="pi">:</span> <span class="s">default/cert-example.com</span>
</code></pre></div></div>

<p>In this case, the default certificate is a Kubernetes secret specified by
applying the following YAML:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">cert-example.com</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">default</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="c1">## Both tls.crt and tls.key are base64-encoded PEM files on a single line</span>
  <span class="s">tls.crt</span><span class="pi">:</span> <span class="s">&lt;self-signed certificate&gt;</span>
  <span class="s">tls.key</span><span class="pi">:</span> <span class="s">&lt;self-signed private key&gt;</span>
</code></pre></div></div>

<p>In the SEP <code class="language-plaintext highlighter-rouge">values.yaml</code> file, ingress is exposed via the
following YAML block:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">expose</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ingress"</span>
  <span class="na">ingress</span><span class="pi">:</span>
    <span class="na">ingressName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">nginx"</span>
    <span class="na">serviceName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">trino"</span>
    <span class="na">servicePort</span><span class="pi">:</span> <span class="m">8080</span>
    <span class="na">ingressClassName</span><span class="pi">:</span>
    <span class="na">tls</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">starburst.example.com"</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/"</span>
    <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
    <span class="na">annotations</span><span class="pi">:</span>
      <span class="s">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s2">"</span><span class="s">nginx"</span>
</code></pre></div></div>

<p>All inbound HTTPS traffic to <code class="language-plaintext highlighter-rouge">starburst.example.com</code> is now directed to
the SEP coordinator. A similar configuration is applied in the
Starburst Ranger Helm with <code class="language-plaintext highlighter-rouge">ranger.example.com</code> as the host.</p>

        <div class="d-lg-none">
          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

        </div>
      </div>
      <div class="col-lg-3 toc-styles d-none d-lg-block">
        <div class="spacer-60 toc-sticky">
          <ul><li><a href="#aws-eks-networking">AWS EKS networking</a><ul><li><a href="#best-practice-use-a-single-availability-zone-inside-your-existing-vpc">Best practice: Use a single availability zone inside your existing VPC</a><ul><li><a href="#spot-instances-and-single-azs">Spot instances and single AZs</a></li><li><a href="#ip-address-requirements">IP address requirements</a></li><li><a href="#using-subnets">Using subnets</a></li><li><a href="#considerations-if-you-must-use-vpc-peering">Considerations if you must use VPC peering</a></li></ul></li><li><a href="#configure-dns">Configure DNS</a></li><li><a href="#best-practice-configure-ingress-access-for-sep-and-ranger-through-a-controller">Best practice: Configure ingress access for SEP and Ranger through a controller</a><ul><li><a href="#configure-ingressyaml">Configure <code class="language-plaintext highlighter-rouge">ingress.yaml</code></a></li><li><a href="#using-an-aws-load-balancer-controller">Using an AWS load balancer controller</a></li><li><a href="#using-nginx">Using Nginx</a></li></ul></li></ul></li></ul>

          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

        </div>
      </div>
  </div>
  
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://trinoforum.org" target="_blank">Trino Forum</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#download" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <a href="https://www.starburst.io/" target="_blank"><img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst" style="margin-bottom:20px;"></a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2022<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>

  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
  <script type="text/javascript" src="/assets/js/custom.js"></script>
  <script type="text/javascript" src="/assets/js/algolia.js"></script>
  <script type="text/javascript" src="/assets/js/search-box.js"></script>
  <script type="text/javascript" src="/assets/js/search-results.js"></script>
</body>
</html>

