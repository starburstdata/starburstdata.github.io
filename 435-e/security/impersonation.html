

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>User impersonation &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sidebar.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User mapping" href="user-mapping.html" />
    <link rel="prev" title="File group provider" href="group-file.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/security/impersonation.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/impersonation" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 435-e.12 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 435-e.12 LTS</a>
          <span class="md-header-nav__topic"> User impersonation </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (453-e)" href="/453-e/">Latest LTS (453-e)</a>
      
          <a title="443-e LTS" href="/443-e/">443-e LTS</a>
      
          <a title="435-e LTS" href="/435-e/">435-e LTS</a>
      
          <a title="429-e LTS" href="/429-e/">429-e LTS</a>
      
          <a title="Latest STS (451-e)" href="/451-e/">Latest STS (451-e)</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 435-e.12 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Features, use cases, and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../try-sep.html">Try Starburst Enterprise</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">Query optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Developer guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../non-object-storage.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/starburst-connectors.html">Starburst connectors feature matrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../security.html">Security</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Security overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-overview.html">Built-in access control overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-roles.html">- Built-in access control roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-privileges.html">- Built-in access control privileges</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-masks-filters.html">- Built-in access control masks and filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-audit-log.html">- Built-in access control audit log</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-vs-ranger.html">- Comparison to Apache Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication-types.html">Authentication types</a></li>
<li class="toctree-l2"><a class="reference internal" href="password-file.html">- Password files</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap.html">- LDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap-group-provider.html">- LDAP group provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="scim-provisioning.html">- SCIM user and group synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="salesforce.html">- Salesforce</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2.html">- OAuth2 over HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2-providers.html">- OAuth2 providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="saml.html">- SAML 2.0 over HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="okta-authentication.html">- Okta</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerberos.html">- Kerberos</a></li>
<li class="toctree-l2"><a class="reference internal" href="certificate.html">- Certificate</a></li>
<li class="toctree-l2"><a class="reference internal" href="jwt.html">- JWT</a></li>
<li class="toctree-l2"><a class="reference internal" href="password-passthrough.html">- Password pass-through</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2-passthrough.html">- OAuth 2.0 token pass-through</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerberos-passthrough.html">- Kerberos credential pass-through</a></li>
<li class="toctree-l2"><a class="reference internal" href="tls.html">TLS and HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="inspect-pem.html">- PEM files</a></li>
<li class="toctree-l2"><a class="reference internal" href="inspect-jks.html">- JKS files</a></li>
<li class="toctree-l2"><a class="reference internal" href="internal-communication.html">Secure internal communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="secrets.html">Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="ranger-overview.html">Apache Ranger overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="global-ranger.html">- Global Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-ranger.html">- Hive Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="immuta-overview.html">Immuta</a></li>
<li class="toctree-l2"><a class="reference internal" href="aws-lake-formation.html">AWS Lake Formation</a></li>
<li class="toctree-l2"><a class="reference internal" href="built-in-system-access-control.html">System access control</a></li>
<li class="toctree-l2"><a class="reference internal" href="file-system-access-control.html">File system access control</a></li>
<li class="toctree-l2"><a class="reference internal" href="group-file.html">File-based group provider</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">User impersonation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sep-user-to-local-user-translation">SEP user-to-local user translation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rule-based-user-to-local-user-translation">Rule-based user-to-local user translation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#refreshing-translation-rules">Refreshing translation rules</a></li>
<li class="toctree-l5"><a class="reference internal" href="#user-translation-rules">User translation rules</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#ldap-based-user-to-local-user-translation">LDAP-based user-to-local user translation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#username-case-sensitivity">Username case sensitivity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user-mapping.html">User mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="audit.html">Query audit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/aws/index.html">AWS ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/google/index.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Version information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">435-e.6 LTS and others</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-impersonation--page-root" class="md-nav__link">User impersonation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#sep-user-to-local-user-translation" class="md-nav__link">SEP user-to-local user translation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#rule-based-user-to-local-user-translation" class="md-nav__link">Rule-based user-to-local user translation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#refreshing-translation-rules" class="md-nav__link">Refreshing translation rules</a>
        </li>
        <li class="md-nav__item"><a href="#user-translation-rules" class="md-nav__link">User translation rules</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#ldap-based-user-to-local-user-translation" class="md-nav__link">LDAP-based user-to-local user translation</a>
        </li>
        <li class="md-nav__item"><a href="#username-case-sensitivity" class="md-nav__link">Username case sensitivity</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="user-impersonation">
<h1 id="security-impersonation--page-root">User impersonation<a class="headerlink" href="#security-impersonation--page-root" title="Permalink to this heading">#</a></h1>
<p>Starburst Enterprise platform (SEP) has to be authenticated when accessing an external service through
the connector. Typically it requires passing authentication credentials, which
contain information on behalf of what user SEP connects. Such credentials are
stored in connector properties file.</p>
<p>Any SEP user accesses the external service as the user configured in the
connector properties. This approach has the following downsides:</p>
<ul class="simple">
<li><p>No authorization policies, built-in into this external service, are able to
recognize the actual SEP user. As a result any user, who authenticates to
SEP and access the data with SEP, has the same permissions and is
tracked as the same service user.</p></li>
<li><p>It is difficult to perform an audit of access of the external service, since
every SEP user is seen as the same local user in the external service.</p></li>
</ul>
<p>One way of solving this is to impersonate the SEP user as the local user in
the external service. With this approach SEP authenticates in the external
service using credentials stored in the connector properties file. Once it
connects, it informs the external service that any further action in a given
session should be performed on behalf of current SEP user. That way a SEP
user <code class="docutils literal notranslate"><span class="pre">alice</span></code> becomes a local user <code class="docutils literal notranslate"><span class="pre">alice</span></code> in the external service. This
requires the user that connects to the external service, which is configured in
connector properties file, to be trusted in this system and to be allowed to
impersonate other users.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The user impersonation feature is only supported in select connectors.
Reference the <a class="reference internal" href="../connector/starburst-connectors.html#table-info"><span class="std std-ref">connectors feature matrix</span></a> for
more information about which connectors support this feature.</p>
</div>
<p>When impersonating SEP users in the external service, SEP itself also
requires authentication and proper access control configuration to ensure that
users with valid credentials can be authenticated in the external service.</p>
<p>Note that the external service is required to support the impersonation
mechanism, and actual details are different depending on the service.</p>
<p>The connectors that support user impersonation as the SEP user are shown
in the <a class="reference internal" href="../connector/starburst-connectors.html"><span class="doc">Starburst connectors feature matrix</span></a>.</p>
<p>The <a class="reference internal" href="../connector/hive.html"><span class="doc">Hive connector</span></a> also supports user impersonation when
connecting to Hive Metastore or HDFS. However, the Hive connector doesn’t
support SEP user to local user translation.</p>
<section id="sep-user-to-local-user-translation">
<span id="user-to-local-translation"></span><h2 id="sep-user-to-local-user-translation">SEP user-to-local user translation<a class="headerlink" href="#sep-user-to-local-user-translation" title="Permalink to this heading">#</a></h2>
<p>The same actual user could be represented differently among services. For
example, a SEP user <code class="docutils literal notranslate"><span class="pre">alice_in_starburst</span></code> can be represented in an
external service as <code class="docutils literal notranslate"><span class="pre">alice_in_external_service</span></code>. There are two modes of user
to local user translation:</p>
<ul class="simple">
<li><p>Rule-based (default)</p></li>
<li><p>LDAP-based</p></li>
</ul>
<p>The translation mode can be specified per-catalog with the
<code class="docutils literal notranslate"><span class="pre">auth-to-local.type</span></code> catalog configuration property.</p>
<p>To enable user translation for a catalog, add a prefix before each <a class="reference internal" href="#ldap-user-translation"><span class="std std-ref">catalog configuration property</span></a> to specify which service the
mapping is for. For example, to create an auth-to-local user mapping
configuration for HDFS, use the <code class="docutils literal notranslate"><span class="pre">hive.hdfs</span></code> prefix followed by the appropriate
property:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.auth-to-local.type=LDAP
hive.hdfs.ldap.url=ldap://ldapserver:389
hive.hdfs.ldap.allow-insecure=true
hive.hdfs.auth-to-local.ldap.bind-dn=cn=admin,dc=trino,dc=testldap,dc=com
hive.hdfs.auth-to-local.ldap.bind-password=admin
hive.hdfs.auth-to-local.ldap.user-base-dn=dc=trino,dc=testldap,dc=com
hive.hdfs.auth-to-local.ldap.user-search-filter=(&amp;(objectClass=inetOrgPerson)(sn=${USER}))
hive.hdfs.auth-to-local.ldap.attribute=givenName
</pre></div>
</div>
<p>The following services are supported for user translation catalog configuration
with the corresponding prefix:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs</span></code> for Hadoop Distributed File System (HDFS)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.thrift</span></code> for Hive Metastore (HMS)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ranger</span></code> for Ranger</p></li>
</ul>
<section id="rule-based-user-to-local-user-translation">
<span id="rule-user-translation"></span><h3 id="rule-based-user-to-local-user-translation">Rule-based user-to-local user translation<a class="headerlink" href="#rule-based-user-to-local-user-translation" title="Permalink to this heading">#</a></h3>
<p>With rule-based user translation, you create a JSON file for a catalog
containing user translation rules that map SEP users to their username in the
catalog’s underlying data source.</p>
<p>Specify the path to the user translations file with the
<code class="docutils literal notranslate"><span class="pre">auth-to-local.config-file</span></code> catalog configuration property:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>auth-to-local.config-file=etc/auth-to-local-rules.json
</pre></div>
</div>
<p>The config file is specified in JSON format, and contains the rules defining how
SEP users are represented in the external service.</p>
<section id="refreshing-translation-rules">
<h4 id="refreshing-translation-rules">Refreshing translation rules<a class="headerlink" href="#refreshing-translation-rules" title="Permalink to this heading">#</a></h4>
<p>By default, when a change is made to the user translations file, the cluster
must be restarted to load the changes. You can optionally configure the
<code class="docutils literal notranslate"><span class="pre">auth-to-local.refresh-period</span></code> catalog configuration properties in the catalog
properties file to refresh the translation rules without requiring a cluster
restart:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>auth-to-local.refresh-period=10m
</pre></div>
</div>
</section>
<section id="user-translation-rules">
<h4 id="user-translation-rules">User translation rules<a class="headerlink" href="#user-translation-rules" title="Permalink to this heading">#</a></h4>
<p>These rules control the SEP user name translation to the external service
local user name. The local user is calculated by the first matching rule read
from top to bottom. If no rule matches, an error is raised. Each rule is
composed of the following fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">match</span></code> (optional): determines if local user should be calculated from
SEP user name (<code class="docutils literal notranslate"><span class="pre">USER</span></code>) or principal (<code class="docutils literal notranslate"><span class="pre">PRINCIPAL</span></code>). Defaults to
<code class="docutils literal notranslate"><span class="pre">USER</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pattern</span></code> (required): regex to match against the value pointed with
<code class="docutils literal notranslate"><span class="pre">match</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">substitution</span></code> (optional): local user replacement for SEP user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">case</span></code> (optional): determines if result local user should be lowercased
(<code class="docutils literal notranslate"><span class="pre">LOWER</span></code>), upper cassed (<code class="docutils literal notranslate"><span class="pre">UPPER</span></code>) or case should remain (<code class="docutils literal notranslate"><span class="pre">KEEP</span></code>).
Defaults to <code class="docutils literal notranslate"><span class="pre">KEEP</span></code>.</p></li>
</ul>
<p>For example, if you want to impersonate SEP user <code class="docutils literal notranslate"><span class="pre">alice</span></code> to access the
external system as user <code class="docutils literal notranslate"><span class="pre">alice_in_the_external_system</span></code> and <code class="docutils literal notranslate"><span class="pre">bob</span></code> as
<code class="docutils literal notranslate"><span class="pre">charlie</span></code>, you can use the following rules:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"rules"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"match"</span><span class="p">:</span> <span class="s2">"USER"</span><span class="p">,</span>
      <span class="nt">"pattern"</span><span class="p">:</span> <span class="s2">"alice"</span><span class="p">,</span>
      <span class="nt">"substitution"</span><span class="p">:</span> <span class="s2">"alice_in_the_external_system"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"match"</span><span class="p">:</span> <span class="s2">"USER"</span><span class="p">,</span>
      <span class="nt">"pattern"</span><span class="p">:</span> <span class="s2">"bob"</span><span class="p">,</span>
      <span class="nt">"substitution"</span><span class="p">:</span> <span class="s2">"charlie"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you want to impersonate SEP users with principals <code class="docutils literal notranslate"><span class="pre">alice/hr@company.com</span></code>
and <code class="docutils literal notranslate"><span class="pre">charlie/eng@company.com</span></code> to access the external system as users
<code class="docutils literal notranslate"><span class="pre">HR_ALICE</span></code> and <code class="docutils literal notranslate"><span class="pre">ENG_CHARLIE</span></code> accordingly, but SEP principals
<code class="docutils literal notranslate"><span class="pre">bob/marketing@company.com</span></code> and <code class="docutils literal notranslate"><span class="pre">danny/marketing@company.com</span></code> to use
<code class="docutils literal notranslate"><span class="pre">marketing_acount</span></code>, you can use the following rules:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"rules"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"match"</span><span class="p">:</span> <span class="s2">"PRINCIPAL"</span><span class="p">,</span>
      <span class="nt">"pattern"</span><span class="p">:</span> <span class="s2">"[^/]+/marketing@company.com"</span><span class="p">,</span>
      <span class="nt">"substitution"</span><span class="p">:</span> <span class="s2">"marketing_acount"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"match"</span><span class="p">:</span> <span class="s2">"PRINCIPAL"</span><span class="p">,</span>
      <span class="nt">"pattern"</span><span class="p">:</span> <span class="s2">"([^/]+)/(.+)@company.com"</span><span class="p">,</span>
      <span class="nt">"case"</span><span class="p">:</span> <span class="s2">"UPPER"</span><span class="p">,</span>
      <span class="nt">"substitution"</span><span class="p">:</span> <span class="s2">"$2_1"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="ldap-based-user-to-local-user-translation">
<span id="ldap-user-translation"></span><h3 id="ldap-based-user-to-local-user-translation">LDAP-based user-to-local user translation<a class="headerlink" href="#ldap-based-user-to-local-user-translation" title="Permalink to this heading">#</a></h3>
<p>With LDAP-based user translation, the catalog can connect to an
<a class="reference internal" href="ldap.html"><span class="doc">LDAP server</span></a> for information on how the SEP user maps to the
external service. If configured for a catalog, SEP connects to the LDAP
server and searches for a match against the current user. A successful match is
cached in SEP for an amount of time defined in the <code class="docutils literal notranslate"><span class="pre">auth-to-local.cache-ttl</span></code>
catalog configuration property.</p>
<p>To enable LDAP-based user translation for a catalog, configure the following
catalog configuration properties:</p>
<table>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.url</span></code></p></td>
<td><p>URL of the LDAP server. The URL scheme must be <code class="docutils literal notranslate"><span class="pre">ldap://</span></code> or
<code class="docutils literal notranslate"><span class="pre">ldaps://</span></code>. Connecting to an LDAP server without TLS enabled requires
<code class="docutils literal notranslate"><span class="pre">ldap.allow-insecure</span></code> to be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.allow-insecure</span></code></p></td>
<td><p>Allow connection to an LDAP server that is not secured with TLS.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.ssl.keystore.path</span></code></p></td>
<td><p>Path to the PEM or JKS key store.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.ssl.keystore.password</span></code></p></td>
<td><p>Password for the key store.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.ssl.truststore.path</span></code></p></td>
<td><p>Path to the PEM or JKS trust store.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.ssl.truststore.password</span></code></p></td>
<td><p>Password for the trust store.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.ignore-referrals</span></code></p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, ignores referrals from the LDAP server to instead only
search for a user match within one LDAP server.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.timeout.connect</span></code></p></td>
<td><p>Timeout for establishing a connection.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ldap.timeout.read</span></code></p></td>
<td><p>Timeout for reading data from the LDAP service.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">auth-to-local.ldap.bind-dn</span></code></p></td>
<td><p>Distinguished name for the user bind. For example: <code class="docutils literal notranslate"><span class="pre">CN=User</span> <span class="pre">Name,OU=CITY_OU,OU=STATE_OU,DC=domain,DC=domain_root</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auth-to-local.ldap.bind-password</span></code></p></td>
<td><p>Password used for the user bind. For example: <code class="docutils literal notranslate"><span class="pre">password1234</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">auth-to-local.ldap.user-base-dn</span></code></p></td>
<td><p>Base distinguished name of the user. For example: <code class="docutils literal notranslate"><span class="pre">dc=example,dc=com</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auth-to-local.ldap.user-search-filter</span></code></p></td>
<td><p>Custom user search query on the LDAP service. For example:
<code class="docutils literal notranslate"><span class="pre">(&amp;(objectClass=inetOrgPerson)(uid=${USER}))</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">auth-to-local.ldap.attribute</span></code></p></td>
<td><p>Attribute to be used for user mapping.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auth-to-local.cache-ttl</span></code></p></td>
<td><p>Determines how long user mapping information is cached.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="username-case-sensitivity">
<h3 id="username-case-sensitivity">Username case sensitivity<a class="headerlink" href="#username-case-sensitivity" title="Permalink to this heading">#</a></h3>
<p>User impersonation is case-sensitive by default. As a result, when the SEP
user name and identity provider token subjects are in different letter cases,
user impersonation may fail or trigger an unwanted mapping rule.</p>
<p>Set the <code class="docutils literal notranslate"><span class="pre">http-server.impersonation.case-sensitive</span></code>
property in <code class="docutils literal notranslate"><span class="pre">config.properties</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>, to disable username case
sensitivity:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">http-server.impersonation.case-sensitive</span><span class="o">=</span><span class="s">false</span>
</pre></div>
</div>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="group-file.html" title="File group provider"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> File group provider </span>
              </div>
            </a>
          
          
            <a href="user-mapping.html" title="User mapping"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> User mapping </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 435-e.12 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/435-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/435-e/_static/searchbox.js" data-versions="{'Latest LTS (453-e)': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', '429-e LTS': '/429-e/', 'Latest STS (451-e)': '/451-e/'}"></script>
<script src="https://docs.starburst.io/435-e/_static/searchresults.js" data-versions="{'Latest LTS (453-e)': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', '429-e LTS': '/429-e/', 'Latest STS (451-e)': '/451-e/'}"></script>
  </body>
</html>