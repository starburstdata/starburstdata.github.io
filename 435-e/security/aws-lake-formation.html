

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>AWS Lake Formation access control support &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sidebar.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="System access control" href="built-in-system-access-control.html" />
    <link rel="prev" title="Immuta access control" href="immuta-overview.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/security/aws-lake-formation.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/aws-lake-formation" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 435-e.21 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 435-e.21 LTS</a>
          <span class="md-header-nav__topic"> AWS Lake Formation access control support </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (462-e)" href="/462-e/">Latest LTS (462-e)</a>
      
          <a title="453-e LTS" href="/453-e/">453-e LTS</a>
      
          <a title="443-e LTS" href="/443-e/">443-e LTS</a>
      
          <a title="435-e LTS" href="/435-e/">435-e LTS</a>
      
          <a title="Latest STS (468-e)" href="/468-e/">Latest STS (468-e)</a>
      
          <a title="467-e STS" href="/467-e/">467-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 435-e.21 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Features, use cases, and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../try-sep.html">Try Starburst Enterprise</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">Query optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Developer guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../non-object-storage.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/starburst-connectors.html">Starburst connectors feature matrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../security.html">Security</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Security overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-overview.html">Built-in access control overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-roles.html">- Built-in access control roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-privileges.html">- Built-in access control privileges</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-masks-filters.html">- Built-in access control masks and filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-audit-log.html">- Built-in access control audit log</a></li>
<li class="toctree-l2"><a class="reference internal" href="biac-vs-ranger.html">- Comparison to Apache Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication-types.html">Authentication types</a></li>
<li class="toctree-l2"><a class="reference internal" href="password-file.html">- Password files</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap.html">- LDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap-group-provider.html">- LDAP group provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="scim-provisioning.html">- SCIM user and group synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="salesforce.html">- Salesforce</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2.html">- OAuth2 over HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2-providers.html">- OAuth2 providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="saml.html">- SAML 2.0 over HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="okta-authentication.html">- Okta</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerberos.html">- Kerberos</a></li>
<li class="toctree-l2"><a class="reference internal" href="certificate.html">- Certificate</a></li>
<li class="toctree-l2"><a class="reference internal" href="jwt.html">- JWT</a></li>
<li class="toctree-l2"><a class="reference internal" href="password-passthrough.html">- Password pass-through</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2-passthrough.html">- OAuth 2.0 token pass-through</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerberos-passthrough.html">- Kerberos credential pass-through</a></li>
<li class="toctree-l2"><a class="reference internal" href="tls.html">TLS and HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="inspect-pem.html">- PEM files</a></li>
<li class="toctree-l2"><a class="reference internal" href="inspect-jks.html">- JKS files</a></li>
<li class="toctree-l2"><a class="reference internal" href="internal-communication.html">Secure internal communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="secrets.html">Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="ranger-overview.html">Apache Ranger overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="global-ranger.html">- Global Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-ranger.html">- Hive Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="immuta-overview.html">Immuta</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">AWS Lake Formation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-aws-lake-formation">Configure AWS Lake Formation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lake-formation-data-lake-locations">Lake Formation data lake locations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-properties">Configuration properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lake-formation-credential-vending-integration">Lake formation credential vending integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#credential-vending-configuration-properties">Credential vending configuration properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lake-formation-security-mapping">Lake formation security mapping</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#security-mapping-configuration-properties">Security mapping configuration properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#security-mapping-role-requirements">Security mapping role requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#listing-and-selecting-available-user-roles">Listing and selecting available user roles</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#caching">Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#views">Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="built-in-system-access-control.html">System access control</a></li>
<li class="toctree-l2"><a class="reference internal" href="file-system-access-control.html">File system access control</a></li>
<li class="toctree-l2"><a class="reference internal" href="group-file.html">File-based group provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="impersonation.html">User impersonation</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-mapping.html">User mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="audit.html">Query audit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/aws/index.html">AWS ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/google/index.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Version information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">435-e.6 LTS and others</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-aws-lake-formation--page-root" class="md-nav__link">AWS Lake Formation access control support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a>
        </li>
        <li class="md-nav__item"><a href="#configure-aws-lake-formation" class="md-nav__link">Configure AWS Lake Formation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#lake-formation-data-lake-locations" class="md-nav__link">Lake Formation data lake locations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#lake-formation-credential-vending-integration" class="md-nav__link">Lake formation credential vending integration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#credential-vending-configuration-properties" class="md-nav__link">Credential vending configuration properties</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#lake-formation-security-mapping" class="md-nav__link">Lake formation security mapping</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#security-mapping-configuration-properties" class="md-nav__link">Security mapping configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#security-mapping-role-requirements" class="md-nav__link">Security mapping role requirements</a>
        </li>
        <li class="md-nav__item"><a href="#listing-and-selecting-available-user-roles" class="md-nav__link">Listing and selecting available user roles</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#caching" class="md-nav__link">Caching</a>
        </li>
        <li class="md-nav__item"><a href="#views" class="md-nav__link">Views</a>
        </li>
        <li class="md-nav__item"><a href="#limitations" class="md-nav__link">Limitations</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="aws-lake-formation-access-control-support">
<h1 id="security-aws-lake-formation--page-root">AWS Lake Formation access control support<a class="headerlink" href="#security-aws-lake-formation--page-root" title="Permalink to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>AWS Lake Formation access control and security mapping support is a
<a class="reference internal" href="../versions.html#feature-release-status"><span class="std std-ref">public preview</span></a> feature. Contact <a class="external reference" href="../../support.html">Starburst
support</a> with questions or feedback.</p>
</div>
<p>Starburst Enterprise platform (SEP) provides support for using an existing AWS Lake Formation access
control system.</p>
<section id="requirements">
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<p>To use AWS Lake Formation integration with Starburst Enterprise, you need:</p>
<ul class="simple">
<li><p>An existing AWS Lake Formation configuration and AWS credentials that allow
interacting with its API.</p></li>
<li><p>A valid <a class="reference internal" href="../license-requirements.html"><span class="doc">Starburst Enterprise license</span></a>.</p></li>
</ul>
</section>
<section id="overview">
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>AWS Lake Formation provides a single place to manage access controls policies.
You can define security policies that restrict access to data at database,
table, column, row and cell levels.</p>
<p>AWS Lake Formation access control support is only available for catalogs that
use the Hive connector because it utilizes the <a class="reference internal" href="../connector/hive-security.html"><span class="doc">security system of the Hive connector</span></a>.</p>
<p>AWS Lake Formation can be enabled alongside <a class="reference internal" href="biac-overview.html"><span class="doc">built-in access control</span></a>. This is a <a class="reference internal" href="../versions.html#feature-release-status"><span class="std std-ref">public preview feature</span></a>. Contact Starburst Support with questions or feedback.</p>
</section>
<section id="configure-aws-lake-formation">
<h2 id="configure-aws-lake-formation">Configure AWS Lake Formation<a class="headerlink" href="#configure-aws-lake-formation" title="Permalink to this heading">#</a></h2>
<p>Each catalog that needs to be controlled with AWS Lake Formation must have the
catalog properties file configured to use the <code class="docutils literal notranslate"><span class="pre">lake-formation</span></code> Hive security:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">hive.security</span><span class="o">=</span><span class="s">lake-formation</span>
</pre></div>
</div>
<p>The following is a more complex example of a catalog properties file that is
configured to use AWS Lake Formation for authorization with the Hive connector.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connector.name</span><span class="o">=</span><span class="s">hive</span>
<span class="na">hive.security</span><span class="o">=</span><span class="s">lake-formation</span>
<span class="na">hive.metastore</span><span class="o">=</span><span class="s">glue</span>
<span class="na">hive.metastore.glue.region</span><span class="o">=</span><span class="s">us-east-2</span>
<span class="na">hive.metastore.glue.default-warehouse-dir</span><span class="o">=</span><span class="s">s3://data-lake-bucket</span>
<span class="na">hive.metastore.glue.iam-role</span><span class="o">=</span><span class="s">arn:aws:iam::&lt;account_id&gt;:role/&lt;admin-role&gt;</span>
<span class="na">lake-formation.authorized-caller-tag</span><span class="o">=</span><span class="s">starburst-enterprise</span>
<span class="na">lake-formation.security-mapping.config-file</span><span class="o">=</span><span class="s">etc/lakeformation-security-mapping.json</span>
</pre></div>
</div>
<p>More information on lake formation security mapping can be found <a class="reference internal" href="#lake-formation-security-mapping"><span class="std std-ref">later in this topic</span></a>.</p>
<section id="lake-formation-data-lake-locations">
<h3 id="lake-formation-data-lake-locations">Lake Formation data lake locations<a class="headerlink" href="#lake-formation-data-lake-locations" title="Permalink to this heading">#</a></h3>
<p>Depending on your intentions with AWS Lake Formation, you may need to register
some number of S3 locations:</p>
<ul class="simple">
<li><p>To run <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statements on a table, its S3 location must be registered in
Lake Formation.</p></li>
<li><p>When credential vending is enabled, all S3 locations used must be registered
in Lake Formation.</p></li>
</ul>
<p>You can then use AWS Lake Formation permissions for access control to objects
that point to your data lake location, and to the underlying data in the
location.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not use the <code class="docutils literal notranslate"><span class="pre">AWSServiceRoleForLakeFormationDataAccess</span></code> service-linked
role for registering data locations.</p>
</div>
<p>Trust relationships of the IAM role registered for a location in AWS Lake
Formation must allow the Lake Formation AWS service to assume the role. Below is
an example of a Trust relationships statement for the data access role.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"Effect"</span><span class="p">:</span> <span class="s2">"Allow"</span><span class="p">,</span>
  <span class="nt">"Principal"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"Service"</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">"lakeformation.amazonaws.com"</span><span class="p">,</span>
      <span class="s2">"glue.amazonaws.com"</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">"Action"</span><span class="p">:</span> <span class="s2">"sts:AssumeRole"</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The IAM role registered for a location in AWS Lake Formation should have at
least the following S3 API actions granted for all S3 paths that it is
registered for: <code class="docutils literal notranslate"><span class="pre">s3:ListBucket</span></code>, <code class="docutils literal notranslate"><span class="pre">s3::GetObject</span></code>, <code class="docutils literal notranslate"><span class="pre">s3::PutObject</span></code>,
<code class="docutils literal notranslate"><span class="pre">s3::DeleteObject</span></code>.</p>
<p>For more information on registering data locations in AWS Lake Formation,
refer to <a class="reference external" href="https://docs.aws.amazon.com/lake-formation/latest/dg/register-data-lake.html">Register data lake AWS documentation</a>.</p>
</section>
</section>
<section id="configuration-properties">
<h2 id="configuration-properties">Configuration properties<a class="headerlink" href="#configuration-properties" title="Permalink to this heading">#</a></h2>
<table id="id2">
<caption><span class="caption-text">AWS Lake Formation configuration properties</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.authorized-caller-tag</span></code></p></td>
<td><p>The value of <code class="docutils literal notranslate"><span class="pre">LakeFormationAuthorizedCaller</span></code> registered for SEP in
<a class="reference external" href="https://docs.aws.amazon.com/lake-formation/latest/dg/permitting-third-party-call.html">third-party query engine
integration</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.max-connections</span></code></p></td>
<td><p>The maximum number of concurrent connections to the AWS Lake Formation
client. Defaults to <code class="docutils literal notranslate"><span class="pre">30</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>In order for SEP to integrate with AWS Lake Formation, you must add a session
tag for SEP to AWS Lake Formation external data filtering. The session tag
value added to AWS Lake Formation is set in the
<code class="docutils literal notranslate"><span class="pre">lake-formation.authorized-caller-tag</span></code> property. Permission checking for SEP
fails for AWS Lake Formation if this property is not set. Read the <a class="reference external" href="https://docs.aws.amazon.com/lake-formation/latest/dg/permitting-third-party-call.html">AWS
documentation</a>
for details on how to complete this configuration.</p>
<p>To use Lake Formation access control when accessing resources shared between
different AWS accounts, you need the following prerequisites:</p>
<ul class="simple">
<li><p>For AWS accounts that are sharing resources:</p>
<ul>
<li><p>Lake Formation external data filtering must be enabled.</p></li>
<li><p>One of the allowed session tag values must match what is configured in
SEP.</p></li>
<li><p>IDs of the accounts that are accessing resources must be listed in Lake
Formation external data filtering settings, under AWS account IDs.</p></li>
</ul>
</li>
<li><p>For AWS accounts that are accessing shared resources:</p>
<ul>
<li><p>Lake Formation external data filtering must be enabled.</p></li>
<li><p>One of the allowed session tag values must match what is configured in
SEP.</p></li>
</ul>
</li>
</ul>
<p>Access to S3 in the source accounts must be configured separately using <a class="reference internal" href="../connector/hive-s3.html#hive-s3-security-mapping"><span class="std std-ref">S3 security mapping</span></a>.</p>
<p>Write operations on Lake Formation resource links are not supported.</p>
</section>
<section id="lake-formation-credential-vending-integration">
<span id="lake-formation-credential-vending"></span><h2 id="lake-formation-credential-vending-integration">Lake formation credential vending integration<a class="headerlink" href="#lake-formation-credential-vending-integration" title="Permalink to this heading">#</a></h2>
<p>SEP supports AWS credential vending with Lake Formation. SEP calls Lake
Formation credential vending API operations to generate temporary credentials to
determine read access to the table. S3 locations that are registered with Lake
Formation can only be accessed using the role specified at the time of
registering the location.</p>
<p>To enable AWS credential vending, add the
<code class="docutils literal notranslate"><span class="pre">lake-formation.credential-vending.enabled=true</span></code> catalog configuration
property to your <code class="docutils literal notranslate"><span class="pre">hive.properties</span></code> configuration file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Enabling credential vending makes the catalog read-only.</p>
</div>
<p>AWS Lake Formation works only with the native filesystem, therefore the
<code class="docutils literal notranslate"><span class="pre">fs.native-s3.enabled</span></code> property must be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. When a Hive catalog
uses credential vending, <a class="reference internal" href="../connector/hive-s3.html"><span class="doc">Hive S3 configuration properties</span></a> are made invalid.</p>
<p>The following properties must be used instead:</p>
<table id="id3">
<caption><span class="caption-text">Credential vending S3 configuration properties</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.region</span></code></p></td>
<td><p>Optional property to force the S3 client to connect to the specified
region only.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.endpoint</span></code></p></td>
<td><p>The S3 storage endpoint server. This can be used to connect to an
S3-compatible storage system instead of AWS. When using v4 signatures, it
is recommended to set this to the AWS region-specific endpoint, such as
<code class="docutils literal notranslate"><span class="pre">http[s]://s3.&lt;AWS-region&gt;.amazonaws.com</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.path-style-access</span></code></p></td>
<td><p>Use path-style access for all requests to the S3-compatible storage. This
is for S3-compatible storage that doesn’t support virtual-hosted-style
access. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.max-connections</span></code></p></td>
<td><p>Maximum number of simultaneous open connections to S3.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy-secure</span></code></p></td>
<td><p>Proxy protocol. HTTPS.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy</span></code></p></td>
<td><p>Proxy protocol. HTTP.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.streaming.part-size</span></code></p></td>
<td><p>The part size for S3 streaming upload. Defaults to <code class="docutils literal notranslate"><span class="pre">16MB</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.requester.pays</span></code></p></td>
<td><p>Enables Requester Pays.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.sse.type</span></code></p></td>
<td><p>The type of key management for S3 server-side encryption. Use <code class="docutils literal notranslate"><span class="pre">S3</span></code> for
S3 managed or <code class="docutils literal notranslate"><span class="pre">KMS</span></code> for KMS-managed keys, defaults to <code class="docutils literal notranslate"><span class="pre">S3</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.sse.kms-key-id</span></code></p></td>
<td><p>If set, use S3 client-side encryption and use the AWS KMS to store
encryption keys and use the value of this property as the KMS Key ID for
newly created objects.</p></td>
</tr>
</tbody>
</table>
<section id="credential-vending-configuration-properties">
<h3 id="credential-vending-configuration-properties">Credential vending configuration properties<a class="headerlink" href="#credential-vending-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The following additional catalog configuration properties are available for
credential vending:</p>
<table id="id4">
<caption><span class="caption-text">Credential vending configuration properties</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.credential-vending.validity</span></code></p></td>
<td><p>Specifies the length of time in which the generated temporary credentials
are valid. Duration can be set between <code class="docutils literal notranslate"><span class="pre">15m</span></code> and <code class="docutils literal notranslate"><span class="pre">6h</span></code>. For example,
use <code class="docutils literal notranslate"><span class="pre">15m</span></code> to keep the temporary credentials valid for 15 minutes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.credential-vending.stale-time</span></code></p></td>
<td><p>Specifies the length of time until temporary credentials are marked stale
and new credentials are fetched. There is no minimum value, however it
should be less than the value set for
<code class="docutils literal notranslate"><span class="pre">lake-formation.credential-vending.validity</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="lake-formation-security-mapping">
<span id="id1"></span><h2 id="lake-formation-security-mapping">Lake formation security mapping<a class="headerlink" href="#lake-formation-security-mapping" title="Permalink to this heading">#</a></h2>
<p>SEP supports flexible security mapping for lake formation, which associates
SEP users or groups with AWS security entities like IAM roles according to a
JSON mappings file. The IAM role for a specific query can be selected from a
list of allowed roles using <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">ROLE</span> <span class="pre">GRANTS</span> <span class="pre">FROM</span> <span class="pre">&lt;catalog&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">&lt;user-role&gt;</span> <span class="pre">IN</span> <span class="pre">&lt;catalog&gt;</span></code>  sql statements.</p>
<p>Each security mapping entry may specify one or more match criteria. If multiple
criteria are specified, all criteria must match. The following match criteria
are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">"user":</span></code> - Regular expression to match against username. For example:
<code class="docutils literal notranslate"><span class="pre">alice|bob</span></code> to match either SEP users “alice” and “bob”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">"group":</span></code> - Regular expression to match against any of the groups that the
user belongs to. For example: <code class="docutils literal notranslate"><span class="pre">finance|sales</span></code> to match either the finance or
sales groups in SEP.</p></li>
</ul>
<p>Each SEP match criteria can be mapped to one or more of the following AWS
security entities:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">"iamRole":</span></code> IAM role to use if no user provided role is specified. This
overrides any globally configured IAM role.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">"roleSessionName":</span></code> (Optional) Only valid when <code class="docutils literal notranslate"><span class="pre">iamRole</span></code> is specified. If
<code class="docutils literal notranslate"><span class="pre">roleSessionName</span></code> includes the string <code class="docutils literal notranslate"><span class="pre">${USER}</span></code>, then the <code class="docutils literal notranslate"><span class="pre">${USER}</span></code>
portion of the string will be replaced with the current session’s username. If
<code class="docutils literal notranslate"><span class="pre">roleSessionName</span></code> is not specified, it defaults to <code class="docutils literal notranslate"><span class="pre">trino-session</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">"allowedIamRoles":</span></code> Comma-separated list of IAM roles that specified
AWS account users are limited to.</p></li>
</ul>
<p>The security mapping entries are processed in the order listed in the
JSON mapping. More specific mapping entries should thus be specified
before less specific mapping entries. For example, the mapping list might have a
<code class="docutils literal notranslate"><span class="pre">"group":</span></code> entry for “salesnorth” followed by an entry for “sales” to allow to
apply a more specific lake formation security mapping to the north sales team,
before applying a more broad security mapping to the whole sales department.</p>
<p>You can set a default mapping by adding an entry to the end of the file that
does not specify an SEP match criteria. If no mapping entry matches and no
default is configured, access is denied with a “Cannot set role NONE” error.</p>
<p>The JSON mapping can either be retrieved from a file or REST-endpoint
specified via the <code class="docutils literal notranslate"><span class="pre">lake-formation.security-mapping.config-file</span></code> config
property.</p>
<p>The following example JSON mapping applies SEP user and group mappings to
security entities in AWS lake formation:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"mappings"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"user"</span><span class="p">:</span> <span class="s2">"bob|charlie"</span><span class="p">,</span>
      <span class="nt">"iamRole"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789101:role/test_default"</span><span class="p">,</span>
      <span class="nt">"allowedIamRoles"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"arn:aws:iam::123456789101:role/test_default"</span>
        <span class="s2">"arn:aws:iam::123456789101:role/test1"</span><span class="p">,</span>
        <span class="s2">"arn:aws:iam::123456789101:role/test2"</span><span class="p">,</span>
        <span class="s2">"arn:aws:iam::123456789101:role/test3"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"user"</span><span class="p">:</span> <span class="s2">"salesnorth"</span><span class="p">,</span>
      <span class="nt">"iamRole"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789101:role/sales_north_users"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"group"</span><span class="p">:</span> <span class="s2">"sales*"</span><span class="p">,</span>
      <span class="nt">"iamRole"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789101:role/sales_all_users"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"iamRole"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789101:role/default"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="security-mapping-configuration-properties">
<h3 id="security-mapping-configuration-properties">Security mapping configuration properties<a class="headerlink" href="#security-mapping-configuration-properties" title="Permalink to this heading">#</a></h3>
<table id="id5">
<caption><span class="caption-text">Security mapping configuration properties</span><a class="headerlink" href="#id5" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.security-mapping.config-file</span></code></p></td>
<td><p>Path and filename of the JSON mapping file, or REST-endpoint URI
containing security mappings.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.security-mapping.refresh-period</span></code></p></td>
<td><p>How often to refresh the security mapping configuration. For example, use
<code class="docutils literal notranslate"><span class="pre">5m</span></code> to direct SEP to refresh security mappings every 5 minutes
against the JSON mapping.</p></td>
</tr>
</tbody>
</table>
<p>The following example shows the lake formation security mapping configuration
properties:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">lake-formation.authorized-caller-tag</span><span class="o">=</span><span class="s">starburst-enterprise</span>
<span class="na">lake-formation.security-mapping.config-file</span><span class="o">=</span><span class="s">etc/example-lake-formation-security-mapping.json</span>
<span class="na">lake-formation.security-mapping.refresh-period</span><span class="o">=</span><span class="s">5m</span>
</pre></div>
</div>
</section>
<section id="security-mapping-role-requirements">
<h3 id="security-mapping-role-requirements">Security mapping role requirements<a class="headerlink" href="#security-mapping-role-requirements" title="Permalink to this heading">#</a></h3>
<p>AWS Lake Formation permissions are read from AWS using two different sets of
assumed role credentials when executing queries against catalogs protected by
AWS Lake Formation security policies:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">admin</span></code> - Identified by <code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.iam-role</span></code> configuration
property.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user</span></code> - Selected according to Security Mapping rules.</p></li>
</ul>
<p>You must configure the following in AWS IAM:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">admin</span></code> role must be configured to assume <code class="docutils literal notranslate"><span class="pre">user</span></code> role in AWS trust
relationships. Read the <a class="reference external" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/roles-managingrole-editing-console.html#roles-managingrole_edit-trust-policy">AWS trust relationship documentation</a>
for more information.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sts:TagSession</span></code> and <code class="docutils literal notranslate"><span class="pre">sts:AssumeRole</span></code> actions must both be allowed.</p></li>
<li><p>For read access:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">glue:GetDatabases</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:GetDatabase</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:GetTables</span></code>,
<code class="docutils literal notranslate"><span class="pre">glue:GetTable</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:GetPartitions</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:GetPartition</span></code>,
<code class="docutils literal notranslate"><span class="pre">glue:BatchGetPartition</span></code> AWS Glue API actions must be granted to the
<code class="docutils literal notranslate"><span class="pre">user</span></code> role.</p></li>
</ul>
</li>
<li><p>For write access:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">glue:GetDatabases</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:GetDatabase</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:GetTables</span></code>,
<code class="docutils literal notranslate"><span class="pre">glue:GetTable</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:GetPartitions</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:GetPartition</span></code>,
<code class="docutils literal notranslate"><span class="pre">glue:BatchGetPartition</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:CreateTable</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:DeleteTable</span></code>,
<code class="docutils literal notranslate"><span class="pre">glue:UpdateTable</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:BatchCreatePartition</span></code>,
<code class="docutils literal notranslate"><span class="pre">glue:UpdatePartition</span></code>, <code class="docutils literal notranslate"><span class="pre">glue:DeletePartition</span></code>,
<code class="docutils literal notranslate"><span class="pre">lakeformation:GetDataAccess</span></code> AWS Glue and Lake Formation API actions must
be granted to the <code class="docutils literal notranslate"><span class="pre">user</span></code> role.</p></li>
</ul>
</li>
</ul>
</section>
<section id="listing-and-selecting-available-user-roles">
<h3 id="listing-and-selecting-available-user-roles">Listing and selecting available user roles<a class="headerlink" href="#listing-and-selecting-available-user-roles" title="Permalink to this heading">#</a></h3>
<p>The following SQL statements are available to list and set roles:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">ROLE</span> <span class="pre">GRANTS</span> <span class="pre">FROM</span> <span class="pre">&lt;catalog_name&gt;</span></code> - Lists AWS roles available to the
user in a catalog protected by lake formation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">CURRENT</span> <span class="pre">ROLES</span> <span class="pre">IN</span> <span class="pre">&lt;catalog_name&gt;</span></code> - Returns currently enabled roles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">"arn:iam::..."</span> <span class="pre">IN</span> <span class="pre">&lt;catalog_name&gt;</span></code> - Selects a specific role.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">NONE</span> <span class="pre">IN</span> <span class="pre">&lt;catalog_name&gt;</span></code> - Causes the role to default to the role
defined by <code class="docutils literal notranslate"><span class="pre">iamRole</span></code> in the security mapping configuration, if its set.</p></li>
</ul>
<p>Use the <code class="docutils literal notranslate"><span class="pre">roles=&lt;catalog_name&gt;:arn:iam::...</span></code> connection property to select
specific role for a jdbc connection.</p>
</section>
</section>
<section id="caching">
<h2 id="caching">Caching<a class="headerlink" href="#caching" title="Permalink to this heading">#</a></h2>
<p>In order to make permission checks run as fast as possible, lake formation
access control caches permission data for each user. By default, permissions
are stored for a maximum of 1000 users, and expire ofter 10 minutes. In the
following example, the permissions cache size is reduced to 100 users, and the</p>
<p>permissions set to expire after two hours:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">lake-formation.cache-ttl</span><span class="o">=</span><span class="s">2h</span>
<span class="na">lake-formation.cache-size</span><span class="o">=</span><span class="s">100</span>
</pre></div>
</div>
<table id="id6">
<caption><span class="caption-text">Cache configuration properties</span><a class="headerlink" href="#id6" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.cache-ttl</span></code></p></td>
<td><p>Time duration for which to store lake formation permission data for each
user.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.cache-size</span></code></p></td>
<td><p>Maximum number of users for which to store lake formation permission data.</p></td>
</tr>
</tbody>
</table>
<p>If needed, the cache can be manually cleared using a SQL procedure call in the
catalog:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CALL system.flush_access_control_cache()
</pre></div>
</div>
</section>
<section id="views">
<h2 id="views">Views<a class="headerlink" href="#views" title="Permalink to this heading">#</a></h2>
<p>Views that were created before enabling AWS Lake Formation access control or
views created in older SEP versions must be manually migrated before they can
be queried using an AWS Lake Formation-secured catalog:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CREATE OR REPLACE VIEW AS query
</pre></div>
</div>
<p>If a view is using <code class="docutils literal notranslate"><span class="pre">DEFINER</span></code> security mode, it must be dropped and created
again in <code class="docutils literal notranslate"><span class="pre">INVOKER</span></code> security mode. Views with <code class="docutils literal notranslate"><span class="pre">DEFINER</span></code> security mode are not
supported in AWS Lake Formation access control.</p>
<p>After migration, you can manage permissions for a view in AWS Lake Formation.</p>
</section>
<section id="limitations">
<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permalink to this heading">#</a></h2>
<p>Creating views in <code class="docutils literal notranslate"><span class="pre">DEFINER</span></code> security mode is not supported in AWS Lake
Formation.</p>
<p>If AWS Lake Formation controls access to a database and is configured to use
data filters, another access control system should not be configured to control
access to that same database. Overlapping policies may interact in unexpected
ways.</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="immuta-overview.html" title="Immuta access control"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Immuta access control </span>
              </div>
            </a>
          
          
            <a href="built-in-system-access-control.html" title="System access control"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> System access control </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 435-e.21 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/435-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/435-e/_static/searchbox.js" data-versions="{'Latest LTS (462-e)': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', 'Latest STS (468-e)': '/468-e/', '467-e STS': '/467-e/'}"></script>
<script src="https://docs.starburst.io/435-e/_static/searchresults.js" data-versions="{'Latest LTS (462-e)': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', 'Latest STS (468-e)': '/468-e/', '467-e STS': '/467-e/'}"></script>
  </body>
</html>