

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Configure the cache service in Kubernetes &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sidebar.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/heap_analytics.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Helm chart release notes" href="release-notes.html" />
    <link rel="prev" title="Configuring Starburst Enterprise with Ranger in Kubernetes" href="ranger-configuration.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" >


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/k8s/cache-service-configuration.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#k8s/cache-service-configuration" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_White+Blue.svg"
                   alt="Starburst Enterprise 435-e.17 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 435-e.17 LTS</a>
          <span class="md-header-nav__topic"> Configure the cache service in Kubernetes </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (462-e)" href="/462-e/">Latest LTS (462-e)</a>
      
          <a title="453-e LTS" href="/453-e/">453-e LTS</a>
      
          <a title="443-e LTS" href="/443-e/">443-e LTS</a>
      
          <a title="435-e LTS" href="/435-e/">435-e LTS</a>
      
          <a title="Latest STS (464-e)" href="/464-e/">Latest STS (464-e)</a>
      
          <a title="458-e STS" href="/458-e/">458-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/introduction/index.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="/clients/index.html" class="md-tabs__link">Clients</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../k8s.html" class="md-tabs__link">Deploy with Kubernetes</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_White+Blue.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 435-e.17 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Features, use cases, and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../try-sep.html">Try Starburst Enterprise</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">Query optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Developer guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../non-object-storage.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/starburst-connectors.html">Starburst connectors feature matrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deploy in cloud ecosystems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/aws/index.html">AWS ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/google/index.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/microsoft/index.html">Microsoft Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystems/redhat/index.html">Red Hat OpenShift</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../k8s.html">Deploy with Kubernetes</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../k8s.html#kubernetes-cluster-design-for-starburst-enterprise">Kubernetes cluster design for Starburst Enterprise</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="requirements.html">Plan your Kubernetes deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html">Installing Starburst Enterprise in a Kubernetes cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="sep-configuration.html">Configuring Starburst Enterprise in Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="sep-config-examples.html">Kubernetes configuration examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="hms-configuration.html">Configuring the Hive Metastore Service in Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="ranger-configuration.html">Configuring Starburst Enterprise with Ranger in Kubernetes</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Configure the cache service in Kubernetes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-and-start-the-cache-service">Configure and start the cache service</a></li>
<li class="toctree-l4"><a class="reference internal" href="#yaml-file-properties">YAML file properties</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#image"><code class="docutils literal notranslate"><span class="pre">image</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#keystore"><code class="docutils literal notranslate"><span class="pre">keystore</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#config"><code class="docutils literal notranslate"><span class="pre">config</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="#config-properties"><code class="docutils literal notranslate"><span class="pre">config.properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#config-jvm-config"><code class="docutils literal notranslate"><span class="pre">config:jvm.config</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#log-properties"><code class="docutils literal notranslate"><span class="pre">log.properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#rules-json"><code class="docutils literal notranslate"><span class="pre">rules.json</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#type-mapping-json"><code class="docutils literal notranslate"><span class="pre">type-mapping.json</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#registrycredentials"><code class="docutils literal notranslate"><span class="pre">registryCredentials</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#imagepullsecrets"><code class="docutils literal notranslate"><span class="pre">imagePullSecrets</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#resources"><code class="docutils literal notranslate"><span class="pre">resources</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#expose"><code class="docutils literal notranslate"><span class="pre">expose</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="#configure-tls-optional">Configure TLS (optional)</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#database-internal"><code class="docutils literal notranslate"><span class="pre">database.internal</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#database-external"><code class="docutils literal notranslate"><span class="pre">database.external</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#commonlabels"><code class="docutils literal notranslate"><span class="pre">commonLabels</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#configure-sep-to-use-the-cache-service">Configure SEP to use the cache service</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-examples">Configuration examples</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#external-secret-reference">External secret reference</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="release-notes.html">Helm chart release notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-admin.html">Deploy with Starburst Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">Deploy with CFT on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Local installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Version information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">435-e.6 LTS and others</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Version-specific notices and information</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-cache-service-configuration--page-root" class="md-nav__link">Configure the cache service in Kubernetes</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#configure-and-start-the-cache-service" class="md-nav__link">Configure and start the cache service</a>
        </li>
        <li class="md-nav__item"><a href="#yaml-file-properties" class="md-nav__link">YAML file properties</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#image" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">image</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#keystore" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">keystore</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#config" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">config</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#config-properties" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">config.properties</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#config-jvm-config" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">config:jvm.config</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#log-properties" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">log.properties</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#rules-json" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">rules.json</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#type-mapping-json" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">type-mapping.json</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#registrycredentials" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">registryCredentials</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#imagepullsecrets" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">imagePullSecrets</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#resources" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">resources</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#expose" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">expose</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#configure-tls-optional" class="md-nav__link">Configure TLS (optional)</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#database-internal" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">database.internal</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#database-external" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">database.external</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#commonlabels" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">commonLabels</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configure-sep-to-use-the-cache-service" class="md-nav__link">Configure SEP to use the cache service</a>
        </li>
        <li class="md-nav__item"><a href="#configuration-examples" class="md-nav__link">Configuration examples</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#external-secret-reference" class="md-nav__link">External secret reference</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#next-steps" class="md-nav__link">Next steps</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="configure-the-cache-service-in-kubernetes">
<h1 id="k8s-cache-service-configuration--page-root">Configure the cache service in Kubernetes<a class="headerlink" href="#k8s-cache-service-configuration--page-root" title="Permalink to this heading">#</a></h1>
<p>This topic covers configuring the Starburst cache service after you completed a basic
install of Starburst Enterprise. If you have not yet completed that, go to our
<a class="reference internal" href="installation.html"><span class="doc">installation guide</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">starburst-cache-service</span></code> Helm chart configures a standalone
<a class="reference internal" href="../admin/cache-service.html"><span class="doc">Cache service</span></a> to use with <a class="reference internal" href="../admin/starburst-cached-views.html"><span class="doc">Starburst Cached Views</span></a>.</p>
<p>We strongly suggest that you <a class="reference internal" href="sep-configuration.html"><span class="doc">follow best practices</span></a> to customize your cluster. Creating small, targeted
files to override any defaults and add any configuration properties. There is an
example file set in our deployment guide that describes the recommended way to
manage your customizations.</p>
<p>You must configure the following to use the Starburst cache service:</p>
<ul class="simple">
<li><p>The cache service</p></li>
<li><p>Starburst Enterprise platform (SEP), to use the cache service</p></li>
<li><p>The SEP <a class="reference internal" href="sep-config-examples.html#k8s-ex-insights"><span class="std std-ref">backend service</span></a></p></li>
</ul>
<p>Make sure that the cache service is available before <a class="reference internal" href="#k8s-configure-sep-for-cache-service"><span class="std std-ref">configuring and restarting SEP to use it</span></a>.</p>
<section id="requirements">
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Externally managed, <a class="reference internal" href="../admin/cache-service.html#cache-service-external-rdbms"><span class="std std-ref">compatible relational database</span></a>.</p></li>
<li><p>Full access to a dedicated schema on the database with username and password
credentials.</p></li>
<li><p>Network access on the configured port between the database and the cache
service container in the Kubernetes cluster.</p></li>
</ul>
</section>
<section id="configure-and-start-the-cache-service">
<h2 id="configure-and-start-the-cache-service">Configure and start the cache service<a class="headerlink" href="#configure-and-start-the-cache-service" title="Permalink to this heading">#</a></h2>
<p>Get the latest <code class="docutils literal notranslate"><span class="pre">starburst-cache-service</span></code> Helm chart as described in our
<a class="reference internal" href="../installation.html"><span class="doc">installation guide</span></a>.</p>
<p>There are several top-level nodes in the cache service Helm chart that you must
modify for a minimum cache service configuration.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resources</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expose</span></code></p></li>
</ul>
<p>For more information on configuring these nodes, see the
<a class="reference internal" href="#k8s-cache-service-yaml-file"><span class="std std-ref">YAML file properties</span></a> section.</p>
<p>As with SEP, we <strong>strongly suggest</strong> that you initially deploy the cache
service with the minimum configuration described in this topic, and ensure that
it deploys and is accessible before making any additional customizations
described in this documentation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Store customizations in a separate file containing only changed values as
recommended in our <a class="reference internal" href="sep-configuration.html"><span class="doc">best practices guide</span></a>. In
this topic, for example, customizations are stored in a file named
<code class="docutils literal notranslate"><span class="pre">cache-service-values.yaml</span></code> that is used in the <code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">upgrade</span></code> command.</p>
</div>
<p>To deploy or update the cache service with any configuration changes, run the
<code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">upgrade</span></code> command with the updated YAML files and the <code class="docutils literal notranslate"><span class="pre">--install</span></code>
switch. For example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ helm upgrade my-caching-service starburstdata/starburst-cache-service <span class="se">\</span>
    --install <span class="se">\</span>
    --version <span class="m">435</span>.17.0 <span class="se">\</span>
    --values ./registry-access.yaml
    --values ./cache-service-prod.yaml
</pre></div>
</div>
<p>When you update the cache service, you can use the same command that you use to
upgrade to a new release. Helm compares all <code class="docutils literal notranslate"><span class="pre">--values</span></code> files and the version,
and safely ignores any that are unchanged.</p>
</section>
<section id="yaml-file-properties">
<span id="k8s-cache-service-yaml-file"></span><h2 id="yaml-file-properties">YAML file properties<a class="headerlink" href="#yaml-file-properties" title="Permalink to this heading">#</a></h2>
<p>The nodes included in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file are described in the following
table.</p>
<table id="id1">
<caption><span class="caption-text">Top level <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> nodes</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Node name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">image</span></code></p></td>
<td><p>Contains the details for the cache service Docker image. Review our
<a class="reference internal" href="installation.html#minimal-values-yaml-file"><span class="std std-ref">best practices</span></a> for managing registry
access across all Starburst products. NOTE: The <code class="docutils literal notranslate"><span class="pre">image:</span></code> node is handled the
same way as for the <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Docker image and registry section for the Helm chart</span></a> for SEP.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">keystore</span></code></p></td>
<td><p>Contains the secret to be mounted under the specified
<code class="docutils literal notranslate"><span class="pre">podFileLocation</span></code> within the container.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">config</span></code></p></td>
<td><p>Specifies the configuration properties for the cache service
under <code class="docutils literal notranslate"><span class="pre">config.properties</span></code>, its JVM config under <code class="docutils literal notranslate"><span class="pre">jvm.config</span></code>, and its
logging configuration under <code class="docutils literal notranslate"><span class="pre">log.properties</span></code>. It also contains the
<code class="docutils literal notranslate"><span class="pre">rules.json</span></code> and <code class="docutils literal notranslate"><span class="pre">type-mapping.json</span></code> nodes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">registryCredentials</span></code></p></td>
<td><p>Defines authentication details for Docker registry access. Typically, you
need to use <a class="reference internal" href="requirements.html#k8s-helm-repository"><span class="std std-ref">your username and password for the Starburst Harbor instance</span></a>. Cannot
be used if using <code class="docutils literal notranslate"><span class="pre">imagePullSecrets</span></code>. NOTE: The
<code class="docutils literal notranslate"><span class="pre">registryCredentials</span></code> node is handled the same way as for the
<a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Docker image and registry section for the Helm chart</span></a> for SEP.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">imagePullSecrets</span></code></p></td>
<td><p>Alternative authentication for selected Docker registry using secrets.
Cannot be used if using <code class="docutils literal notranslate"><span class="pre">registryCredentials</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">resources</span></code></p></td>
<td><p>The CPU and memory resources to use for the cache service. Request and
limit values should be identical. These settings can be adjusted to match
your workload and available node sizes in the cluster.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expose</span></code></p></td>
<td><p>Defines the mechanisms and their options that expose the cache service to
an outside network. <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">"clusterIp"</span></code> is configured by default.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></td>
<td><p>Defines the database backend for the cache service. Defaults to
<code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">"internal"</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">envFrom</span></code></p></td>
<td><p>Allows for the propagation of environment variables from different sources
complying with the
<a class="reference external" href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.25/#envfromsource-v1-core">K8S schema specification</a>.
This can be used to deliver values to the cache service configuration
properties files by creating a Kubernetes secret holding variable values.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">env</span></code></p></td>
<td><p>Allows to define additional environment variables for the cache service.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nodeSelector</span></code>, <code class="docutils literal notranslate"><span class="pre">affinity</span></code> and <code class="docutils literal notranslate"><span class="pre">tolerations</span></code></p></td>
<td><p>Configuration to allow Kubernetes to <a class="reference internal" href="sep-configuration.html#helm-node-assignment"><span class="std std-ref">determine the node and pod to use</span></a>. These nodes are left empty by default.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">commonLabels</span></code></p></td>
<td><p>Defines common labels to identify all cache service objects in a KRM to
use with the <a class="reference external" href="https://kubectl.docs.kubernetes.io/references/kustomize/kustomization/commonlabels/">kustomize utility</a>
and other tools.</p></td>
</tr>
</tbody>
</table>
<section id="image">
<h3 id="image"><code class="docutils literal notranslate"><span class="pre">image</span></code><a class="headerlink" href="#image" title="Permalink to this heading">#</a></h3>
<p>The following are the default values for the cache service
<code class="docutils literal notranslate"><span class="pre">image</span></code> top level node in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">image</span><span class="p">:</span>
  <span class="nt">repository</span><span class="p">:</span> <span class="s">"starburstdata/starburst-cache-service"</span>
  <span class="nt">tag</span><span class="p">:</span> <span class="s">"435-e.17"</span>
  <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>
</pre></div>
</div>
</section>
<section id="keystore">
<h3 id="keystore"><code class="docutils literal notranslate"><span class="pre">keystore</span></code><a class="headerlink" href="#keystore" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">keystore</span></code> section of the Helm chart configures keystore settings for the
cache service.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">keystore</span><span class="p">:</span>
  <span class="nt">localFileLocation</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
  <span class="nt">podFileLocation</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
<table id="id2">
<caption><span class="caption-text">Keystore configuration properties</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keystore.localFileLocation</span></code></p></td>
<td><p>Specifies the local path of the keystore file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">keystore.podFileLocation</span></code></p></td>
<td><p>Specifies the path in the pod where the keystore file is mounted. You can
provide a file path for a new folder or use an existing folder in the root
directory such as <code class="docutils literal notranslate"><span class="pre">/mnt</span></code> or <code class="docutils literal notranslate"><span class="pre">/etc</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you create a secret for the keystore file, you must name the secret
<code class="docutils literal notranslate"><span class="pre">keystore-configuration</span></code> for the cache service pod to recognize it.</p>
</div>
</section>
<section id="config">
<h3 id="config"><code class="docutils literal notranslate"><span class="pre">config</span></code><a class="headerlink" href="#config" title="Permalink to this heading">#</a></h3>
<p>The defaults for nodes nested under <code class="docutils literal notranslate"><span class="pre">config:</span></code> are described below.</p>
<section id="config-properties">
<h4 id="config-properties"><code class="docutils literal notranslate"><span class="pre">config.properties</span></code><a class="headerlink" href="#config-properties" title="Permalink to this heading">#</a></h4>
<p>This node specifies <a class="reference internal" href="../admin/cache-service.html#cache-service-config-properties"><span class="std std-ref">configuration properties and their values</span></a> for the cache service. You must define the
service accounts and locators to be used by the cache service:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span>
  <span class="nt">config.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">service-database.user=alice</span>
    <span class="no">service-database.password=test123</span>
    <span class="no">service-database.jdbc-url=jdbc:mysql://mysql-server:13306/cachesvc</span>
    <span class="no">starburst.user=bob</span>
    <span class="no">starburst.jdbc-url=jdbc:trino://coordinator:8080</span>
    <span class="no">rules.file=etc/rules.json</span>
</pre></div>
</div>
</section>
<section id="config-jvm-config">
<h4 id="config-jvm-config"><code class="docutils literal notranslate"><span class="pre">config:jvm.config</span></code><a class="headerlink" href="#config-jvm-config" title="Permalink to this heading">#</a></h4>
<p>This node specifies the <a class="reference internal" href="../admin/cache-service.html#cache-service-jvm-config"><span class="std std-ref">command line configuration options for starting the Java Virtual Machine (JVM)</span></a> used by the cache
service. The following are the default values for the cache service
<code class="docutils literal notranslate"><span class="pre">config:jvm.config:</span></code> node in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span>
  <span class="nt">jvm.config</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">-server</span>
    <span class="no">--add-opens=java-base/sun.nio.ch=ALL-UNNAMED</span>
    <span class="no">--add-opens=java-base/java.nio=ALL-UNNAMED</span>
    <span class="no">--add-opens=java.base/java.lang=ALL-UNNAMED</span>
    <span class="no">--add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED</span>
    <span class="no">-XX:G1HeapRegionSize=32M</span>
    <span class="no">-XX:+ExplicitGCInvokesConcurrent</span>
    <span class="no">-XX:+HeapDumpOnOutOfMemoryError</span>
    <span class="no">-XX:+ExitOnOutOfMemoryError</span>
    <span class="no">-XX:ReservedCodeCacheSize=512M</span>
    <span class="no">-XX:PerMethodRecompilationCutoff=10000</span>
    <span class="no">-XX:PerBytecodeRecompilationCutoff=10000</span>
    <span class="no">-XX:+UnlockDiagnosticVMOptions</span>
    <span class="no">-XX:+UseAESCTRIntrinsics</span>
    <span class="no">-XX:InitialRAMPercentage=80</span>
    <span class="no">-XX:MaxRAMPercentage=80</span>
    <span class="no">-Djdk.nio.maxCachedBufferSize=2000000</span>
    <span class="no">-Djdk.attach.allowAttachSelf=true</span>
</pre></div>
</div>
</section>
<section id="log-properties">
<h4 id="log-properties"><code class="docutils literal notranslate"><span class="pre">log.properties</span></code><a class="headerlink" href="#log-properties" title="Permalink to this heading">#</a></h4>
<p>This optional node specifies the <a class="reference internal" href="../admin/cache-service.html#cache-service-log-properties"><span class="std std-ref">logging configuration</span></a> for the cache service. The following are the
default values for the cache service <code class="docutils literal notranslate"><span class="pre">log.properties:</span></code> node in the
<code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span>
  <span class="nt">jvm.config</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">io.airlift=INFO</span>
</pre></div>
</div>
</section>
<section id="rules-json">
<h4 id="rules-json"><code class="docutils literal notranslate"><span class="pre">rules.json</span></code><a class="headerlink" href="#rules-json" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">rules.json</span></code> node is specific to table scan redirections. It specifies the
source tables and target connector for the cache, along with the schedule for
refreshing them. The following are the default values for the cache service
<code class="docutils literal notranslate"><span class="pre">rules.json:</span></code> node in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span>
  <span class="nt">rules.json</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">{</span>
      <span class="no">"rules": []</span>
    <span class="no">}</span>
</pre></div>
</div>
<p>The following example demonstrates how to implement <a class="reference internal" href="../admin/table-scan-redirection.html#table-scan-redirection-rule-sets"><span class="std std-ref">cache service refresh rules</span></a> in this node by adding the JSON file
content in a multi-line segment:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span>
  <span class="nt">rules.json</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">{</span>
      <span class="no">"defaultGracePeriod": "42m",</span>
      <span class="no">"defaultMaxImportDuration": "1m",</span>
      <span class="no">"defaultCacheCatalog": "default_cache_catalog",</span>
      <span class="no">"defaultCacheSchema": "default_cache_schema",</span>
      <span class="no">"rules": [</span>
        <span class="no">{</span>
          <span class="no">"catalogName": "mysql",</span>
          <span class="no">"schemaName": "marketing",</span>
          <span class="no">"tableName": "events",</span>
          <span class="no">"refreshInterval": "2m",</span>
          <span class="no">"gracePeriod": "15m",</span>
          <span class="no">"incrementalColumn": "event_id",</span>
          <span class="no">"deletePredicate": "event_date &lt; date_add('day', -31, CURRENT_DATE)"</span>
        <span class="no">}</span>
      <span class="no">]</span>
    <span class="no">}</span>
</pre></div>
</div>
</section>
<section id="type-mapping-json">
<h4 id="type-mapping-json"><code class="docutils literal notranslate"><span class="pre">type-mapping.json</span></code><a class="headerlink" href="#type-mapping-json" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">type-mapping.json</span></code> node specifies <a class="reference internal" href="../admin/cache-service.html#cache-service-type-mapping"><span class="std std-ref">type mapping rules</span></a> between source and target catalogs. This
node is not included in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file by default. The following
example maps  three different timestamp types to <code class="docutils literal notranslate"><span class="pre">TIMESTAMP(3)</span></code> in the target:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span>
  <span class="nt">type-mapping.json</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">{</span>
      <span class="no">"rules": {</span>
        <span class="no">"tpch": {</span>
          <span class="no">"integer": "long"</span>
        <span class="no">},</span>
        <span class="no">"hive": {</span>
          <span class="no">"timestamp(0)": "timestamp(3)",</span>
          <span class="no">"timestamp(1)": "timestamp(3)",</span>
          <span class="no">"timestamp(2)": "timestamp(3)"</span>
        <span class="no">}</span>
      <span class="no">}</span>
    <span class="no">}</span>
</pre></div>
</div>
</section>
</section>
<section id="registrycredentials">
<h3 id="registrycredentials"><code class="docutils literal notranslate"><span class="pre">registryCredentials</span></code><a class="headerlink" href="#registrycredentials" title="Permalink to this heading">#</a></h3>
<p>The following are the default values for the cache service
<code class="docutils literal notranslate"><span class="pre">registryCredentials:</span></code> top level node in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">registryCredentials</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">registry</span><span class="p">:</span>
  <span class="nt">username</span><span class="p">:</span>
  <span class="nt">password</span><span class="p">:</span>
</pre></div>
</div>
</section>
<section id="imagepullsecrets">
<h3 id="imagepullsecrets"><code class="docutils literal notranslate"><span class="pre">imagePullSecrets</span></code><a class="headerlink" href="#imagepullsecrets" title="Permalink to this heading">#</a></h3>
<p>Instead of setting registryCredentials you can pass a list of secrets in the
following format. This feature is disabled by default:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># imagePullSecrets:</span>
<span class="c1">#  - name: secret1</span>
<span class="c1">#  - name: secret2</span>
<span class="nt">imagePullSecrets</span><span class="p">:</span>
</pre></div>
</div>
</section>
<section id="resources">
<h3 id="resources"><code class="docutils literal notranslate"><span class="pre">resources</span></code><a class="headerlink" href="#resources" title="Permalink to this heading">#</a></h3>
<p>The following values must be defined in the <code class="docutils literal notranslate"><span class="pre">resources</span></code> node of the cache
service Helm chart:</p>
<ul class="simple">
<li><p><strong>CPU resources for requests and limits:</strong> The defaults are sufficient for
most environments; however, they must work with the instance type you are
using.</p></li>
<li><p><strong>Memory resources for requests and limits:</strong> The defaults are sufficient for
most environments; however, they must work with the instance type you are
using.</p></li>
</ul>
<p>The following are the default values for the cache service <code class="docutils literal notranslate"><span class="pre">resources</span></code> top
level node in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">resources</span><span class="p">:</span>
  <span class="nt">requests</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2Gi</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.5</span>
  <span class="nt">limits</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2Gi</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
</pre></div>
</div>
</section>
<section id="expose">
<h3 id="expose"><code class="docutils literal notranslate"><span class="pre">expose</span></code><a class="headerlink" href="#expose" title="Permalink to this heading">#</a></h3>
<p>You must expose the service to allow it to connect to the SEP coordinator, and
to reach it with tools such as the <a class="reference internal" href="../admin/cache-service-cli.html"><span class="doc">cache service CLI</span></a>. This service-type configuration is defined by the
<code class="docutils literal notranslate"><span class="pre">expose:</span></code> top level node. You can choose from four different mechanisms by
setting the <code class="docutils literal notranslate"><span class="pre">type:</span></code> value to the <a class="reference external" href="https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types">common configurations in k8s</a>.</p>
<p>Depending on your choice, you only have to configure the identically-named
sections.</p>
<table id="id3">
<caption><span class="caption-text">Types for <code class="docutils literal notranslate"><span class="pre">expose:</span></code> top level node</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">clusterIp</span></code></p></td>
<td><p><a class="reference internal" href="sep-config-examples.html#k8s-defaults-external-comms"><span class="std std-ref">Default value</span></a>. Only exposes the
service internally within the k8s cluster using an IP address internal
to the cluster. Use this in the early stages of configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nodePort</span></code></p></td>
<td><p>Configures the internal port number of the server for requests from
outside the cluster on the <code class="docutils literal notranslate"><span class="pre">nodePort</span></code> port number. External
service requests are made to <code class="docutils literal notranslate"><span class="pre">&lt;nodeIP&gt;:&lt;nodePort&gt;</span></code>. The <code class="docutils literal notranslate"><span class="pre">clusterIP</span></code>
service is automatically created to supply all internal IP addresses.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">loadBalancer</span></code></p></td>
<td><p>Used with platforms that provide a load balancer. This
option automatically creates <code class="docutils literal notranslate"><span class="pre">nodePort</span></code> and <code class="docutils literal notranslate"><span class="pre">clusterIP</span></code> services , to
which the external load balancer routes requests.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ingress</span></code></p></td>
<td><p>This option provides a production-level, securable configuration. It
allows a load balancer to route to multiple apps in the cluster, and
may provide load balancing, SSL termination, and name-based virtual
hosting. For example, the SEP coordinator and Ranger server can be
in the same cluster, and can be exposed via <code class="docutils literal notranslate"><span class="pre">ingress:</span></code> configuration.</p></td>
</tr>
</tbody>
</table>
<p>The following are the default values for the cache service <code class="docutils literal notranslate"><span class="pre">expose:</span></code> top level
node in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8180</span>
  <span class="c1"># one of: nodePort, clusterIp, loadBalancer, ingress</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"clusterIp"</span>
  <span class="nt">clusterIp</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"cache-service"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8180</span>
  <span class="nt">nodePort</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"cache-service"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8180</span>
        <span class="nt">nodePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30180</span>
  <span class="nt">loadBalancer</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"cache-service"</span>
    <span class="nt">IP</span><span class="p">:</span> <span class="s">""</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8180</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
    <span class="nt">sourceRanges</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
  <span class="nt">ingress</span><span class="p">:</span>
    <span class="nt">ingressName</span><span class="p">:</span> <span class="s">"cache-service-ingress"</span>
    <span class="nt">serviceName</span><span class="p">:</span> <span class="s">"cache-service"</span>
    <span class="nt">servicePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8180</span>
    <span class="nt">ingressClassName</span><span class="p">:</span>
    <span class="nt">tls</span><span class="p">:</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">secretName</span><span class="p">:</span>
    <span class="nt">host</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">"/"</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>
<section id="configure-tls-optional">
<h4 id="configure-tls-optional">Configure TLS (optional)<a class="headerlink" href="#configure-tls-optional" title="Permalink to this heading">#</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is separate from configuring TLS on SEP itself.</p>
</div>
<p>If your organization uses TLS, you must enable and configure your cache service
to work with it. The most straightforward way to handle TLS is to terminate TLS
at the load balancer or ingress, using a signed certificate. We <strong>strongly
suggest</strong> this method, which method requires no additional configuration in the
cache service.</p>
<p>If you choose not to handle TLS using that method, you can instead configure it
in the <code class="docutils literal notranslate"><span class="pre">expose</span></code> top-level node of the HMS Helm chart:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"[clusterIp|nodePort|loadBalancer|ingress]"</span>
</pre></div>
</div>
<p>The default <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">clusterIp</span></code>. However, this is not suitable for
production environments. If you need help choosing which type is best, refer to
the <a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">expose documentation</span></a> for SEP.</p>
</section>
</section>
<section id="database-internal">
<h3 id="database-internal"><code class="docutils literal notranslate"><span class="pre">database.internal</span></code><a class="headerlink" href="#database-internal" title="Permalink to this heading">#</a></h3>
<p>The configuration properties for the backend PostgreSQL database internal to the
cache service are found in the <code class="docutils literal notranslate"><span class="pre">database</span></code> top-level node. You can either use
default PostgreSQL database internal to this service or a self-managed, existing
<a class="reference internal" href="../admin/cache-service.html#cache-service-external-rdbms"><span class="std std-ref">external database instance</span></a>. We <strong>strongly
suggest</strong> using the default internal database. Use the <code class="docutils literal notranslate"><span class="pre">type</span></code> property to
select the type of database:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"[internal|external]"</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using a self-managed, existing external database, ensure that it is
available before proceeding.</p>
</div>
<p>As a minimal customization, you must ensure that the following are set correctly
for your environment:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">databaseName</span><span class="p">:</span> <span class="s">"cacheservice"</span>
<span class="nt">databaseUser</span><span class="p">:</span> <span class="s">"cacheservice"</span>
<span class="nt">databasePassword</span><span class="p">:</span> <span class="s">"CacheServicePass1234"</span>
</pre></div>
</div>
<p>You must also configure <code class="docutils literal notranslate"><span class="pre">volume</span></code> persistence options, if desired, as well as
the <code class="docutils literal notranslate"><span class="pre">resources</span></code> for the backing database itself in the <code class="docutils literal notranslate"><span class="pre">database</span></code> node.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">database.resources</span></code> node is separate from the top level <code class="docutils literal notranslate"><span class="pre">resources</span></code>
node. It defines the resources available to the backing database itself, not
the cache service.</p>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">.Values.config.config.properties</span></code> configuration it is required to
refer to appropriate environment variables to enable integration with the
database backend:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">service-database.user=${ENV:SERVICE_DATABASE_USER}</span>
  <span class="no">service-database.password=${ENV:SERVICE_DATABASE_PASSWORD}</span>
  <span class="no">service-database.jdbc-url=${ENV:SERVICE_DATABASE_JDBC_URL}</span>
</pre></div>
</div>
<p>The following snippet shows the default configuration for the internal cache
service backend database:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">internal</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span>
      <span class="nt">repository</span><span class="p">:</span> <span class="s">"library/postgres"</span>
      <span class="nt">tag</span><span class="p">:</span> <span class="s">"10.6"</span>
      <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="c1"># use one of:</span>
      <span class="c1"># - existingVolumeClaim to specify existing PVC</span>
      <span class="c1"># - persistentVolumeClaim to specify spec for new PVC</span>
      <span class="c1"># - other volume type inline configuration, e.g. emptyDir</span>
      <span class="c1"># Examples:</span>
      <span class="c1"># existingVolumeClaim: "my_claim"</span>
      <span class="c1"># persistentVolumeClaim:</span>
      <span class="c1">#  storageClassName:</span>
      <span class="c1">#  accessModes:</span>
      <span class="c1">#    - ReadWriteOnce</span>
      <span class="c1">#  resources:</span>
      <span class="c1">#    requests:</span>
      <span class="c1">#      storage: "2Gi"</span>
      <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
    <span class="nt">resources</span><span class="p">:</span>
      <span class="nt">requests</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
      <span class="nt">limits</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">driver</span><span class="p">:</span> <span class="s">"org.postgresql.Driver"</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5432</span>
    <span class="nt">databaseName</span><span class="p">:</span> <span class="s">"cacheservice"</span>
    <span class="nt">databaseUser</span><span class="p">:</span> <span class="s">"cacheservice"</span>
    <span class="nt">databasePassword</span><span class="p">:</span> <span class="s">"CacheServicePass1234"</span>
    <span class="nt">envFrom</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
    <span class="nt">env</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>
<table id="id4">
<caption><span class="caption-text">Internal cache service backend database configuration</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Node name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.type</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">internal</span></code> to use a database in the k8s cluster, managed by the
chart</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.image</span></code></p></td>
<td><p>Docker container images used for the PostgreSQL server</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.volume</span></code></p></td>
<td><p>Storage volume to persist the database. The default configuration requests
a new persistent volume (PV).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.volume.persistentVolumeClaim</span></code></p></td>
<td><p>The default configuration, which requests a new persistent volume (PV).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.volume.existingVolumeClaim</span></code></p></td>
<td><p>Alternative volume configuration, which uses an existing volume claim by
referencing the name as the value in quotes, e.g., <code class="docutils literal notranslate"><span class="pre">"my_claim"</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.volume.emptyDir</span></code></p></td>
<td><p>Alternative volume configuration, which configures an empty directory on
the pod. Keep in mind that a pod replacement loses the database content</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.resources</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.databaseName</span></code></p></td>
<td><p>Name of the internal database</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.databaseUser</span></code></p></td>
<td><p>User to connect to the internal database</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.databasePassword</span></code></p></td>
<td><p>Password to connect to internal database</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.envFrom</span></code></p></td>
<td><p>YAML sequence of mappings
<a class="reference external" href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.25/#envfromsource-v1-core">to define Secret or Configmap</a>
as a source of environment variables for the PostgreSQL container.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.env</span></code></p></td>
<td><p>YAML sequence of mappings
<a class="reference external" href="https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/">to define two keys</a>
environment variables for the PostgreSQL container.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="database-external">
<h3 id="database-external"><code class="docutils literal notranslate"><span class="pre">database.external</span></code><a class="headerlink" href="#database-external" title="Permalink to this heading">#</a></h3>
<p>This section shows the setup for using an <a class="reference internal" href="../admin/cache-service.html#cache-service-external-rdbms"><span class="std std-ref">external PostgreSQL or MySQL database instance</span></a>. You must provide the
necessary details for the external server, and ensure that it can be reached
from the k8s cluster pod. Set the <code class="docutils literal notranslate"><span class="pre">database.type</span></code> to <code class="docutils literal notranslate"><span class="pre">external</span></code> and
configure the connection properties:</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">.Values.config.config.properties</span></code> configuration it is required to
refer to the appropriate environment variables in order to enable integration
with the database backend:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">service-database.user=${ENV:SERVICE_DATABASE_USER}</span>
  <span class="no">service-database.password=${ENV:SERVICE_DATABASE_PASSWORD}</span>
  <span class="no">service-database.jdbc-url=${ENV:SERVICE_DATABASE_JDBC_URL}</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external</span>
  <span class="nt">external</span><span class="p">:</span>
    <span class="nt">jdbcUrl</span><span class="p">:</span>
    <span class="nt">user</span><span class="p">:</span>
    <span class="nt">password</span><span class="p">:</span>
</pre></div>
</div>
<table id="id5">
<caption><span class="caption-text">External cache service backend database configuration</span><a class="headerlink" href="#id5" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Node name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.type</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">external</span></code> to use an existing PostgreSQL or MySQL database
outside the cluster.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.external.jdbcUrl</span></code></p></td>
<td><p>JDBC URL to connect to the external database as required by the database
and used driver, including hostname and port. Ensure you use a valid JDBC
URL as required by the PostgreSQL or MySQL driver. Typically the syntax
requires the host, port and database name
<code class="docutils literal notranslate"><span class="pre">jdbc:postgresql://host:port/database</span></code> or <code class="docutils literal notranslate"><span class="pre">jdbc:mysql://host:port/database</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.external.user</span></code></p></td>
<td><p>Database user name to access the external database using JDBC.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.external.password</span></code></p></td>
<td><p>Password for the user configured to access the external database using
JDBC.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="commonlabels">
<h3 id="commonlabels"><code class="docutils literal notranslate"><span class="pre">commonLabels</span></code><a class="headerlink" href="#commonlabels" title="Permalink to this heading">#</a></h3>
<p>The following are the default values for the <code class="docutils literal notranslate"><span class="pre">commonLabels:</span></code> top level node in
the cache service <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">commonLabels</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="c1">#  environment: dev</span>
<span class="c1">#  myLabel: labelValue</span>
</pre></div>
</div>
</section>
</section>
<section id="configure-sep-to-use-the-cache-service">
<span id="k8s-configure-sep-for-cache-service"></span><h2 id="configure-sep-to-use-the-cache-service">Configure SEP to use the cache service<a class="headerlink" href="#configure-sep-to-use-the-cache-service" title="Permalink to this heading">#</a></h2>
<p>The cache service requires a <a class="reference internal" href="../admin/cache-service.html#cache-service-external-rdbms"><span class="std std-ref">database schema to store configuration data</span></a>. Ensure that you have created the schema, and
note the connection information. Once the cache service and the external RDBMS
is configured and running, SEP must be configured as in the following example,
which shows a PostgreSQL database providing the backing schema:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">etcFiles</span><span class="p">:</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">cache.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">service-database.user=postgres</span>
        <span class="no">service-database.password=S3cr3t1v3</span>
        <span class="no">service-database.jdbc-url=jdbc:postgresql://&lt;your_rds_endpoint&gt;:5432/redirections</span>
        <span class="no">starburst.user=starburst_service</span>
        <span class="no">starburst.password=</span>
        <span class="no">starburst.jdbc-url=jdbc:trino://coordinator:8080</span>
        <span class="no">rules.file=secretRef:cache-rules:cache-rules.json</span>
        <span class="no">rules.refresh-period=1m</span>
        <span class="no">refresh-initial-delay=1m</span>
        <span class="no">refresh-interval=24h</span>
</pre></div>
</div>
<p>Many connectors <a class="reference internal" href="../admin/table-scan-redirection.html"><span class="doc">support the use of the cache service</span></a>. For each supported catalog that you wish to
use with the cache service, two lines must be added to the catalog properties
configuration:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">redirection.config-source</span><span class="o">=</span><span class="s">SERVICE</span>
<span class="na">cache-service.uri</span><span class="o">=</span><span class="s">http://cache-service:8180</span>
</pre></div>
</div>
<p>In the following example, the <code class="docutils literal notranslate"><span class="pre">mysalesdata</span></code> catalog is configured to use the
cache service:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">catalogs</span><span class="p">:</span>
  <span class="nt">mysalesdata</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=postgresql</span>
    <span class="no">connection-url=jdbc:postgresql://&lt;mydbhost&gt;:5432/bootcamp</span>
    <span class="no">connection-user=postgres</span>
    <span class="no">connection-password=S3cr3t1v3</span>
    <span class="no">statistics.enabled=true</span>
    <span class="no">redirection.config-source=SERVICE</span>
    <span class="no">cache-service.uri=http://cache-service:8180</span>
</pre></div>
</div>
</section>
<section id="configuration-examples">
<h2 id="configuration-examples">Configuration examples<a class="headerlink" href="#configuration-examples" title="Permalink to this heading">#</a></h2>
<section id="external-secret-reference">
<h3 id="external-secret-reference">External secret reference<a class="headerlink" href="#external-secret-reference" title="Permalink to this heading">#</a></h3>
<p>To configure the cache service to work with the cache rules as an external
secret reference, first create a k8s secret holding the file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl create secret generic cache-rules --from-file<span class="o">=</span>cache-rules.json
</pre></div>
</div>
<p>When the file is created, you can configure the secret reference usage for the
above configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span>
  <span class="nt">config.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">service-database.user=${ENV:SERVICE_DATABASE_USER}</span>
    <span class="no">service-database.password=${ENV:SERVICE_DATABASE_PASSWORD}</span>
    <span class="no">service-database.jdbc-url=${ENV:SERVICE_DATABASE_JDBC_URL}</span>
    <span class="no">starburst.user=bob</span>
    <span class="no">starburst.jdbc-url=jdbc:trino://coordinator:8080</span>
    <span class="no">rules.file=secretRef:cache-rules:cache-rules.json</span>
</pre></div>
</div>
<p>This mounts the secret named <code class="docutils literal notranslate"><span class="pre">cache-rules</span></code> in the path
<code class="docutils literal notranslate"><span class="pre">/mnt/secretsRef/cache-rules</span></code> and replaces the <code class="docutils literal notranslate"><span class="pre">secretRef:cache-rules</span></code>
occurrences with the absolute path, resulting in the following configuration
property setting:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>rules.file=/mnt/secretRef/cache-rules/cache-rules.json
</pre></div>
</div>
<p>This mechanism can only be applied for properties files defined under
<code class="docutils literal notranslate"><span class="pre">.Values.config</span></code> node. Specific secret values, such as passwords, can be
passed into properties files using the <code class="docutils literal notranslate"><span class="pre">.Values.envFrom</span></code>.</p>
</section>
</section>
<section id="next-steps">
<h2 id="next-steps">Next steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<p>Review the following topics to enable important performance features for your
SEP deployment:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../connector/starburst-hive.html#sb-hive-mv-catalog-config"><span class="std std-ref">Enable materialized views</span></a></p></li>
<li><p>[Optional] <a class="reference internal" href="../admin/table-scan-redirection.html"><span class="doc">Enable table scan redirection</span></a></p></li>
</ul>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="ranger-configuration.html" title="Configuring Starburst Enterprise with Ranger in Kubernetes"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Configuring Starburst Enterprise with Ranger in Kubernetes </span>
              </div>
            </a>
          
          
            <a href="release-notes.html" title="Helm chart release notes"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Helm chart release notes </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_White+Blue.svg" height="26"
                  alt="Starburst Enterprise 435-e.17 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/435-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/435-e/_static/searchbox.js" data-versions="{'Latest LTS (462-e)': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', 'Latest STS (464-e)': '/464-e/', '458-e STS': '/458-e/'}"></script>
<script src="https://docs.starburst.io/435-e/_static/searchresults.js" data-versions="{'Latest LTS (462-e)': '/462-e/', '453-e LTS': '/453-e/', '443-e LTS': '/443-e/', '435-e LTS': '/435-e/', 'Latest STS (464-e)': '/464-e/', '458-e STS': '/458-e/'}"></script>
  </body>
</html>