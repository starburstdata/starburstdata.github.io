

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Deploying SEP &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuring SEP" href="configuration.html" />
    <link rel="prev" title="Prerequisites" href="prerequisites.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#aws/deploy" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 356-e LTS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 356-e LTS</span>
          <span class="md-header-nav__topic"> Deploying SEP </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (364-e)" href="/364-e/">Latest LTS (364-e)</a>
      
          <a title="360-e LTS" href="/360-e/">360-e LTS</a>
      
          <a title="356-e LTS" href="/356-e/">356-e LTS</a>
      
          <a title="350-e LTS" href="/350-e/">350-e LTS</a>
      
          <a title="Latest STS (363-e)" href="/363-e/">Latest STS (363-e)</a>
      
          <a title="361-e STS" href="/361-e/">361-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../aws.html" class="md-tabs__link">Deploying with CFT on AWS</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 356-e LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="quickstart.html" class="md-nav__link">Getting started on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="prerequisites.html" class="md-nav__link">Prerequisites</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Deploying SEP </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Deploying SEP</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#aws-deploy--page-root" class="md-nav__link">Deploying SEP</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#deploying-a-single-server-with-the-ec2-console" class="md-nav__link">Deploying a single server with the EC2 console</a>
        </li>
        <li class="md-nav__item"><a href="#deploying-a-cluster-with-the-ec2-console" class="md-nav__link">Deploying a cluster with the EC2 console</a>
        </li>
        <li class="md-nav__item"><a href="#deploying-a-cluster-with-the-aws-cli" class="md-nav__link">Deploying a cluster with the AWS CLI</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#cft-cli-example" class="md-nav__link">CFT CLI example</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#cft-configuration" class="md-nav__link">CFT configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#network-configuration" class="md-nav__link">Network configuration</a>
        </li>
        <li class="md-nav__item"><a href="#ec2-configuration" class="md-nav__link">EC2 configuration</a>
        </li>
        <li class="md-nav__item"><a href="#sep-configuration" class="md-nav__link">SEP configuration</a>
        </li>
        <li class="md-nav__item"><a href="#hive-connector-options" class="md-nav__link">Hive connector options</a>
        </li>
        <li class="md-nav__item"><a href="#ranger-options-and-ranger-ldap-user-synchronization" class="md-nav__link">Ranger options and Ranger LDAP user synchronization</a>
        </li>
        <li class="md-nav__item"><a href="#advanced-aws-s3-configuration" class="md-nav__link">Advanced AWS S3 configuration</a>
        </li>
        <li class="md-nav__item"><a href="#monitoring" class="md-nav__link">Monitoring</a>
        </li>
        <li class="md-nav__item"><a href="#advanced-configuration" class="md-nav__link">Advanced configuration</a>
        </li>
        <li class="md-nav__item"><a href="#other-parameters" class="md-nav__link">Other parameters</a>
        </li>
        <li class="md-nav__item"><a href="#writing-a-bootstrap-script" class="md-nav__link">Writing a bootstrap script</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html" class="md-nav__link">Configuring SEP</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="metastore.html" class="md-nav__link">Configuring Hive Metastore</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="access.html" class="md-nav__link">Accessing the SEP cluster</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="query.html" class="md-nav__link">Querying SEP</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="s3.html" class="md-nav__link">Querying AWS S3</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="glue.html" class="md-nav__link">AWS Glue support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="manualscale.html" class="md-nav__link">Manually scaling a running SEP cluster</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="autoscale.html" class="md-nav__link">Auto scaling</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="high-availability.html" class="md-nav__link">Coordinator high availability</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="secrets.html" class="md-nav__link">Secrets</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="logs.html" class="md-nav__link">Integration with CloudWatch logs</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="metrics.html" class="md-nav__link">Integration with CloudWatch metrics</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="troubleshooting.html" class="md-nav__link">Troubleshooting</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="uninstall.html" class="md-nav__link">Uninstalling SEP</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="release-notes.html" class="md-nav__link">AWS AMI/CFT release notes</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../mission-control.html" class="md-nav__link">Mission Control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Starburst Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">356-e.9 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#aws-deploy--page-root" class="md-nav__link">Deploying SEP</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#deploying-a-single-server-with-the-ec2-console" class="md-nav__link">Deploying a single server with the EC2 console</a>
        </li>
        <li class="md-nav__item"><a href="#deploying-a-cluster-with-the-ec2-console" class="md-nav__link">Deploying a cluster with the EC2 console</a>
        </li>
        <li class="md-nav__item"><a href="#deploying-a-cluster-with-the-aws-cli" class="md-nav__link">Deploying a cluster with the AWS CLI</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#cft-cli-example" class="md-nav__link">CFT CLI example</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#cft-configuration" class="md-nav__link">CFT configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#network-configuration" class="md-nav__link">Network configuration</a>
        </li>
        <li class="md-nav__item"><a href="#ec2-configuration" class="md-nav__link">EC2 configuration</a>
        </li>
        <li class="md-nav__item"><a href="#sep-configuration" class="md-nav__link">SEP configuration</a>
        </li>
        <li class="md-nav__item"><a href="#hive-connector-options" class="md-nav__link">Hive connector options</a>
        </li>
        <li class="md-nav__item"><a href="#ranger-options-and-ranger-ldap-user-synchronization" class="md-nav__link">Ranger options and Ranger LDAP user synchronization</a>
        </li>
        <li class="md-nav__item"><a href="#advanced-aws-s3-configuration" class="md-nav__link">Advanced AWS S3 configuration</a>
        </li>
        <li class="md-nav__item"><a href="#monitoring" class="md-nav__link">Monitoring</a>
        </li>
        <li class="md-nav__item"><a href="#advanced-configuration" class="md-nav__link">Advanced configuration</a>
        </li>
        <li class="md-nav__item"><a href="#other-parameters" class="md-nav__link">Other parameters</a>
        </li>
        <li class="md-nav__item"><a href="#writing-a-bootstrap-script" class="md-nav__link">Writing a bootstrap script</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="aws-deploy--page-root">Deploying SEP<a class="headerlink" href="#aws-deploy--page-root" title="Permalink to this headline">#</a></h1>
<p>Starburst Enterprise platform (SEP) is available as an Amazon Machine Image (AMI), which in turn is used
in the CloudFormation template (CFT). You can get the resources as customer
directly from Starburst, or from the <a class="reference external" href="https://aws.amazon.com/marketplace/pp/B07DKV5659/ref=_ptnr_starburst_docs">AWS Marketplace</a></p>
<p><a class="reference internal" href="#ami"><span class="std std-ref">Launching the AMI</span></a> provides a fully functional single node
Starburst Enterprise platform (SEP) setup – suitable for trial deployment of SEP in your development
environment.</p>
<p>The CFT is ideal for production deployment. It configuring multiple AMIs for
SEP and necessary other components to form a cluster. You need to have a
<a class="reference internal" href="prerequisites.html#aws-security-prereq-cft"><span class="std std-ref">sufficient set of permissions</span></a>, that allow the
creation of all necessary stack resources. You can <a class="reference internal" href="#cft-ec2-console"><span class="std std-ref">use the EC2 console</span></a> or <a class="reference internal" href="#cft-aws-cli"><span class="std std-ref">the AWS CLI</span></a> to configure, launch and
manage the cluster. Both use the same <a class="reference internal" href="#cft-configuration"><span class="std std-ref">CFT configuration</span></a>.</p>

<span id="ami"></span><h2 id="deploying-a-single-server-with-the-ec2-console">Deploying a single server with the EC2 console<a class="headerlink" href="#deploying-a-single-server-with-the-ec2-console" title="Permalink to this headline">#</a></h2>
<p>With the help of the AMI, you can deploy a single node SEP setup, for trial
purposes.</p>
<p><strong>1. Launching the AMI</strong></p>
<p>After subscribing to the software, choose ‘Launch through EC2’ to launch
through the AWS EC2 console.</p>
<a class="reference internal image-reference" href="../_images/presto_ami_launch.png"><img alt="../_images/presto_ami_launch.png" src="../_images/presto_ami_launch.png" style="width: 507.0px; height: 351.59999999999997px;"/></a>
<p>This directs you to the ‘Choose an Instance Type’ step. Optionally you can
choose ‘Copy to Service Catalog’ for when using with the <a class="reference external" href="https://aws.amazon.com/servicecatalog/">AWS Service Catalog</a>.</p>
<p>Another option is to get the URL to the AMI directly from Starburst.</p>
<p><strong>2. Choose an instance type</strong></p>
<p>Choose an instance type that best suits your workload. The <code class="docutils literal notranslate"><span class="pre">r4.4xlarge</span></code>
instance type is recommended by default and works well for most workloads. See
<a class="reference internal" href="overview.html#aws-recommended-types"><span class="std std-ref">Recommended instance types</span></a> to assist you with what instance types may be
best for you. Note that a single node SEP instance is typically used for
trying SEP in a development environment.</p>
<p><strong>3. Configure instance details</strong></p>
<p>Configure your instance to fit your needs. Choose the existing <strong>VPC</strong> and
<strong>Subnet</strong> you want to deploy to. And optionally choose an <strong>IAM Role</strong>. Refer
to the <a class="reference internal" href="prerequisites.html"><span class="doc">Prerequisites</span></a> for more information on these various
specification fields.</p>
<a class="reference internal image-reference" href="../_images/presto_ami_configure.png"><img alt="../_images/presto_ami_configure.png" src="../_images/presto_ami_configure.png" style="width: 570.6px; height: 263.09999999999997px;"/></a>
<p><strong>4. Add storage</strong></p>
<p>Manage your instance’s storage and add supplementary EBS and instance store
volumes as needed. The defaults are generally OK.</p>
<p><strong>5. Add tags</strong></p>
<p>Add and create <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html">one or more tags</a>.</p>
<p><strong>6. Configure security group</strong></p>
<p>Create security group, or select an existing one, to control traffic to your
instance. Note that you are able to choose multiple security group IDs when
selecting from the pool of existing groups. For additional information
regarding security groups, refer to the <a class="reference internal" href="prerequisites.html"><span class="doc">Prerequisites</span></a> section.</p>
<p>It is recommended that ports 8080 and 8088 are accessible in order to access
the Web UI, submit queries from outside the cluster, and access Apache
Superset. Additionally, it’s recommended that port 22 is accessible for SSH
access.</p>
<p><strong>7.  Review</strong></p>
<p>Review the details of your instance. When content, proceed by pressing launch
to assign a key pair to the instance and conclude the launch process.</p>


<span id="cft-ec2-console"></span><h2 id="deploying-a-cluster-with-the-ec2-console">Deploying a cluster with the EC2 console<a class="headerlink" href="#deploying-a-cluster-with-the-ec2-console" title="Permalink to this headline">#</a></h2>
<p><strong>1.  Select template</strong></p>
<p>After you subscribe to the SEP offering on AWS Marketplace, or receiving
the URL to the CFT, you are able to begin configuring and launching your
cluster.</p>
<a class="reference internal image-reference" href="../_images/presto_cft_launch.png"><img alt="../_images/presto_cft_launch.png" src="../_images/presto_cft_launch.png" style="width: 502.2px; height: 263.4px;"/></a>
<p>This directs you to the ‘Select Template’ step for creating a CloudFormation
stack. You should find a pre-populated field under ‘Amazon S3 template URL’.
This is the location of Starburst’s SEP CloudFormation template. Click
‘next’.</p>
<p>Optionally you can choose ‘Copy to Service Catalog’ for when using with the
<a class="reference external" href="https://aws.amazon.com/servicecatalog/">AWS Service Catalog</a>.</p>
<a class="reference internal image-reference" href="../_images/presto_cft_select.png"><img alt="../_images/presto_cft_select.png" src="../_images/presto_cft_select.png" style="width: 624.0px; height: 417.0px;"/></a>
<p><strong>2.  Specify details</strong></p>
<p>Proceed by specifying the details of your cluster defined by the
<a class="reference internal" href="#cft-configuration"><span class="std std-ref">CFT configuration</span></a>. This step includes network, EC2 and SEP and other
configuration options:</p>
<ul>
<li><p><strong>Preliminary details:</strong></p>
<p>Simply provide a name for your stack that allows
you to distinguish it from other stacks running in your AWS account, for
example <strong>sepcluster</strong>.</p>
</li>
<li><p><strong>Network configuration:</strong></p>
<p>Specify the <a class="reference internal" href="#cft-network-configuration"><span class="std std-ref">network configuration parameters</span></a>. They are typically preconfigured. See the
following sections for more detail:</p>
<ul class="simple">
<li><p><a class="reference internal" href="prerequisites.html#aws-vpc"><span class="std std-ref">VPC and VPC subnets</span></a></p></li>
<li><p><a class="reference internal" href="prerequisites.html#aws-security-groups"><span class="std std-ref">Security groups</span></a></p></li>
</ul>
</li>
<li><p><strong>EC2 configuration:</strong></p>
<p>Specify the <a class="reference internal" href="#cft-ec2-configuration"><span class="std std-ref">EC2 configuration parameters</span></a>. Note
that you need to ensure a volume is mounted and configured on each worker,
with <a class="reference internal" href="#cft-ec2-configuration"><span class="std std-ref">the WorkerMountVolume and related parameters</span></a> if you are using <a class="reference internal" href="../connector/hive-caching.html"><span class="doc">caching for distributed
storage</span></a>.</p>
</li>
<li><p><strong>|sep| configuration:</strong></p>
<p>Specify the SEP <a class="reference internal" href="#cft-ec2-configuration"><span class="std std-ref">configuration parameters</span></a>.</p>
</li>
<li><p><strong>Hive connector options:</strong></p>
<p>Specify the <a class="reference internal" href="#cft-hive-connector-options"><span class="std std-ref">relevant Hive connector options</span></a> if you plan to query data in HDFS or S3.</p>
</li>
<li><p><strong>Ranger options and Ranger LDAP user synchronization:</strong></p>
<p>These options allow you to configure Apache Ranger for the <a class="reference internal" href="../security/ranger-overview.html"><span class="doc">system
level security with Apache Ranger</span></a> and the related
synchronization with an LDAP backend for user and group information. More
information is available <a class="reference internal" href="#cft-ranger-configuration"><span class="std std-ref">a table of parameters</span></a>.</p>
</li>
<li><p><strong>Advanced AWS S3 configuration:</strong></p>
<p>Optionally configure the <a class="reference internal" href="#cft-adv-s3-configuration"><span class="std std-ref">parameters to access custom S3 or
S3-compatible systems</span></a>.</p>
</li>
<li><p><strong>Monitoring:</strong></p>
<p>Indicate if you want to <a class="reference internal" href="#cft-monitoring"><span class="std std-ref">enable integration with CloudWatch metrics</span></a>.</p>
</li>
<li><p><strong>Advanced:</strong></p>
<p>Optionally specify the IAM InstanceProfile and <a class="reference internal" href="#cft-advanced-configuration"><span class="std std-ref">other advanced
configuration</span></a>.</p>
</li>
<li><p><strong>Other:</strong>
Indicate whether you are deploying and using Apache Superset and
<a class="reference internal" href="#cft-other-configuration"><span class="std std-ref">other configuration</span></a>.</p></li>
</ul>
<p><strong>3. Options</strong></p>
<p>Enter any additional stack specifications as shown on the Options page. These
options include adding tags to resources within your cluster, choosing IAM
roles, and specifying monitoring time for rollback triggers, among other
advanced specifications. More information can be found in the <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html">AWS
CloudFormation documentation</a>.</p>
<p><strong>4. Review</strong></p>
<p>Finally, review the details of your SEP cluster. When content, proceed by
pressing create to conclude the creation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just above the final “Create stack” button there is a blueish box informing
you that <em>The following resource(s) require capabilities: [AWS::IAM::Role]</em>.
In order to create the Stack you need to mark the checkbox next to <em>I
acknowledge that AWS CloudFormation might create IAM resources.</em></p>
</div>


<span id="cft-aws-cli"></span><h2 id="deploying-a-cluster-with-the-aws-cli">Deploying a cluster with the AWS CLI<a class="headerlink" href="#deploying-a-cluster-with-the-aws-cli" title="Permalink to this headline">#</a></h2>
<p>After subscribing to the software you can optionally deploy a SEP cluster
using the <a class="reference external" href="https://aws.amazon.com/cli/">AWS CLI</a> instead of the AWS Web
Console. Ensure the CLI is installed and configured before you proceed.</p>
<p><strong>1. Edit script file</strong></p>
<p>Open a terminal window and start editing a script file to be able to assemble
all properties for the desired command to create the stack. Check out the
<a class="reference internal" href="#cft-cli-example"><span class="std std-ref">example below</span></a>. The script assembles on long command
line. To make it easier to read and edit, you can separate segments with a
backslash.</p>
<p><strong>2. Create stack</strong></p>
<p>Add a first line to the command that uses the AWS CLI to create a
CloudFormation stack.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>aws cloudformation create-stack \
</pre></div>
</div>
<p><strong>3. Name stack</strong>
Specify the name that is to be associated with the cluster. The name must be
unique in the region in which you are creating the cluster.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--stack-name exampleclustername \
</pre></div>
</div>
<p><strong>4. Specify template</strong></p>
<p>Add the CFT template URL you received from Starburst. The URL must point to a
template that is located in an Amazon S3 bucket.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--template-url https://s3.amazonaws.com/example-context/PrestoCFT.template \
</pre></div>
</div>
<p><strong>5. Specify parameters</strong></p>
<p>Define a list of parameter structures that specify input parameters for the
cluster. Refer to the complete list of parameters in the <a class="reference internal" href="#cft-configuration"><span class="std std-ref">configuration
section</span></a> Parameter values need to be provided on the
command line in special form. Refer to the example below for guidance.</p>
<p><strong>6. Configure rollback options</strong></p>
<p>Configure the rollback ability as desired to disable rollback of the cluster,
if stack creation fails, with one of the following options</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--disable-rollback \
--no-disable-rollback \
</pre></div>
</div>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">RollbackTriggers</span><span class="o">=</span><span class="s">[{Arn=string,Type=string},{Arn=string,Type=string}],MonitoringTimeInMinutes=integer</span>
</pre></div>
</div>
<p><strong>7. IAM capabilities acknowledgement</strong></p>
<p>Analogous to how you mark the <em>I acknowledge that AWS CloudFormation might
create IAM resources.</em> checkbox, when deploying SEP via the AWS console,
you need to denote that you accept this capability when deploying with the
CLI. This is done by adding a <code class="docutils literal notranslate"><span class="pre">--capabilities</span></code> parameter to the AWS CLI
<code class="docutils literal notranslate"><span class="pre">create-stack</span></code> command.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--capabilities CAPABILITY_IAM \
</pre></div>
</div>
<p><strong>8. Review</strong></p>
<p>Finally, review the details of your cluster and your command. When ready, safe
the script file and run it to create your cluster.</p>

<span id="id2"></span><h3 id="cft-cli-example">CFT CLI example<a class="headerlink" href="#cft-cli-example" title="Permalink to this headline">#</a></h3>
<p>The following example shows a full command to create a cluster with the AWS CLI.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>aws cloudformation create-stack \
--stack-name "SEP-cluster" \
--template-url "https://s3.amazonaws.com/awsmp-fulfillment-cf-templates-prod/StarburstCFT.template" \
--parameters \
"ParameterKey=VPC,ParameterValue=vpc-4bd6ca11" \
"ParameterKey=Subnet,ParameterValue=subnet-123abc2b" \
"ParameterKey=SecurityGroups,ParameterValue=sg-12e34aeb" \
"ParameterKey=CoordinatorInstanceType,ParameterValue=r4.xlarge" \
"ParameterKey=WorkersInstanceType,ParameterValue=r4.xlarge" \
"ParameterKey=KeyName,ParameterValue=john.smith" \
"ParameterKey=IamInstanceProfile,ParameterValue=my-ec2-instance-profile" \
"ParameterKey=WorkersCount,ParameterValue=2" \
"ParameterKey=LaunchSuperset,ParameterValue=yes" \
"ParameterKey=MetastoreType,ParameterValue='External MySQL RDBS'" \
"ParameterKey=ExternalMetastoreHost,ParameterValue=172.31.6.18"  \
"ParameterKey=ExternalMetastorePort,ParameterValue=3306"  \
"ParameterKey=ExternalRdbmsMetastoreUserName,ParameterValue=hive"  \
"ParameterKey=ExternalRdbmsMetastorePassword,ParameterValue='q@55vv0r|&gt;'"  \
"ParameterKey=ExternalRdbmsMetastoreDatabaseName,ParameterValue=hive_metastore"  \
"ParameterKey=AdditionalCoordinatorConfigurationURI,ParameterValue=s3://my_bucket/starburst-additional-coordinator-configuration-1.0.zip" \
"ParameterKey=AdditionalWorkersConfigurationURI,ParameterValue=s3://my_bucket/starburst-additional-workers-configuration-1.0.zip" \
"ParameterKey=BootstrapScriptURI,ParameterValue=s3://my_bucket/starburst-bootstrap-1.0.sh" \
"ParameterKey=LicenseURI,ParameterValue=s3://my_bucket/starburstdata.license" \
"ParameterKey=S3Endpoint,ParameterValue=https://mybucket.s3-us-west-2.amazonaws.com" \
"ParameterKey=S3AccessKey,ParameterValue=AKIAIOSFODNN7EXAMPLE" \
"ParameterKey=S3SecretKey,ParameterValue=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" \
--capabilities CAPABILITY_IAM
</pre></div>
</div>
<p>The above commands yields output like the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  "StackId":"arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}
</pre></div>
</div>



<span id="id3"></span><h2 id="cft-configuration">CFT configuration<a class="headerlink" href="#cft-configuration" title="Permalink to this headline">#</a></h2>
<p>The CFT includes numerous configuration parameters that are grouped in different
sections. All include description in the AWS console. The same parameters apply
to the <a class="reference internal" href="#cft-ec2-console"><span class="std std-ref">EC2 console</span></a> and the <a class="reference internal" href="#cft-aws-cli"><span class="std std-ref">AWS CLI usage</span></a>.</p>

<span id="cft-network-configuration"></span><h3 id="network-configuration">Network configuration<a class="headerlink" href="#network-configuration" title="Permalink to this headline">#</a></h3>
<table id="id4">
<caption><span class="caption-text">Network Configuration Parameters</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 70%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VPC</p></td>
<td><p>Virtual Private Cloud ID</p></td>
<td><p>vpc-4bd6ca11</p></td>
</tr>
<tr class="row-odd"><td><p>Subnet</p></td>
<td><p>Subnet to use for SEP nodes (must belong to the selected VPC)</p></td>
<td><p>subnet-123abc2b</p></td>
</tr>
<tr class="row-even"><td><p>SelectedSubnetAutoAssignsPublicIp</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">no</span></code> if selected subnet does not provide public IPs. In this
case VPC endpoints are created for the SEP stack.</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p>SecurityGroups</p></td>
<td><p>Additional Security Groups for SEP nodes (e.g: allowing SSH access).
Must select at least one.</p></td>
<td><p>sg-12e34aeb</p></td>
</tr>
</tbody>
</table>


<span id="cft-ec2-configuration"></span><h3 id="ec2-configuration">EC2 configuration<a class="headerlink" href="#ec2-configuration" title="Permalink to this headline">#</a></h3>
<p>The EC2 configuration details the infrastructure used for your SEP cluster.</p>
<dl class="simple">
<dt>Choose a <strong>CoordinatorInstanceType</strong> and <strong>WorkerInstanceType</strong> suitable for</dt><dd><p>your workload. The <code class="docutils literal notranslate"><span class="pre">r4.4xlarge</span></code> instance types are chosen by default and
work well for most workloads. See <a class="reference internal" href="overview.html#aws-recommended-types"><span class="std std-ref">Recommended instance types</span></a> to assist you
with what instance types may be best for you.</p>
</dd>
</dl>
<table id="id5">
<caption><span class="caption-text">EC2 Configuration Parameters</span><a class="headerlink" href="#id5" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 65%"/>
<col style="width: 10%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CoordinatorInstanceType</p></td>
<td><p>EC2 instance type of the coordinator. The default instance type works well
for most workloads, and <a class="reference internal" href="overview.html#aws-recommended-types"><span class="std std-ref">further tips on choosing the right size is
available</span></a>.</p></td>
<td><p>r4.xlarge</p></td>
<td><p>r5.12xlarge</p></td>
</tr>
<tr class="row-odd"><td><p>WorkerInstanceType</p></td>
<td><p>EC2 instance type of the workers. The default instance type works well
for most workloads, and <a class="reference internal" href="overview.html#aws-recommended-types"><span class="std std-ref">further tips on choosing the right size is
available</span></a>.</p></td>
<td><p>r4.xlarge</p></td>
<td><p>m5.4xlarge</p></td>
</tr>
<tr class="row-even"><td><p>KeyName</p></td>
<td><p>Name of an EC2 KeyPair to enable SSH access to the instance. See
<a class="reference internal" href="prerequisites.html#aws-ssh"><span class="std std-ref">SSH keys</span></a> for more detail.</p></td>
<td></td>
<td><p>john.smith</p></td>
</tr>
<tr class="row-odd"><td><p>WorkersCount</p></td>
<td><p>Number of dedicated worker nodes (apart from coordinator) to instantiate.
Worker nodes are added to an AWS AutoScaling Group. See <a class="reference internal" href="autoscale.html"><span class="doc">Auto scaling</span></a> for more details.</p></td>
<td></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>HACoordinatorsCount</p></td>
<td><p>Number of coordinator nodes to instantiate. If more then one, the
coordinator offers HA capabilities. This number represents one active
coordinator plus the number of optional hot-standby coordinators. For
example, if you specify 3, then there is 1 active coordinator and 2
standby coordinators, if the active one fails. See
<a class="reference internal" href="high-availability.html"><span class="doc">Coordinator high availability</span></a> for more details.</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>WorkerMountVolume</p></td>
<td><p>Mount an additional EBS volume on each worker at <code class="docutils literal notranslate"><span class="pre">/data</span></code>. This is
required when using <a class="reference internal" href="../connector/hive-caching.html"><span class="doc">caching for distributed storage</span></a>. Ensure that the directory <code class="docutils literal notranslate"><span class="pre">/data</span></code> is
configured in your Hive catalog properties.</p></td>
<td><p>no</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-even"><td><p>WorkerVolumeType</p></td>
<td><p>Type of the additional EBS volume mounted on the workers.</p></td>
<td><p>io1</p></td>
<td><p>gp2</p></td>
</tr>
<tr class="row-odd"><td><p>WorkerVolumeSize</p></td>
<td><p>Size of the additional EBS volume mounted on the workers, in GiB.
Use at least 10GiB with the io1 volume type. Range from 4 to 16384 is valid</p></td>
<td><p>4</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-even"><td><p>WorkerVolumeIOPS</p></td>
<td><p>The number of possible I/O operations per second for the additional
volume. Used only with the io1 volume type. Each 5000 I/O ops require at
least 100 GiB storage size on the volume. Range from 100 to 20000 is valid</p></td>
<td><p>100</p></td>
<td><p>2000</p></td>
</tr>
<tr class="row-odd"><td><p>KeepCoordinatorNode</p></td>
<td><p>(Debug only) Keep coordinator node running after the coordinator
service fails.</p></td>
<td><p>no</p></td>
<td><p>yes</p></td>
</tr>
</tbody>
</table>


<span id="cft-sep-configuration"></span><h3 id="sep-configuration">SEP configuration<a class="headerlink" href="#sep-configuration" title="Permalink to this headline">#</a></h3>
<p>The SEP configuration parameter allow you to configure all SEP-specific
aspects of your coordinators and workers in the cluster.</p>
<table id="id6">
<caption><span class="caption-text">SEP Configuration Parameters</span><a class="headerlink" href="#id6" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 70%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AdditionalCoordinatorConfigurationURI</p></td>
<td><p>URI of S3 zip file with additional configuration for the coordinator
(Optional)</p></td>
<td><p>s3://my_bucket/starburst-additional-coordinator-configuration-1.0.zip</p></td>
</tr>
<tr class="row-odd"><td><p>AdditionalWorkersConfigurationURI</p></td>
<td><p>URI of S3 zip file with additional configuration for the workers
(Optional)</p></td>
<td><p>s3://my_bucket/starburst-additional-workers-configuration-1.0.zip</p></td>
</tr>
<tr class="row-even"><td><p>BootstrapScriptURI</p></td>
<td><p>Optional URI of a <a class="reference internal" href="#cft-bootstrap-script"><span class="std std-ref">shell script stored on S3 to execute on all
nodes</span></a>. The script runs after SEP is configured,
but before it is started. For example, your bash script can be used to
create directories, install additional software, deploy UDFs, or deploy
other plugins. When the script is executed, a string argument value of
<code class="docutils literal notranslate"><span class="pre">coordinator</span></code> or <code class="docutils literal notranslate"><span class="pre">worker</span></code> is passed in. You can check for this
argument value in your script to perform certain actions based on the node
type.</p></td>
<td><p>s3://my_bucket/starburst-bootstrap-1.0.sh</p></td>
</tr>
<tr class="row-odd"><td><p>StarburstHttpPort</p></td>
<td><p>Port to use for SEP coordinator and therefore the web UI as well as
JDBC and other client connections. Defaults to <code class="docutils literal notranslate"><span class="pre">8080</span></code>.</p></td>
<td><p>8088</p></td>
</tr>
<tr class="row-even"><td><p>LicenseURI</p></td>
<td><p>URI of the <a class="reference internal" href="../installation/license-requirements.html"><span class="doc">SEP license</span></a> in
S3. This is only needed when deploying the CFT (using a privately shared
SEP AMI) without subscribing to the AWS Marketplace.</p></td>
<td><p>s3://my_bucket/starburstdata.license</p></td>
</tr>
</tbody>
</table>


<span id="cft-hive-connector-options"></span><h3 id="hive-connector-options">Hive connector options<a class="headerlink" href="#hive-connector-options" title="Permalink to this headline">#</a></h3>
<p>The Hive connector is required, if you plan to access data in HDFS or S3. It
requires a Hive Metastore so SEP knows where data lives. Refer to the
dedicated documentation <a class="reference internal" href="metastore.html"><span class="doc">Configuring Hive Metastore</span></a> to determine your configuration.</p>
<table id="id7">
<caption><span class="caption-text">Hive Connector Options</span><a class="headerlink" href="#id7" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 70%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MetastoreType</p></td>
<td><p>Determines what metastore is used by the Hive connector. Defaults to
<code class="docutils literal notranslate"><span class="pre">None</span></code>,  which means that no Hive connector is provisioned.</p></td>
<td><p>AWS Glue Data catalog</p></td>
</tr>
<tr class="row-odd"><td><p>ExternalMetastoreHost</p></td>
<td><p>When external Metastore is used (see <code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> parameter), this
points to the host of the Metastore.</p></td>
<td><p>metastore.example.com</p></td>
</tr>
<tr class="row-even"><td><p>ExternalMetastorePort</p></td>
<td><p>When external Metastore is used (see <code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> parameter), this
points to the Metastore service port number.</p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">0</span></code> (the default value), default value per each metastore
type is used:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">3306</span></code> for <code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">MySQL</span> <span class="pre">RDBMS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5432</span></code> for <code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">PostgreSQL</span> <span class="pre">RDBMS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">9083</span></code> for <code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">Hive</span> <span class="pre">Metastore</span> <span class="pre">Service</span></code></p></li>
</ul>
<p>Cannot be empty when <code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> is to either of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">MySQL</span> <span class="pre">RDBMS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">PostgreSQL</span> <span class="pre">RDBMS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">Hive</span> <span class="pre">Metastore</span> <span class="pre">Service</span></code></p></li>
</ul>
</td>
<td><p>9083</p></td>
</tr>
<tr class="row-odd"><td><p>ExternalRdbmsMetastoreUserName</p></td>
<td><p>When external Metastore is used (see <code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> parameter), this
determines the JDBC connection user name. Cannot be empty when
<code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> is to either of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">MySQL</span> <span class="pre">RDBMS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">PostgreSQL</span> <span class="pre">RDBMS</span></code></p></li>
</ul>
</td>
<td><p>database_user_name</p></td>
</tr>
<tr class="row-even"><td><p>ExternalRdbmsMetastorePassword</p></td>
<td><p>When external Metastore is used (see <code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> parameter), this
determines the JDBC connection password. Cannot be empty when
<code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> is to either of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">MySQL</span> <span class="pre">RDBMS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">PostgreSQL</span> <span class="pre">RDBMS</span></code></p></li>
</ul>
</td>
<td><p><a class="reference external" href="mailto:jdbc_user_p%4055vv0rd">jdbc_user_p<span>@</span>55vv0rd</a></p></td>
</tr>
<tr class="row-odd"><td><p>ExternalRdbmsMetastoreDatabaseName</p></td>
<td><p>When external Metastore is used (see <code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> parameter), this
determines the JDBC connection password. Cannot be empty when
<code class="docutils literal notranslate"><span class="pre">MetastoreType</span></code> is to either of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">MySQL</span> <span class="pre">RDBMS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">External</span> <span class="pre">PostgreSQL</span> <span class="pre">RDBMS</span></code></p></li>
</ul>
</td>
<td><p>hivemetastore</p></td>
</tr>
</tbody>
</table>


<span id="cft-ranger-configuration"></span><h3 id="ranger-options-and-ranger-ldap-user-synchronization">Ranger options and Ranger LDAP user synchronization<a class="headerlink" href="#ranger-options-and-ranger-ldap-user-synchronization" title="Permalink to this headline">#</a></h3>
<p>The following parameters are related to the <a class="reference internal" href="../security/ranger-overview.html"><span class="doc">global access control with
Apache Ranger</span></a> and the related synchronization of
Ranger with an LDAP backend for user and group information.</p>
<table id="id8">
<caption><span class="caption-text">Ranger-related Configuration Parameters</span><a class="headerlink" href="#id8" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 70%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EnableRanger</p></td>
<td><p>When enabled, Apache Ranger for <a class="reference internal" href="../security/ranger-overview.html"><span class="doc">global access control</span></a> is added. Defaults to no. All other settings
in this sections are ignored if Ranger is disabled.</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p>RangerAdminPassword</p></td>
<td><p>Administrator password for Ranger. At least 8 characters, including
lowercase, uppercase and digit, are required. When reusing an existing
external database for Ranger in your CFT stack, you need to provide the
same password as the initial one, to ensure access remains functional.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RangerBackendType</p></td>
<td><p>Type of database backend used for Apache Ranger.
The default <strong>External PostgreSQL RDBMS</strong> is recommended for production
usage. <strong>Built-in PostgreSQL RDBMS</strong> is ephemeral and only suitable for
demo purposes.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ExternalRdbmsRangerHost</p></td>
<td><p>Hostname of the external PostgreSQL RDBMS server.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ExternalRdbmsRangerPort</p></td>
<td><p>Port of the external PostgreSQL RDBMS server. Defaults to 5432.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ExternalRdbmsRangerDatabaseName</p></td>
<td><p>Name of the database on the external PostgreSQL RDBMS server to use as
Ranger database backend. The database must already exist. Defaults to
<code class="docutils literal notranslate"><span class="pre">ranger</span></code>.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ExternalRdbmsRangerUserName</p></td>
<td><p>Name of the database user that Ranger uses to manage the database on the
external PostgreSQL RDBMS. The user must exist, have full permissions to
the database and must have CREATEROLE permissions granted. An additional
user ‘ranger’ is created for non-admin database access. If you specify
‘ranger’, the single user is used for all operations. Defaults to
<code class="docutils literal notranslate"><span class="pre">rangeradmin</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ExternalRdbmsRangerPassword</p></td>
<td><p>Password for the database user.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RangerConfigFile</p></td>
<td><p>URL to an optional additional Ranger config file in an S3 bucket. A
template is available at <a class="reference external" href="https://starburstdata-cft-public.s3.us-east-2.amazonaws.com/1.0.0/ranger.template.properties">https://starburstdata-cft-public.s3.us-east-2.amazonaws.com/1.0.0/ranger.template.properties</a>.
Modify the template and upload it to an S3 bucket. The config file is
required for using Solr Audit with Ranger and other customizations.
Example: <code class="docutils literal notranslate"><span class="pre">s3://my-bucket/my-config_file.properties</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RangerBootstrapScript</p></td>
<td><p>URL to an optional bootstrap script in an S3 bucket. The script is run
before Ranger starts. It can for example be used to provide you
truststore files.
Example: <code class="docutils literal notranslate"><span class="pre">s3://my-bucket/ranger-bootstrap.sh</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>EnableRangerUserSync</p></td>
<td><p>When enabled Apache Ranger synchronizes users from an external LDAP
directory. Requires Ranger to be enabled, disabled by default.
All other settings in this sections are ignored if Ranger user sync is
disabled.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RangerUserSyncConfigFile</p></td>
<td><p>URL to Ranger user synchronization configuration file in S3 bucket. A
template is available at <a class="reference external" href="https://starburstdata-cft-public.s3.us-east-2.amazonaws.com/1.0.0/usersync.template.properties">https://starburstdata-cft-public.s3.us-east-2.amazonaws.com/1.0.0/usersync.template.properties</a>
Create a modified copy of the template and upload it to an S3 bucket.
Required if Ranger user sync is enabled.
Example: s3://my-bucket/my-config_file.properties</p></td>
<td></td>
</tr>
</tbody>
</table>


<span id="cft-adv-s3-configuration"></span><h3 id="advanced-aws-s3-configuration">Advanced AWS S3 configuration<a class="headerlink" href="#advanced-aws-s3-configuration" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><p>With the advanced AWS S3 configuration it is possible to:</p>
</div></blockquote>
<ul class="simple">
<li><p>configure custom access credentials for AWS S3, in this case set only
<strong>S3AccessKey</strong> and <strong>S3SecretKey</strong></p></li>
<li><p>configure custom AWS S3 endpoint, in this cases set only <strong>S3Endpoint</strong></p></li>
<li><p>access third-party S3-compatible storage system, in this case set all three
parameters</p></li>
</ul>
<p>Notice that these parameters only affect the configuration of provisioned Hive
catalogs. All of these properties are optional, when not given EC2 instance
default values are used.</p>
<table id="id9">
<caption><span class="caption-text">Advanced S3 Configuration Parameters</span><a class="headerlink" href="#id9" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 70%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S3Endpoint</p></td>
<td><p>URI to AWS S3-compatible endpoint  (Optional)</p></td>
<td><p><a class="reference external" href="https://mybucket.s3-us-west-2.amazonaws.com">https://mybucket.s3-us-west-2.amazonaws.com</a></p></td>
</tr>
<tr class="row-odd"><td><p>S3AccessKey</p></td>
<td><p>Access key to AWS S3-compatible storage  (Optional)</p></td>
<td><p>AKIAIOSFODNN7EXAMPLE</p></td>
</tr>
<tr class="row-even"><td><p>S3SecretKey</p></td>
<td><p>Access secret to AWS S3-compatible storage (Optional)</p></td>
<td><p>wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</p></td>
</tr>
</tbody>
</table>


<span id="cft-monitoring"></span><h3 id="monitoring">Monitoring<a class="headerlink" href="#monitoring" title="Permalink to this headline">#</a></h3>
<table id="id10">
<caption><span class="caption-text">Monitoring Parameters</span><a class="headerlink" href="#id10" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 70%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EnableCloudWatchMetrics</p></td>
<td><p>Enable integration with CloudWatch metrics. When enabled, OS and SEP
metrics are reported for each cluster node and a CloudWatch Dashboard
with cluster overview is created. Additional CloudWatch fees are charged.
Refer to <a class="reference internal" href="metrics.html"><span class="doc">Integration with CloudWatch metrics</span></a> for more details.</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>


<span id="cft-advanced-configuration"></span><h3 id="advanced-configuration">Advanced configuration<a class="headerlink" href="#advanced-configuration" title="Permalink to this headline">#</a></h3>
<table id="id11">
<caption><span class="caption-text">Advanced Configuration Parameters</span><a class="headerlink" href="#id11" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 70%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IamInstanceProfile</p></td>
<td><p>Optional name of an IAM instance profile to attach to SEP nodes. See
<a class="reference internal" href="prerequisites.html#aws-instance-profiles"><span class="std std-ref">Instance profiles</span></a> for more detail. If you do not specify the
InstanceProfile, the CloudFormation Template creates the necessary IAM
role privileges.</p></td>
<td><p>my-ec2-instance-profile</p></td>
</tr>
</tbody>
</table>


<span id="cft-other-configuration"></span><h3 id="other-parameters">Other parameters<a class="headerlink" href="#other-parameters" title="Permalink to this headline">#</a></h3>
<table id="id12">
<caption><span class="caption-text">Other Parameters</span><a class="headerlink" href="#id12" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 15%"/>
<col style="width: 70%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LaunchSuperset</p></td>
<td><p>When enabled, Superset is deployed and started on an EC2 instance</p></td>
<td><p>yes</p></td>
</tr>
</tbody>
</table>


<span id="cft-bootstrap-script"></span><h3 id="writing-a-bootstrap-script">Writing a bootstrap script<a class="headerlink" href="#writing-a-bootstrap-script" title="Permalink to this headline">#</a></h3>
<p>Bootstrap scripts are a powerful tool that can streamline cluster provisioning
and maintenance. Commonly, these scripts are used to:</p>
<ul class="simple">
<li><p>Download and place plugin resources such as additional connectors or UDFs</p></li>
<li><p>Modify the node’s filesystem with additional directories</p></li>
<li><p>Place SEP configuration files that are not handled via the
<code class="docutils literal notranslate"><span class="pre">AdditionalCoordinatorConfigurationURI</span></code> and
<code class="docutils literal notranslate"><span class="pre">AdditionalWorkersConfigurationURI</span></code> CFT parameters</p></li>
</ul>
<p>The following example demonstrates a coordinator node check followed by a
coordinator-specific modification. Then, the script downloads a plugin resource
and creates a directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"coordinator"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">"io.trino.security=DEBUG"</span> &gt;&gt; /usr/lib/starburst/etc/log.properties
<span class="k">fi</span>

sudo aws s3 cp s3://mybucket/starburst/config/json-serde-jar-with-dependencies.jar /usr/lib/starburst/plugin/hive-hadoop2/

sudo mkdir -p /var/log/starburst/dev/
</pre></div>
</div>
<p>The following steps are necessary to use a script:</p>
<ul class="simple">
<li><p>Write the script as desired</p></li>
<li><p>Place the script file in an S3 bucket</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">BootstrapScriptURI</span></code> parameter to the correct S3 path of the file</p></li>
</ul>
<p>The bootstrap script is executed on all nodes after instance provisioning, but
before starting SEP.</p>
<p>A best practice is to update the name of the file with a version, an enumerator
or a date value with each change.</p>





          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="prerequisites.html" title="Prerequisites"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Prerequisites </span>
              </div>
            </a>
          
          
            <a href="configuration.html" title="Configuring SEP"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Configuring SEP </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 356-e LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2021<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
  </body>
</html>