

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12.23. EXPLAIN &mdash; Starburst Enterprise Presto</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="12. SQL Statement Syntax" href="../sql.html"/>
        <link rel="next" title="12.24. EXPLAIN ANALYZE" href="explain-analyze.html"/>
        <link rel="prev" title="12.22. EXECUTE" href="execute.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">3. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">5. Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">6. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">7. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">8. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">9. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">10. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">11. SQL Language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../sql.html">12. SQL Statement Syntax</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="alter-schema.html">12.1. ALTER SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="alter-table.html">12.2. ALTER TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="alter-view.html">12.3. ALTER VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="analyze.html">12.4. ANALYZE</a></li>
<li class="toctree-l2"><a class="reference internal" href="call.html">12.5. CALL</a></li>
<li class="toctree-l2"><a class="reference internal" href="comment.html">12.6. COMMENT</a></li>
<li class="toctree-l2"><a class="reference internal" href="commit.html">12.7. COMMIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-role.html">12.8. CREATE ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-schema.html">12.9. CREATE SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-table.html">12.10. CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-table-as.html">12.11. CREATE TABLE AS</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-view.html">12.12. CREATE VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="deallocate-prepare.html">12.13. DEALLOCATE PREPARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="delete.html">12.14. DELETE</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe.html">12.15. DESCRIBE</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe-input.html">12.16. DESCRIBE INPUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="describe-output.html">12.17. DESCRIBE OUTPUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-role.html">12.18. DROP ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-schema.html">12.19. DROP SCHEMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-table.html">12.20. DROP TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="drop-view.html">12.21. DROP VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="execute.html">12.22. EXECUTE</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">12.23. EXPLAIN</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="explain-analyze.html">12.24. EXPLAIN ANALYZE</a></li>
<li class="toctree-l2"><a class="reference internal" href="grant.html">12.25. GRANT</a></li>
<li class="toctree-l2"><a class="reference internal" href="grant-roles.html">12.26. GRANT ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="insert.html">12.27. INSERT</a></li>
<li class="toctree-l2"><a class="reference internal" href="prepare.html">12.28. PREPARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset-session.html">12.29. RESET SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="revoke.html">12.30. REVOKE</a></li>
<li class="toctree-l2"><a class="reference internal" href="revoke-roles.html">12.31. REVOKE ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="rollback.html">12.32. ROLLBACK</a></li>
<li class="toctree-l2"><a class="reference internal" href="select.html">12.33. SELECT</a></li>
<li class="toctree-l2"><a class="reference internal" href="set-role.html">12.34. SET ROLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="set-session.html">12.35. SET SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-catalogs.html">12.36. SHOW CATALOGS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-columns.html">12.37. SHOW COLUMNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-table.html">12.38. SHOW CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-create-view.html">12.39. SHOW CREATE VIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-functions.html">12.40. SHOW FUNCTIONS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-grants.html">12.41. SHOW GRANTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-role-grants.html">12.42. SHOW ROLE GRANTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-roles.html">12.43. SHOW ROLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-schemas.html">12.44. SHOW SCHEMAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-session.html">12.45. SHOW SESSION</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-stats.html">12.46. SHOW STATS</a></li>
<li class="toctree-l2"><a class="reference internal" href="show-tables.html">12.47. SHOW TABLES</a></li>
<li class="toctree-l2"><a class="reference internal" href="start-transaction.html">12.48. START TRANSACTION</a></li>
<li class="toctree-l2"><a class="reference internal" href="use.html">12.49. USE</a></li>
<li class="toctree-l2"><a class="reference internal" href="values.html">12.50. VALUES</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">13. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">14. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">15. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">16. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">332-e.4 LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./" >Choose another version</option>
    <option value="/332-e/">Latest LTS (332-e)</option>
    <option value="/334-e/">Latest STS (334-e)</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/312-e/">312-e LTS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">332-e.4 LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../sql.html">12. SQL Statement Syntax</a> &raquo;</li>
      
    <li>12.23. EXPLAIN</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="explain">
<h1>12.23. EXPLAIN<a class="headerlink" href="#explain" title="Permalink to this headline">#</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">#</a></h2>
<div class="highlight-none"><div class="highlight"><pre><span></span>EXPLAIN [ ( option [, ...] ) ] statement

where option can be one of:

    FORMAT { TEXT | GRAPHVIZ | JSON }
    TYPE { LOGICAL | DISTRIBUTED | VALIDATE | IO }
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">#</a></h2>
<p>Show the logical or distributed execution plan of a statement, or validate the statement.
Use <code class="docutils literal"><span class="pre">TYPE</span> <span class="pre">DISTRIBUTED</span></code> option to display fragmented plan. Each plan fragment is executed by
a single or multiple Presto nodes. Fragments separation represent the data exchange between Presto nodes.
Fragment type specifies how the fragment is executed by Presto nodes and how the data is
distributed between fragments:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">SINGLE</span></code></dt>
<dd>Fragment is executed on a single node.</dd>
<dt><code class="docutils literal"><span class="pre">HASH</span></code></dt>
<dd>Fragment is executed on a fixed number of nodes with the input data
distributed using a hash function.</dd>
<dt><code class="docutils literal"><span class="pre">ROUND_ROBIN</span></code></dt>
<dd>Fragment is executed on a fixed number of nodes with the input data
distributed in a round-robin fashion.</dd>
<dt><code class="docutils literal"><span class="pre">BROADCAST</span></code></dt>
<dd>Fragment is executed on a fixed number of nodes with the input data
broadcasted to all nodes.</dd>
<dt><code class="docutils literal"><span class="pre">SOURCE</span></code></dt>
<dd>Fragment is executed on nodes where input splits are accessed.</dd>
</dl>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h2>
<p>Logical plan:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>presto:tiny&gt; EXPLAIN SELECT regionkey, count(*) FROM nation GROUP BY 1;
                                                   Query Plan
-----------------------------------------------------------------------------------------------------------------
 Output[regionkey, _col1]
 │   Layout: [regionkey:bigint, count:bigint]
 │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
 │   _col1 := count
 └─ RemoteExchange[GATHER]
    │   Layout: [regionkey:bigint, count:bigint]
    │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
    └─ Aggregate(FINAL)[regionkey]
       │   Layout: [regionkey:bigint, count:bigint]
       │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
       │   count := count(&quot;count_8&quot;)
       └─ LocalExchange[HASH][$hashvalue] (&quot;regionkey&quot;)
          │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue:bigint]
          │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
          └─ RemoteExchange[REPARTITION][$hashvalue_9]
             │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue_9:bigint]
             │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
             └─ Project[]
                │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue_10:bigint]
                │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
                │   $hashvalue_10 := &quot;combine_hash&quot;(bigint &#39;0&#39;, COALESCE(&quot;$operator$hash_code&quot;(&quot;regionkey&quot;), 0))
                └─ Aggregate(PARTIAL)[regionkey]
                   │   Layout: [regionkey:bigint, count_8:bigint]
                   │   count_8 := count(*)
                   └─ TableScan[tpch:nation:sf0.01]
                          Layout: [regionkey:bigint]
                          Estimates: {rows: 25 (225B), cpu: 225, memory: 0B, network: 0B}
                          regionkey := tpch:regionkey
</pre></div>
</div>
<p>Distributed plan:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>presto:tiny&gt; EXPLAIN (TYPE DISTRIBUTED) SELECT regionkey, count(*) FROM nation GROUP BY 1;
                                              Query Plan
------------------------------------------------------------------------------------------------------
 Fragment 0 [SINGLE]
     Output layout: [regionkey, count]
     Output partitioning: SINGLE []
     Stage Execution Strategy: UNGROUPED_EXECUTION
     Output[regionkey, _col1]
     │   Layout: [regionkey:bigint, count:bigint]
     │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
     │   _col1 := count
     └─ RemoteSource[1]
            Layout: [regionkey:bigint, count:bigint]

 Fragment 1 [HASH]
     Output layout: [regionkey, count]
     Output partitioning: SINGLE []
     Stage Execution Strategy: UNGROUPED_EXECUTION
     Aggregate(FINAL)[regionkey]
     │   Layout: [regionkey:bigint, count:bigint]
     │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
     │   count := count(&quot;count_8&quot;)
     └─ LocalExchange[HASH][$hashvalue] (&quot;regionkey&quot;)
        │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue:bigint]
        │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
        └─ RemoteSource[2]
               Layout: [regionkey:bigint, count_8:bigint, $hashvalue_9:bigint]

 Fragment 2 [SOURCE]
     Output layout: [regionkey, count_8, $hashvalue_10]
     Output partitioning: HASH [regionkey][$hashvalue_10]
     Stage Execution Strategy: UNGROUPED_EXECUTION
     Project[]
     │   Layout: [regionkey:bigint, count_8:bigint, $hashvalue_10:bigint]
     │   Estimates: {rows: ? (?), cpu: ?, memory: ?, network: ?}
     │   $hashvalue_10 := &quot;combine_hash&quot;(bigint &#39;0&#39;, COALESCE(&quot;$operator$hash_code&quot;(&quot;regionkey&quot;), 0))
     └─ Aggregate(PARTIAL)[regionkey]
        │   Layout: [regionkey:bigint, count_8:bigint]
        │   count_8 := count(*)
        └─ TableScan[tpch:nation:sf0.01, grouped = false]
               Layout: [regionkey:bigint]
               Estimates: {rows: 25 (225B), cpu: 225, memory: 0B, network: 0B}
               regionkey := tpch:regionkey
</pre></div>
</div>
<p>Validate:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>presto:tiny&gt; EXPLAIN (TYPE VALIDATE) SELECT regionkey, count(*) FROM nation GROUP BY 1;
 Valid
-------
 true
</pre></div>
</div>
<p>IO:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>presto:hive&gt; EXPLAIN (TYPE IO, FORMAT JSON) INSERT INTO test_lineitem SELECT * FROM lineitem WHERE shipdate = &#39;2020-02-01&#39; AND quantity &gt; 10;
            Query Plan
-----------------------------------
{
   inputTableColumnInfos: [
      {
         table: {
            catalog: &quot;hive&quot;,
            schemaTable: {
               schema: &quot;tpch&quot;,
               table: &quot;test_orders&quot;
            }
         },
         columnConstraints: [
            {
               columnName: &quot;orderkey&quot;,
               type: &quot;bigint&quot;,
               domain: {
                  nullsAllowed: false,
                  ranges: [
                     {
                        low: {
                           value: &quot;1&quot;,
                           bound: &quot;EXACTLY&quot;
                        },
                        high: {
                           value: &quot;1&quot;,
                           bound: &quot;EXACTLY&quot;
                        }
                     },
                     {
                        low: {
                           value: &quot;2&quot;,
                           bound: &quot;EXACTLY&quot;
                        },
                        high: {
                           value: &quot;2&quot;,
                           bound: &quot;EXACTLY&quot;
                        }
                     }
                  ]
               }
            },
            {
               columnName: &quot;processing&quot;,
               type: &quot;boolean&quot;,
               domain: {
                  nullsAllowed: false,
                  ranges: [
                     {
                        low: {
                           value: &quot;false&quot;,
                           bound: &quot;EXACTLY&quot;
                        },
                        high: {
                           value: &quot;false&quot;,
                           bound: &quot;EXACTLY&quot;
                        }
                     }
                  ]
               }
            },
            {
               columnName: &quot;custkey&quot;,
               type: &quot;bigint&quot;,
               domain: {
                  nullsAllowed: false,
                  ranges: [
                     {
                        low: {
                           bound: &quot;ABOVE&quot;
                        },
                        high: {
                           value: &quot;10&quot;,
                           bound: &quot;EXACTLY&quot;
                        }
                     }
                  ]
               }
            }
         ],
         estimate: {
            outputRowCount: 2,
            outputSizeInBytes: 40,
            cpuCost: 40,
            maxMemory: 0,
            networkCost: 0
         }
      }
   ],
   outputTable: {
      catalog: &quot;hive&quot;,
      schemaTable: {
         schema: &quot;tpch&quot;,
         table: &quot;test_orders&quot;
      }
   },
   estimate: {
      outputRowCount: &quot;NaN&quot;,
      outputSizeInBytes: &quot;NaN&quot;,
      cpuCost: &quot;NaN&quot;,
      maxMemory: &quot;NaN&quot;,
      networkCost: &quot;NaN&quot;
   }
}
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">#</a></h2>
<p><a class="reference internal" href="explain-analyze.html"><span class="doc">EXPLAIN ANALYZE</span></a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="explain-analyze.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="12.24. EXPLAIN ANALYZE" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="execute.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="12.22. EXECUTE" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'332',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>