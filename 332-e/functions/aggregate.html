

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10.14. Aggregate Functions &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="10. Functions and Operators" href="../functions.html"/>
        <link rel="next" title="10.15. Window Functions" href="window.html"/>
        <link rel="prev" title="10.13. Date and Time Functions and Operators" href="datetime.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">3. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">5. Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">6. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">7. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">8. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">9. Connectors</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../functions.html">10. Functions and Operators</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="logical.html">10.1. Logical Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparison.html">10.2. Comparison Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="conditional.html">10.3. Conditional Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="lambda.html">10.4. Lambda Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="conversion.html">10.5. Conversion Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">10.6. Mathematical Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="bitwise.html">10.7. Bitwise Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="decimal.html">10.8. Decimal Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="string.html">10.9. String Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="regexp.html">10.10. Regular Expression Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="binary.html">10.11. Binary Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="json.html">10.12. JSON Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="datetime.html">10.13. Date and Time Functions and Operators</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">10.14. Aggregate Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ordering-during-aggregation">Ordering During Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtering-during-aggregation">Filtering During Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#general-aggregate-functions">General Aggregate Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bitwise-aggregate-functions">Bitwise Aggregate Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#map-aggregate-functions">Map Aggregate Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#approximate-aggregate-functions">Approximate Aggregate Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#statistical-aggregate-functions">Statistical Aggregate Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lambda-aggregate-functions">Lambda Aggregate Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="window.html">10.15. Window Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="array.html">10.16. Array Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="map.html">10.17. Map Functions and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="url.html">10.18. URL Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="geospatial.html">10.19. Geospatial Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="hyperloglog.html">10.20. HyperLogLog Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="qdigest.html">10.21. Quantile Digest Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="uuid.html">10.22. UUID Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="color.html">10.23. Color Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="session.html">10.24. Session Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="teradata.html">10.25. Teradata Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracle.html">10.26. Oracle Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="list.html">10.27. List of Functions and Operators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">11. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">12. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">13. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">14. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">15. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">16. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">332-e.9 LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./" >Choose another version</option>
    <option value="/345-e/">Latest LTS (345-e)</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/347-e/">Latest STS (347-e)</option>
    <option value="/346-e/">346-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">332-e.9 LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../functions.html"><span class="section-number">10. </span>Functions and Operators</a> &raquo;</li>
      
    <li><span class="section-number">10.14. </span>Aggregate Functions</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aggregate-functions">
<h1><span class="section-number">10.14. </span>Aggregate Functions<a class="headerlink" href="#aggregate-functions" title="Permalink to this headline">#</a></h1>
<p>Aggregate functions operate on a set of values to compute a single result.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#ordering-during-aggregation" id="id1">Ordering During Aggregation</a></p></li>
<li><p><a class="reference internal" href="#filtering-during-aggregation" id="id2">Filtering During Aggregation</a></p></li>
<li><p><a class="reference internal" href="#general-aggregate-functions" id="id3">General Aggregate Functions</a></p></li>
<li><p><a class="reference internal" href="#bitwise-aggregate-functions" id="id4">Bitwise Aggregate Functions</a></p></li>
<li><p><a class="reference internal" href="#map-aggregate-functions" id="id5">Map Aggregate Functions</a></p></li>
<li><p><a class="reference internal" href="#approximate-aggregate-functions" id="id6">Approximate Aggregate Functions</a></p></li>
<li><p><a class="reference internal" href="#statistical-aggregate-functions" id="id7">Statistical Aggregate Functions</a></p></li>
<li><p><a class="reference internal" href="#lambda-aggregate-functions" id="id8">Lambda Aggregate Functions</a></p></li>
</ul>
</div>
<p>Except for <a class="reference internal" href="#count" title="count"><code class="xref py py-func docutils literal notranslate"><span class="pre">count()</span></code></a>, <a class="reference internal" href="#count_if" title="count_if"><code class="xref py py-func docutils literal notranslate"><span class="pre">count_if()</span></code></a>, <a class="reference internal" href="#max_by" title="max_by"><code class="xref py py-func docutils literal notranslate"><span class="pre">max_by()</span></code></a>, <a class="reference internal" href="#min_by" title="min_by"><code class="xref py py-func docutils literal notranslate"><span class="pre">min_by()</span></code></a> and
<a class="reference internal" href="#approx_distinct" title="approx_distinct"><code class="xref py py-func docutils literal notranslate"><span class="pre">approx_distinct()</span></code></a>, all of these aggregate functions ignore null values
and return null for no input rows or when all values are null. For example,
<a class="reference internal" href="#sum" title="sum"><code class="xref py py-func docutils literal notranslate"><span class="pre">sum()</span></code></a> returns null rather than zero and <a class="reference internal" href="#avg" title="avg"><code class="xref py py-func docutils literal notranslate"><span class="pre">avg()</span></code></a> does not include null
values in the count. The <code class="docutils literal notranslate"><span class="pre">coalesce</span></code> function can be used to convert null into
zero.</p>
<div class="section" id="ordering-during-aggregation">
<h2>Ordering During Aggregation<a class="headerlink" href="#ordering-during-aggregation" title="Permalink to this headline">#</a></h2>
<p>Some aggregate functions such as <a class="reference internal" href="#array_agg" title="array_agg"><code class="xref py py-func docutils literal notranslate"><span class="pre">array_agg()</span></code></a> produce different results
depending on the order of input values. This ordering can be specified by writing
an <a class="reference internal" href="../sql/select.html#order-by-clause"><span class="std std-ref">ORDER BY Clause</span></a> within the aggregate function:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">array_agg</span><span class="p">(</span><span class="n">x</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">y</span> <span class="k">DESC</span><span class="p">)</span>
<span class="n">array_agg</span><span class="p">(</span><span class="n">x</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="filtering-during-aggregation">
<h2>Filtering During Aggregation<a class="headerlink" href="#filtering-during-aggregation" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">FILTER</span></code> keyword can be used to remove rows from aggregation processing
with a condition expressed using a <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause. This is evaluated for each
row before it is used in the aggregation and is supported for all aggregate
functions.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>aggregate_function(...) FILTER (WHERE &lt;condition&gt;)
</pre></div>
</div>
<p>A common and very useful example is to use <code class="docutils literal notranslate"><span class="pre">FILTER</span></code> to remove nulls from
consideration when using <code class="docutils literal notranslate"><span class="pre">array_agg</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">array_agg</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="n">FILTER</span> <span class="p">(</span><span class="k">WHERE</span> <span class="n">name</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">region</span><span class="p">;</span>
</pre></div>
</div>
<p>As another example, imagine you want to add a condition on the count for Iris
flowers, modifying the following query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">species</span><span class="p">,</span>
       <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="k">count</span>
<span class="k">FROM</span> <span class="n">iris</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">species</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>species    | count
-----------+-------
setosa     |   50
virginica  |   50
versicolor |   50
</pre></div>
</div>
<p>If you just use a normal <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> statement you loose information:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">species</span><span class="p">,</span>
    <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="k">count</span>
<span class="k">FROM</span> <span class="n">iris</span>
<span class="k">WHERE</span> <span class="n">petal_length_cm</span> <span class="o">&gt;</span> <span class="mi">4</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">species</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>species    | count
-----------+-------
virginica  |   50
versicolor |   34
</pre></div>
</div>
<p>Using a filter you retain all information:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">species</span><span class="p">,</span>
       <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">FILTER</span> <span class="p">(</span><span class="k">where</span> <span class="n">petal_length_cm</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="k">AS</span> <span class="k">count</span>
<span class="k">FROM</span> <span class="n">iris</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">species</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>species    | count
-----------+-------
virginica  |   50
setosa     |    0
versicolor |   34
</pre></div>
</div>
</div>
<div class="section" id="general-aggregate-functions">
<h2>General Aggregate Functions<a class="headerlink" href="#general-aggregate-functions" title="Permalink to this headline">#</a></h2>
<dl class="function">
<dt id="arbitrary">
<code class="sig-name descname">arbitrary</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; [same as input]<a class="headerlink" href="#arbitrary" title="Permalink to this definition">#</a></dt>
<dd><p>Returns an arbitrary non-null value of <code class="docutils literal notranslate"><span class="pre">x</span></code>, if one exists.</p>
</dd></dl>

<dl class="function">
<dt id="array_agg">
<code class="sig-name descname">array_agg</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; array&lt;[same as input]&gt;<a class="headerlink" href="#array_agg" title="Permalink to this definition">#</a></dt>
<dd><p>Returns an array created from the input <code class="docutils literal notranslate"><span class="pre">x</span></code> elements.</p>
</dd></dl>

<dl class="function">
<dt id="avg">
<code class="sig-name descname">avg</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#avg" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the average (arithmetic mean) of all input values.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">avg</code><span class="sig-paren">(</span><em class="sig-param">time interval type</em><span class="sig-paren">)</span> &#x2192; time interval type</dt>
<dd><p>Returns the average interval length of all input values.</p>
</dd></dl>

<dl class="function">
<dt id="bool_and">
<code class="sig-name descname">bool_and</code><span class="sig-paren">(</span><em class="sig-param">boolean</em><span class="sig-paren">)</span> &#x2192; boolean<a class="headerlink" href="#bool_and" title="Permalink to this definition">#</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if every input value is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, otherwise <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="bool_or">
<code class="sig-name descname">bool_or</code><span class="sig-paren">(</span><em class="sig-param">boolean</em><span class="sig-paren">)</span> &#x2192; boolean<a class="headerlink" href="#bool_or" title="Permalink to this definition">#</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if any input value is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, otherwise <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="checksum">
<code class="sig-name descname">checksum</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; varbinary<a class="headerlink" href="#checksum" title="Permalink to this definition">#</a></dt>
<dd><p>Returns an order-insensitive checksum of the given values.</p>
</dd></dl>

<dl class="function">
<dt id="count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param">*</em><span class="sig-paren">)</span> &#x2192; bigint<a class="headerlink" href="#count" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the number of input rows.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; bigint</dt>
<dd><p>Returns the number of non-null input values.</p>
</dd></dl>

<dl class="function">
<dt id="count_if">
<code class="sig-name descname">count_if</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; bigint<a class="headerlink" href="#count_if" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the number of <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> input values.
This function is equivalent to <code class="docutils literal notranslate"><span class="pre">count(CASE</span> <span class="pre">WHEN</span> <span class="pre">x</span> <span class="pre">THEN</span> <span class="pre">1</span> <span class="pre">END)</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="every">
<code class="sig-name descname">every</code><span class="sig-paren">(</span><em class="sig-param">boolean</em><span class="sig-paren">)</span> &#x2192; boolean<a class="headerlink" href="#every" title="Permalink to this definition">#</a></dt>
<dd><p>This is an alias for <a class="reference internal" href="#bool_and" title="bool_and"><code class="xref py py-func docutils literal notranslate"><span class="pre">bool_and()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="geometric_mean">
<code class="sig-name descname">geometric_mean</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#geometric_mean" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the geometric mean of all input values.</p>
</dd></dl>

<dl class="function">
<dt id="max_by">
<code class="sig-name descname">max_by</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em><span class="sig-paren">)</span> &#x2192; [same as x]<a class="headerlink" href="#max_by" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the value of <code class="docutils literal notranslate"><span class="pre">x</span></code> associated with the maximum value of <code class="docutils literal notranslate"><span class="pre">y</span></code> over all input values.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">max_by</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">n</em><span class="sig-paren">)</span> &#x2192; array&lt;[same as x]&gt;</dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">n</span></code> values of <code class="docutils literal notranslate"><span class="pre">x</span></code> associated with the <code class="docutils literal notranslate"><span class="pre">n</span></code> largest of all input values of <code class="docutils literal notranslate"><span class="pre">y</span></code>
in descending order of <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="min_by">
<code class="sig-name descname">min_by</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em><span class="sig-paren">)</span> &#x2192; [same as x]<a class="headerlink" href="#min_by" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the value of <code class="docutils literal notranslate"><span class="pre">x</span></code> associated with the minimum value of <code class="docutils literal notranslate"><span class="pre">y</span></code> over all input values.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">min_by</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">n</em><span class="sig-paren">)</span> &#x2192; array&lt;[same as x]&gt;</dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">n</span></code> values of <code class="docutils literal notranslate"><span class="pre">x</span></code> associated with the <code class="docutils literal notranslate"><span class="pre">n</span></code> smallest of all input values of <code class="docutils literal notranslate"><span class="pre">y</span></code>
in ascending order of <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="max">
<code class="sig-name descname">max</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; [same as input]<a class="headerlink" href="#max" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the maximum value of all input values.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">max</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">n</em><span class="sig-paren">)</span> &#x2192; array&lt;[same as x]&gt;</dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">n</span></code> largest values of all input values of <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="min">
<code class="sig-name descname">min</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; [same as input]<a class="headerlink" href="#min" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the minimum value of all input values.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">min</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">n</em><span class="sig-paren">)</span> &#x2192; array&lt;[same as x]&gt;</dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">n</span></code> smallest values of all input values of <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="sum">
<code class="sig-name descname">sum</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; [same as input]<a class="headerlink" href="#sum" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sum of all input values.</p>
</dd></dl>

</div>
<div class="section" id="bitwise-aggregate-functions">
<h2>Bitwise Aggregate Functions<a class="headerlink" href="#bitwise-aggregate-functions" title="Permalink to this headline">#</a></h2>
<dl class="function">
<dt id="bitwise_and_agg">
<code class="sig-name descname">bitwise_and_agg</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; bigint<a class="headerlink" href="#bitwise_and_agg" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the bitwise AND of all input values in 2’s complement representation.</p>
</dd></dl>

<dl class="function">
<dt id="bitwise_or_agg">
<code class="sig-name descname">bitwise_or_agg</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; bigint<a class="headerlink" href="#bitwise_or_agg" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the bitwise OR of all input values in 2’s complement representation.</p>
</dd></dl>

</div>
<div class="section" id="map-aggregate-functions">
<h2>Map Aggregate Functions<a class="headerlink" href="#map-aggregate-functions" title="Permalink to this headline">#</a></h2>
<dl class="function">
<dt id="histogram">
<code class="sig-name descname">histogram</code><span class="sig-paren">(</span><em class="sig-param">x) -&gt; map(K</em>, <em class="sig-param">bigint</em><span class="sig-paren">)</span><a class="headerlink" href="#histogram" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a map containing the count of the number of times each input value occurs.</p>
</dd></dl>

<dl class="function">
<dt id="map_agg">
<code class="sig-name descname">map_agg</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">value) -&gt; map(K</em>, <em class="sig-param">V</em><span class="sig-paren">)</span><a class="headerlink" href="#map_agg" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a map created from the input <code class="docutils literal notranslate"><span class="pre">key</span></code> / <code class="docutils literal notranslate"><span class="pre">value</span></code> pairs.</p>
</dd></dl>

<dl class="function">
<dt id="map_union">
<code class="sig-name descname">map_union</code><span class="sig-paren">(</span><em class="sig-param">x(K</em>, <em class="sig-param">V)) -&gt; map(K</em>, <em class="sig-param">V</em><span class="sig-paren">)</span><a class="headerlink" href="#map_union" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the union of all the input maps. If a key is found in multiple
input maps, that key’s value in the resulting map comes from an arbitrary input map.</p>
</dd></dl>

<dl class="function">
<dt id="multimap_agg">
<code class="sig-name descname">multimap_agg</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">value) -&gt; map(K</em>, <em class="sig-param">array(V)</em><span class="sig-paren">)</span><a class="headerlink" href="#multimap_agg" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a multimap created from the input <code class="docutils literal notranslate"><span class="pre">key</span></code> / <code class="docutils literal notranslate"><span class="pre">value</span></code> pairs.
Each key can be associated with multiple values.</p>
</dd></dl>

</div>
<div class="section" id="approximate-aggregate-functions">
<h2>Approximate Aggregate Functions<a class="headerlink" href="#approximate-aggregate-functions" title="Permalink to this headline">#</a></h2>
<dl class="function">
<dt id="approx_distinct">
<code class="sig-name descname">approx_distinct</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; bigint<a class="headerlink" href="#approx_distinct" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the approximate number of distinct input values.
This function provides an approximation of <code class="docutils literal notranslate"><span class="pre">count(DISTINCT</span> <span class="pre">x)</span></code>.
Zero is returned if all input values are null.</p>
<p>This function should produce a standard error of 2.3%, which is the
standard deviation of the (approximately normal) error distribution over
all possible sets. It does not guarantee an upper bound on the error for
any specific input set.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">approx_distinct</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">e</em><span class="sig-paren">)</span> &#x2192; bigint</dt>
<dd><p>Returns the approximate number of distinct input values.
This function provides an approximation of <code class="docutils literal notranslate"><span class="pre">count(DISTINCT</span> <span class="pre">x)</span></code>.
Zero is returned if all input values are null.</p>
<p>This function should produce a standard error of no more than <code class="docutils literal notranslate"><span class="pre">e</span></code>, which
is the standard deviation of the (approximately normal) error distribution
over all possible sets. It does not guarantee an upper bound on the error
for any specific input set. The current implementation of this function
requires that <code class="docutils literal notranslate"><span class="pre">e</span></code> be in the range of <code class="docutils literal notranslate"><span class="pre">[0.0040625,</span> <span class="pre">0.26000]</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="approx_percentile">
<code class="sig-name descname">approx_percentile</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">percentage</em><span class="sig-paren">)</span> &#x2192; [same as x]<a class="headerlink" href="#approx_percentile" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the approximate percentile for all input values of <code class="docutils literal notranslate"><span class="pre">x</span></code> at the
given <code class="docutils literal notranslate"><span class="pre">percentage</span></code>. The value of <code class="docutils literal notranslate"><span class="pre">percentage</span></code> must be between zero and
one and must be constant for all input rows.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">approx_percentile</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">percentages</em><span class="sig-paren">)</span> &#x2192; array&lt;[same as x]&gt;</dt>
<dd><p>Returns the approximate percentile for all input values of <code class="docutils literal notranslate"><span class="pre">x</span></code> at each of
the specified percentages. Each element of the <code class="docutils literal notranslate"><span class="pre">percentages</span></code> array must be
between zero and one, and the array must be constant for all input rows.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">approx_percentile</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">w</em>, <em class="sig-param">percentage</em><span class="sig-paren">)</span> &#x2192; [same as x]</dt>
<dd><p>Returns the approximate weighed percentile for all input values of <code class="docutils literal notranslate"><span class="pre">x</span></code>
using the per-item weight <code class="docutils literal notranslate"><span class="pre">w</span></code> at the percentage <code class="docutils literal notranslate"><span class="pre">p</span></code>. Weights must be
strictly positive. Integer-value weights can be thought of as a replication
count for the value <code class="docutils literal notranslate"><span class="pre">x</span></code> in the percentile set. The value of <code class="docutils literal notranslate"><span class="pre">p</span></code> must be
between zero and one and must be constant for all input rows.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">approx_percentile</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">w</em>, <em class="sig-param">percentage</em>, <em class="sig-param">accuracy</em><span class="sig-paren">)</span> &#x2192; [same as x]</dt>
<dd><p>Returns the approximate weighed percentile for all input values of <code class="docutils literal notranslate"><span class="pre">x</span></code>
using the per-item weight <code class="docutils literal notranslate"><span class="pre">w</span></code> at the percentage <code class="docutils literal notranslate"><span class="pre">p</span></code>, with a maximum rank
error of <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>. Weights must be strictly positive. Integer-value
weights can be thought of as a replication count for the value <code class="docutils literal notranslate"><span class="pre">x</span></code> in the
percentile set. The value of <code class="docutils literal notranslate"><span class="pre">p</span></code> must be between zero and one and must be
constant for all input rows. <code class="docutils literal notranslate"><span class="pre">accuracy</span></code> must be a value greater than zero
and less than one, and it must be constant for all input rows.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">approx_percentile</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">w</em>, <em class="sig-param">percentages</em><span class="sig-paren">)</span> &#x2192; array&lt;[same as x]&gt;</dt>
<dd><p>Returns the approximate weighed percentile for all input values of <code class="docutils literal notranslate"><span class="pre">x</span></code>
using the per-item weight <code class="docutils literal notranslate"><span class="pre">w</span></code> at each of the given percentages specified
in the array. Weights must be strictly positive. Integer-value weights can
be thought of as a replication count for the value <code class="docutils literal notranslate"><span class="pre">x</span></code> in the percentile
set. Each element of the array must be between zero and one, and the array
must be constant for all input rows.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">approx_set</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; HyperLogLog</dt>
<dd><p>See <a class="reference internal" href="hyperloglog.html"><span class="doc">HyperLogLog Functions</span></a>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">merge</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; HyperLogLog</dt>
<dd><p>See <a class="reference internal" href="hyperloglog.html"><span class="doc">HyperLogLog Functions</span></a>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">merge</code><span class="sig-paren">(</span><em class="sig-param">qdigest(T)) -&gt; qdigest(T</em><span class="sig-paren">)</span></dt>
<dd><p>See <a class="reference internal" href="qdigest.html"><span class="doc">Quantile Digest Functions</span></a>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">qdigest_agg</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; qdigest&lt;[same as x]&gt;</dt>
<dd><p>See <a class="reference internal" href="qdigest.html"><span class="doc">Quantile Digest Functions</span></a>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">qdigest_agg</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">w</em><span class="sig-paren">)</span> &#x2192; qdigest&lt;[same as x]&gt;</dt>
<dd><p>See <a class="reference internal" href="qdigest.html"><span class="doc">Quantile Digest Functions</span></a>.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">qdigest_agg</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">w</em>, <em class="sig-param">accuracy</em><span class="sig-paren">)</span> &#x2192; qdigest&lt;[same as x]&gt;</dt>
<dd><p>See <a class="reference internal" href="qdigest.html"><span class="doc">Quantile Digest Functions</span></a>.</p>
</dd></dl>

<dl class="function">
<dt id="numeric_histogram">
<code class="sig-name descname">numeric_histogram</code><span class="sig-paren">(</span><em class="sig-param">buckets</em>, <em class="sig-param">value</em>, <em class="sig-param">weight</em><span class="sig-paren">)</span> &#x2192; map&lt;double, double&gt;<a class="headerlink" href="#numeric_histogram" title="Permalink to this definition">#</a></dt>
<dd><p>Computes an approximate histogram with up to <code class="docutils literal notranslate"><span class="pre">buckets</span></code> number of buckets
for all <code class="docutils literal notranslate"><span class="pre">value</span></code>s with a per-item weight of <code class="docutils literal notranslate"><span class="pre">weight</span></code>. The algorithm
is based loosely on:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Yael Ben-Haim and Elad Tom-Tov, &quot;A streaming parallel decision tree algorithm&quot;,
J. Machine Learning Research 11 (2010), pp. 849--872.
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">buckets</span></code> must be a <code class="docutils literal notranslate"><span class="pre">bigint</span></code>. <code class="docutils literal notranslate"><span class="pre">value</span></code> and <code class="docutils literal notranslate"><span class="pre">weight</span></code> must be numeric.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">numeric_histogram</code><span class="sig-paren">(</span><em class="sig-param">buckets</em>, <em class="sig-param">value</em><span class="sig-paren">)</span> &#x2192; map&lt;double, double&gt;</dt>
<dd><p>Computes an approximate histogram with up to <code class="docutils literal notranslate"><span class="pre">buckets</span></code> number of buckets
for all <code class="docutils literal notranslate"><span class="pre">value</span></code>s. This function is equivalent to the variant of
<a class="reference internal" href="#numeric_histogram" title="numeric_histogram"><code class="xref py py-func docutils literal notranslate"><span class="pre">numeric_histogram()</span></code></a> that takes a <code class="docutils literal notranslate"><span class="pre">weight</span></code>, with a per-item weight of <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="statistical-aggregate-functions">
<h2>Statistical Aggregate Functions<a class="headerlink" href="#statistical-aggregate-functions" title="Permalink to this headline">#</a></h2>
<dl class="function">
<dt id="corr">
<code class="sig-name descname">corr</code><span class="sig-paren">(</span><em class="sig-param">y</em>, <em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#corr" title="Permalink to this definition">#</a></dt>
<dd><p>Returns correlation coefficient of input values.</p>
</dd></dl>

<dl class="function">
<dt id="covar_pop">
<code class="sig-name descname">covar_pop</code><span class="sig-paren">(</span><em class="sig-param">y</em>, <em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#covar_pop" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the population covariance of input values.</p>
</dd></dl>

<dl class="function">
<dt id="covar_samp">
<code class="sig-name descname">covar_samp</code><span class="sig-paren">(</span><em class="sig-param">y</em>, <em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#covar_samp" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sample covariance of input values.</p>
</dd></dl>

<dl class="function">
<dt id="kurtosis">
<code class="sig-name descname">kurtosis</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#kurtosis" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the excess kurtosis of all input values. Unbiased estimate using
the following expression:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>kurtosis(x) = n(n+1)/((n-1)(n-2)(n-3))sum[(x_i-mean)^4]/stddev(x)^4-3(n-1)^2/((n-2)(n-3))
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="regr_intercept">
<code class="sig-name descname">regr_intercept</code><span class="sig-paren">(</span><em class="sig-param">y</em>, <em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#regr_intercept" title="Permalink to this definition">#</a></dt>
<dd><p>Returns linear regression intercept of input values. <code class="docutils literal notranslate"><span class="pre">y</span></code> is the dependent
value. <code class="docutils literal notranslate"><span class="pre">x</span></code> is the independent value.</p>
</dd></dl>

<dl class="function">
<dt id="regr_slope">
<code class="sig-name descname">regr_slope</code><span class="sig-paren">(</span><em class="sig-param">y</em>, <em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#regr_slope" title="Permalink to this definition">#</a></dt>
<dd><p>Returns linear regression slope of input values. <code class="docutils literal notranslate"><span class="pre">y</span></code> is the dependent
value. <code class="docutils literal notranslate"><span class="pre">x</span></code> is the independent value.</p>
</dd></dl>

<dl class="function">
<dt id="skewness">
<code class="sig-name descname">skewness</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#skewness" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the skewness of all input values.</p>
</dd></dl>

<dl class="function">
<dt id="stddev">
<code class="sig-name descname">stddev</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#stddev" title="Permalink to this definition">#</a></dt>
<dd><p>This is an alias for <a class="reference internal" href="#stddev_samp" title="stddev_samp"><code class="xref py py-func docutils literal notranslate"><span class="pre">stddev_samp()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="stddev_pop">
<code class="sig-name descname">stddev_pop</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#stddev_pop" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the population standard deviation of all input values.</p>
</dd></dl>

<dl class="function">
<dt id="stddev_samp">
<code class="sig-name descname">stddev_samp</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#stddev_samp" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sample standard deviation of all input values.</p>
</dd></dl>

<dl class="function">
<dt id="variance">
<code class="sig-name descname">variance</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#variance" title="Permalink to this definition">#</a></dt>
<dd><p>This is an alias for <a class="reference internal" href="#var_samp" title="var_samp"><code class="xref py py-func docutils literal notranslate"><span class="pre">var_samp()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="var_pop">
<code class="sig-name descname">var_pop</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#var_pop" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the population variance of all input values.</p>
</dd></dl>

<dl class="function">
<dt id="var_samp">
<code class="sig-name descname">var_samp</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span> &#x2192; double<a class="headerlink" href="#var_samp" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the sample variance of all input values.</p>
</dd></dl>

</div>
<div class="section" id="lambda-aggregate-functions">
<h2>Lambda Aggregate Functions<a class="headerlink" href="#lambda-aggregate-functions" title="Permalink to this headline">#</a></h2>
<dl class="function">
<dt id="reduce_agg">
<code class="sig-name descname">reduce_agg</code><span class="sig-paren">(</span><em class="sig-param">inputValue T</em>, <em class="sig-param">initialState S</em>, <em class="sig-param">inputFunction(S</em>, <em class="sig-param">T</em>, <em class="sig-param">S)</em>, <em class="sig-param">combineFunction(S</em>, <em class="sig-param">S</em>, <em class="sig-param">S)</em><span class="sig-paren">)</span> &#x2192; S<a class="headerlink" href="#reduce_agg" title="Permalink to this definition">#</a></dt>
<dd><p>Reduces all input values into a single value. <code class="docutils literal notranslate"><span class="pre">inputFunction</span></code> will be invoked
for each non-null input value. In addition to taking the input value, <code class="docutils literal notranslate"><span class="pre">inputFunction</span></code>
takes the current state, initially <code class="docutils literal notranslate"><span class="pre">initialState</span></code>, and returns the new state.
<code class="docutils literal notranslate"><span class="pre">combineFunction</span></code> will be invoked to combine two states into a new state.
The final state is returned:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="n">reduce_agg</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="k">VALUES</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="p">)</span> <span class="k">AS</span> <span class="n">t</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">id</span><span class="p">;</span>
<span class="c1">-- (1, 12)</span>
<span class="c1">-- (2, 13)</span>

<span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="n">reduce_agg</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="k">VALUES</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="p">)</span> <span class="k">AS</span> <span class="n">t</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">id</span><span class="p">;</span>
<span class="c1">-- (1, 60)</span>
<span class="c1">-- (2, 42)</span>
</pre></div>
</div>
<p>The state type must be a boolean, integer, floating-point, or date/time/interval.</p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="window.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="10.15. Window Functions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="datetime.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="10.13. Date and Time Functions and Operators" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'332',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>