

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.11. GCP Marketplace &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="5. Kubernetes" href="../kubernetes.html"/>
        <link rel="next" title="5.12. Using Google Kubernetes Engine" href="gke.html"/>
        <link rel="prev" title="5.10. Using Amazon Elastic Kubernetes Service" href="eks.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">3. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../kubernetes.html">5. Kubernetes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">5.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html">5.2. Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html">5.3. Deployment of Presto on Kubernetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="presto_resource.html">5.4. Presto Kubernetes Resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html">5.5. Querying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="customizing_presto_image.html">5.6. Customizing Presto Docker Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpa.html">5.7. Horizontal Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="secrets.html">5.8. Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="ranger.html">5.9. Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="eks.html">5.10. Using Amazon Elastic Kubernetes Service</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.11. GCP Marketplace</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-started">Getting started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cluster-requirements">Cluster requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deployment">Deployment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-presto">Deploy Presto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gke.html">5.12. Using Google Kubernetes Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="aks.html">5.13. Using Microsoft Azure Kubernetes Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="openshift.html">5.14. Using Red Hat OpenShift</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html">5.15. Kubernetes Resources Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">6. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">7. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">8. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">9. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">10. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">11. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">12. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">13. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">14. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">15. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">16. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">332-e.10 LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/350-e/">Latest LTS (350-e)</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/354-e/">Latest STS (354-e)</option>
    <option value="/348-e/">348-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">332-e.10 LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../kubernetes.html"><span class="section-number">5. </span>Kubernetes</a> &raquo;</li>
      
    <li><span class="section-number">5.11. </span>GCP Marketplace</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gcp-marketplace">
<h1><span class="section-number">5.11. </span>GCP Marketplace<a class="headerlink" href="#gcp-marketplace" title="Permalink to this headline">#</a></h1>
<p>Starburst Enterprise Presto is available on the Google Cloud Platform
Marketplace. It offers a simple and convenient way to get started with SEP
running on the Kubernetes.</p>
<p>The marketplace offering uses the <a class="reference internal" href="deployment.html"><span class="doc">Kubernetes operator</span></a> and is listed on the <a class="reference external" href="https://console.cloud.google.com/marketplace/details/starburst-public/starburst-presto?">marketplace as starburst-presto</a>.</p>
<p>Further applicable information can be found in the <a class="reference internal" href="gke.html"><span class="doc">documentation for SEP
on the Google Kubernetes Engine</span></a>.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#getting-started" id="id2">Getting started</a></p>
<ul>
<li><p><a class="reference internal" href="#cluster-requirements" id="id3">Cluster requirements</a></p></li>
<li><p><a class="reference internal" href="#deployment" id="id4">Deployment</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deploy-presto" id="id5">Deploy Presto</a></p></li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h2>
<p>This user guide provides information on using the operator to deploy SEP and a
and eventually a cluster on the GCP Marketplace - Kubernetes Applications.</p>
<p>We recommend you to use the GCP Marketplace UI with <strong>Click to Deploy on GKE</strong>
to deploy the operator. The command line <strong>Deploy via command line</strong>
installation is not supported.</p>
</div>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h2>
<p>Setting up and deploying Presto to a Google Kubernetes Engine (GKE) cluster
using Google Cloud Marketplace is pretty straightforward.</p>
<p>You can get started by simply following the UI instructions in the
<a class="reference external" href="https://console.cloud.google.com/marketplace/details/starburst-public/starburst-presto?">marketplace</a>.</p>
<div class="section" id="cluster-requirements">
<h3>Cluster requirements<a class="headerlink" href="#cluster-requirements" title="Permalink to this headline">#</a></h3>
<p>You can either use an existing GKE cluster or create a new one. If using an
existing cluster make sure you have the GKE cluster configured with the
appropriate number and type of instances you may need to deploy a Presto
cluster. With insufficient resources available in the cluster, the deployed
pods may fail to be scheduled. Please refer this
<a class="reference internal" href="gke.html#gke-cluster-prerequisites"><span class="std std-ref">documentation</span></a> for any additional
configuration prerequisites for your GKE cluster.</p>
<p>You can also choose to deploy a new cluster with minimal resources and
default configuration from the Marketplace offering configuration page.
After the Presto operator deploys successfully in this cluster, you have
to review the cluster configuration before deploying Presto on it. You
need to ensure that the cluster is sufficiently large.</p>
</div>
<div class="section" id="deployment">
<h3>Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline">#</a></h3>
<p>The default values of the configuration in the <a class="reference external" href="https://console.cloud.google.com/marketplace/details/starburst-public/starburst-presto?">UI</a>
work for most of the cases.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note the value for the field <strong>Secret name for Starburst enterprise
license</strong> and <a class="reference internal" href="#deploy-gcp-mp-presto"><span class="std std-ref">configure</span></a> it using
<code class="docutils literal notranslate"><span class="pre">licenseSecretName</span></code> in the Kubernetes configuration. Also, if you are
enabling <strong>Global Security</strong> using Ranger make sure you note down the values
of the admin and service user passwords you provide in the UI for
<a class="reference internal" href="#deploy-gcp-mp-presto"><span class="std std-ref">later use</span></a>.</p>
</div>
<p>Once done, you can click on <strong>Deploy</strong> to install the operator in the cluster.
You can track the progress of the deployment in the <a class="reference external" href="https://console.cloud.google.com/kubernetes/application">applications page</a>.</p>
<p>Once the application is successfully deployed, you are now ready to deploy
Presto on the cluster. For next steps, you can either refer the <strong>Application
info</strong> from the <a class="reference external" href="https://console.cloud.google.com/kubernetes/application">application page</a> or the <a class="reference internal" href="#deploy-gcp-mp-presto"><span class="std std-ref">Presto
deployment</span></a> documentation.</p>
</div>
</div>
<div class="section" id="deploy-presto">
<span id="deploy-gcp-mp-presto"></span><h2>Deploy Presto<a class="headerlink" href="#deploy-presto" title="Permalink to this headline">#</a></h2>
<p>You can deploy Presto using the <a class="reference external" href="https://cloud.google.com/kubernetes-engine/docs/quickstart#choosing_a_shell">cloud shell</a>
or local shell with <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> configured to your GKE cluster.</p>
<p>The complete reference for the Presto configuration to apply (<code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">apply</span></code>)
can be found in the <a class="reference internal" href="presto_resource.html"><span class="doc">Presto resource</span></a>
documentation.</p>
<p>If you are enabling global security refer to the <a class="reference internal" href="ranger.html"><span class="doc">Ranger
documentation</span></a>.</p>
<p>Make sure you have <code class="docutils literal notranslate"><span class="pre">usageMetrics</span></code> enabled in your Presto configuration. Our
GCP offering relies on the metrics and if disabled, the Presto deployment is
terminated after 36 hours. Additionally, if using any Starburst <a class="reference internal" href="../overview.html#starburst-enterprise-presto"><span class="std std-ref">extensions
and plugins</span></a>, the name of the Starburst license
secret from the marketplace UI needs to be configured with the
<code class="docutils literal notranslate"><span class="pre">licenseSecretName</span></code>.</p>
<p>For example, create a configuration <code class="docutils literal notranslate"><span class="pre">cluster.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">starburstdata.com/v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Presto</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example-presto</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">nameOverride</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example-presto</span>
  <span class="nt">licenseSecretName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">presto-license</span>
  <span class="nt">service</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
      <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">example-presto</span>
  <span class="nt">memory</span><span class="p">:</span>
    <span class="nt">nodeMemoryHeadroom</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1Gi</span>
  <span class="nt">coordinator</span><span class="p">:</span>
    <span class="nt">cpuRequest</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
      <span class="nt">memoryAllocation</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
  <span class="nt">worker</span><span class="p">:</span>
    <span class="nt">count</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">prestoWorkerShutdownGracePeriodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">cpuRequest</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
    <span class="nt">memoryAllocation</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
  <span class="nt">usageMetrics</span><span class="p">:</span>
    <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">usageClient</span><span class="p">:</span>
      <span class="nt">initialDelay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
      <span class="nt">interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
  <span class="nt">additionalCatalogs</span><span class="p">:</span>
    <span class="nt">tpcds</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="l l-Scalar l-Scalar-Plain">connector.name=tpcds</span>
</pre></div>
</div>
<p>Configure kubectl to point at your cluster and then apply the configuration:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl apply -f cluster.yaml
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gke.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="5.12. Using Google Kubernetes Engine" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="eks.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="5.10. Using Amazon Elastic Kubernetes Service" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'332',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>