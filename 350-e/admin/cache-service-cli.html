

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Cache service CLI &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Usage metrics" href="usage-metrics.html" />
    <link rel="prev" title="Cache service" href="cache-service.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#admin/cache-service-cli" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise</span>
          <span class="md-header-nav__topic"> Cache service CLI </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (360-e)" href="/360-e/">Latest LTS (360-e)</a>
      
          <a title="356-e LTS" href="/356-e/">356-e LTS</a>
      
          <a title="350-e LTS" href="/350-e/">350-e LTS</a>
      
          <a title="345-e LTS" href="/345-e/">345-e LTS</a>
      
          <a title="Latest STS (359-e)" href="/359-e/">Latest STS (359-e)</a>
      
          <a title="358-e STS" href="/358-e/">358-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../admin.html" class="md-tabs__link">Administration</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../mission-control.html" class="md-nav__link">Mission Control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Amazon Web Services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Kubernetes with Helm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="web-interface.html" class="md-nav__link">Web UI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tuning.html" class="md-nav__link">Tuning Presto</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jmx.html" class="md-nav__link">Monitoring with JMX</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="properties.html" class="md-nav__link">Properties reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="spill.html" class="md-nav__link">Spill to disk</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="resource-groups.html" class="md-nav__link">Resource groups</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="session-property-managers.html" class="md-nav__link">Session property managers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="dist-sort.html" class="md-nav__link">Distributed sort</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="dynamic-filtering.html" class="md-nav__link">Dynamic filtering</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="graceful-shutdown.html" class="md-nav__link">Graceful shutdown</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cache-service.html" class="md-nav__link">Cache service</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Cache service CLI </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Cache service CLI</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#admin-cache-service-cli--page-root" class="md-nav__link">Cache service CLI</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#installation" class="md-nav__link">Installation</a>
        </li>
        <li class="md-nav__item"><a href="#authentication" class="md-nav__link">Authentication</a>
        </li>
        <li class="md-nav__item"><a href="#output-formats" class="md-nav__link">Output formats</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#examples" class="md-nav__link">Examples</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#commands" class="md-nav__link">Commands</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#current-redirection" class="md-nav__link">Current redirection</a>
        </li>
        <li class="md-nav__item"><a href="#list-redirections" class="md-nav__link">List redirections</a>
        </li>
        <li class="md-nav__item"><a href="#add-redirection" class="md-nav__link">Add redirection</a>
        </li>
        <li class="md-nav__item"><a href="#expire-redirections" class="md-nav__link">Expire redirections</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="usage-metrics.html" class="md-nav__link">Usage metrics</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../migration.html" class="md-nav__link">Migration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">350-e.14 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#admin-cache-service-cli--page-root" class="md-nav__link">Cache service CLI</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#installation" class="md-nav__link">Installation</a>
        </li>
        <li class="md-nav__item"><a href="#authentication" class="md-nav__link">Authentication</a>
        </li>
        <li class="md-nav__item"><a href="#output-formats" class="md-nav__link">Output formats</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#examples" class="md-nav__link">Examples</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#commands" class="md-nav__link">Commands</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#current-redirection" class="md-nav__link">Current redirection</a>
        </li>
        <li class="md-nav__item"><a href="#list-redirections" class="md-nav__link">List redirections</a>
        </li>
        <li class="md-nav__item"><a href="#add-redirection" class="md-nav__link">Add redirection</a>
        </li>
        <li class="md-nav__item"><a href="#expire-redirections" class="md-nav__link">Expire redirections</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="admin-cache-service-cli--page-root">Cache service CLI<a class="headerlink" href="#admin-cache-service-cli--page-root" title="Permalink to this headline">#</a></h1>
<p>The Starburst Enterprise platform (SEP) cache service command line interface (CLI) provides a
terminal-based interface for listing and configuring redirections managed by the
<a class="reference internal" href="cache-service.html"><span class="doc">cache service</span></a>.</p>

<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">#</a></h2>
<p>The cache service CLI requires a Java virtual machine available on the path. It
can be used with Java version 8 and higher. It is a self-executing JAR file,
which means it acts like a normal UNIX executable.</p>


<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>To download the cache service CLI file, contact Starburst Support</p></li>
<li><p>Support provides access to a JAR file named <code class="docutils literal notranslate"><span class="pre">starburst-cache-cli-nnn.jar</span></code>
where <em>nnn</em> is the version number.</p></li>
<li><p>Rename this file to <code class="docutils literal notranslate"><span class="pre">cache-cli</span></code></p></li>
<li><p>Make it executable with <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">cache-cli</span></code></p></li>
<li><p>Place it in a directory on the <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, such as <code class="docutils literal notranslate"><span class="pre">~/bin</span></code>, or
<code class="docutils literal notranslate"><span class="pre">/usr/local/bin</span></code></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli current_redirection --server localhost:8180 --source=mysql.test.orders
</pre></div>
</div>
<p>Run the CLI with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option to see the available options.</p>


<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">#</a></h2>
<p>You can override your username with the <code class="docutils literal notranslate"><span class="pre">--user</span></code> option. It defaults to your
operating system username. If your cache service requires password
authentication, use the <code class="docutils literal notranslate"><span class="pre">--password</span></code> option to have the CLI prompt for a
password. You can set the <code class="docutils literal notranslate"><span class="pre">CACHE_SERVICE_PASSWORD</span></code> environment variable with
the password value to avoid the prompt.</p>
<p>HTTP client properties, such as keystore and truststore, can be specified
through a configuration file that can be passed to the CLI with the
<code class="docutils literal notranslate"><span class="pre">--properties</span></code> option.</p>
<p>For example, when the cache service is running in HTTPS mode, the CLI can be
configured to connect to it by adding the below properties to a file and
providing it’s path in the <code class="docutils literal notranslate"><span class="pre">--properties</span></code> option to the CLI.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">http-client.trust-store-path</span><span class="o">=</span><span class="s">etc/localhost.truststore</span>
<span class="na">http-client.trust-store-password</span><span class="o">=</span><span class="s">changeit</span>
<span class="na">http-client.https.hostname-verification</span><span class="o">=</span><span class="s">false</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli current_redirection --server https://localhost:8543 --source=mysql.test.orders --properties=etc/http-client-config.properties --user test --password
</pre></div>
</div>


<h2 id="output-formats">Output formats<a class="headerlink" href="#output-formats" title="Permalink to this headline">#</a></h2>
<p>The cache service CLI provides the option <code class="docutils literal notranslate"><span class="pre">--output-format</span></code> to control how
the output is displayed when running in non-interactive mode. The available
options shown in the following table must be entered in uppercase.
The default value is <code class="docutils literal notranslate"><span class="pre">ALIGNED</span></code>.</p>
<table id="id1">
<caption><span class="caption-text">Output format options</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 25%"/>
<col style="width: 75%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">JSON</span></code></p></td>
<td><p>Output rows emitted as JSON objects with name-value pairs.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ALIGNED</span></code></p></td>
<td><p>Output emitted as an ASCII character table with values.</p></td>
</tr>
</tbody>
</table>

<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h3>
<p>Consider the following command run as shown, or with <code class="docutils literal notranslate"><span class="pre">--output-format</span>
<span class="pre">ALIGNED</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli current_redirection --source=mysql.test.nation_tmp
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> id | target_catalog | target_schema |                  target_table                   |       create_time        |  ttl  | grace_period | max_import_duration |    import_start_time     |    import_finish_time    | columns | error_message
----+----------------+---------------+-------------------------------------------------+--------------------------+-------+--------------+---------------------+--------------------------+--------------------------+---------+---------------
 1  | hive           | cache         | nation_tmp_3d3554ed_6be6_4d01_b9f2_d1886c8a5e63 | 2021-01-04T18:47:19.245Z | 1.50h |  15.00m      | 30.00m              | 2021-01-04T18:47:19.331Z | 2021-01-04T18:47:25.100Z | *       |
(1 row)
</pre></div>
</div>
<p>The output with <code class="docutils literal notranslate"><span class="pre">--output-format</span> <span class="pre">JSON</span></code> is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="nt">"target_catalog"</span><span class="p">:</span><span class="s2">"hive"</span><span class="p">,</span><span class="nt">"target_schema"</span><span class="p">:</span><span class="s2">"cache"</span><span class="p">,</span><span class="nt">"target_table"</span><span class="p">:</span><span class="s2">"nation_tmp_3d3554ed_6be6_4d01_b9f2_d1886c8a5e63"</span><span class="p">,</span><span class="nt">"create_time"</span><span class="p">:</span><span class="s2">"2021-01-04T18:47:19.245Z"</span><span class="p">,</span><span class="nt">"ttl"</span><span class="p">:</span><span class="s2">"1.50h"</span><span class="p">,</span><span class="nt">"grace_period"</span><span class="p">:</span><span class="s2">"15.00m"</span><span class="p">,</span><span class="nt">"max_import_duration"</span><span class="p">:</span><span class="s2">"30.00m"</span><span class="p">,</span><span class="nt">"import_start_time"</span><span class="p">:</span><span class="s2">"2021-01-04T18:47:19.331Z"</span><span class="p">,</span><span class="nt">"import_finish_time"</span><span class="p">:</span><span class="s2">"2021-01-04T18:47:25.100Z"</span><span class="p">,</span><span class="nt">"columns"</span><span class="p">:</span><span class="s2">"*"</span><span class="p">,</span><span class="nt">"error_message"</span><span class="p">:</span><span class="s2">""</span><span class="p">}</span>
</pre></div>
</div>



<h2 id="commands">Commands<a class="headerlink" href="#commands" title="Permalink to this headline">#</a></h2>
<p>The cache service CLI implements the following sub-commands for viewing
and adding cached tables.</p>

<h3 id="current-redirection">Current redirection<a class="headerlink" href="#current-redirection" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">current_redirection</span></code> command shows whether the specified source table has
a valid redirection. The source table is provided through the <code class="docutils literal notranslate"><span class="pre">--source</span></code>
option in the format <code class="docutils literal notranslate"><span class="pre">&lt;catalog&gt;.&lt;schema&gt;.&lt;table&gt;</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli current_redirection --source=mysql.test.nation_tmp
</pre></div>
</div>
<p>The output either shows a valid redirection or <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">rows</span></code> as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> id | target_catalog | target_schema |                  target_table                   |       create_time        |  ttl  | grace_period | max_import_duration |    import_start_time     |    import_finish_time    | columns | error_message
----+----------------+---------------+-------------------------------------------------+--------------------------+-------+--------------+---------------------+--------------------------+--------------------------+---------+---------------
 1  | hive           | cache         | nation_tmp_3d3554ed_6be6_4d01_b9f2_d1886c8a5e63 | 2021-01-04T18:47:19.245Z | 1.50h |  15.00m      | 30.00m              | 2021-01-04T18:47:19.331Z | 2021-01-04T18:47:25.100Z | *       |
(1 row)

 id | target_catalog | target_schema | target_table | create_time | ttl | grace_period | max_import_duration | import_start_time | import_finish_time | columns | error_message
----+----------------+---------------+--------------+-------------+-----+--------------+---------------------+-------------------+--------------------+---------+---------------
(0 rows)
</pre></div>
</div>


<h3 id="list-redirections">List redirections<a class="headerlink" href="#list-redirections" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">list_redirections</span></code> command shows the list of cached tables for the
specified source table. The column <code class="docutils literal notranslate"><span class="pre">error_message</span></code> shows the reasons for any
failure encountered while trying to create and populate the cached table:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli list_redirections --source=mysql.test.nation_tmp
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> id | target_catalog | target_schema |                  target_table                   |       create_time        |  ttl  | grace_period | max_import_duration |    import_start_time     |    import_finish_time    |  columns |                                                                                                                                         error_message
----+----------------+---------------+-------------------------------------------------+--------------------------+-------+--------------+---------------------+--------------------------+--------------------------+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1  | hive           | cache         | nation_tmp_a2e89580_7179_4c96_be58_48d32bbbb11f | 2021-01-05T03:54:57.682Z | 2.42h | 15.00m       | 30.00m              | 2021-01-05T03:54:58.096Z | 2021-01-05T03:55:01.555Z |  *       |
 2  | hive           | cache         | nation_tmp_8dc0a64f_ed37_48ff_b241_7fd7e59c43d6 | 2021-01-05T04:54:57.682Z | 1.42h | 15.00m       | 30.02m              | 2021-01-05T04:54:58.656Z | 2021-01-05T04:55:01.602Z |  *       |
 3  | hive           | cache         | nation_tmp_5af2e36c_b303_425a_b735_cc9e925ca9d5 | 2021-01-05T05:54:57.682Z | 1.50h | 15.00m       | 30.03m              | 2021-01-05T05:54:59.480Z | 2021-01-05T05:55:01.556Z |  *       |
 4  | hive           | cache         | nation_tmp_9be03071_e197_4a8e_8e4e_46a44a32096b | 2021-01-05T06:27:05.463Z | 1.00h | 15.00m       | 30.00m              | 2021-01-05T06:27:05.561Z |                          | abc, xyz | java.sql.SQLException: Query failed (#20210105_021140_04846_58gyu): line 2:3: Column 'abc' cannot be resolved [statement:"CREATE TABLE hive.cache.nation_tmp_9be03071_e197_4a8e_8e4e_46a44a32096b AS SELECT abc,xyz FROM mysql.test.nation_tmp", arguments:{positional:{}, named:{}, finder:[]}]
(4 rows)
</pre></div>
</div>


<h3 id="add-redirection">Add redirection<a class="headerlink" href="#add-redirection" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">cache</span></code> command adds caching of a given source table into the target
catalog and schema. The cache service automatically generates a name for target
table with a random suffix. The cached table is used to redirect table scans on
source tables for a time interval specified by the <code class="docutils literal notranslate"><span class="pre">--cache-ttl</span></code> option:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli cache --source=mysql.test.nation_tmp --target-catalog=hive --target-schema=cache --cache-ttl=1h
</pre></div>
</div>
<p>The output shows the target table as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> catalog_name | schema_name |                   table_name
--------------+-------------+-------------------------------------------------
 hive         | cache       | nation_tmp_9be03071_e197_4a8e_8e4e_46a44a32096b
</pre></div>
</div>
<p>The grace period is 15m by default. It can be extended using the
<code class="docutils literal notranslate"><span class="pre">--grace-period</span></code> option based on the maximum duration that the queries are
expected to run.</p>
<table id="id2">
<caption><span class="caption-text">Optional cache command options</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 32%"/>
<col style="width: 63%"/>
<col style="width: 5%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">allow-multiple-imports</span></code></p></td>
<td><p>Allow parallel imports for the same source table. By default another
command does not start another import, if one is already running for the
same source table. This is useful to force another import, for example
when an existing import seems to be stalled.</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">grace-period</span></code></p></td>
<td><p>The service removes cached tables when they are no longer needed, such as
when a newer redirection is present or ttl expired. The service waits for
<code class="docutils literal notranslate"><span class="pre">grace-period</span></code> before removing the cached table. This allows any running
queries which started just before the cached table is expired to finish
gracefully.</p></td>
<td><p>15m</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max-import-duration</span></code></p></td>
<td><p>Maximum allowed execution time for cached table import job</p></td>
<td><p>30m</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">columns</span></code></p></td>
<td><p>Comma separated list of columns to be cached from source table</p></td>
<td><p>All columns are cached by default</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">partition-columns</span></code></p></td>
<td><p>Comma separated list of columns for partitioning the data in the target
table</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">use-preferred-write-partitioning</span></code></p></td>
<td><p>Use table partitioning to parallelize writes between worker nodes. This
reduces import memory usage and improves cached table file sizes.</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">writer-count</span></code></p></td>
<td><p>Number of writers per task when writing table</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">scale-writers</span></code></p></td>
<td><p>Scale writers when writing table</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">use-server-import-config</span></code></p></td>
<td><p>Use caching server table import configuration. The cache server has
different default import configuration for partitioned and
non-partitioned tables.</p></td>
<td><p>true</p></td>
</tr>
</tbody>
</table>


<h3 id="expire-redirections">Expire redirections<a class="headerlink" href="#expire-redirections" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">expire_redirection</span></code> command expires the redirection corresponding
to a given identifier. The redirection grace period is still honored. Therefore
queries that use cached tables do not fail. The column <code class="docutils literal notranslate"><span class="pre">id</span></code> from the output of
<code class="docutils literal notranslate"><span class="pre">list_redirections</span></code> or <code class="docutils literal notranslate"><span class="pre">current_redirection</span></code> commands can be used to
identify a redirection for expiry.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli expire_redirection --id 1
</pre></div>
</div>
<p>The output is either <code class="docutils literal notranslate"><span class="pre">Success</span></code> or an error message containing the reason
for failure.</p>





          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="cache-service.html" title="Cache service"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Cache service </span>
              </div>
            </a>
          
          
            <a href="usage-metrics.html" title="Usage metrics"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Usage metrics </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>

<!-- custom footer should go here in time -->

<div style="background: #000A2C; align-content: center; height: 5em;">

</div>
  </body>
</html>