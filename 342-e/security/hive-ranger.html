

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="253746">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Hive level security with Apache Ranger &#8212; Starburst Enterprise Presto</title>
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/presto.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Hive level security with Apache Sentry" href="hive-sentry.html" />
    <link rel="prev" title="System level security with Apache Ranger" href="system-ranger.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/hive-ranger" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Starburst Enterprise Presto"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise Presto logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise Presto</span>
          <span class="md-header-nav__topic"> Hive level security with Apache Ranger </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (338-e)" href="/338-e/">Latest LTS (338-e)</a>
      
          <a title="332-e LTS" href="/332-e/">332-e LTS</a>
      
          <a title="323-e LTS" href="/323-e/">323-e LTS</a>
      
          <a title="Latest STS (341-e)" href="/341-e/">Latest STS (341-e)</a>
      
          <a title="340-e STS" href="/340-e/">340-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise Presto" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise Presto">Starburst Enterprise Presto</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../mission-control.html" class="md-nav__link">Mission Control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Amazon Web Services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Kubernetes with Helm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../kubernetes.html" class="md-nav__link">Kubernetes operator</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="server.html" class="md-nav__link">Kerberos authentication for coordinator</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cli.html" class="md-nav__link">Kerberos authentication with CLI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ldap.html" class="md-nav__link">LDAP authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="password-file.html" class="md-nav__link">Password file authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="salesforce.html" class="md-nav__link">Salesforce authentication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="user-mapping.html" class="md-nav__link">User mapping</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tls.html" class="md-nav__link">Java keystores and truststores</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="built-in-system-access-control.html" class="md-nav__link">Built-in system access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ldap-group-provider.html" class="md-nav__link">LDAP group provider</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="secrets.html" class="md-nav__link">Secrets</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internal-communication.html" class="md-nav__link">Secure internal communication</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="audit.html" class="md-nav__link">Query audit</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="event-logger.html" class="md-nav__link">Event logger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="rbac.html" class="md-nav__link">Role based access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="system-ranger.html" class="md-nav__link">System level security with Apache Ranger</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Hive level security with Apache Ranger </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Hive level security with Apache Ranger</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-hive-ranger--page-root" class="md-nav__link">Hive level security with Apache Ranger</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#before-you-begin" class="md-nav__link">Before you begin</a>
        </li>
        <li class="md-nav__item"><a href="#architecture" class="md-nav__link">Architecture</a>
        </li>
        <li class="md-nav__item"><a href="#configuring-presto-with-apache-ranger" class="md-nav__link">Configuring Presto with Apache Ranger</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#apache-ranger-configuration" class="md-nav__link">Apache Ranger configuration</a>
        </li>
        <li class="md-nav__item"><a href="#presto-configuration-for-apache-ranger" class="md-nav__link">Presto configuration for Apache Ranger</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#apache-ranger-based-authorization" class="md-nav__link">Apache Ranger based authorization</a>
        </li>
        <li class="md-nav__item"><a href="#ranger-policy-management-with-sql" class="md-nav__link">Ranger policy management with SQL</a>
        </li>
        <li class="md-nav__item"><a href="#resource-and-privilege-relationship" class="md-nav__link">Resource and privilege relationship</a>
        </li>
        <li class="md-nav__item"><a href="#additional-features" class="md-nav__link">Additional features</a>
        </li>
        <li class="md-nav__item"><a href="#limitations" class="md-nav__link">Limitations</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-sentry.html" class="md-nav__link">Hive level security with Apache Sentry</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="impersonation.html" class="md-nav__link">User impersonation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="credential-passthrough.html" class="md-nav__link">Kerberos credential passthrough</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="okta-authentication.html" class="md-nav__link">Okta authentication</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../migration.html" class="md-nav__link">Migration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">-</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">341-e STS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-hive-ranger--page-root" class="md-nav__link">Hive level security with Apache Ranger</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#before-you-begin" class="md-nav__link">Before you begin</a>
        </li>
        <li class="md-nav__item"><a href="#architecture" class="md-nav__link">Architecture</a>
        </li>
        <li class="md-nav__item"><a href="#configuring-presto-with-apache-ranger" class="md-nav__link">Configuring Presto with Apache Ranger</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#apache-ranger-configuration" class="md-nav__link">Apache Ranger configuration</a>
        </li>
        <li class="md-nav__item"><a href="#presto-configuration-for-apache-ranger" class="md-nav__link">Presto configuration for Apache Ranger</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#apache-ranger-based-authorization" class="md-nav__link">Apache Ranger based authorization</a>
        </li>
        <li class="md-nav__item"><a href="#ranger-policy-management-with-sql" class="md-nav__link">Ranger policy management with SQL</a>
        </li>
        <li class="md-nav__item"><a href="#resource-and-privilege-relationship" class="md-nav__link">Resource and privilege relationship</a>
        </li>
        <li class="md-nav__item"><a href="#additional-features" class="md-nav__link">Additional features</a>
        </li>
        <li class="md-nav__item"><a href="#limitations" class="md-nav__link">Limitations</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="security-hive-ranger--page-root">Hive level security with Apache Ranger<a class="headerlink" href="#security-hive-ranger--page-root" title="Permalink to this headline">#</a></h1>
<p>Apache Ranger offers comprehensive security for Hadoop. Using the Apache Ranger
web console, you can manage policies for access to data for authenticated users
and applications such as Presto.</p>
<p>SEP can use Apache Ranger for <a class="reference internal" href="rbac.html"><span class="doc">role-base access control</span></a> enforcing
the same and existing privileges granted on Hive objects. Presto enforces
privileges assigned to Hive databases, tables, and columns. If a user does not
have a privilege to query an object, the query fails and an error is returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hive level security with Apache Ranger requires a valid
<a class="reference internal" href="../installation/license-requirements.html"><span class="doc">Starburst Enterprise Presto license</span></a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The Hive level security for Apache Ranger is limited to usage with the
<a class="reference internal" href="../connector/starburst-hive.html"><span class="doc">Hive connector only</span></a>. We suggest to replace
it with the more powerful <a class="reference internal" href="system-ranger.html"><span class="doc">system level security</span></a>. It
is capable of securing catalogs using other connectors and many other aspects.</p>
</div>

<h2 id="before-you-begin">Before you begin<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">#</a></h2>
<p>Before you configure Presto with Apache Ranger, verify the following prerequisites:</p>
<ul class="simple">
<li><p>Hortonworks Data Platform (HDP) 2.6+ with Apache Ranger and Apache Hive
installed.</p></li>
<li><p>If youâ€™re not using HDP, then Apache Ranger 0.7.1+ must be installed.</p></li>
<li><p>Presto Coordinator and Presto Workers have the appropriate network access to
communicate with the Apache Ranger Service. Typically this is port 6080 or
6182, if SSL is used.</p></li>
</ul>
<p>If you are new to Apache Ranger, Hortonworks provides <a class="reference external" href="https://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.6.5/bk_security/content/overview_ranger_ambari_install.html">excellent documentation</a>
for installing and configuring Apache Ranger.</p>


<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">#</a></h2>
<p>When a query is submitted to Presto, Presto parses and analyzes the query to
understand the privileges required by the user to access a particular object.
Presto communicates with the Apache Ranger Service to determine if the request
is valid. If the request is valid, the query continues to execute. If the
request is invalid, an error is returned to the user.</p>
<p>Caching is also used to improve performance and reduce the number of requests to
the Ranger service.</p>


<h2 id="configuring-presto-with-apache-ranger">Configuring Presto with Apache Ranger<a class="headerlink" href="#configuring-presto-with-apache-ranger" title="Permalink to this headline">#</a></h2>

<h3 id="apache-ranger-configuration">Apache Ranger configuration<a class="headerlink" href="#apache-ranger-configuration" title="Permalink to this headline">#</a></h3>
<p>There needs to be sys admin Ranger user (user with role <code class="docutils literal notranslate"><span class="pre">ROLE_SYS_ADMIN</span></code>) that
matches Presto Kerberos principal <code class="docutils literal notranslate"><span class="pre">ranger.kerberos-principal</span></code> or Ranger Presto
plugin username <code class="docutils literal notranslate"><span class="pre">ranger.presto-plugin-username</span></code> and password
<code class="docutils literal notranslate"><span class="pre">ranger.presto-plugin-password</span></code>, if <code class="docutils literal notranslate"><span class="pre">BASIC</span></code> auth is used.</p>
<p>Presto Kerberos principal is translated to Ranger user name via
<code class="docutils literal notranslate"><span class="pre">auth-to-local</span></code> hadoop rules from <code class="docutils literal notranslate"><span class="pre">core-site.xml</span></code>.</p>


<h3 id="presto-configuration-for-apache-ranger">Presto configuration for Apache Ranger<a class="headerlink" href="#presto-configuration-for-apache-ranger" title="Permalink to this headline">#</a></h3>
<p>SEP must be configured to enable Presto to communicate with the Apache Ranger
service. To enable set the following property in the Hive connector
configuration.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hive.security = ranger
</pre></div>
</div>
<p>Once Apache Ranger is enabled for Presto, there are additional required and
optional properties to further configure.</p>



<h2 id="apache-ranger-based-authorization">Apache Ranger based authorization<a class="headerlink" href="#apache-ranger-based-authorization" title="Permalink to this headline">#</a></h2>
<p>Find more information about the necessary configuration properties in
<a class="reference internal" href="../connector/starburst-hive-security.html#hive-ranger-authorization"><span class="std std-ref">Apache Ranger-based authorization</span></a>.</p>


<span id="hive-ranger-sql"></span><h2 id="ranger-policy-management-with-sql">Ranger policy management with SQL<a class="headerlink" href="#ranger-policy-management-with-sql" title="Permalink to this headline">#</a></h2>
<p>SEP allows managing Hive policies using the SQL <a class="reference internal" href="../sql/grant.html"><span class="doc">GRANT</span></a> and
<a class="reference internal" href="../sql/revoke.html"><span class="doc">REVOKE</span></a> statements. Policies managed this way must have the
<code class="docutils literal notranslate"><span class="pre">Delegate</span> <span class="pre">Admin</span></code> option selected in the policy.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you do not select the <code class="docutils literal notranslate"><span class="pre">Delegate</span> <span class="pre">Admin</span></code> option, you receive access
denied errors.</p>
</div>
<p>Ranger Hive service definitions use a limited access type model compared to
Presto. This limits the granularity of grant and revoke operations.</p>
<p>SEP defines the following mapping from the Hive access type model to the Presto
privileges model:</p>
<table>
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Hive access type</p></th>
<th class="head"><p>Presto privilege</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UPDATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INSERT</span></code> and <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> and <code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></td>
</tr>
</tbody>
</table>
<p>and the other way around:</p>
<table>
<colgroup>
<col style="width: 31%"/>
<col style="width: 69%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Presto privilege</p></th>
<th class="head"><p>Hive access type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INSERT</span></code></p></td>
<td><p>Unsupported, use <code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code> instead</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UPDATE</span></code></p></td>
<td><p>Unsupported, use <code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code> instead</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></td>
<td><p>Unsupported, use <code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code> instead</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code> and <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code></p></td>
</tr>
</tbody>
</table>
<p>Only managing policies for users is currently supported.</p>


<h2 id="resource-and-privilege-relationship">Resource and privilege relationship<a class="headerlink" href="#resource-and-privilege-relationship" title="Permalink to this headline">#</a></h2>
<p>The integration of Ranger with the Hive connector does not support any kind of
relation between a resource, such as a table, and the granted access. This is
particularly evident when newly created resources are treated with the access
rights of the existing policies.</p>
<p>For example, as user without full administrative access (<code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">PRIVILEGES</span></code>) you
can end up in a situation where you create a new table, but can not grant access
to that table to other users. As a workaround you can create global policies
that use matching patterns and define the desired default access.</p>
<p>For example, if you want all tables ending with <code class="docutils literal notranslate"><span class="pre">-reporting</span></code> to be accessible
by everyone, you can create a policy that uses a value for <code class="docutils literal notranslate"><span class="pre">*-reporting</span></code> for
the table. If you use <code class="docutils literal notranslate"><span class="pre">*</span></code> for database and <code class="docutils literal notranslate"><span class="pre">*</span></code> for the Hive column, you can
grant a specific access to such a reporting table and all its columns in any
database.</p>
<p>Alternatively you can grant all privileges to anyone creating new objects and
requiring privileges to grant access to others. This policy might be too open
for your use case, depending on your security policies, the data, the number of
users and other aspects.</p>


<h2 id="additional-features">Additional features<a class="headerlink" href="#additional-features" title="Permalink to this headline">#</a></h2>
<p>In addition to enforcing the policies in Apache Ranger, Presto also integrates
with:</p>
<ul class="simple">
<li><p>Apache Ranger Key Management Service</p></li>
<li><p>row level filtering</p></li>
<li><p>column masking</p></li>
<li><p>tag based policies</p></li>
<li><p>support for AWS Glue Data Catalog</p></li>
</ul>


<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">#</a></h2>
<p>Authorization information cannot be accessed by querying the following tables
such as <code class="docutils literal notranslate"><span class="pre">information_schema.roles</span></code>, <code class="docutils literal notranslate"><span class="pre">information_schema.applicable_roles</span></code>,
<code class="docutils literal notranslate"><span class="pre">information_schema.enabled_roles</span></code>, and
<code class="docutils literal notranslate"><span class="pre">information_schema.table_privileges</span></code></p>




          </article>
        </div>
      </div>
    </main>
  </div>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="system-ranger.html" title="System level security with Apache Ranger"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> System level security with Apache Ranger </span>
              </div>
            </a>
          
          
            <a href="hive-sentry.html" title="Hive level security with Apache Sentry"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Hive level security with Apache Sentry </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>

<!-- custom footer should go here in time -->

<div style="background: #253746; align-content: center; height: 3em;"> 
</div>
  </body>
</html>