

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Cache service &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cache service CLI" href="cache-service-cli.html" />
    <link rel="prev" title="Table scan redirection" href="table-scan-redirection.html" />

  
   



<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/admin/cache-service.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#admin/cache-service" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 364-e.2 LTS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 364-e.2 LTS</span>
          <span class="md-header-nav__topic"> Cache service </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (364-e)" href="/364-e/">Latest LTS (364-e)</a>
      
          <a title="360-e LTS" href="/360-e/">360-e LTS</a>
      
          <a title="356-e LTS" href="/356-e/">356-e LTS</a>
      
          <a title="350-e LTS" href="/350-e/">350-e LTS</a>
      
          <a title="Latest STS (363-e)" href="/363-e/">Latest STS (363-e)</a>
      
          <a title="361-e STS" href="/361-e/">361-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../admin.html" class="md-tabs__link">Administration</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 364-e.2 LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="web-interface.html" class="md-nav__link">Web UI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tuning.html" class="md-nav__link">Tuning Starburst Enterprise</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jmx.html" class="md-nav__link">Monitoring with JMX</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="properties.html" class="md-nav__link">Properties reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="spill.html" class="md-nav__link">Spill to disk</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="resource-groups.html" class="md-nav__link">Resource groups</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="session-property-managers.html" class="md-nav__link">Session property managers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="dist-sort.html" class="md-nav__link">Distributed sort</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="dynamic-filtering.html" class="md-nav__link">Dynamic filtering</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="graceful-shutdown.html" class="md-nav__link">Graceful shutdown</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="event-listeners-http.html" class="md-nav__link">HTTP event listener</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-cached-views.html" class="md-nav__link">Starburst Cached Views</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="table-scan-redirection.html" class="md-nav__link">Table scan redirection</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Cache service </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Cache service</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#admin-cache-service--page-root" class="md-nav__link">Cache service</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#linux-operating-system" class="md-nav__link">Linux Operating System</a>
        </li>
        <li class="md-nav__item"><a href="#java-runtime-environment" class="md-nav__link">Java Runtime Environment</a>
        </li>
        <li class="md-nav__item"><a href="#python" class="md-nav__link">Python</a>
        </li>
        <li class="md-nav__item"><a href="#relational-database" class="md-nav__link">Relational database</a>
        </li>
        <li class="md-nav__item"><a href="#table-scan-redirection" class="md-nav__link">Table scan redirection</a>
        </li>
        <li class="md-nav__item"><a href="#materialized-views" class="md-nav__link">Materialized views</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#installation" class="md-nav__link">Installation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#standalone-deployment" class="md-nav__link">Standalone deployment</a>
        </li>
        <li class="md-nav__item"><a href="#embedded-mode" class="md-nav__link">Embedded mode</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration" class="md-nav__link">Configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#jvm-configuration" class="md-nav__link">JVM configuration</a>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#tls-and-authentication" class="md-nav__link">TLS and authentication</a>
        </li>
        <li class="md-nav__item"><a href="#log-levels" class="md-nav__link">Log Levels</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#table-scan-refresh-and-redirection-rules" class="md-nav__link">Table scan refresh and redirection rules</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#full-refreshes" class="md-nav__link">Full refreshes</a>
        </li>
        <li class="md-nav__item"><a href="#incremental-refreshes" class="md-nav__link">Incremental refreshes</a>
        </li>
        <li class="md-nav__item"><a href="#global-properties" class="md-nav__link">Global properties</a>
        </li>
        <li class="md-nav__item"><a href="#rule-specific-properties" class="md-nav__link">Rule-specific properties</a>
        </li>
        <li class="md-nav__item"><a href="#importconfig-properties" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">importConfig</span></code> properties</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#type-mapping-rules" class="md-nav__link">Type mapping rules</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#type-mapping-behavior" class="md-nav__link">Type mapping behavior</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#running-the-cache-service" class="md-nav__link">Running the cache service</a>
        </li>
        <li class="md-nav__item"><a href="#jmx-metrics" class="md-nav__link">JMX metrics</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cache-service-cli.html" class="md-nav__link">Cache service CLI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="atlas-integration.html" class="md-nav__link">Atlas integration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="atlas-plugin.html" class="md-nav__link">Starburst Atlas plugin</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="atlas-cli.html" class="md-nav__link">Atlas CLI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="atlas-ranger.html" class="md-nav__link">Ranger Tagsync and Atlas</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Starburst Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">364-e.2 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#admin-cache-service--page-root" class="md-nav__link">Cache service</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#linux-operating-system" class="md-nav__link">Linux Operating System</a>
        </li>
        <li class="md-nav__item"><a href="#java-runtime-environment" class="md-nav__link">Java Runtime Environment</a>
        </li>
        <li class="md-nav__item"><a href="#python" class="md-nav__link">Python</a>
        </li>
        <li class="md-nav__item"><a href="#relational-database" class="md-nav__link">Relational database</a>
        </li>
        <li class="md-nav__item"><a href="#table-scan-redirection" class="md-nav__link">Table scan redirection</a>
        </li>
        <li class="md-nav__item"><a href="#materialized-views" class="md-nav__link">Materialized views</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#installation" class="md-nav__link">Installation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#standalone-deployment" class="md-nav__link">Standalone deployment</a>
        </li>
        <li class="md-nav__item"><a href="#embedded-mode" class="md-nav__link">Embedded mode</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration" class="md-nav__link">Configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#jvm-configuration" class="md-nav__link">JVM configuration</a>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#tls-and-authentication" class="md-nav__link">TLS and authentication</a>
        </li>
        <li class="md-nav__item"><a href="#log-levels" class="md-nav__link">Log Levels</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#table-scan-refresh-and-redirection-rules" class="md-nav__link">Table scan refresh and redirection rules</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#full-refreshes" class="md-nav__link">Full refreshes</a>
        </li>
        <li class="md-nav__item"><a href="#incremental-refreshes" class="md-nav__link">Incremental refreshes</a>
        </li>
        <li class="md-nav__item"><a href="#global-properties" class="md-nav__link">Global properties</a>
        </li>
        <li class="md-nav__item"><a href="#rule-specific-properties" class="md-nav__link">Rule-specific properties</a>
        </li>
        <li class="md-nav__item"><a href="#importconfig-properties" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">importConfig</span></code> properties</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#type-mapping-rules" class="md-nav__link">Type mapping rules</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#type-mapping-behavior" class="md-nav__link">Type mapping behavior</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#running-the-cache-service" class="md-nav__link">Running the cache service</a>
        </li>
        <li class="md-nav__item"><a href="#jmx-metrics" class="md-nav__link">JMX metrics</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="admin-cache-service--page-root">Cache service<a class="headerlink" href="#admin-cache-service--page-root" title="Permalink to this headline">#</a></h1>
<p>The Starburst Enterprise platform (SEP) cache service provides the ability to configure and automate the
management of <a class="reference internal" href="table-scan-redirection.html"><span class="doc">table scan redirections</span></a> and
materialized views in supported connectors.</p>
<p>The service connects to an existing SEP installation to run queries for
copying data from the source catalog to the target catalog. The target catalog
is regularly synchronized with the source and used as a cache.</p>
<p>The cache service can be run as a standalone service or within the coordinator
process. You can interact with it using its REST API, or the <a class="reference internal" href="cache-service-cli.html"><span class="doc">cache service
CLI</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Table scan redirection and the cache service requires a valid
<a class="reference internal" href="../installation/license-requirements.html"><span class="doc">Starburst Enterprise license</span></a>.</p>
</div>

<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">#</a></h2>
<p>The cache service has similar requirements to SEP, which are described on
the <a class="reference internal" href="../installation/deployment.html"><span class="doc">Deploying</span></a> page.</p>

<h3 id="linux-operating-system">Linux Operating System<a class="headerlink" href="#linux-operating-system" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>64-bit required</p></li>
<li><p>Newer release preferred, especially when running on containers</p></li>
</ul>


<h3 id="java-runtime-environment">Java Runtime Environment<a class="headerlink" href="#java-runtime-environment" title="Permalink to this headline">#</a></h3>
<p>The cache service requires a 64-bit version of Java 11. Newer major versions
such as Java 12 or 13 are not supported – they may work, but are not tested.</p>


<h3 id="python">Python<a class="headerlink" href="#python" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>version 2.6.x, 2.7.x, or 3.x</p></li>
<li><p>required by the <code class="docutils literal notranslate"><span class="pre">bin/launcher</span></code> script only</p></li>
</ul>


<span id="cache-service-external-rdbms"></span><h3 id="relational-database">Relational database<a class="headerlink" href="#relational-database" title="Permalink to this headline">#</a></h3>
<p>The cache service requires an externally managed database for storing table scan
redirections data and materialized view definitions. The following RDBMS are
supported:</p>
<ul class="simple">
<li><p>MySQL 8.0.12 or higher</p></li>
<li><p>PostgreSQL 9.6 or higher</p></li>
<li><p>OracleDB 12.2.0.1 or higher</p></li>
</ul>


<h3 id="table-scan-redirection">Table scan redirection<a class="headerlink" href="#table-scan-redirection" title="Permalink to this headline">#</a></h3>
<p>The cache service requires <a class="reference internal" href="table-scan-redirection.html"><span class="doc">configured table scan redirection</span></a> for each source catalog where table scans are
desired.</p>


<h3 id="materialized-views">Materialized views<a class="headerlink" href="#materialized-views" title="Permalink to this headline">#</a></h3>
<p>The cache service handles materialized view refreshes. To support this, each
supported catalog where storage tables reside must be <a class="reference internal" href="../connector/starburst-hive.html#sb-hive-mv-catalog-config"><span class="std std-ref">configured to allow
the creation of these tables</span></a>.</p>



<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h2>
<p>The cache service can be deployed either as a standalone application separate
from your SEP cluster or within the existing coordinator process.</p>

<span id="cache-service-standalone"></span><h3 id="standalone-deployment">Standalone deployment<a class="headerlink" href="#standalone-deployment" title="Permalink to this headline">#</a></h3>
<p>A standalone deployment ensures that the service is not affected by coordinator
performance, or the deployment of a new release on the SEP cluster.</p>
<p>Deployment of the cache service in Kubernetes can be <a class="reference internal" href="../k8s/installation.html#k8s-cache-service"><span class="std std-ref">managed with the
available Helm chart</span></a> .</p>
<p>Manual deployment relies on using a tarball:</p>
<ul class="simple">
<li><p>To download the cache service binary file, contact Starburst Support</p></li>
<li><p>Starburst Support provides access to a file named much like
<code class="docutils literal notranslate"><span class="pre">starburst-cache-service-*.tar.gz</span></code></p></li>
<li><p>Extract it, for example with <code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">xfvz</span> <span class="pre">starburst-cache-service-*.tar.gz</span></code></p></li>
</ul>
<p>The resulting directory <code class="docutils literal notranslate"><span class="pre">starburst-cache-service-nnn</span></code>, with <em>nnn</em> replaced by
the release number, is called the <em>installation</em> directory. It contains all
necessary resources.</p>
<p>Move the extracted directory into the desired location, such as <code class="docutils literal notranslate"><span class="pre">/opt/</span></code>, and
you are ready to proceed with configuring the service.</p>


<span id="cache-service-embedded"></span><h3 id="embedded-mode">Embedded mode<a class="headerlink" href="#embedded-mode" title="Permalink to this headline">#</a></h3>
<p>The cache service can be setup to run within the coordinator process by
providing <a class="reference internal" href="#cache-service-config-properties"><span class="std std-ref">configuration for the cache service</span></a> on the coordinator in
<code class="docutils literal notranslate"><span class="pre">etc/cache.properties</span></code>. This mode of deployment does not require
installation of any additional packages or running a separate service.</p>
<p>Keep in mind that the coordinator JVM is used, and its JVM and logging
configuration is also used for the cache service.</p>



<span id="cache-service-configuration"></span><h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h2>
<p>Create an <code class="docutils literal notranslate"><span class="pre">etc</span></code> directory inside the installation directory to hold the
following configuration files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">etc/jvm.config</span></code> -  <a class="reference internal" href="#cache-service-jvm-config"><span class="std std-ref">command line configurations options for starting
the Java Virtual Machine (JVM)</span></a> used by the cache
service</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">etc/config.properties</span></code> - <a class="reference internal" href="#cache-service-config-properties"><span class="std std-ref">configuration for the cache
service</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">etc/log.properties</span></code> - optional <a class="reference internal" href="#cache-service-log-properties"><span class="std std-ref">logging
configuration</span></a>
for the cache service</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">etc/rules.json</span></code> -  <a class="reference internal" href="#cache-service-refresh-rules"><span class="std std-ref">JSON file</span></a>
specifying the source tables and target connector for the cache along with the
schedule for refreshing them</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">etc/type-mapping.json</span></code> - optional
<a class="reference internal" href="#cache-service-type-mapping-rules"><span class="std std-ref">JSON file</span></a> to specify type mapping
between source and target catalogs.</p></li>
</ul>

<span id="cache-service-jvm-config"></span><h3 id="jvm-configuration">JVM configuration<a class="headerlink" href="#jvm-configuration" title="Permalink to this headline">#</a></h3>
<p>The Java Virtual Machine (JVM) config file, <code class="docutils literal notranslate"><span class="pre">etc/jvm.config</span></code>, contains a list
of command line options used for launching the JVM running the cache service.
The format of the file is a list of options, one per line. These options are not
interpreted by the shell, so options containing spaces, or other special
characters, should not be quoted.</p>
<p>The following provides a good starting point for creating <code class="docutils literal notranslate"><span class="pre">etc/jvm.config</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-server
-Xmx512M
-XX:+ExitOnOutOfMemoryError
-XX:+HeapDumpOnOutOfMemoryError
</pre></div>
</div>
<p>An <code class="docutils literal notranslate"><span class="pre">OutOfMemoryError</span></code> typically leaves the JVM in an inconsistent state. The
above configuration causes the JVM to write a heap dump file for debugging, and
forcibly terminate the process when this occurs.</p>


<span id="cache-service-config-properties"></span><h3 id="configuration-properties">Configuration properties<a class="headerlink" href="#configuration-properties" title="Permalink to this headline">#</a></h3>
<p>The configuration properties file, <code class="docutils literal notranslate"><span class="pre">etc/config.properties</span></code>, contains the
configuration for the cache service, when deployed as a <a class="reference internal" href="#cache-service-standalone"><span class="std std-ref">standalone system</span></a>. Users of the <a class="reference internal" href="#cache-service-embedded"><span class="std std-ref">embedded mode</span></a> use a <code class="docutils literal notranslate"><span class="pre">etc/cache.properties</span></code> file on the coordinator
with the same properties.</p>
<p>The following is a minimal configuration for the service:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>service-database.user=alice
service-database.password=test123
service-database.jdbc-url=jdbc:mysql://mysql-server:3306/redirections
starburst.user=bob
starburst.jdbc-url=jdbc:trino://coordinator:8080
rules.file=etc/rules.json
</pre></div>
</div>
<p>The properties to configure the cache service are explained in detail in the
following sections.</p>
<table id="id1">
<caption><span class="caption-text">General cache service configuration properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">starburst.user</span></code></p></td>
<td><p>Username to connect to the SEP cluster for executing queries to refresh
the cached tables. This user must also be able to read the source tables
for any materialized views it refreshes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">starburst.password</span></code></p></td>
<td><p>Password to connect to the SEP cluster when password based
authentication is enabled on the SEP cluster.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">starburst.jdbc-url</span></code></p></td>
<td><p>JDBC URL of the SEP cluster used for executing queries to refresh the
cached tables. You can use <a class="reference internal" href="../installation/jdbc.html"><span class="doc">JDBC driver parameters</span></a> in the connection string to configure details of
the connection. For example, use <code class="docutils literal notranslate"><span class="pre">jdbc:trino://coordinator?SSL=true</span></code>
for a cluster secured with TLS.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cache-service.uri</span></code></p></td>
<td><p>URI of the cache service, including the hostname and port number.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rules.file</span></code></p></td>
<td><p>Path to the JSON file containing rules for identifying source tables and
target connector for caching. It also specifies a schedule for refreshing
cached tables.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rules.refresh-period</span></code></p></td>
<td><p>Frequency at which cache rules are refreshed from the <code class="docutils literal notranslate"><span class="pre">rules.file</span></code>.
Defaults to <code class="docutils literal notranslate"><span class="pre">1m</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max-table-import-threads</span></code></p></td>
<td><p>Maximum number of table import jobs that can be run in parallel. Defaults
to <code class="docutils literal notranslate"><span class="pre">20</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">refresh-interval</span></code></p></td>
<td><p>Frequency at which the cache service triggers refresh of cached tables
and checks for a need to refresh materialized views based on their refresh
interval and cron expression. Do not set this cache service interval to
large values that can cause defined materialized view refreshes to be
skipped. Defaults to <code class="docutils literal notranslate"><span class="pre">2m</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">refresh-initial-delay</span></code></p></td>
<td><p>Initial delay for startup of the refresh.
Defaults to <code class="docutils literal notranslate"><span class="pre">0s</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cleanup-interval</span></code></p></td>
<td><p>Frequency at which cache service triggers cleanup of expired tables in the
cache. Defaults to <code class="docutils literal notranslate"><span class="pre">5m</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cleanup-initial-delay</span></code></p></td>
<td><p>Initial delay for startup of the cleanup. Defaults to <code class="docutils literal notranslate"><span class="pre">0s</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>The following required properties allow you to configure the connectivity to the
service database used for storing redirections.</p>
<table id="id2">
<caption><span class="caption-text">Cache service database related configuration properties</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.user</span></code></p></td>
<td><p>Username used to connect to the database storing table redirections</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.password</span></code></p></td>
<td><p>Password used to connect to the database storing table redirections</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.jdbc-url</span></code></p></td>
<td><p>JDBC URL of the database storing table redirections, only MySQL,
PostgreSQL and Oracle URLs are supported</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.connection-pool.enabled</span></code></p></td>
<td><p>Enables pooling for connections to the service database. Defaults to
<code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.connection-pool.max-size</span></code></p></td>
<td><p>Maximum number of connections in the pool. Defaults to <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.connection-pool.idle-timeout</span></code></p></td>
<td><p>Maximum time an idle connection is kept in the pool. Defaults to <code class="docutils literal notranslate"><span class="pre">10m</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>The following optional properties allow you to configure the table import
configuration used when running queries on SEP to populate the cached views.</p>
<table id="id3">
<caption><span class="caption-text">Cache service cached view import properties</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 60%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unpartitioned.writer-count</span></code></p></td>
<td><p>Number of writers per task when writing unpartitioned table</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unpartitioned.scale-writers</span></code></p></td>
<td><p>Scale writers when writing unpartitioned table</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unpartitioned.writer-min-size</span></code></p></td>
<td><p>Target minimum size of writer output when writing unpartitioned table
with writers scaling</p></td>
<td><p>32MB</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.use-preferred-write-partitioning</span></code></p></td>
<td><p>Use table partitioning to parallelize writes between worker nodes when
writing to a partitioned table. This reduces import memory usage and
improves cached table file sizes.</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.preferred-write-partitioning-min-number-of-partitions</span></code></p></td>
<td><p>The minimum number of written partitions that is required to use connector
<code class="docutils literal notranslate"><span class="pre">preferred</span> <span class="pre">write</span> <span class="pre">partitioning</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.writer-count</span></code></p></td>
<td><p>Number of writers per task when writing partitioned table</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.scale-writers</span></code></p></td>
<td><p>Scale writers when writing partitioned table</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.writer-min-size</span></code></p></td>
<td><p>Target minimum size of writer output when writing partitioned table with
writers scaling</p></td>
<td><p>32MB</p></td>
</tr>
</tbody>
</table>
<p>The following optional properties allow configuring type mapping rules:</p>
<span id="cache-service-type-mapping"></span><table id="id4">
<caption><span class="caption-text">Cache service type mapping configuration</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type-mapping</span></code></p></td>
<td><p>Set the kind of type mapping to apply:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_MILLISECONDS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_MICROSECONDS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_NANOSECONDS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FILE</span></code></p></li>
</ul>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type-mapping.file</span></code></p></td>
<td><p>Path to the <a class="reference internal" href="#cache-service-type-mapping-rules"><span class="std std-ref">JSON file</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type-mapping.file.refresh-period</span></code></p></td>
<td><p>Frequency to use to refresh the type mapping rules from the
<code class="docutils literal notranslate"><span class="pre">type-mapping.file</span></code> file. Defaults to <code class="docutils literal notranslate"><span class="pre">1m</span></code>.</p></td>
</tr>
</tbody>
</table>


<h3 id="tls-and-authentication">TLS and authentication<a class="headerlink" href="#tls-and-authentication" title="Permalink to this headline">#</a></h3>
<p>File based password authentication can be configured for the cache service
by adding the following properties:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http-server.https.enabled=true
http-server.authentication.type=password
http-server.https.keystore.path=etc/auth/localhost.keystore
http-server.https.keystore.key=changeit
file.password-file=etc/auth/password.db
</pre></div>
</div>
<table id="id5">
<caption><span class="caption-text">HTTP and authentication properties</span><a class="headerlink" href="#id5" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 60%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.http.port</span></code></p></td>
<td><p>HTTP port for the cache service</p></td>
<td><p>8180</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.port</span></code></p></td>
<td><p>HTTPS port of the cache service</p></td>
<td><p>8543</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.enabled</span></code></p></td>
<td><p>Flag to activate HTTPS/TLS</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.authentication.type</span></code></p></td>
<td><p>Authentication type used for the cache service, use <code class="docutils literal notranslate"><span class="pre">password</span></code> for
password file based authentication</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.keystore.path</span></code></p></td>
<td><p>Path to the JKS keystore file used for TLS</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.keystore.key</span></code></p></td>
<td><p>Name of the key in the JKS keystore used for TLS</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">file.password-file</span></code></p></td>
<td><p>Path to the password file used with the <a class="reference internal" href="../security/password-file.html"><span class="doc">file authentication type</span></a></p></td>
<td></td>
</tr>
</tbody>
</table>


<span id="cache-service-log-properties"></span><h3 id="log-levels">Log Levels<a class="headerlink" href="#log-levels" title="Permalink to this headline">#</a></h3>
<p>The optional log levels file, <code class="docutils literal notranslate"><span class="pre">etc/log.properties</span></code>, allows setting the
minimum log level for named logger hierarchies. Every logger has a name,
which is typically the fully qualified name of the class that uses the logger.
Loggers have a hierarchy based on the dots in the name, like Java packages.
For example, consider the following log levels file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>com.starburstdata.cache=INFO
</pre></div>
</div>
<p>This sets the minimum level to <code class="docutils literal notranslate"><span class="pre">INFO</span></code> for both
<code class="docutils literal notranslate"><span class="pre">com.starburstdata.cache.db</span></code> and
<code class="docutils literal notranslate"><span class="pre">com.starburstdata.cache.rules</span></code>. The default minimum level is <code class="docutils literal notranslate"><span class="pre">INFO</span></code>,
thus the above example does not actually change anything. There are four levels:
<code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARN</span></code> and <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>.</p>



<span id="cache-service-refresh-rules"></span><h2 id="table-scan-refresh-and-redirection-rules">Table scan refresh and redirection rules<a class="headerlink" href="#table-scan-refresh-and-redirection-rules" title="Permalink to this headline">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The information in the section applies to table scan redirections only.
Materialized view management is described in our <a class="reference internal" href="../connector/starburst-hive.html#sb-hive-materialized-views"><span class="std std-ref">Hive connector
documentation</span></a>.</p>
</div>
<p>A JSON file, <code class="docutils literal notranslate"><span class="pre">rules.json</span></code>, is used to define rules to configure which tables
are cached by the service, the catalog where the tables are accessed from, and
the schedule for refreshing them. Cached tables can be refreshed either
<a class="reference internal" href="#cache-service-incremental-refreshes"><span class="std std-ref">incrementally</span></a>, or as a <a class="reference internal" href="#cache-service-full-refreshes"><span class="std std-ref">full
refresh</span></a>.</p>
<p>There are numerous properties available for use in creating rules discussed
in this section that apply either <a class="reference internal" href="#cache-service-global-rules"><span class="std std-ref">globally</span></a>,
or <a class="reference internal" href="#cache-service-rule-specific-properties"><span class="std std-ref">to a specific catalog</span></a>.</p>
<p>Catalogs can have more than one rule, but a rule can apply to only one catalog.
A rule can apply to one or more schemas and one or more tables within the named
catalog.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Any changes to the sources tables and their columns require updates to the
caching rules that use them. This includes rules that do not specify columns,
if any columns are added, removed or renamed in the source table. Such changes
require that the cache is expired with the <code class="docutils literal notranslate"><span class="pre">expire_redirection</span></code> command from
<a class="reference internal" href="cache-service-cli.html"><span class="doc">the cache service CLI</span></a> to create a new
redirection with the updated table definition.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To avoid queries on stale data, if a cached table can not be successfully
refreshed, it is not used for table scan redirection. Instead, the query
executes directly against the source data.</p>
</div>

<span id="cache-service-full-refreshes"></span><h3 id="full-refreshes">Full refreshes<a class="headerlink" href="#full-refreshes" title="Permalink to this headline">#</a></h3>
<p>By default, each refresh of a cached table results in all the rows from the
specified columns of the source table getting loaded into the cached table. This
is called a full refresh. For cached tables that are completely refreshed, the
cached table has a TTL (time to live) computed as the sum of the effective
maximum import duration and the duration defined by its effective grace period.
This allows any running query that started just before the cached table is
expired to finish gracefully. After the TTL expires, the cache service removes
older cached tables once the newer tables is available.</p>


<span id="cache-service-incremental-refreshes"></span><h3 id="incremental-refreshes">Incremental refreshes<a class="headerlink" href="#incremental-refreshes" title="Permalink to this headline">#</a></h3>
<p>When the source table is large and requires frequent refreshes, the refresh can
be configured to load data from the source table incrementally. This incremental
refresh approach is more performant, but not suitable for all source tables and
data modifications. Specifically modifications or deletions of of existing rows are ignored.</p>
<p>The initial refresh for an incrementally cached table is equivalent to a full
refresh. It is a bulk load of all the rows from the source table. For
incrementally cached tables, the cached table is not removed until the
corresponding redirection rule is removed or modified in <code class="docutils literal notranslate"><span class="pre">rules.json</span></code>.</p>
<p>Depending on the properties of the source table, incremental refresh can be
set up in one of two ways:</p>
<ul class="simple">
<li><p>By specifying a strictly incrementing column used to detect new rows.</p></li>
<li><p>By specifying a monotonically increasing column from the source table in
combination with a configured predicate expression.</p></li>
</ul>
<p>When using a strictly incrementing column from the source table to detect new
rows, the cache service copies only the rows from source table where the value
of <code class="docutils literal notranslate"><span class="pre">incrementalColumn</span></code> is greater than the values already present in the
cached table.</p>
<p>The following example demonstrates this configuration:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  "catalogName": "mysqlevents",
  "schemaName": "web",
  "tableName": "events",
  "refreshInterval": "2m",
  "gracePeriod": "15m",
  "incrementalColumn": "event_id"
},
</pre></div>
</div>
<p>Fact tables often contain columns that increase monotonically. Examples are
integer values for IDs, and date or datetime columns using the current time of
record creation. To use such a column for incremental refreshes, you must
specify a predicate expression as a filter condition. This filter is applied in
addition to the filter applied on <code class="docutils literal notranslate"><span class="pre">incrementalColumn</span></code> by the cache service to
avoid duplicating data and delay data collection until all updates to it are
presumed to be complete, as shown in the following example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  "catalogName": "postgresqlevents",
  "schemaName": "web",
  "tableName": "events",
  "refreshInterval": "2m",
  "gracePeriod": "15m",
  "incrementalColumn": "event_hour",
  "predicate": "event_hour &lt; (SELECT date_add('hour', -1, latest_event_hour) FROM (SELECT max(event_hour) AS latest_event_hour FROM postgresql.foo.events))"
}
</pre></div>
</div>
<p>In this example, the predicate is designed to create a one hour buffer after a
record is created during which the data is subject to updates. After that buffer
has expired, the data is loaded and all subsequent updates are ignored.</p>
<p>Finally, incremental refreshes can also be assigned a predicate that removes
data that is no longer needed. In the following example, events older than 31
days are removed:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  "catalogName": "mysqlevents",
  "schemaName": "web",
  "tableName": "events",
  "refreshInterval": "2m",
  "gracePeriod": "15m",
  "incrementalColumn": "event_id"
  "deletePredicate": "event_date &lt; date_add('day', -31, CURRENT_DATE)"
},
</pre></div>
</div>


<span id="cache-service-global-rules"></span><h3 id="global-properties">Global properties<a class="headerlink" href="#global-properties" title="Permalink to this headline">#</a></h3>
<p>The global properties listed in this section, when defined, are applied to all
rules that do not have a specific value set. For instance, if a rule does not
have a specific <code class="docutils literal notranslate"><span class="pre">gracePeriod</span></code> defined, the <code class="docutils literal notranslate"><span class="pre">defaultGracePeriod</span></code> value, if
set, is used. Some properties have a default value that is used when the
property does not exist in the <code class="docutils literal notranslate"><span class="pre">rules.json</span></code> file.</p>
<table id="id6">
<caption><span class="caption-text">Global rules properties</span><a class="headerlink" href="#id6" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>defaultGracePeriod</p></td>
<td><p>The duration which a previous version of a cached table is retained so
that any active queries using it may complete, once the latest import
is available. Can be overridden within a specific rule using
<code class="docutils literal notranslate"><span class="pre">gracePeriod</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">10m</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>defaultMaxImportDuration</p></td>
<td><p>The maximum allowed execution time for a query used to populate a cached
table. Can be overridden within a specific rule using
<code class="docutils literal notranslate"><span class="pre">maxImportDuration</span></code>. Must be smaller than the refresh interval, and
greater than or equal to 1m. Note that this field is required when using
<code class="docutils literal notranslate"><span class="pre">cronExpression</span></code> to define a refresh schedule.</p></td>
</tr>
<tr class="row-even"><td><p>defaultCacheCatalog</p></td>
<td><p>The default catalog that configures the data source where the cached
tables are stored. Can be overridden within a specific rule using <code class="docutils literal notranslate"><span class="pre">cacheCatalog</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>defaultCacheSchema</p></td>
<td><p>The default schema where cached tables are stored. You must ensure that
the schema exists and that the cache service user has permissions to read
and write to it. Can be overridden within a specific rule using
<code class="docutils literal notranslate"><span class="pre">cacheSchema</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>defaultUnpartitionedImportConfig</p></td>
<td><p>A collection of import properties applied by default when writing
unpartitioned cached tables named in the rule. Uses nested
<a class="reference internal" href="#cache-service-import-config-settings"><span class="std std-ref">importConfig settings</span></a>
properties.</p></td>
</tr>
<tr class="row-odd"><td><p>defaultPartitionedImportConfig</p></td>
<td><p>A collection of import properties applied by default when writing
partitioned cached tables named in the rule. Uses nested
<a class="reference internal" href="#cache-service-import-config-settings"><span class="std std-ref">importConfig settings</span></a>
properties.</p></td>
</tr>
<tr class="row-even"><td><p>cleanup-interval</p></td>
<td><p>Interval at which the cache service removes stale cached tables and runs
cleanup queries for rules where a <code class="docutils literal notranslate"><span class="pre">deletePredicate</span></code> is defined.
Defaults to <code class="docutils literal notranslate"><span class="pre">5m</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>The following example shows these properties used in a <code class="docutils literal notranslate"><span class="pre">rules.json</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  "defaultGracePeriod": "42m",
  "defaultMaxImportDuration": "1m",
  "defaultCacheCatalog": "default_cache_catalog",
  "defaultCacheSchema": "default_cache_schema",
  "defaultUnpartitionedImportConfig": {
    "usePreferredWritePartitioning": false,
    "preferredWritePartitioningMinNumberOfPartitions": 1,
    "writerCount": 128,
    "scaleWriters": false,
    "writerMinSize": "110MB"
  },
  "defaultPartitionedImportConfig": {
    "usePreferredWritePartitioning": true,
    "preferredWritePartitioningMinNumberOfPartitions": 40,
    "writerCount": 256,
    "scaleWriters": false,
    "writerMinSize": "52MB"
  }
}
</pre></div>
</div>


<span id="cache-service-rule-specific-properties"></span><h3 id="rule-specific-properties">Rule-specific properties<a class="headerlink" href="#rule-specific-properties" title="Permalink to this headline">#</a></h3>
<p>The rule-specific properties listed in this section override a similar available
global property. For instance, if a rule sets a specific <code class="docutils literal notranslate"><span class="pre">maxImportDuration</span></code>,
the global <code class="docutils literal notranslate"><span class="pre">defaultMaxImportDuration</span></code> value is ignored.</p>
<table id="id7">
<caption><span class="caption-text">Rule-specific properties</span><a class="headerlink" href="#id7" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>catalogName</p></td>
<td><p>The name of the source catalog. Required.</p></td>
</tr>
<tr class="row-odd"><td><p>cacheCatalog</p></td>
<td><p>The catalog that defines the data source where the cached tables are
stored.</p></td>
</tr>
<tr class="row-even"><td><p>cacheSchema</p></td>
<td><p>The schema where the cached tables are stored. You must ensure that the
schema exists and that the cache service user has permissions to read and
write to it.</p></td>
</tr>
<tr class="row-odd"><td><p>schemaName</p></td>
<td><p>The specific schema to use within a rule. You must specify this or
<code class="docutils literal notranslate"><span class="pre">schemaNameLike</span></code>, but not both.</p></td>
</tr>
<tr class="row-even"><td><p>schemaNameLike</p></td>
<td><p>SQL <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> expression to match multiple schema names. You must specify
this or <code class="docutils literal notranslate"><span class="pre">schemaName</span></code>, but not both.</p></td>
</tr>
<tr class="row-odd"><td><p>tableName</p></td>
<td><p>The specific table to use within a rule. You must specify this or
<code class="docutils literal notranslate"><span class="pre">tableNameLike</span></code>, but not both.</p></td>
</tr>
<tr class="row-even"><td><p>tableNameLike</p></td>
<td><p>SQL <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> expression to match multiple table names. You must specify
this or <code class="docutils literal notranslate"><span class="pre">tableName</span></code>, but not both.</p></td>
</tr>
<tr class="row-odd"><td><p>refreshInterval</p></td>
<td><p>The time duration between refreshes. Cannot be used with
<code class="docutils literal notranslate"><span class="pre">cronExpression</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>cronExpression</p></td>
<td><p>A <a class="reference external" href="https://en.wikipedia.org/wiki/Cron">cron expression</a> defining the
refresh schedule. Cannot be used with <code class="docutils literal notranslate"><span class="pre">refreshInterval</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>gracePeriod</p></td>
<td><p>The duration which a previous version of a cached table is retained so
that any active queries using it may complete. Overrides the global
<code class="docutils literal notranslate"><span class="pre">defaultGracePeriod</span></code> if set.</p></td>
</tr>
<tr class="row-even"><td><p>maxImportDuration</p></td>
<td><p>Overrides the global <code class="docutils literal notranslate"><span class="pre">defaultMaxImportDuration</span></code> if set. Must be smaller
than the refresh interval, and greater than or equal to 1m. Note that this
field is required when using <code class="docutils literal notranslate"><span class="pre">cronExpression</span></code> to define a refresh
schedule.</p></td>
</tr>
<tr class="row-odd"><td><p>columns</p></td>
<td><p>Comma-separated list of columns to be imported. If not specified, all
available columns are imported. Note that redirections can only be used
when all columns required by a given table scan are present.</p></td>
</tr>
<tr class="row-even"><td><p>partitionColumns</p></td>
<td><p>Comma-separated list of columns to use for partitioning.</p></td>
</tr>
<tr class="row-odd"><td><p>bucketColumns</p></td>
<td><p>Comma-separated list specifying the columns to be bucketed. Requires the
use of <code class="docutils literal notranslate"><span class="pre">bucketCount</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>bucketCount</p></td>
<td><p>Defines the number of buckets for data in the specified columns.</p></td>
</tr>
<tr class="row-odd"><td><p>sortColumns</p></td>
<td><p>Comma separated list specifying the columns to sort on. Requires the use
of <code class="docutils literal notranslate"><span class="pre">bucketColumns</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>incrementalColumn</p></td>
<td><p>Required for incremental refresh; if not specified, a full refresh is
performed. This column is used by the service to apply a
<code class="docutils literal notranslate"><span class="pre">incrementalColumn</span> <span class="pre">&gt;</span> <span class="pre">(SELECT</span> <span class="pre">max(incrementalColumn)</span> <span class="pre">FROM</span> <span class="pre">cachedTable)</span></code>
filter when loading data incrementally from the source table. This
facilitates loading only newer data from the source table instead of the
entire table in each refresh iteration.</p></td>
</tr>
<tr class="row-odd"><td><p>predicate</p></td>
<td><p>SQL expression used in conjunction with <code class="docutils literal notranslate"><span class="pre">incrementalColumn</span></code> to delay
loading data until all presumed updates are complete.</p></td>
</tr>
<tr class="row-even"><td><p>deletePredicate</p></td>
<td><p>Optionally specifies a predicate clause to clean up old data from the
cached table. It is used by the cache service to run a
<code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">FROM</span> <span class="pre">cachedTable</span> <span class="pre">WHERE</span> <span class="pre">&lt;deletePredicate&gt;</span></code> query at every
<code class="docutils literal notranslate"><span class="pre">cleanup-interval</span></code>. Available where connector used to store the cached
table supports <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">FROM</span></code> statements.</p></td>
</tr>
<tr class="row-odd"><td><p>importConfig</p></td>
<td><p>Overrides the default import config (partitioned or unpartitioned,
depending on the use of <code class="docutils literal notranslate"><span class="pre">partitionColumns</span></code>) when loading the cached
tables. If there is no <code class="docutils literal notranslate"><span class="pre">incrementalColumn</span></code> specified, only importConfig
applies. If <code class="docutils literal notranslate"><span class="pre">incrementalColumn</span></code> is specified, then importConfig
applies for the first bulk import, then subsequent incremental imports
use <code class="docutils literal notranslate"><span class="pre">incrementalImportConfig</span></code>. Uses the nested fields described in
<a class="reference internal" href="#cache-service-import-config-settings"><span class="std std-ref">importConfig settings</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>incrementalImportConfig</p></td>
<td><p>Overrides the default import config (partitioned or unpartitioned,
depending on the use of <code class="docutils literal notranslate"><span class="pre">partitionColumns</span></code>) when loading the cached
tables during incremental imports. Uses the nested fields described in
<a class="reference internal" href="#cache-service-import-config-settings"><span class="std std-ref">importConfig settings</span></a>.</p></td>
</tr>
</tbody>
</table>
<p>The following example shows rules defined for several catalogs, using a variety
of options:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  "catalogName": "maketing_campaigns",
  "schemaNameLike": "apac",
  "tableNameLike": "organic",
  "refreshInterval": "60m"
  "gracePeriod": "15m",
  "incrementalColumn": "event_id",
  "deletePredicate": "event_date &lt; date_add('day', -31, CURRENT_DATE)"
},
{
  "catalogName": "sales",
  "schemaNameLike": "contacts",
  "tableNameLike": "leads",
  "cronExpression": "* * * 2 *"
  "gracePeriod": "15m",
  "incrementalColumn": "event_hour",
  "predicate": "event_hour &lt; (SELECT date_add('hour', -1, latest_event_hour) FROM (SELECT max(event_hour) AS latest_event_hour FROM postgresql.foo.events))"
},
{
  "catalogName": "telemetry",
  "schemaName": "allproducts",
  "tableName":  "events",
  "columns": [
    "pingtime",
    "avgMem",
    "apiCalls"
  ],
  "partitionColumns": [
    "pingtime"
  ],
  "bucketColumns": [
    "avgMem"
  ],
  "bucketCount": 5,
  "sortColumns": [
    "apiCalls"
  ],
  "refreshInterval": "123h",
  "gracePeriod": "80m",
  "maxImportDuration": "67h",
  "cacheCatalog": "ctp_table_catalog",
  "cacheSchema": "ctp_table_schema",
  "importConfig": {
    "usePreferredWritePartitioning": true,
    "preferredWritePartitioningMinNumberOfPartitions": 4,
    "writerCount": 32,
    "scaleWriters": false,
    "writerMinSize": "100MB"
  },
  "incrementalImportConfig": {
    "usePreferredWritePartitioning": false,
    "preferredWritePartitioningMinNumberOfPartitions": 1,
    "writerCount": 4,
    "scaleWriters": false,
    "writerMinSize": "100MB"
  }
}
</pre></div>
</div>


<span id="cache-service-import-config-settings"></span><h3 id="importconfig-properties"><code class="docutils literal notranslate"><span class="pre">importConfig</span></code> properties<a class="headerlink" href="#importconfig-properties" title="Permalink to this headline">#</a></h3>
<p>The global properties for <code class="docutils literal notranslate"><span class="pre">defaultPartitionedImportConfig</span></code> and
<code class="docutils literal notranslate"><span class="pre">defaultUnpartitionedImportConfig</span></code>, as well as the rule-specific
<code class="docutils literal notranslate"><span class="pre">importConfig</span></code> and <code class="docutils literal notranslate"><span class="pre">incrementalImportConfig</span></code> properties use the following
sub-properties:</p>
<table id="id8">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">importConfig</span></code> properties</span><a class="headerlink" href="#id8" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 40%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>usePreferredWritePartitioning</p></td>
<td><p>Implements
<a class="reference internal" href="properties-write-partitioning.html"><span class="doc">use-preferred-write-partitioning</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>preferredWritePartitioningMinNumberOfPartitions</p></td>
<td><p>Implements
<a class="reference internal" href="properties-write-partitioning.html"><span class="doc">preferred-write-partitioning-min-number-of-partitions</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>writerCount</p></td>
<td><p>Implements <a class="reference internal" href="properties-task.html"><span class="doc">task.writer-count</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>scaleWriters</p></td>
<td><p>Implements <a class="reference internal" href="properties-writer-scaling.html"><span class="doc">scale-writers</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>writerMinSize</p></td>
<td><p>Implements <a class="reference internal" href="properties-writer-scaling.html"><span class="doc">writer-min-size</span></a>.</p></td>
</tr>
</tbody>
</table>



<span id="cache-service-type-mapping-rules"></span><h2 id="type-mapping-rules">Type mapping rules<a class="headerlink" href="#type-mapping-rules" title="Permalink to this headline">#</a></h2>
<p>Type mapping overcomes missing type support in target storage catalogs for cache
service-manged <a class="reference internal" href="table-scan-redirection.html"><span class="doc">table scan redirections</span></a> and
<a class="reference internal" href="../connector/starburst-hive.html#sb-hive-materialized-views"><span class="std std-ref">materialized views</span></a> with Hive as the target
catalog. It allows your users to create materialized views without the need to
perform <a class="reference internal" href="../functions/conversion.html"><span class="doc">data type casting</span></a>, and allows data
engineers to create cached table projections in target catalogs where there is
not a one-to-one type mapping. Type mapping uses definitions in a JSON file,
<code class="docutils literal notranslate"><span class="pre">type-mapping.json</span></code>, to define type casting rules used when the target catalog
is created or updated.</p>
<p>Mappings are key-value pairs as <code class="docutils literal notranslate"><span class="pre">source:</span> <span class="pre">target</span></code>. The following example shows
how to construct type mapping rules for the target catalog, <code class="docutils literal notranslate"><span class="pre">myhivesalesdata</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"rules"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"myhivesalesdata"</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">"timestamp(0)"</span><span class="p">:</span> <span class="s2">"timestamp(3)"</span><span class="p">,</span>
      <span class="nt">"timestamp(1)"</span><span class="p">:</span> <span class="s2">"timestamp(3)"</span><span class="p">,</span>
      <span class="nt">"timestamp(2)"</span><span class="p">:</span> <span class="s2">"timestamp(3)"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each target catalog has a separate entry in the JSON file. The Trino name of any
type that is supported by the source catalog can be used as a key in the type
map. Values must be Trino types supported by the target catalog.</p>
<p>Type casting is applied to regular columns, partition columns, and the column
used for incremental update.</p>

<h3 id="type-mapping-behavior">Type mapping behavior<a class="headerlink" href="#type-mapping-behavior" title="Permalink to this headline">#</a></h3>
<p>Columns can only be cast based on their type. It is impossible to cast one
column of a given type without casting all columns of that same type.</p>
<p>There are pre-configured type mappings <code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_MILLISECONDS</span></code>,
<code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_MICROSECONDS</span></code> and <code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_NANOSECONDS</span></code> that
can only be set using cache properties, not via the JSON type mapping. These
mappings extend the precision of all timestamp-related types, they never
truncate data, and ignore the target catalog name.</p>
<p>Some mappings, like <code class="docutils literal notranslate"><span class="pre">integer</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">varchar</span></code>, can change the semantics of the
<code class="docutils literal notranslate"><span class="pre">max()</span></code> function used for calculating the contents of an incremental update.
For example <code class="docutils literal notranslate"><span class="pre">"-1"</span> <span class="pre">&gt;</span> <span class="pre">"7"</span></code> because string lengths are compared first, so in
incremental update the row with <code class="docutils literal notranslate"><span class="pre">"-1"</span></code> is added even if the table already
contains data up to <code class="docutils literal notranslate"><span class="pre">"7"</span></code>.</p>
<p>Using timestamp columns for partitioning is strongly discouraged. Timestamp
partitions are silently changed to <code class="docutils literal notranslate"><span class="pre">timestamp(3)</span></code> while being written. This
behavior can result in  loss of precision for some columns. Additionally, it can
lead to a huge amount of partitions, which negatively impacts performance.</p>



<span id="running-cache-service"></span><h2 id="running-the-cache-service">Running the cache service<a class="headerlink" href="#running-the-cache-service" title="Permalink to this headline">#</a></h2>
<p>The installation directory contains the launcher script in <code class="docutils literal notranslate"><span class="pre">bin/launcher</span></code>. It
service can be started as a daemon by running the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bin/launcher start
</pre></div>
</div>
<p>Alternatively, it can be run in the foreground, with the logs and other output
written to stdout/stderr. Both streams should be captured if using a supervision
system like <code class="docutils literal notranslate"><span class="pre">daemontools</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bin/launcher run
</pre></div>
</div>
<p>Run the launcher with <code class="docutils literal notranslate"><span class="pre">--help</span></code> to see the supported commands and command line
options. In particular, the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option is very useful for debugging
the installation.</p>
<p>The launcher configures default values for the configuration directory <code class="docutils literal notranslate"><span class="pre">etc</span></code>,
configuration files, the data directory <code class="docutils literal notranslate"><span class="pre">var</span></code>, and log files in the data
directory. You can change these values to adjust your usage to any requirements,
such as using a directory outside the installation directory, specific mount
points or locations, and even using other file names.</p>
<p>After starting the cache service, you can find log files in the <code class="docutils literal notranslate"><span class="pre">log</span></code>
directory inside the data directory <code class="docutils literal notranslate"><span class="pre">var</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">launcher.log</span></code>:
This log is created by the launcher and is connected to the stdout and stderr
streams of the server. It contains a few log messages that occur while the
server logging is being initialized, and any errors or diagnostics produced by
the JVM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">server.log</span></code>:
This is the main log file used by the service. It typically contains the
relevant information if the server fails during initialization. It is
automatically rotated and compressed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">http-request.log</span></code>:
This is the HTTP request log which contains every HTTP request received by the
server. It is automatically rotated and compressed.</p></li>
</ul>


<h2 id="jmx-metrics">JMX metrics<a class="headerlink" href="#jmx-metrics" title="Permalink to this headline">#</a></h2>
<p>Metrics about table import are reported in the JMX table
<code class="docutils literal notranslate"><span class="pre">jmx.current."com.starburstdata.cache:name=TableImportService"</span></code>.</p>
<p>Metrics about cached table cleanup are reported in the JMX table
<code class="docutils literal notranslate"><span class="pre">jmx.current."com.starburstdata.cache:name=CleanupService"</span></code>.</p>
<p>Metrics about redirections requests on the web service resources are reported in
the JMX table
<code class="docutils literal notranslate"><span class="pre">jmx.current."com.starburstdata.cache.resource:name=RedirectionsResource"</span></code>.</p>
<p>Metrics about table import and expiration requests on the web service resource are reported in
the JMX table
<code class="docutils literal notranslate"><span class="pre">jmx.current."com.starburstdata.cache.resource:name=CacheResource"</span></code>.</p>




          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="table-scan-redirection.html" title="Table scan redirection"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Table scan redirection </span>
              </div>
            </a>
          
          
            <a href="cache-service-cli.html" title="Cache service CLI"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Cache service CLI </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 364-e.2 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2021<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>