

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Kafka connector &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Kafka connector tutorial" href="kafka-tutorial.html" />
    <link rel="prev" title="Iceberg connector" href="iceberg.html" />

  
   



<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/connector/kafka.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#connector/kafka" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 374-e STS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 374-e STS</span>
          <span class="md-header-nav__topic"> Kafka connector </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (370-e)" href="/370-e/">Latest LTS (370-e)</a>
      
          <a title="364-e LTS" href="/364-e/">364-e LTS</a>
      
          <a title="360-e LTS" href="/360-e/">360-e LTS</a>
      
          <a title="356-e LTS" href="/356-e/">356-e LTS</a>
      
          <a title="350-e LTS" href="/350-e/">350-e LTS</a>
      
          <a title="Latest STS (374-e)" href="/374-e/">Latest STS (374-e)</a>
      
          <a title="373-e STS" href="/373-e/">373-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../connector.html" class="md-tabs__link">Connectors</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 374-e STS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="starburst-connectors.html" class="md-nav__link">Starburst connectors overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-bigquery.html" class="md-nav__link">Starburst BigQuery connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-db2.html" class="md-nav__link">Starburst IBM DB2 connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-dynamodb.html" class="md-nav__link">Starburst DynamoDB connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-delta-lake.html" class="md-nav__link">Starburst Delta Lake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-generic-jdbc.html" class="md-nav__link">Starburst Generic JDBC connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-greenplum.html" class="md-nav__link">Starburst Greenplum connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive.html" class="md-nav__link">Starburst Hive connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-ibm-cos.html" class="md-nav__link">- IBM Cloud Object Storage support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-mapr.html" class="md-nav__link">- MapR Hive support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-cdp.html" class="md-nav__link">- Cloudera Data Platform support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-minio.html" class="md-nav__link">- MinIO storage support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-iceberg.html" class="md-nav__link">Starburst Iceberg connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-kafka.html" class="md-nav__link">Starburst Kafka connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-mysql.html" class="md-nav__link">Starburst MySQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-netezza.html" class="md-nav__link">Starburst Netezza connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-oracle.html" class="md-nav__link">Starburst Oracle connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-postgresql.html" class="md-nav__link">Starburst PostgreSQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-redshift.html" class="md-nav__link">Starburst Redshift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-sap-hana.html" class="md-nav__link">Starburst SAP HANA connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-salesforce.html" class="md-nav__link">Starburst Salesforce connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-memsql.html" class="md-nav__link">Starburst SingleStore (MemSQL) connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-snowflake.html" class="md-nav__link">Starburst Snowflake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-splunk.html" class="md-nav__link">Starburst Splunk connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-sqlserver.html" class="md-nav__link">Starburst SQL Server connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-stargate.html" class="md-nav__link">Starburst Stargate</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-synapse.html" class="md-nav__link">Starburst Synapse connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-teradata.html" class="md-nav__link">Starburst Teradata connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-vertica.html" class="md-nav__link">Starburst Vertica connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="accumulo.html" class="md-nav__link">Accumulo connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="atop.html" class="md-nav__link">Atop connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="blackhole.html" class="md-nav__link">Black Hole connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cassandra.html" class="md-nav__link">Cassandra connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="clickhouse.html" class="md-nav__link">ClickHouse connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="delta-lake.html" class="md-nav__link">Delta Lake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="druid.html" class="md-nav__link">Druid connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="elasticsearch.html" class="md-nav__link">Elasticsearch connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="googlesheets.html" class="md-nav__link">Google Sheets connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jmx.html" class="md-nav__link">JMX connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kinesis.html" class="md-nav__link">Kinesis connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kudu.html" class="md-nav__link">Kudu connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="localfile.html" class="md-nav__link">Local file connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="memory.html" class="md-nav__link">Memory connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mongodb.html" class="md-nav__link">MongoDB connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="phoenix.html" class="md-nav__link">Phoenix connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="pinot.html" class="md-nav__link">Pinot connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="prometheus.html" class="md-nav__link">Prometheus connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="redis.html" class="md-nav__link">Redis connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="system.html" class="md-nav__link">System connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="thrift.html" class="md-nav__link">Thrift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tpcds.html" class="md-nav__link">TPCDS connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tpch.html" class="md-nav__link">TPCH connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="bigquery.html" class="md-nav__link">BigQuery connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive.html" class="md-nav__link">Hive connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="iceberg.html" class="md-nav__link">Iceberg connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Kafka connector </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Kafka connector</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-kafka--page-root" class="md-nav__link">Kafka connector</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a>
        </li>
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#configuration" class="md-nav__link">Configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#multiple-kafka-clusters" class="md-nav__link">Multiple Kafka clusters</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#kafka-default-schema" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.default-schema</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-nodes" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.nodes</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-buffer-size" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.buffer-size</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-timestamp-upper-bound-force-push-down-enabled" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.timestamp-upper-bound-force-push-down-enabled</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-hide-internal-columns" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.hide-internal-columns</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-security-protocol" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.security-protocol</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-keystore-location" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.location</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-keystore-password" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.password</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-keystore-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.type</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-truststore-location" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.location</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-truststore-password" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.password</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-truststore-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.type</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-key-password" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.key.password</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-endpoint-identification-algorithm" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.endpoint-identification-algorithm</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#internal-columns" class="md-nav__link">Internal columns</a>
        </li>
        <li class="md-nav__item"><a href="#table-schema-and-schema-registry-usage" class="md-nav__link">Table schema and schema registry usage</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#file-table-description-supplier" class="md-nav__link">File table description supplier</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#kafka-table-names" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.table-names</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-table-description-dir" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.table-description-dir</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#table-definition-files" class="md-nav__link">Table definition files</a>
        </li>
        <li class="md-nav__item"><a href="#key-and-message-in-kafka" class="md-nav__link">Key and message in Kafka</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#confluent-table-description-supplier" class="md-nav__link">Confluent table description supplier</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#confluent-subject-to-table-name-mapping" class="md-nav__link">Confluent subject to table name mapping</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#sql-support" class="md-nav__link">SQL support</a>
        </li>
        <li class="md-nav__item"><a href="#kafka-inserts" class="md-nav__link">Kafka inserts</a>
        </li>
        <li class="md-nav__item"><a href="#row-encoding" class="md-nav__link">Row encoding</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#raw-encoder" class="md-nav__link">Raw encoder</a>
        </li>
        <li class="md-nav__item"><a href="#csv-encoder" class="md-nav__link">CSV encoder</a>
        </li>
        <li class="md-nav__item"><a href="#json-encoder" class="md-nav__link">JSON encoder</a>
        </li>
        <li class="md-nav__item"><a href="#avro-encoder" class="md-nav__link">Avro encoder</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#row-decoding" class="md-nav__link">Row decoding</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#raw-decoder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">raw</span></code> decoder</a>
        </li>
        <li class="md-nav__item"><a href="#csv-decoder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">csv</span></code> decoder</a>
        </li>
        <li class="md-nav__item"><a href="#json-decoder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">json</span></code> decoder</a>
        </li>
        <li class="md-nav__item"><a href="#default-field-decoder" class="md-nav__link">Default field decoder</a>
        </li>
        <li class="md-nav__item"><a href="#date-and-time-decoders" class="md-nav__link">Date and time decoders</a>
        </li>
        <li class="md-nav__item"><a href="#avro-decoder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">avro</span></code> decoder</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#avro-schema-evolution" class="md-nav__link">Avro schema evolution</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="kafka-tutorial.html" class="md-nav__link">Tutorial</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mysql.html" class="md-nav__link">MySQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="oracle.html" class="md-nav__link">Oracle connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="postgresql.html" class="md-nav__link">PostgreSQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="redshift.html" class="md-nav__link">Redshift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="memsql.html" class="md-nav__link">SingleStore (MemSQL) connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sqlserver.html" class="md-nav__link">SQL Server connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hbase.html" class="md-nav__link"> </a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">374-e STS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-kafka--page-root" class="md-nav__link">Kafka connector</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a>
        </li>
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#configuration" class="md-nav__link">Configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#multiple-kafka-clusters" class="md-nav__link">Multiple Kafka clusters</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#kafka-default-schema" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.default-schema</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-nodes" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.nodes</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-buffer-size" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.buffer-size</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-timestamp-upper-bound-force-push-down-enabled" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.timestamp-upper-bound-force-push-down-enabled</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-hide-internal-columns" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.hide-internal-columns</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-security-protocol" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.security-protocol</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-keystore-location" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.location</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-keystore-password" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.password</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-keystore-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.type</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-truststore-location" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.location</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-truststore-password" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.password</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-truststore-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.type</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-key-password" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.key.password</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-ssl-endpoint-identification-algorithm" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.endpoint-identification-algorithm</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#internal-columns" class="md-nav__link">Internal columns</a>
        </li>
        <li class="md-nav__item"><a href="#table-schema-and-schema-registry-usage" class="md-nav__link">Table schema and schema registry usage</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#file-table-description-supplier" class="md-nav__link">File table description supplier</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#kafka-table-names" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.table-names</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#kafka-table-description-dir" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">kafka.table-description-dir</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#table-definition-files" class="md-nav__link">Table definition files</a>
        </li>
        <li class="md-nav__item"><a href="#key-and-message-in-kafka" class="md-nav__link">Key and message in Kafka</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#confluent-table-description-supplier" class="md-nav__link">Confluent table description supplier</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#confluent-subject-to-table-name-mapping" class="md-nav__link">Confluent subject to table name mapping</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#sql-support" class="md-nav__link">SQL support</a>
        </li>
        <li class="md-nav__item"><a href="#kafka-inserts" class="md-nav__link">Kafka inserts</a>
        </li>
        <li class="md-nav__item"><a href="#row-encoding" class="md-nav__link">Row encoding</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#raw-encoder" class="md-nav__link">Raw encoder</a>
        </li>
        <li class="md-nav__item"><a href="#csv-encoder" class="md-nav__link">CSV encoder</a>
        </li>
        <li class="md-nav__item"><a href="#json-encoder" class="md-nav__link">JSON encoder</a>
        </li>
        <li class="md-nav__item"><a href="#avro-encoder" class="md-nav__link">Avro encoder</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#row-decoding" class="md-nav__link">Row decoding</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#raw-decoder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">raw</span></code> decoder</a>
        </li>
        <li class="md-nav__item"><a href="#csv-decoder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">csv</span></code> decoder</a>
        </li>
        <li class="md-nav__item"><a href="#json-decoder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">json</span></code> decoder</a>
        </li>
        <li class="md-nav__item"><a href="#default-field-decoder" class="md-nav__link">Default field decoder</a>
        </li>
        <li class="md-nav__item"><a href="#date-and-time-decoders" class="md-nav__link">Date and time decoders</a>
        </li>
        <li class="md-nav__item"><a href="#avro-decoder" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">avro</span></code> decoder</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#avro-schema-evolution" class="md-nav__link">Avro schema evolution</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="connector-kafka--page-root">Kafka connector<a class="headerlink" href="#connector-kafka--page-root" title="Permalink to this headline">#</a></h1>
<div class="toctree-wrapper compound">
</div>

<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p>This connector allows the use of <a class="reference external" href="https://kafka.apache.org/">Apache Kafka</a>
topics as tables in Trino. Each message is presented as a row in Trino.</p>
<p>Topics can be live. Rows appear as data arrives, and disappear as
segments get dropped. This can result in strange behavior if accessing the
same table multiple times in a single query (e.g., performing a self join).</p>
<p>The connector reads and writes message data from Kafka topics in parallel across
workers to achieve a significant performance gain. The size of data sets for this
parallelization is configurable and can therefore be adapted to your specific
needs.</p>
<p>See the <a class="reference internal" href="kafka-tutorial.html"><span class="doc">Kafka connector tutorial</span></a>.</p>


<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">#</a></h2>
<p>To connect to Kafka, you need:</p>
<ul class="simple">
<li><p>Kafka broker version 0.10.0 or higher.</p></li>
<li><p>Network access from the Trino coordinator and workers to the Kafka nodes.
Port 9092 is the default port.</p></li>
</ul>


<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h2>
<p>To configure the Kafka connector, create a catalog properties file
<code class="docutils literal notranslate"><span class="pre">etc/catalog/kafka.properties</span></code> with the following contents,
replacing the properties as appropriate:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>connector.name=kafka
kafka.table-names=table1,table2
kafka.nodes=host1:port,host2:port
</pre></div>
</div>

<h3 id="multiple-kafka-clusters">Multiple Kafka clusters<a class="headerlink" href="#multiple-kafka-clusters" title="Permalink to this headline">#</a></h3>
<p>You can have as many catalogs as you need, so if you have additional
Kafka clusters, simply add another properties file to <code class="docutils literal notranslate"><span class="pre">etc/catalog</span></code>
with a different name (making sure it ends in <code class="docutils literal notranslate"><span class="pre">.properties</span></code>). For
example, if you name the property file <code class="docutils literal notranslate"><span class="pre">sales.properties</span></code>, Trino
creates a catalog named <code class="docutils literal notranslate"><span class="pre">sales</span></code> using the configured connector.</p>



<h2 id="configuration-properties">Configuration properties<a class="headerlink" href="#configuration-properties" title="Permalink to this headline">#</a></h2>
<p>The following configuration properties are available:</p>
<table>
<colgroup>
<col style="width: 36%"/>
<col style="width: 64%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.default-schema</span></code></p></td>
<td><p>Default schema name for tables</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.nodes</span></code></p></td>
<td><p>List of nodes in the Kafka cluster</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.buffer-size</span></code></p></td>
<td><p>Kafka read buffer size</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.hide-internal-columns</span></code></p></td>
<td><p>Controls whether internal columns are part of the table schema or not</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.messages-per-split</span></code></p></td>
<td><p>Number of messages that are processed by each Trino split, defaults to 100000</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.timestamp-upper-bound-force-push-down-enabled</span></code></p></td>
<td><p>Controls if upper bound timestamp push down is enabled for topics using <code class="docutils literal notranslate"><span class="pre">CreateTime</span></code> mode</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.security-protocol</span></code></p></td>
<td><p>Security protocol for connection to Kafka cluster, defaults to <code class="docutils literal notranslate"><span class="pre">PLAINTEXT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.location</span></code></p></td>
<td><p>Location of the keystore file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.password</span></code></p></td>
<td><p>Password for the keystore file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.type</span></code></p></td>
<td><p>File format of the keystore file, defaults to <code class="docutils literal notranslate"><span class="pre">JKS</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.location</span></code></p></td>
<td><p>Location of the truststore file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.password</span></code></p></td>
<td><p>Password for the truststore file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.type</span></code></p></td>
<td><p>File format of the truststore file, defaults to <code class="docutils literal notranslate"><span class="pre">JKS</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.ssl.key.password</span></code></p></td>
<td><p>Password for the private key in the keystore file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.ssl.endpoint-identification-algorithm</span></code></p></td>
<td><p>Endpoint identification algorithm used by clients to validate server host name, defaults to <code class="docutils literal notranslate"><span class="pre">https</span></code></p></td>
</tr>
</tbody>
</table>
<p>In addition, you need to configure <a class="reference internal" href="#kafka-table-schema-registry"><span class="std std-ref">table schema and schema registry usage</span></a> with the relevant properties.</p>

<h3 id="kafka-default-schema"><code class="docutils literal notranslate"><span class="pre">kafka.default-schema</span></code><a class="headerlink" href="#kafka-default-schema" title="Permalink to this headline">#</a></h3>
<p>Defines the schema which contains all tables that were defined without
a qualifying schema name.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>


<h3 id="kafka-nodes"><code class="docutils literal notranslate"><span class="pre">kafka.nodes</span></code><a class="headerlink" href="#kafka-nodes" title="Permalink to this headline">#</a></h3>
<p>A comma separated list of <code class="docutils literal notranslate"><span class="pre">hostname:port</span></code> pairs for the Kafka data nodes.</p>
<p>This property is required; there is no default and at least one node must be defined.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Trino must still be able to connect to all nodes of the cluster
even if only a subset is specified here as segment files may be
located only on a specific node.</p>
</div>


<h3 id="kafka-buffer-size"><code class="docutils literal notranslate"><span class="pre">kafka.buffer-size</span></code><a class="headerlink" href="#kafka-buffer-size" title="Permalink to this headline">#</a></h3>
<p>Size of the internal data buffer for reading data from Kafka. The data
buffer must be able to hold at least one message and ideally can hold many
messages. There is one data buffer allocated per worker and data node.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">64kb</span></code>.</p>


<h3 id="kafka-timestamp-upper-bound-force-push-down-enabled"><code class="docutils literal notranslate"><span class="pre">kafka.timestamp-upper-bound-force-push-down-enabled</span></code><a class="headerlink" href="#kafka-timestamp-upper-bound-force-push-down-enabled" title="Permalink to this headline">#</a></h3>
<p>The upper bound predicate on <code class="docutils literal notranslate"><span class="pre">_timestamp</span></code> column
is pushed down only for topics using <code class="docutils literal notranslate"><span class="pre">LogAppendTime</span></code> mode.</p>
<p>For topics using <code class="docutils literal notranslate"><span class="pre">CreateTime</span></code> mode, upper bound push down must be explicitly
allowed via <code class="docutils literal notranslate"><span class="pre">kafka.timestamp-upper-bound-force-push-down-enabled</span></code> config property
or <code class="docutils literal notranslate"><span class="pre">timestamp_upper_bound_force_push_down_enabled</span></code> session property.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>


<h3 id="kafka-hide-internal-columns"><code class="docutils literal notranslate"><span class="pre">kafka.hide-internal-columns</span></code><a class="headerlink" href="#kafka-hide-internal-columns" title="Permalink to this headline">#</a></h3>
<p>In addition to the data columns defined in a table description file, the
connector maintains a number of additional columns for each table. If
these columns are hidden, they can still be used in queries but do not
show up in <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table-name&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code>.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>


<h3 id="kafka-security-protocol"><code class="docutils literal notranslate"><span class="pre">kafka.security-protocol</span></code><a class="headerlink" href="#kafka-security-protocol" title="Permalink to this headline">#</a></h3>
<p>Protocol used to communicate with brokers.
Valid values are: PLAINTEXT, SSL.</p>
<p>This property is optional; default is <code class="docutils literal notranslate"><span class="pre">PLAINTEXT</span></code>.</p>


<h3 id="kafka-ssl-keystore-location"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.location</span></code><a class="headerlink" href="#kafka-ssl-keystore-location" title="Permalink to this headline">#</a></h3>
<p>Location of the keystore file used for connection to Kafka cluster.</p>
<p>This property is optional.</p>


<h3 id="kafka-ssl-keystore-password"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.password</span></code><a class="headerlink" href="#kafka-ssl-keystore-password" title="Permalink to this headline">#</a></h3>
<p>Password for the keystore file used for connection to Kafka cluster.</p>
<p>This property is optional, but required when <code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.location</span></code> is given.</p>


<h3 id="kafka-ssl-keystore-type"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.keystore.type</span></code><a class="headerlink" href="#kafka-ssl-keystore-type" title="Permalink to this headline">#</a></h3>
<p>File format of the keystore file.
Valid values are: JKS, PKCS12.</p>
<p>This property is optional; default is <code class="docutils literal notranslate"><span class="pre">JKS</span></code>.</p>


<h3 id="kafka-ssl-truststore-location"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.location</span></code><a class="headerlink" href="#kafka-ssl-truststore-location" title="Permalink to this headline">#</a></h3>
<p>Location of the truststore file used for connection to Kafka cluster.</p>
<p>This property is optional.</p>


<h3 id="kafka-ssl-truststore-password"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.password</span></code><a class="headerlink" href="#kafka-ssl-truststore-password" title="Permalink to this headline">#</a></h3>
<p>Password for the truststore file used for connection to Kafka cluster.</p>
<p>This property is optional, but required when <code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.location</span></code> is given.</p>


<h3 id="kafka-ssl-truststore-type"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.truststore.type</span></code><a class="headerlink" href="#kafka-ssl-truststore-type" title="Permalink to this headline">#</a></h3>
<p>File format of the truststore file.
Valid values are: JKS, PKCS12.</p>
<p>This property is optional; default is <code class="docutils literal notranslate"><span class="pre">JKS</span></code>.</p>


<h3 id="kafka-ssl-key-password"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.key.password</span></code><a class="headerlink" href="#kafka-ssl-key-password" title="Permalink to this headline">#</a></h3>
<p>Password for the private key in the keystore file used for connection to Kafka cluster.</p>
<p>This property is optional. This is required for clients only if two-way authentication is configured i.e. <code class="docutils literal notranslate"><span class="pre">ssl.client.auth=required</span></code>.</p>


<h3 id="kafka-ssl-endpoint-identification-algorithm"><code class="docutils literal notranslate"><span class="pre">kafka.ssl.endpoint-identification-algorithm</span></code><a class="headerlink" href="#kafka-ssl-endpoint-identification-algorithm" title="Permalink to this headline">#</a></h3>
<p>The endpoint identification algorithm used by clients to validate server host name for connection to Kafka cluster.
Kafka uses <code class="docutils literal notranslate"><span class="pre">https</span></code> as default. Use <code class="docutils literal notranslate"><span class="pre">disabled</span></code> to disable server host name validation.</p>
<p>This property is optional; default is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</p>



<h2 id="internal-columns">Internal columns<a class="headerlink" href="#internal-columns" title="Permalink to this headline">#</a></h2>
<p>For each defined table, the connector maintains the following columns:</p>
<table>
<colgroup>
<col style="width: 10%"/>
<col style="width: 13%"/>
<col style="width: 77%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_partition_id</span></code></p></td>
<td><p>BIGINT</p></td>
<td><p>ID of the Kafka partition which contains this row.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_partition_offset</span></code></p></td>
<td><p>BIGINT</p></td>
<td><p>Offset within the Kafka partition for this row.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_segment_start</span></code></p></td>
<td><p>BIGINT</p></td>
<td><p>Lowest offset in the segment (inclusive) which contains this row. This offset is partition specific.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_segment_end</span></code></p></td>
<td><p>BIGINT</p></td>
<td><p>Highest offset in the segment (exclusive) which contains this row. The offset is partition specific. This is the same value as <code class="docutils literal notranslate"><span class="pre">_segment_start</span></code> of the next segment (if it exists).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_segment_count</span></code></p></td>
<td><p>BIGINT</p></td>
<td><p>Running count for the current row within the segment. For an uncompacted topic, <code class="docutils literal notranslate"><span class="pre">_segment_start</span> <span class="pre">+</span> <span class="pre">_segment_count</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">_partition_offset</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_message_corrupt</span></code></p></td>
<td><p>BOOLEAN</p></td>
<td><p>True if the decoder could not decode the message for this row. When true, data columns mapped from the message should be treated as invalid.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_message</span></code></p></td>
<td><p>VARCHAR</p></td>
<td><p>Message bytes as an UTF-8 encoded string. This is only useful for a text topic.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_message_length</span></code></p></td>
<td><p>BIGINT</p></td>
<td><p>Number of bytes in the message.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_headers</span></code></p></td>
<td><p>map(VARCHAR, array(VARBINARY))</p></td>
<td><p>Headers of the message where values with the same key are grouped as array.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_key_corrupt</span></code></p></td>
<td><p>BOOLEAN</p></td>
<td><p>True if the key decoder could not decode the key for this row. When true, data columns mapped from the key should be treated as invalid.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_key</span></code></p></td>
<td><p>VARCHAR</p></td>
<td><p>Key bytes as an UTF-8 encoded string. This is only useful for textual keys.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_key_length</span></code></p></td>
<td><p>BIGINT</p></td>
<td><p>Number of bytes in the key.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_timestamp</span></code></p></td>
<td><p>TIMESTAMP</p></td>
<td><p>Message timestamp.</p></td>
</tr>
</tbody>
</table>
<p>For tables without a table definition file, the <code class="docutils literal notranslate"><span class="pre">_key_corrupt</span></code> and
<code class="docutils literal notranslate"><span class="pre">_message_corrupt</span></code> columns will always be <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>


<span id="kafka-table-schema-registry"></span><h2 id="table-schema-and-schema-registry-usage">Table schema and schema registry usage<a class="headerlink" href="#table-schema-and-schema-registry-usage" title="Permalink to this headline">#</a></h2>
<p>The table schema for the messages can be supplied to the connector with a
configuration file or a schema registry. It also provides a mechanism for the
connector to discover tables.</p>
<p>You have to configure the supplier with the <code class="docutils literal notranslate"><span class="pre">kafka.table-description-supplier</span></code>
property, setting it to <code class="docutils literal notranslate"><span class="pre">FILE</span></code> or <code class="docutils literal notranslate"><span class="pre">CONFLUENT</span></code>. Each table description
supplier has a separate set of configuration properties.</p>
<p>Refer to the following subsections for more detail. The <code class="docutils literal notranslate"><span class="pre">FILE</span></code> table
description supplier is the default and the value is case insensitive.</p>

<h3 id="file-table-description-supplier">File table description supplier<a class="headerlink" href="#file-table-description-supplier" title="Permalink to this headline">#</a></h3>
<p>In order to use the file based table description supplier, the
<code class="docutils literal notranslate"><span class="pre">kafka.table-description-supplier</span></code> must be set to <code class="docutils literal notranslate"><span class="pre">FILE</span></code> which is the
default.</p>
<p>In addition, you must set <code class="docutils literal notranslate"><span class="pre">kafka.table-names</span></code> and
<code class="docutils literal notranslate"><span class="pre">kafka.table-description-dir</span></code> as described in the following sections:</p>

<h4 id="kafka-table-names"><code class="docutils literal notranslate"><span class="pre">kafka.table-names</span></code><a class="headerlink" href="#kafka-table-names" title="Permalink to this headline">#</a></h4>
<p>Comma-separated list of all tables provided by this catalog. A table name can be
unqualified (simple name), and is then placed into the default schema (see
below), or it can be qualified with a schema name
(<code class="docutils literal notranslate"><span class="pre">&lt;schema-name&gt;.&lt;table-name&gt;</span></code>).</p>
<p>For each table defined here, a table description file (see below) may exist. If
no table description file exists, the table name is used as the topic name on
Kafka and no data columns are mapped into the table. The table still contains
all internal columns (see below).</p>
<p>This property is required; there is no default and at least one table must be
defined.</p>


<h4 id="kafka-table-description-dir"><code class="docutils literal notranslate"><span class="pre">kafka.table-description-dir</span></code><a class="headerlink" href="#kafka-table-description-dir" title="Permalink to this headline">#</a></h4>
<p>References a folder within Trino deployment that holds one or more JSON files
(must end with <code class="docutils literal notranslate"><span class="pre">.json</span></code>) which contain table description files.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">etc/kafka</span></code>.</p>


<h4 id="table-definition-files">Table definition files<a class="headerlink" href="#table-definition-files" title="Permalink to this headline">#</a></h4>
<p>Kafka maintains topics only as byte messages and leaves it to producers
and consumers to define how a message should be interpreted. For Trino,
this data must be mapped into columns to allow queries against the data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For textual topics that contain JSON data, it is entirely possible to not
use any table definition files, but instead use the Trino
<a class="reference internal" href="../functions/json.html"><span class="doc">JSON functions and operators</span></a> to parse the <code class="docutils literal notranslate"><span class="pre">_message</span></code> column which contains
the bytes mapped into an UTF-8 string. This is, however, pretty
cumbersome and makes it difficult to write SQL queries. This only works
when reading data.</p>
</div>
<p>A table definition file consists of a JSON definition for a table. The
name of the file can be arbitrary but must end in <code class="docutils literal notranslate"><span class="pre">.json</span></code>. Place the
file in the directory configured with the <code class="docutils literal notranslate"><span class="pre">kafka.table-description-dir</span></code>
property. The table definition file must be accessible from all Trino nodes.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    "tableName": ...,
    "schemaName": ...,
    "topicName": ...,
    "key": {
        "dataFormat": ...,
        "fields": [
            ...
        ]
    },
    "message": {
        "dataFormat": ...,
        "fields": [
            ...
       ]
    }
}
</pre></div>
</div>
<table>
<colgroup>
<col style="width: 13%"/>
<col style="width: 8%"/>
<col style="width: 12%"/>
<col style="width: 68%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tableName</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Trino table name defined by this file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">schemaName</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Schema which will contain the table. If omitted, the default schema name is used.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topicName</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Kafka topic that is mapped.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">key</span></code></p></td>
<td><p>optional</p></td>
<td><p>JSON object</p></td>
<td><p>Field definitions for data columns mapped to the message key.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">message</span></code></p></td>
<td><p>optional</p></td>
<td><p>JSON object</p></td>
<td><p>Field definitions for data columns mapped to the message itself.</p></td>
</tr>
</tbody>
</table>


<h4 id="key-and-message-in-kafka">Key and message in Kafka<a class="headerlink" href="#key-and-message-in-kafka" title="Permalink to this headline">#</a></h4>
<p>Starting with Kafka 0.8, each message in a topic can have an optional key.
A table definition file contains sections for both key and message to map
the data onto table columns.</p>
<p>Each of the <code class="docutils literal notranslate"><span class="pre">key</span></code> and <code class="docutils literal notranslate"><span class="pre">message</span></code> fields in the table definition is a
JSON object that must contain two fields:</p>
<table>
<colgroup>
<col style="width: 12%"/>
<col style="width: 7%"/>
<col style="width: 11%"/>
<col style="width: 71%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Selects the decoder for this group of fields.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fields</span></code></p></td>
<td><p>required</p></td>
<td><p>JSON array</p></td>
<td><p>A list of field definitions. Each field definition creates a new column in the Trino table.</p></td>
</tr>
</tbody>
</table>
<p>Each field definition is a JSON object:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
    "name": ...,
    "type": ...,
    "dataFormat": ...,
    "mapping": ...,
    "formatHint": ...,
    "hidden": ...,
    "comment": ...
}
</pre></div>
</div>
<table>
<colgroup>
<col style="width: 10%"/>
<col style="width: 6%"/>
<col style="width: 6%"/>
<col style="width: 78%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Name of the column in the Trino table.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Trino type of the column.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Selects the column decoder for this field. Defaults to the default decoder for this row data format and column type.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dataSchema</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>The path or URL where the Avro schema resides. Used only for Avro decoder.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Mapping information for the column. This is decoder specific, see below.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">formatHint</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Sets a column specific format hint to the column decoder.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hidden</span></code></p></td>
<td><p>optional</p></td>
<td><p>boolean</p></td>
<td><p>Hides the column from <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table</span> <span class="pre">name&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Adds a column comment which is shown with <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table</span> <span class="pre">name&gt;</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>There is no limit on field descriptions for either key or message.</p>



<h3 id="confluent-table-description-supplier">Confluent table description supplier<a class="headerlink" href="#confluent-table-description-supplier" title="Permalink to this headline">#</a></h3>
<p>The Confluent table description supplier uses the <a class="reference external" href="https://docs.confluent.io/1.0/schema-registry/docs/intro.html">Confluent Schema Registry</a> to discover
table definitions. Set <code class="docutils literal notranslate"><span class="pre">kafka.table-description-supplier</span></code> to <code class="docutils literal notranslate"><span class="pre">CONFLUENT</span></code> to
use it and configure the additional properties in the following table.</p>
<p>The benefits of using the schema registry is that new tables can be defined
without a cluster restart, schema updates are detected and there is no need to
define tables manually.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Inserts are not supported and the only data format supported is AVRO.</p>
</div>
<table id="id1">
<caption><span class="caption-text">Confluent table description supplier properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 55%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.confluent-schema-registry-url</span></code></p></td>
<td><p>Comma-separated list of URL addresses for the Confluent schema registry.
For example, <code class="docutils literal notranslate"><span class="pre">http://schema-registry-1.example.org:8081,http://schema-registry-2.example.org:8081</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.confluent-schema-registry-client-cache-size</span></code></p></td>
<td><p>The maximum number of subjects that can be stored in the local cache. The
cache stores the schemas locally by subjectId, and is provided by the
Confluent <code class="docutils literal notranslate"><span class="pre">CachingSchemaRegistry</span></code> client.</p></td>
<td><p>1000</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.empty-field-strategy</span></code></p></td>
<td><p>Avro allows empty struct fields but this is not allowed in Trino. There
are three strategies for handling empty struct fields:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IGNORE</span></code>, ignore structs with no fields. This propagate to parents.
For example an array of structs with no fields is ignored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FAIL</span></code>, fail the query if a struct with no fields is defined.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DUMMY</span></code>, add a dummy boolean field called <code class="docutils literal notranslate"><span class="pre">dummy</span></code> which is null.
This may be desired if the struct represents a marker field.</p></li>
</ul>
</div></blockquote>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">IGNORE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kafka.confluent-subjects-cache-refresh-interval</span></code></p></td>
<td><p>The interval used for refreshing the list of subjects and the definition
of the schema for the subject in the subjects cache</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1s</span></code></p></td>
</tr>
</tbody>
</table>

<h4 id="confluent-subject-to-table-name-mapping">Confluent subject to table name mapping<a class="headerlink" href="#confluent-subject-to-table-name-mapping" title="Permalink to this headline">#</a></h4>
<p>The <a class="reference external" href="https://docs.confluent.io/platform/current/schema-registry/serdes-develop/index.html#sr-schemas-subject-name-strategy">subject naming strategy</a>
determines how a subject is resolved from the table name.</p>
<p>The default strategy is the <code class="docutils literal notranslate"><span class="pre">TopicNameStrategy</span></code> where the key subject is
defined as <code class="docutils literal notranslate"><span class="pre">&lt;topic-name&gt;-key</span></code> and the value subject is defined as
<code class="docutils literal notranslate"><span class="pre">&lt;topic-name&gt;-value</span></code>. If other strategies are used there is no way to
determine the subject name beforehand so it must be specified manually in the
table name.</p>
<p>To manually specify the key and value subjects just append to the table name,
for example: <code class="docutils literal notranslate"><span class="pre">&lt;topic</span> <span class="pre">name&gt;&amp;key-subject=&lt;key</span> <span class="pre">subject&gt;&amp;value-subject=&lt;value</span>
<span class="pre">subject</span></code>. Both the <code class="docutils literal notranslate"><span class="pre">key-subject</span></code> and <code class="docutils literal notranslate"><span class="pre">value-subject</span></code> parameters are
optional. If either is not specified then the default <code class="docutils literal notranslate"><span class="pre">TopicNameStrategy</span></code> is
used to resolve the subject name via the topic name. Note that a case
insensitive match must be done, as identifiers cannot contain upper case
characters.</p>




<span id="kafka-sql-support"></span><h2 id="sql-support">SQL support<a class="headerlink" href="#sql-support" title="Permalink to this headline">#</a></h2>
<p>The connector provides read and write access to data and metadata in Trino
tables populated by Kafka topics. See <a class="reference internal" href="#kafka-row-decoding"><span class="std std-ref">Row decoding</span></a> for more
information.</p>
<p>In addition to the <a class="reference internal" href="../language/sql-support.html#sql-globally-available"><span class="std std-ref">globally available</span></a>
and <a class="reference internal" href="../language/sql-support.html#sql-read-operations"><span class="std std-ref">read operation</span></a> statements, the connector
supports the following features:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT</span></a>, encoded to a specified data format. See also
<a class="reference internal" href="#kafka-sql-inserts"><span class="std std-ref">Kafka inserts</span></a>.</p></li>
</ul>


<span id="kafka-sql-inserts"></span><h2 id="kafka-inserts">Kafka inserts<a class="headerlink" href="#kafka-inserts" title="Permalink to this headline">#</a></h2>
<p>The Kafka connector supports the use of <a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT</span></a> statements to write
data to a Kafka topic. Table column data is mapped to Kafka messages as defined
in the <a class="reference external" href="#table-definition-files">table definition file</a>. There are
four supported data formats for key and message encoding:</p>
<ul class="simple">
<li><p><a class="reference external" href="#raw-encoder">raw format</a></p></li>
<li><p><a class="reference external" href="#csv-encoder">CSV format</a></p></li>
<li><p><a class="reference external" href="#json-encoder">JSON format</a></p></li>
<li><p><a class="reference external" href="#avro-encoder">Avro format</a></p></li>
</ul>
<p>These data formats each have an encoder that maps column values into bytes to be
sent to a Kafka topic.</p>
<p>Trino supports at-least-once delivery for Kafka producers. This means that
messages are guaranteed to be sent to Kafka topics at least once. If a producer
acknowledgement times out or if the producer receives an error, it might retry
sending the message. This could result in a duplicate message being sent to the
Kafka topic.</p>
<p>The Kafka connector does not allow the user to define which partition will be
used as the target for a message. If a message includes a key, the producer will
use a hash algorithm to choose the target partition for the message. The same
key will always be assigned the same partition.</p>


<h2 id="row-encoding">Row encoding<a class="headerlink" href="#row-encoding" title="Permalink to this headline">#</a></h2>
<p>Encoding is required to allow writing data and defines how table columns in
Trino map to Kafka keys and message data.</p>
<p>The Kafka connector contains the following encoders:</p>
<ul class="simple">
<li><p><a class="reference external" href="#raw-encoder">raw encoder</a> - Table columns are mapped to a Kafka
message as raw bytes</p></li>
<li><p><a class="reference external" href="#csv-encoder">CSV encoder</a> - Kafka message is formatted as comma
separated value</p></li>
<li><p><a class="reference external" href="#json-encoder">JSON encoder</a> - Table columns are mapped to JSON
fields</p></li>
<li><p><a class="reference external" href="#avro-encoder">Avro encoder</a> - Table columns are mapped to Avro
fields based on an Avro schema</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A <a class="reference external" href="#table-definition-files">table definition file</a> must be defined
for the encoder to work.</p>
</div>

<h3 id="raw-encoder">Raw encoder<a class="headerlink" href="#raw-encoder" title="Permalink to this headline">#</a></h3>
<p>The raw encoder formats the table columns as raw bytes using the mapping
information specified in the
<a class="reference external" href="#table-definition-files">table definition file</a>.</p>
<p>The following field attributes are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> - Specifies the width of the column data type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - Trino data type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code> - start and optional end position of bytes to convert
(specified as <code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">start:end</span></code>)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> attribute selects the number of bytes converted.
If absent, <code class="docutils literal notranslate"><span class="pre">BYTE</span></code> is assumed. All values are signed.</p>
<p>Supported values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code> - one byte</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SHORT</span></code> - two bytes (big-endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INT</span></code> - four bytes (big-endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LONG</span></code> - eight bytes (big-endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> - four bytes (IEEE 754 format, big-endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> - eight bytes (IEEE 754 format, big-endian)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute defines the Trino data type.</p>
<p>Different values of <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> are supported, depending on the Trino data
type:</p>
<table>
<colgroup>
<col style="width: 49%"/>
<col style="width: 51%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino data type</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">SHORT</span></code>, <code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">LONG</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">SHORT</span></code>, <code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">SHORT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code>, <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">SHORT</span></code>, <code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">LONG</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> / <code class="docutils literal notranslate"><span class="pre">VARCHAR(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code></p></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">mapping</span></code> attribute specifies the range of bytes in a key or
message used for encoding.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both a start and end position must be defined for <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> types.
Otherwise, there is no way to know how many bytes the message contains. The
raw format mapping information is static and cannot be dynamically changed
to fit the variable width of some Trino data types.</p>
</div>
<p>If only a start position is given:</p>
<ul class="simple">
<li><p>For fixed width types, the appropriate number of bytes are used for the
specified <code class="docutils literal notranslate"><span class="pre">dateFormat</span></code> (see above).</p></li>
</ul>
<p>If both a start and end position are given, then:</p>
<ul class="simple">
<li><p>For fixed width types, the size must be equal to number of bytes used by
specified <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code>.</p></li>
<li><p>All bytes between start (inclusive) and end (exclusive) are used.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All mappings must include a start position for encoding to work.</p>
</div>
<p>The encoding for numeric data types (<code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>,
<code class="docutils literal notranslate"><span class="pre">TINYINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code>) is straightforward. All numeric types use
big-endian. Floating point types use IEEE 754 format.</p>
<p>Example raw field definition in a <a class="reference external" href="#table-definition-files">table definition file</a>
for a Kafka message:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"tableName"</span><span class="p">:</span> <span class="s2">"your-table-name"</span><span class="p">,</span>
  <span class="nt">"schemaName"</span><span class="p">:</span> <span class="s2">"your-schema-name"</span><span class="p">,</span>
  <span class="nt">"topicName"</span><span class="p">:</span> <span class="s2">"your-topic-name"</span><span class="p">,</span>
  <span class="nt">"key"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"..."</span> <span class="p">},</span>
  <span class="nt">"message"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"raw"</span><span class="p">,</span>
    <span class="nt">"fields"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field1"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"BIGINT"</span><span class="p">,</span>
        <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"LONG"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"0"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field2"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"INTEGER"</span><span class="p">,</span>
        <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"INT"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"8"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field3"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"SMALLINT"</span><span class="p">,</span>
        <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"LONG"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"12"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field4"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"VARCHAR(6)"</span><span class="p">,</span>
        <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"BYTE"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"20:26"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Columns should be defined in the same order they are mapped. There can be no
gaps or overlaps between column mappings. The width of the column as defined by
the column mapping must be equivalent to the width of the <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> for all
types except for variable width types.</p>
<p>Example insert query for the above table definition:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">example_raw_table</span> <span class="p">(</span><span class="n">field1</span><span class="p">,</span> <span class="n">field2</span><span class="p">,</span> <span class="n">field3</span><span class="p">,</span> <span class="n">field4</span><span class="p">)</span>
  <span class="k">VALUES</span> <span class="p">(</span><span class="mi">123456789</span><span class="p">,</span> <span class="mi">123456</span><span class="p">,</span> <span class="mi">1234</span><span class="p">,</span> <span class="s1">'abcdef'</span><span class="p">);</span>
</pre></div>
</div>
<p>When inserting variable width types, the value must be exactly equal to the
width defined in the table definition file. If the inserted value is longer it
gets truncated, resulting in data loss. If the inserted value is shorter the
decoder will not be able to properly read the value because there is no defined
padding character. Due to these constraints the encoder fails if the width of
the inserted value is not equal to the mapping width.</p>


<h3 id="csv-encoder">CSV encoder<a class="headerlink" href="#csv-encoder" title="Permalink to this headline">#</a></h3>
<p>The CSV encoder formats the values for each row as a line of
comma-separated-values (CSV) using UTF-8 encoding. The CSV line is formatted
with a comma , as the column delimiter.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">mapping</span></code> attributes must be defined for each field:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - Trino data type</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code> - The integer index of the column in the CSV line (the first
column is 0, the second is 1, and so on)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> and <code class="docutils literal notranslate"><span class="pre">formatHint</span></code> are not supported and must be omitted.</p>
<p>The following Trino data types are supported by the CSV encoder:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> / <code class="docutils literal notranslate"><span class="pre">VARCHAR(x)</span></code></p></li>
</ul>
<p>Column values are converted to strings before they are formatted as a CSV line.</p>
<p>Example CSV field definition in a <a class="reference external" href="#table-definition-files">table definition file</a>
for a Kafka message:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"tableName"</span><span class="p">:</span> <span class="s2">"your-table-name"</span><span class="p">,</span>
  <span class="nt">"schemaName"</span><span class="p">:</span> <span class="s2">"your-schema-name"</span><span class="p">,</span>
  <span class="nt">"topicName"</span><span class="p">:</span> <span class="s2">"your-topic-name"</span><span class="p">,</span>
  <span class="nt">"key"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"..."</span> <span class="p">},</span>
  <span class="nt">"message"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"csv"</span><span class="p">,</span>
    <span class="nt">"fields"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field1"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"BIGINT"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"0"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field2"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"VARCHAR"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"1"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field3"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"BOOLEAN"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"2"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example insert query for the above table definition:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">example_csv_table</span> <span class="p">(</span><span class="n">field1</span><span class="p">,</span> <span class="n">field2</span><span class="p">,</span> <span class="n">field3</span><span class="p">)</span>
  <span class="k">VALUES</span> <span class="p">(</span><span class="mi">123456789</span><span class="p">,</span> <span class="s1">'example text'</span><span class="p">,</span> <span class="k">TRUE</span><span class="p">);</span>
</pre></div>
</div>


<h3 id="json-encoder">JSON encoder<a class="headerlink" href="#json-encoder" title="Permalink to this headline">#</a></h3>
<p>The JSON encoder maps table columns to JSON fields defined in the
<a class="reference external" href="#table-definition-files">table definition file</a> according to
<span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc4627.html"><strong>RFC 4627</strong></a>.</p>
<p>For fields, the following attributes are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - Trino type of column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code> - slash-separated list of field names to select a field from the
JSON object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> - name of formatter (required for temporal types)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formatHint</span></code> - pattern to format temporal data (only use with
<code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code> formatter)</p></li>
</ul>
<p>The following Trino data types are supported by the JSON encoder:</p>
<table>
<colgroup>
<col style="width: 100%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino data types</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TIME</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>The following <code class="docutils literal notranslate"><span class="pre">dataFormats</span></code> are available for temporal data:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iso8601</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rfc2822</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code> - formats temporal data according to
<a class="reference external" href="https://www.joda.org/joda-time/key_format.html">Joda Time</a>
pattern given by <code class="docutils literal notranslate"><span class="pre">formatHint</span></code> field</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">milliseconds-since-epoch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seconds-since-epoch</span></code></p></li>
</ul>
<p>All temporal data in Kafka supports milliseconds precision</p>
<p>The following table defines which temporal data types are supported by
<code class="docutils literal notranslate"><span class="pre">dataFormats</span></code>:</p>
<table>
<colgroup>
<col style="width: 32%"/>
<col style="width: 68%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino data type</p></th>
<th class="head"><p>Decoding rules</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code>, <code class="docutils literal notranslate"><span class="pre">milliseconds-since-epoch</span></code>,
<code class="docutils literal notranslate"><span class="pre">seconds-since-epoch</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code>, <code class="docutils literal notranslate"><span class="pre">rfc2822</span></code>,
<code class="docutils literal notranslate"><span class="pre">milliseconds-since-epoch</span></code>, <code class="docutils literal notranslate"><span class="pre">seconds-since-epoch</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code>, <code class="docutils literal notranslate"><span class="pre">rfc2822</span></code>, <code class="docutils literal notranslate"><span class="pre">milliseconds-since-epoch</span></code>,
<code class="docutils literal notranslate"><span class="pre">seconds-since-epoch</span></code></p></td>
</tr>
</tbody>
</table>
<p>Example JSON field definition in a <a class="reference external" href="#table-definition-files">table definition file</a>
for a Kafka message:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"tableName"</span><span class="p">:</span> <span class="s2">"your-table-name"</span><span class="p">,</span>
  <span class="nt">"schemaName"</span><span class="p">:</span> <span class="s2">"your-schema-name"</span><span class="p">,</span>
  <span class="nt">"topicName"</span><span class="p">:</span> <span class="s2">"your-topic-name"</span><span class="p">,</span>
  <span class="nt">"key"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"..."</span> <span class="p">},</span>
  <span class="nt">"message"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"json"</span><span class="p">,</span>
    <span class="nt">"fields"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field1"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"BIGINT"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"field1"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field2"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"VARCHAR"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"field2"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field3"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"TIMESTAMP"</span><span class="p">,</span>
        <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"custom-date-time"</span><span class="p">,</span>
        <span class="nt">"formatHint"</span><span class="p">:</span> <span class="s2">"yyyy-dd-MM HH:mm:ss.SSS"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"field3"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example insert query for the above table definition:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">example_json_table</span> <span class="p">(</span><span class="n">field1</span><span class="p">,</span> <span class="n">field2</span><span class="p">,</span> <span class="n">field3</span><span class="p">)</span>
  <span class="k">VALUES</span> <span class="p">(</span><span class="mi">123456789</span><span class="p">,</span> <span class="s1">'example text'</span><span class="p">,</span> <span class="k">TIMESTAMP</span> <span class="s1">'2020-07-15 01:02:03.456'</span><span class="p">);</span>
</pre></div>
</div>


<h3 id="avro-encoder">Avro encoder<a class="headerlink" href="#avro-encoder" title="Permalink to this headline">#</a></h3>
<p>The Avro encoder serializes rows to Avro records as defined by the
<a class="reference external" href="https://avro.apache.org/docs/current/">Avro schema</a>.
Trino does not support schema-less Avro encoding.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Avro schema is encoded with the table column values in each Kafka message</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">dataSchema</span></code> must be defined in the table definition file to use the Avro
encoder. It points to the location of the Avro schema file for the key or message</p>
<p>Avro schema files can be retrieved via HTTP or HTTPS from remote server with the
syntax:</p>
<p><code class="docutils literal notranslate"><span class="pre">"dataSchema":</span> <span class="pre">"http://example.org/schema/avro_data.avsc"</span></code></p>
<p>Local files need to be available on all Trino nodes and use an absolute path in
the syntax, for example:</p>
<p><code class="docutils literal notranslate"><span class="pre">"dataSchema":</span> <span class="pre">"/usr/local/schema/avro_data.avsc"</span></code></p>
<p>The following field attributes are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - Name of the column in the Trino table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - Trino type of column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code> - slash-separated list of field names to select a field from the
Avro schema. If the field specified in <code class="docutils literal notranslate"><span class="pre">mapping</span></code> does not exist
in the original Avro schema, then a write operation fails.</p></li>
</ul>
<p>The following table lists supported Trino types, which can be used in <code class="docutils literal notranslate"><span class="pre">type</span></code>
for the equivalent Avro field type.</p>
<table>
<colgroup>
<col style="width: 49%"/>
<col style="width: 51%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino data type</p></th>
<th class="head"><p>Avro data type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">LONG</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code>, <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> / <code class="docutils literal notranslate"><span class="pre">VARCHAR(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">STRING</span></code></p></td>
</tr>
</tbody>
</table>
<p>Example Avro field definition in a <a class="reference external" href="#table-definition-files">table definition file</a>
for a Kafka message:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"tableName"</span><span class="p">:</span> <span class="s2">"your-table-name"</span><span class="p">,</span>
  <span class="nt">"schemaName"</span><span class="p">:</span> <span class="s2">"your-schema-name"</span><span class="p">,</span>
  <span class="nt">"topicName"</span><span class="p">:</span> <span class="s2">"your-topic-name"</span><span class="p">,</span>
  <span class="nt">"key"</span><span class="p">:</span> <span class="p">{</span> <span class="nt">"..."</span> <span class="p">},</span>
  <span class="nt">"message"</span><span class="p">:</span>
  <span class="p">{</span>
    <span class="nt">"dataFormat"</span><span class="p">:</span> <span class="s2">"avro"</span><span class="p">,</span>
    <span class="nt">"dataSchema"</span><span class="p">:</span> <span class="s2">"/avro_message_schema.avsc"</span><span class="p">,</span>
    <span class="nt">"fields"</span><span class="p">:</span>
    <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field1"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"BIGINT"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"field1"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field2"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"VARCHAR"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"field2"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field3"</span><span class="p">,</span>
        <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"BOOLEAN"</span><span class="p">,</span>
        <span class="nt">"mapping"</span><span class="p">:</span> <span class="s2">"field3"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example Avro schema definition for the above table definition:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"type"</span> <span class="p">:</span> <span class="s2">"record"</span><span class="p">,</span>
  <span class="nt">"name"</span> <span class="p">:</span> <span class="s2">"example_avro_message"</span><span class="p">,</span>
  <span class="nt">"namespace"</span> <span class="p">:</span> <span class="s2">"io.trino.plugin.kafka"</span><span class="p">,</span>
  <span class="nt">"fields"</span> <span class="p">:</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span><span class="s2">"field1"</span><span class="p">,</span>
      <span class="nt">"type"</span><span class="p">:[</span><span class="s2">"null"</span><span class="p">,</span> <span class="s2">"long"</span><span class="p">],</span>
      <span class="nt">"default"</span><span class="p">:</span> <span class="kc">null</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"field2"</span><span class="p">,</span>
      <span class="nt">"type"</span><span class="p">:[</span><span class="s2">"null"</span><span class="p">,</span> <span class="s2">"string"</span><span class="p">],</span>
      <span class="nt">"default"</span><span class="p">:</span> <span class="kc">null</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span><span class="s2">"field3"</span><span class="p">,</span>
      <span class="nt">"type"</span><span class="p">:[</span><span class="s2">"null"</span><span class="p">,</span> <span class="s2">"boolean"</span><span class="p">],</span>
      <span class="nt">"default"</span><span class="p">:</span> <span class="kc">null</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">"doc:"</span> <span class="p">:</span> <span class="s2">"A basic avro schema"</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example insert query for the above table definition:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">example_avro_table</span> <span class="p">(</span><span class="n">field1</span><span class="p">,</span> <span class="n">field2</span><span class="p">,</span> <span class="n">field3</span><span class="p">)</span>
  <span class="k">VALUES</span> <span class="p">(</span><span class="mi">123456789</span><span class="p">,</span> <span class="s1">'example text'</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>
</pre></div>
</div>



<span id="kafka-row-decoding"></span><h2 id="row-decoding">Row decoding<a class="headerlink" href="#row-decoding" title="Permalink to this headline">#</a></h2>
<p>For key and message, a decoder is used to map message and key data onto table columns.</p>
<p>The Kafka connector contains the following decoders:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">raw</span></code> - Kafka message is not interpreted, ranges of raw message bytes are mapped to table columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">csv</span></code> - Kafka message is interpreted as comma separated message, and fields are mapped to table columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">json</span></code> - Kafka message is parsed as JSON and JSON fields are mapped to table columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">avro</span></code> - Kafka message is parsed based on an Avro schema and Avro fields are mapped to table columns</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If no table definition file exists for a table, the <code class="docutils literal notranslate"><span class="pre">dummy</span></code> decoder is used,
which does not expose any columns.</p>
</div>

<h3 id="raw-decoder"><code class="docutils literal notranslate"><span class="pre">raw</span></code> decoder<a class="headerlink" href="#raw-decoder" title="Permalink to this headline">#</a></h3>
<p>The raw decoder supports reading of raw (byte-based) values from Kafka message
or key and converting it into Trino columns.</p>
<p>For fields, the following attributes are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> - selects the width of the data type converted</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - Trino data type (see table below for list of supported data types)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code> - <code class="docutils literal notranslate"><span class="pre">&lt;start&gt;[:&lt;end&gt;]</span></code>; start and end position of bytes to convert (optional)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> attribute selects the number of bytes converted.
If absent, <code class="docutils literal notranslate"><span class="pre">BYTE</span></code> is assumed. All values are signed.</p>
<p>Supported values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code> - one byte</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SHORT</span></code> - two bytes (big-endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INT</span></code> - four bytes (big-endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LONG</span></code> - eight bytes (big-endian)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> - four bytes (IEEE 754 format)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> - eight bytes (IEEE 754 format)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute defines the Trino data type on which the value is mapped.</p>
<p>Depending on Trino type assigned to column different values of dataFormat can be used:</p>
<table>
<colgroup>
<col style="width: 49%"/>
<col style="width: 51%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino data type</p></th>
<th class="head"><p>Allowed <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">SHORT</span></code>, <code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">LONG</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">SHORT</span></code>, <code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">SHORT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">SHORT</span></code>, <code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">LONG</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> / <code class="docutils literal notranslate"><span class="pre">VARCHAR(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code></p></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">mapping</span></code> attribute specifies the range of the bytes in a key or
message used for decoding. It can be one or two numbers separated by a colon (<code class="docutils literal notranslate"><span class="pre">&lt;start&gt;[:&lt;end&gt;]</span></code>).</p>
<p>If only a start position is given:</p>
<ul class="simple">
<li><p>For fixed width types the column will use the appropriate number of bytes for the specified <code class="docutils literal notranslate"><span class="pre">dateFormat</span></code> (see above).</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> value is decoded all bytes from start position till the end of the message will be used.</p></li>
</ul>
<p>If start and end position are given, then:</p>
<ul class="simple">
<li><p>For fixed width types the size must be equal to number of bytes used by specified <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code>.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> all bytes between start (inclusive) and end (exclusive) are used.</p></li>
</ul>
<p>If no <code class="docutils literal notranslate"><span class="pre">mapping</span></code> attribute is specified, it is equivalent to setting start position to 0 and leaving end position undefined.</p>
<p>Decoding scheme of numeric data types (<code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">TINYINT</span></code>, <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code>) is straightforward.
A sequence of bytes is read from input message and decoded according to either:</p>
<ul class="simple">
<li><p>big-endian encoding (for integer types)</p></li>
<li><p>IEEE 754 format for (for <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code>).</p></li>
</ul>
<p>Length of decoded byte sequence is implied by the <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code>.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> data type a sequence of bytes is interpreted according to UTF-8 encoding.</p>


<h3 id="csv-decoder"><code class="docutils literal notranslate"><span class="pre">csv</span></code> decoder<a class="headerlink" href="#csv-decoder" title="Permalink to this headline">#</a></h3>
<p>The CSV decoder converts the bytes representing a message or key into a
string using UTF-8 encoding and then interprets the result as a CSV
(comma-separated value) line.</p>
<p>For fields, the <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">mapping</span></code> attributes must be defined:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - Trino data type (see table below for list of supported data types)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code> - the index of the field in the CSV record</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> and <code class="docutils literal notranslate"><span class="pre">formatHint</span></code> are not supported and must be omitted.</p>
<p>Table below lists supported Trino types, which can be used in <code class="docutils literal notranslate"><span class="pre">type</span></code> and decoding scheme:</p>
<table>
<colgroup>
<col style="width: 32%"/>
<col style="width: 68%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino data type</p></th>
<th class="head"><p>Decoding rules</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></div>
</div>
</td>
<td><p>Decoded using Java <code class="docutils literal notranslate"><span class="pre">Long.parseLong()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p>Decoded using Java <code class="docutils literal notranslate"><span class="pre">Double.parseDouble()</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p>true character sequence maps to <code class="docutils literal notranslate"><span class="pre">true</span></code>;
Other character sequences map to <code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> / <code class="docutils literal notranslate"><span class="pre">VARCHAR(x)</span></code></p></td>
<td><p>Used as is</p></td>
</tr>
</tbody>
</table>


<h3 id="json-decoder"><code class="docutils literal notranslate"><span class="pre">json</span></code> decoder<a class="headerlink" href="#json-decoder" title="Permalink to this headline">#</a></h3>
<p>The JSON decoder converts the bytes representing a message or key into a
JSON according to <span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc4627.html"><strong>RFC 4627</strong></a>. Note that the message or key <em>MUST</em> convert
into a JSON object, not an array or simple type.</p>
<p>For fields, the following attributes are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - Trino type of column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> - Field decoder to be used for column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code> - slash-separated list of field names to select a field from the JSON object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formatHint</span></code> - only for <code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, see below</p></li>
</ul>
<p>The JSON decoder supports multiple field decoders, with <code class="docutils literal notranslate"><span class="pre">_default</span></code> being
used for standard table columns and a number of decoders for date and time
based types.</p>
<p>The table below lists Trino data types, which can be used as in <code class="docutils literal notranslate"><span class="pre">type</span></code>, and matching field decoders,
which can be specified via <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> attribute.</p>
<table>
<colgroup>
<col style="width: 32%"/>
<col style="width: 68%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino data type</p></th>
<th class="head"><p>Allowed <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">VARCHAR(x)</span></code></div>
</div>
</td>
<td><p>Default field decoder (omitted <code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> attribute)</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">DATE</span></code></div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code></p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">TIME</span></code></div>
<div class="line"><br/></div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code>, <code class="docutils literal notranslate"><span class="pre">milliseconds-since-epoch</span></code>,
<code class="docutils literal notranslate"><span class="pre">seconds-since-epoch</span></code></p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">TIME</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code></p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></div>
<div class="line"><br/></div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code>, <code class="docutils literal notranslate"><span class="pre">rfc2822</span></code>,
<code class="docutils literal notranslate"><span class="pre">milliseconds-since-epoch</span></code>, <code class="docutils literal notranslate"><span class="pre">seconds-since-epoch</span></code></p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></div>
<div class="line"><br/></div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code>, <code class="docutils literal notranslate"><span class="pre">iso8601</span></code>, <code class="docutils literal notranslate"><span class="pre">rfc2822</span></code>, <code class="docutils literal notranslate"><span class="pre">milliseconds-since-epoch</span></code>
<code class="docutils literal notranslate"><span class="pre">seconds-since-epoch</span></code></p></td>
</tr>
</tbody>
</table>


<h3 id="default-field-decoder">Default field decoder<a class="headerlink" href="#default-field-decoder" title="Permalink to this headline">#</a></h3>
<p>This is the standard field decoder, supporting all the Trino physical data
types. A field value is transformed under JSON conversion rules into
boolean, long, double or string values. For non-date/time based columns,
this decoder should be used.</p>


<h3 id="date-and-time-decoders">Date and time decoders<a class="headerlink" href="#date-and-time-decoders" title="Permalink to this headline">#</a></h3>
<p>To convert values from JSON objects into Trino <code class="docutils literal notranslate"><span class="pre">DATE</span></code>, <code class="docutils literal notranslate"><span class="pre">TIME</span></code>, <code class="docutils literal notranslate"><span class="pre">TIME</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code>,
<code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> or <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code> columns, special decoders must be selected using the
<code class="docutils literal notranslate"><span class="pre">dataFormat</span></code> attribute of a field definition.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iso8601</span></code> - text based, parses a text field as an ISO 8601 timestamp.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rfc2822</span></code> - text based, parses a text field as an <span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> timestamp.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">custom-date-time</span></code> - text based, parses a text field according to Joda format pattern</dt><dd><p>specified via <code class="docutils literal notranslate"><span class="pre">formatHint</span></code> attribute. Format pattern should conform
to <a class="reference external" href="https://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormat.html">https://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormat.html</a>.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">milliseconds-since-epoch</span></code> - number based, interprets a text or number as number of milliseconds since the epoch.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seconds-since-epoch</span></code> - number based, interprets a text or number as number of milliseconds since the epoch.</p></li>
</ul>
<p>For <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code> and <code class="docutils literal notranslate"><span class="pre">TIME</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code> data types, if timezone information is present in decoded value, it will
be used in Trino value. Otherwise result time zone will be set to <code class="docutils literal notranslate"><span class="pre">UTC</span></code>.</p>


<h3 id="avro-decoder"><code class="docutils literal notranslate"><span class="pre">avro</span></code> decoder<a class="headerlink" href="#avro-decoder" title="Permalink to this headline">#</a></h3>
<p>The Avro decoder converts the bytes representing a message or key in
Avro format based on a schema. The message must have the Avro schema embedded.
Trino does not support schema-less Avro decoding.</p>
<p>For key/message, using <code class="docutils literal notranslate"><span class="pre">avro</span></code> decoder, the <code class="docutils literal notranslate"><span class="pre">dataSchema</span></code> must be defined.
This should point to the location of a valid Avro schema file of the message which needs to be decoded. This location can be a remote web server
(e.g.: <code class="docutils literal notranslate"><span class="pre">dataSchema:</span> <span class="pre">'http://example.org/schema/avro_data.avsc'</span></code>) or local file system(e.g.: <code class="docutils literal notranslate"><span class="pre">dataSchema:</span> <span class="pre">'/usr/local/schema/avro_data.avsc'</span></code>).
The decoder fails if this location is not accessible from the Trino coordinator node.</p>
<p>For fields, the following attributes are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - Name of the column in the Trino table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> - Trino type of column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code> - slash-separated list of field names to select a field from the Avro schema. If field specified in <code class="docutils literal notranslate"><span class="pre">mapping</span></code> does not exist in the original Avro schema then a read operation returns NULL.</p></li>
</ul>
<p>Table below lists supported Trino types which can be used in <code class="docutils literal notranslate"><span class="pre">type</span></code> for the equivalent Avro field type/s.</p>
<table>
<colgroup>
<col style="width: 49%"/>
<col style="width: 51%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino data type</p></th>
<th class="head"><p>Allowed Avro data type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">LONG</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> / <code class="docutils literal notranslate"><span class="pre">VARCHAR(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">STRING</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FIXED</span></code>, <code class="docutils literal notranslate"><span class="pre">BYTES</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MAP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MAP</span></code></p></td>
</tr>
</tbody>
</table>

<h4 id="avro-schema-evolution">Avro schema evolution<a class="headerlink" href="#avro-schema-evolution" title="Permalink to this headline">#</a></h4>
<p>The Avro decoder supports schema evolution feature with backward compatibility. With backward compatibility,
a newer schema can be used to read Avro data created with an older schema. Any change in the Avro schema must also be
reflected in Trinos topic definition file. Newly added/renamed fields <em>must</em> have a default value in the Avro schema file.</p>
<p>The schema evolution behavior is as follows:</p>
<ul class="simple">
<li><p>Column added in new schema:
Data created with an older schema produces a <em>default</em> value, when the table is using the new schema.</p></li>
<li><p>Column removed in new schema:
Data created with an older schema no longer outputs the data from the column that was removed.</p></li>
<li><p>Column is renamed in the new schema:
This is equivalent to removing the column and adding a new one, and data created with an older schema
produces a <em>default</em> value when table is using the new schema.</p></li>
<li><p>Changing type of column in the new schema:
If the type coercion is supported by Avro, then the conversion happens. An error is thrown for incompatible types.</p></li>
</ul>






          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="iceberg.html" title="Iceberg connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Iceberg connector </span>
              </div>
            </a>
          
          
            <a href="kafka-tutorial.html" title="Kafka connector tutorial"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Kafka connector tutorial </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 374-e STS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright  2017-2021<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>