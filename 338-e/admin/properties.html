

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>8.4. Properties Reference &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="8. Administration" href="../admin.html"/>
        <link rel="next" title="8.5. Spill to Disk" href="spill.html"/>
        <link rel="prev" title="8.3. Monitoring with JMX" href="jmx.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../admin.html">8. Administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="web-interface.html">8.1. Web UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuning.html">8.2. Tuning Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="jmx.html">8.3. Monitoring with JMX</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">8.4. Properties Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-properties">General Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#join-distribution-type"><code class="docutils literal notranslate"><span class="pre">join-distribution-type</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#redistribute-writes"><code class="docutils literal notranslate"><span class="pre">redistribute-writes</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memory-management-properties">Memory Management Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#query-max-memory-per-node"><code class="docutils literal notranslate"><span class="pre">query.max-memory-per-node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-max-total-memory-per-node"><code class="docutils literal notranslate"><span class="pre">query.max-total-memory-per-node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-max-memory"><code class="docutils literal notranslate"><span class="pre">query.max-memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-max-total-memory"><code class="docutils literal notranslate"><span class="pre">query.max-total-memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memory-heap-headroom-per-node"><code class="docutils literal notranslate"><span class="pre">memory.heap-headroom-per-node</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#query-management-properties">Query Management Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#query-max-execution-time"><code class="docutils literal notranslate"><span class="pre">query.max-execution-time</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-max-run-time"><code class="docutils literal notranslate"><span class="pre">query.max-run-time</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-max-stage-count"><code class="docutils literal notranslate"><span class="pre">query.max-stage-count</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-max-history"><code class="docutils literal notranslate"><span class="pre">query.max-history</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-min-expire-age"><code class="docutils literal notranslate"><span class="pre">query.min-expire-age</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spilling-properties">Spilling Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#spill-enabled"><code class="docutils literal notranslate"><span class="pre">spill-enabled</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spill-order-by"><code class="docutils literal notranslate"><span class="pre">spill-order-by</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spill-window-operator"><code class="docutils literal notranslate"><span class="pre">spill-window-operator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spiller-spill-path"><code class="docutils literal notranslate"><span class="pre">spiller-spill-path</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spiller-max-used-space-threshold"><code class="docutils literal notranslate"><span class="pre">spiller-max-used-space-threshold</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spiller-threads"><code class="docutils literal notranslate"><span class="pre">spiller-threads</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#max-spill-per-node"><code class="docutils literal notranslate"><span class="pre">max-spill-per-node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-max-spill-per-node"><code class="docutils literal notranslate"><span class="pre">query-max-spill-per-node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aggregation-operator-unspill-memory-limit"><code class="docutils literal notranslate"><span class="pre">aggregation-operator-unspill-memory-limit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spill-compression-enabled"><code class="docutils literal notranslate"><span class="pre">spill-compression-enabled</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#spill-encryption-enabled"><code class="docutils literal notranslate"><span class="pre">spill-encryption-enabled</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#exchange-properties">Exchange Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exchange-client-threads"><code class="docutils literal notranslate"><span class="pre">exchange.client-threads</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange-concurrent-request-multiplier"><code class="docutils literal notranslate"><span class="pre">exchange.concurrent-request-multiplier</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange-data-integrity-verification"><code class="docutils literal notranslate"><span class="pre">exchange.data-integrity-verification</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange-max-buffer-size"><code class="docutils literal notranslate"><span class="pre">exchange.max-buffer-size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange-max-response-size"><code class="docutils literal notranslate"><span class="pre">exchange.max-response-size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sink-max-buffer-size"><code class="docutils literal notranslate"><span class="pre">sink.max-buffer-size</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#task-properties">Task Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#task-concurrency"><code class="docutils literal notranslate"><span class="pre">task.concurrency</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#task-http-response-threads"><code class="docutils literal notranslate"><span class="pre">task.http-response-threads</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#task-http-timeout-threads"><code class="docutils literal notranslate"><span class="pre">task.http-timeout-threads</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#task-info-update-interval"><code class="docutils literal notranslate"><span class="pre">task.info-update-interval</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#task-max-partial-aggregation-memory"><code class="docutils literal notranslate"><span class="pre">task.max-partial-aggregation-memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#task-max-worker-threads"><code class="docutils literal notranslate"><span class="pre">task.max-worker-threads</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#task-min-drivers"><code class="docutils literal notranslate"><span class="pre">task.min-drivers</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#task-writer-count"><code class="docutils literal notranslate"><span class="pre">task.writer-count</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#writer-scaling-properties">Writer Scaling Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scale-writers"><code class="docutils literal notranslate"><span class="pre">scale-writers</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#writer-min-size"><code class="docutils literal notranslate"><span class="pre">writer-min-size</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#node-scheduler-properties">Node Scheduler Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#node-scheduler-max-splits-per-node"><code class="docutils literal notranslate"><span class="pre">node-scheduler.max-splits-per-node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-scheduler-max-pending-splits-per-task"><code class="docutils literal notranslate"><span class="pre">node-scheduler.max-pending-splits-per-task</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-scheduler-min-candidates"><code class="docutils literal notranslate"><span class="pre">node-scheduler.min-candidates</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-scheduler-policy"><code class="docutils literal notranslate"><span class="pre">node-scheduler.policy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-scheduler-network-topology-segments"><code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.segments</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-scheduler-network-topology-type"><code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.type</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-scheduler-network-topology-file"><code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.file</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-scheduler-network-topology-refresh-period"><code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.refresh-period</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#optimizer-properties">Optimizer Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#optimizer-dictionary-aggregation"><code class="docutils literal notranslate"><span class="pre">optimizer.dictionary-aggregation</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#optimizer-optimize-hash-generation"><code class="docutils literal notranslate"><span class="pre">optimizer.optimize-hash-generation</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#optimizer-optimize-metadata-queries"><code class="docutils literal notranslate"><span class="pre">optimizer.optimize-metadata-queries</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#optimizer-push-aggregation-through-join"><code class="docutils literal notranslate"><span class="pre">optimizer.push-aggregation-through-join</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#optimizer-push-table-write-through-union"><code class="docutils literal notranslate"><span class="pre">optimizer.push-table-write-through-union</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#optimizer-join-reordering-strategy"><code class="docutils literal notranslate"><span class="pre">optimizer.join-reordering-strategy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#optimizer-max-reordered-joins"><code class="docutils literal notranslate"><span class="pre">optimizer.max-reordered-joins</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#regular-expression-function-properties">Regular Expression Function Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#regex-library"><code class="docutils literal notranslate"><span class="pre">regex-library</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#re2j-dfa-states-limit"><code class="docutils literal notranslate"><span class="pre">re2j.dfa-states-limit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#re2j-dfa-retries"><code class="docutils literal notranslate"><span class="pre">re2j.dfa-retries</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#logging-properties">Logging Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#log-path"><code class="docutils literal notranslate"><span class="pre">log.path</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#log-max-history"><code class="docutils literal notranslate"><span class="pre">log.max-history</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#log-max-size"><code class="docutils literal notranslate"><span class="pre">log.max-size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#http-server-log-enabled"><code class="docutils literal notranslate"><span class="pre">http-server.log.enabled</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#http-server-log-compression-enabled"><code class="docutils literal notranslate"><span class="pre">http-server.log.compression.enabled</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#http-server-log-path"><code class="docutils literal notranslate"><span class="pre">http-server.log.path</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#http-server-log-max-history"><code class="docutils literal notranslate"><span class="pre">http-server.log.max-history</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#http-server-log-max-size"><code class="docutils literal notranslate"><span class="pre">http-server.log.max-size</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#web-ui-properties">Web UI Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#web-ui-authentication-type"><code class="docutils literal notranslate"><span class="pre">web-ui.authentication.type</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web-ui-enabled"><code class="docutils literal notranslate"><span class="pre">web-ui.enabled</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web-ui-shared-secret"><code class="docutils literal notranslate"><span class="pre">web-ui.shared-secret</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web-ui-session-timeout"><code class="docutils literal notranslate"><span class="pre">web-ui.session-timeout</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#web-ui-user"><code class="docutils literal notranslate"><span class="pre">web-ui.user</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spill.html">8.5. Spill to Disk</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-groups.html">8.6. Resource Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="session-property-managers.html">8.7. Session Property Managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="dist-sort.html">8.8. Distributed Sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage-metrics.html">8.9. Usage Metrics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/356-e/">Latest LTS (356-e)</option>
    <option value="/350-e/">350-e LTS</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/355-e/">Latest STS (355-e)</option>
    <option value="/354-e/">354-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../admin.html"><span class="section-number">8. </span>Administration</a> &raquo;</li>
      
    <li><span class="section-number">8.4. </span>Properties Reference</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="properties-reference">
<h1><span class="section-number">8.4. </span>Properties Reference<a class="headerlink" href="#properties-reference" title="Permalink to this headline">#</a></h1>
<p>This section describes the most important config properties, that
may be used to tune Presto or alter its behavior when required.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#general-properties" id="id4">General Properties</a></p></li>
<li><p><a class="reference internal" href="#memory-management-properties" id="id5">Memory Management Properties</a></p></li>
<li><p><a class="reference internal" href="#query-management-properties" id="id6">Query Management Properties</a></p></li>
<li><p><a class="reference internal" href="#spilling-properties" id="id7">Spilling Properties</a></p></li>
<li><p><a class="reference internal" href="#exchange-properties" id="id8">Exchange Properties</a></p></li>
<li><p><a class="reference internal" href="#task-properties" id="id9">Task Properties</a></p></li>
<li><p><a class="reference internal" href="#writer-scaling-properties" id="id10">Writer Scaling Properties</a></p></li>
<li><p><a class="reference internal" href="#node-scheduler-properties" id="id11">Node Scheduler Properties</a></p></li>
<li><p><a class="reference internal" href="#optimizer-properties" id="id12">Optimizer Properties</a></p></li>
<li><p><a class="reference internal" href="#regular-expression-function-properties" id="id13">Regular Expression Function Properties</a></p></li>
<li><p><a class="reference internal" href="#logging-properties" id="id14">Logging Properties</a></p></li>
<li><p><a class="reference internal" href="#web-ui-properties" id="id15">Web UI Properties</a></p></li>
</ul>
</div>
<div class="section" id="general-properties">
<h2>General Properties<a class="headerlink" href="#general-properties" title="Permalink to this headline">#</a></h2>
<div class="section" id="join-distribution-type">
<h3><code class="docutils literal notranslate"><span class="pre">join-distribution-type</span></code><a class="headerlink" href="#join-distribution-type" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code>, <code class="docutils literal notranslate"><span class="pre">PARTITIONED</span></code>, <code class="docutils literal notranslate"><span class="pre">BROADCAST</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code></p></li>
</ul>
<p>The type of distributed join to use.  When set to <code class="docutils literal notranslate"><span class="pre">PARTITIONED</span></code>, Presto
uses hash distributed joins.  When set to <code class="docutils literal notranslate"><span class="pre">BROADCAST</span></code>, it broadcasts the
right table to all nodes in the cluster that have data from the left table.
Partitioned joins require redistributing both tables using a hash of the join key.
This can be slower, sometimes substantially, than broadcast joins, but allows much
larger joins. In particular broadcast joins are faster, if the right table is
much smaller than the left.  However, broadcast joins require that the tables on the right
side of the join after filtering fit in memory on each node, whereas distributed joins
only need to fit in distributed memory across all nodes. When set to <code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code>,
Presto makes a cost based decision as to which distribution type is optimal.
It considers switching the left and right inputs to the join.  In <code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code>
mode, Presto defaults to hash distributed joins if no cost could be computed, such as if
the tables do not have statistics. This can be specified on a per-query basis using
the <code class="docutils literal notranslate"><span class="pre">join_distribution_type</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="redistribute-writes">
<h3><code class="docutils literal notranslate"><span class="pre">redistribute-writes</span></code><a class="headerlink" href="#redistribute-writes" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>This property enables redistribution of data before writing. This can
eliminate the performance impact of data skew when writing by hashing it
across nodes in the cluster. It can be disabled, when it is known that the
output data set is not skewed, in order to avoid the overhead of hashing and
redistributing all the data across the network. This can be specified
on a per-query basis using the <code class="docutils literal notranslate"><span class="pre">redistribute_writes</span></code> session property.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="memory-management-properties">
<span id="tuning-memory"></span><h2>Memory Management Properties<a class="headerlink" href="#memory-management-properties" title="Permalink to this headline">#</a></h2>
<div class="section" id="query-max-memory-per-node">
<h3><code class="docutils literal notranslate"><span class="pre">query.max-memory-per-node</span></code><a class="headerlink" href="#query-max-memory-per-node" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">JVM</span> <span class="pre">max</span> <span class="pre">memory</span> <span class="pre">*</span> <span class="pre">0.1</span></code></p></li>
</ul>
<p>This is the max amount of user memory a query can use on a worker.
User memory is allocated during execution for things that are directly
attributable to, or controllable by, a user query. For example, memory used
by the hash tables built during execution, memory used during sorting, etc.
When the user memory allocation of a query on any worker hits this limit,
it is killed.</p>
</div></blockquote>
</div>
<div class="section" id="query-max-total-memory-per-node">
<h3><code class="docutils literal notranslate"><span class="pre">query.max-total-memory-per-node</span></code><a class="headerlink" href="#query-max-total-memory-per-node" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">JVM</span> <span class="pre">max</span> <span class="pre">memory</span> <span class="pre">*</span> <span class="pre">0.3</span></code></p></li>
</ul>
<p>This is the max amount of user and system memory a query can use on a worker.
System memory is allocated during execution for things that are not directly
attributable to, or controllable by, a user query. For example, memory allocated
by the readers, writers, network buffers, etc. When the sum of the user and
system memory allocated by a query on any worker hits this limit, it is killed.
The value of <code class="docutils literal notranslate"><span class="pre">query.max-total-memory-per-node</span></code> must be greater than
<code class="docutils literal notranslate"><span class="pre">query.max-memory-per-node</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="query-max-memory">
<h3><code class="docutils literal notranslate"><span class="pre">query.max-memory</span></code><a class="headerlink" href="#query-max-memory" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">20GB</span></code></p></li>
</ul>
<p>This is the max amount of user memory a query can use across the entire cluster.
User memory is allocated during execution for things that are directly
attributable to, or controllable by, a user query. For example, memory used
by the hash tables built during execution, memory used during sorting, etc.
When the user memory allocation of a query across all workers hits this limit
it is killed.</p>
</div></blockquote>
</div>
<div class="section" id="query-max-total-memory">
<h3><code class="docutils literal notranslate"><span class="pre">query.max-total-memory</span></code><a class="headerlink" href="#query-max-total-memory" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">query.max-memory</span> <span class="pre">*</span> <span class="pre">2</span></code></p></li>
</ul>
<p>This is the max amount of user and system memory a query can use across the entire cluster.
System memory is allocated during execution for things that are not directly
attributable to, or controllable by, a user query. For example, memory allocated
by the readers, writers, network buffers, etc. When the sum of the user and
system memory allocated by a query across all workers hits this limit it is
killed. The value of <code class="docutils literal notranslate"><span class="pre">query.max-total-memory</span></code> must be greater than
<code class="docutils literal notranslate"><span class="pre">query.max-memory</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="memory-heap-headroom-per-node">
<h3><code class="docutils literal notranslate"><span class="pre">memory.heap-headroom-per-node</span></code><a class="headerlink" href="#memory-heap-headroom-per-node" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">JVM</span> <span class="pre">max</span> <span class="pre">memory</span> <span class="pre">*</span> <span class="pre">0.3</span></code></p></li>
</ul>
<p>This is the amount of memory set aside as headroom/buffer in the JVM heap
for allocations that are not tracked by Presto.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="query-management-properties">
<h2>Query Management Properties<a class="headerlink" href="#query-management-properties" title="Permalink to this headline">#</a></h2>
<div class="section" id="query-max-execution-time">
<h3><code class="docutils literal notranslate"><span class="pre">query.max-execution-time</span></code><a class="headerlink" href="#query-max-execution-time" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">duration</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100</span> <span class="pre">days</span></code></p></li>
<li><p><strong>Session property:</strong> <code class="docutils literal notranslate"><span class="pre">query_max_execution_time</span></code></p></li>
</ul>
<p>The maximum allowed time for a query to be actively executing on the
cluster, before it is terminated. Compared to the run time below, execution
time does not include analysis, query planning or wait times in a queue.</p>
</div></blockquote>
</div>
<div class="section" id="query-max-run-time">
<h3><code class="docutils literal notranslate"><span class="pre">query.max-run-time</span></code><a class="headerlink" href="#query-max-run-time" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">duration</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100</span> <span class="pre">days</span></code></p></li>
<li><p><strong>Session property:</strong> <code class="docutils literal notranslate"><span class="pre">query_max_run_time</span></code></p></li>
</ul>
<p>The maximum allowed time for a query to be processed on the cluster, before
it is terminated. The time includes time for analysis and planning, but also
time spend in a queue waiting, so essentially this is the time allowed for a
query to exist since creation.</p>
</div></blockquote>
</div>
<div class="section" id="query-max-stage-count">
<h3><code class="docutils literal notranslate"><span class="pre">query.max-stage-count</span></code><a class="headerlink" href="#query-max-stage-count" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
</ul>
<p>The maximum number of stages allowed to be generated per query. If a query
generates more stages than this it will get killed with error
<code class="docutils literal notranslate"><span class="pre">QUERY_HAS_TOO_MANY_STAGES</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Setting this to a high value can cause queries with large
number of stages to introduce instability in the cluster
causing unrelated queries to get killed with
<code class="docutils literal notranslate"><span class="pre">REMOTE_TASK_ERROR</span></code> and the message <code class="docutils literal notranslate"><span class="pre">Max</span> <span class="pre">requests</span> <span class="pre">queued</span>
<span class="pre">per</span> <span class="pre">destination</span> <span class="pre">exceeded</span> <span class="pre">for</span> <span class="pre">HttpDestination</span> <span class="pre">...</span></code></p>
</div>
</div></blockquote>
</div>
<div class="section" id="query-max-history">
<h3><code class="docutils literal notranslate"><span class="pre">query.max-history</span></code><a class="headerlink" href="#query-max-history" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100</span></code></p></li>
</ul>
<p>The maximum number of queries to keep in the query history to provide
statistics and other information. If this amount is reached, queries are
removed based on age.</p>
</div></blockquote>
</div>
<div class="section" id="query-min-expire-age">
<h3><code class="docutils literal notranslate"><span class="pre">query.min-expire-age</span></code><a class="headerlink" href="#query-min-expire-age" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">duration</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">15</span> <span class="pre">min</span></code></p></li>
</ul>
<p>The minimal age of a query in the history before it is expired. An expired
query is removed from the query history buffer and no longer available in
the <a class="reference internal" href="web-interface.html"><span class="doc">Web UI</span></a>.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="spilling-properties">
<span id="tuning-spilling"></span><h2>Spilling Properties<a class="headerlink" href="#spilling-properties" title="Permalink to this headline">#</a></h2>
<div class="section" id="spill-enabled">
<h3><code class="docutils literal notranslate"><span class="pre">spill-enabled</span></code><a class="headerlink" href="#spill-enabled" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
</ul>
<p>Try spilling memory to disk to avoid exceeding memory limits for the query.</p>
<p>Spilling works by offloading memory to disk. This process can allow a query with a large memory
footprint to pass at the cost of slower execution times. Spilling is supported for
aggregations, joins (inner and outer), sorting, and window functions. This property does not
reduce memory usage required for other join types.</p>
<p>This config property can be overridden by the <code class="docutils literal notranslate"><span class="pre">spill_enabled</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="spill-order-by">
<h3><code class="docutils literal notranslate"><span class="pre">spill-order-by</span></code><a class="headerlink" href="#spill-order-by" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>Try spilling memory to disk to avoid exceeding memory limits for the query when running sorting operators.
This property must be used in conjunction with the <code class="docutils literal notranslate"><span class="pre">spill-enabled</span></code> property.</p>
<p>This config property can be overridden by the <code class="docutils literal notranslate"><span class="pre">spill_order_by</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="spill-window-operator">
<h3><code class="docutils literal notranslate"><span class="pre">spill-window-operator</span></code><a class="headerlink" href="#spill-window-operator" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>Try spilling memory to disk to avoid exceeding memory limits for the query when running window operators;
This property must be used in conjunction with the <code class="docutils literal notranslate"><span class="pre">spill-enabled</span></code> property.</p>
<p>This config property can be overridden by the <code class="docutils literal notranslate"><span class="pre">spill_window_operator</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="spiller-spill-path">
<h3><code class="docutils literal notranslate"><span class="pre">spiller-spill-path</span></code><a class="headerlink" href="#spiller-spill-path" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>No default value.</strong> Must be set when spilling is enabled</p></li>
</ul>
<p>Directory where spilled content is written. It can be a comma separated
list to spill simultaneously to multiple directories, which helps to utilize
multiple drives installed in the system.</p>
<p>It is not recommended to spill to system drives. Most importantly, do not spill
to the drive on which the JVM logs are written, as disk overutilization might
cause JVM to pause for lengthy periods, causing queries to fail.</p>
</div></blockquote>
</div>
<div class="section" id="spiller-max-used-space-threshold">
<h3><code class="docutils literal notranslate"><span class="pre">spiller-max-used-space-threshold</span></code><a class="headerlink" href="#spiller-max-used-space-threshold" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">double</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">0.9</span></code></p></li>
</ul>
<p>If disk space usage ratio of a given spill path is above this threshold,
this spill path is not eligible for spilling.</p>
</div></blockquote>
</div>
<div class="section" id="spiller-threads">
<h3><code class="docutils literal notranslate"><span class="pre">spiller-threads</span></code><a class="headerlink" href="#spiller-threads" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">4</span></code></p></li>
</ul>
<p>Number of spiller threads. Increase this value if the default is not able
to saturate the underlying spilling device (for example, when using RAID).</p>
</div></blockquote>
</div>
<div class="section" id="max-spill-per-node">
<h3><code class="docutils literal notranslate"><span class="pre">max-spill-per-node</span></code><a class="headerlink" href="#max-spill-per-node" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100</span> <span class="pre">GB</span></code></p></li>
</ul>
<p>Max spill space to be used by all queries on a single node.</p>
</div></blockquote>
</div>
<div class="section" id="query-max-spill-per-node">
<h3><code class="docutils literal notranslate"><span class="pre">query-max-spill-per-node</span></code><a class="headerlink" href="#query-max-spill-per-node" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100</span> <span class="pre">GB</span></code></p></li>
</ul>
<p>Max spill space to be used by a single query on a single node.</p>
</div></blockquote>
</div>
<div class="section" id="aggregation-operator-unspill-memory-limit">
<h3><code class="docutils literal notranslate"><span class="pre">aggregation-operator-unspill-memory-limit</span></code><a class="headerlink" href="#aggregation-operator-unspill-memory-limit" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">MB</span></code></p></li>
</ul>
<p>Limit for memory used for unspilling a single aggregation operator instance.</p>
</div></blockquote>
</div>
<div class="section" id="spill-compression-enabled">
<h3><code class="docutils literal notranslate"><span class="pre">spill-compression-enabled</span></code><a class="headerlink" href="#spill-compression-enabled" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
</ul>
<p>Enables data compression for pages spilled to disk.</p>
</div></blockquote>
</div>
<div class="section" id="spill-encryption-enabled">
<h3><code class="docutils literal notranslate"><span class="pre">spill-encryption-enabled</span></code><a class="headerlink" href="#spill-encryption-enabled" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
</ul>
<p>Enables using a randomly generated secret key (per spill file) to encrypt and decrypt
data spilled to disk.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="exchange-properties">
<h2>Exchange Properties<a class="headerlink" href="#exchange-properties" title="Permalink to this headline">#</a></h2>
<p>Exchanges transfer data between Presto nodes for different stages of
a query. Adjusting these properties may help to resolve inter-node
communication issues or improve network utilization.</p>
<div class="section" id="exchange-client-threads">
<h3><code class="docutils literal notranslate"><span class="pre">exchange.client-threads</span></code><a class="headerlink" href="#exchange-client-threads" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">25</span></code></p></li>
</ul>
<p>Number of threads used by exchange clients to fetch data from other Presto
nodes. A higher value can improve performance for large clusters or clusters
with very high concurrency, but excessively high values may cause a drop
in performance due to context switches and additional memory usage.</p>
</div></blockquote>
</div>
<div class="section" id="exchange-concurrent-request-multiplier">
<h3><code class="docutils literal notranslate"><span class="pre">exchange.concurrent-request-multiplier</span></code><a class="headerlink" href="#exchange-concurrent-request-multiplier" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">3</span></code></p></li>
</ul>
<p>Multiplier determining the number of concurrent requests relative to
available buffer memory. The maximum number of requests is determined
using a heuristic of the number of clients that can fit into available
buffer space, based on average buffer usage per request times this
multiplier. For example, with an <code class="docutils literal notranslate"><span class="pre">exchange.max-buffer-size</span></code> of <code class="docutils literal notranslate"><span class="pre">32</span> <span class="pre">MB</span></code>
and <code class="docutils literal notranslate"><span class="pre">20</span> <span class="pre">MB</span></code> already used and average size per request being <code class="docutils literal notranslate"><span class="pre">2MB</span></code>,
the maximum number of clients is
<code class="docutils literal notranslate"><span class="pre">multiplier</span> <span class="pre">*</span> <span class="pre">((32MB</span> <span class="pre">-</span> <span class="pre">20MB)</span> <span class="pre">/</span> <span class="pre">2MB)</span> <span class="pre">=</span> <span class="pre">multiplier</span> <span class="pre">*</span> <span class="pre">6</span></code>. Tuning this
value adjusts the heuristic, which may increase concurrency and improve
network utilization.</p>
</div></blockquote>
</div>
<div class="section" id="exchange-data-integrity-verification">
<h3><code class="docutils literal notranslate"><span class="pre">exchange.data-integrity-verification</span></code><a class="headerlink" href="#exchange-data-integrity-verification" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, <code class="docutils literal notranslate"><span class="pre">ABORT</span></code>, <code class="docutils literal notranslate"><span class="pre">RETRY</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">ABORT</span></code></p></li>
</ul>
<p>Configure the resulting behavior of data integrity issues. By default,
<code class="docutils literal notranslate"><span class="pre">ABORT</span></code> causes queries to be aborted when data integrity issues are
detected as part of the built-in verification. Setting the property to
<code class="docutils literal notranslate"><span class="pre">NONE</span></code> disables the verification. <code class="docutils literal notranslate"><span class="pre">RETRY</span></code> causes the data exchange to be
repeated when integrity issues are detected.</p>
</div></blockquote>
</div>
<div class="section" id="exchange-max-buffer-size">
<h3><code class="docutils literal notranslate"><span class="pre">exchange.max-buffer-size</span></code><a class="headerlink" href="#exchange-max-buffer-size" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">32MB</span></code></p></li>
</ul>
<p>Size of buffer in the exchange client that holds data fetched from other
nodes before it is processed. A larger buffer can increase network
throughput for larger clusters, and thus decrease query processing time,
but reduces the amount of memory available for other usages.</p>
</div></blockquote>
</div>
<div class="section" id="exchange-max-response-size">
<h3><code class="docutils literal notranslate"><span class="pre">exchange.max-response-size</span></code><a class="headerlink" href="#exchange-max-response-size" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1MB</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">16MB</span></code></p></li>
</ul>
<p>Maximum size of a response returned from an exchange request. The response
is placed in the exchange client buffer, which is shared across all
concurrent requests for the exchange.</p>
<p>Increasing the value may improve network throughput, if there is high
latency. Decreasing the value may improve query performance for large
clusters as it reduces skew, due to the exchange client buffer holding
responses for more tasks, rather than hold more data from fewer tasks.</p>
</div></blockquote>
</div>
<div class="section" id="sink-max-buffer-size">
<h3><code class="docutils literal notranslate"><span class="pre">sink.max-buffer-size</span></code><a class="headerlink" href="#sink-max-buffer-size" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">32MB</span></code></p></li>
</ul>
<p>Output buffer size for task data that is waiting to be pulled by upstream
tasks. If the task output is hash partitioned, then the buffer is
shared across all of the partitioned consumers. Increasing this value may
improve network throughput for data transferred between stages, if the
network has high latency, or if there are many nodes in the cluster.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="task-properties">
<span id="id1"></span><h2>Task Properties<a class="headerlink" href="#task-properties" title="Permalink to this headline">#</a></h2>
<div class="section" id="task-concurrency">
<h3><code class="docutils literal notranslate"><span class="pre">task.concurrency</span></code><a class="headerlink" href="#task-concurrency" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Restrictions:</strong> must be a power of two</p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">16</span></code></p></li>
</ul>
<p>Default local concurrency for parallel operators, such as joins and aggregations.
This value should be adjusted up or down based on the query concurrency and worker
resource utilization. Lower values are better for clusters that run many queries
concurrently, because the cluster is already utilized by all the running
queries, so adding more concurrency results in slow downs due to context
switching and other overhead. Higher values are better for clusters that only run
one or a few queries at a time. This can also be specified on a per-query basis
using the <code class="docutils literal notranslate"><span class="pre">task_concurrency</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="task-http-response-threads">
<h3><code class="docutils literal notranslate"><span class="pre">task.http-response-threads</span></code><a class="headerlink" href="#task-http-response-threads" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100</span></code></p></li>
</ul>
<p>Maximum number of threads that may be created to handle HTTP responses. Threads are
created on demand and are cleaned up when idle, thus there is no overhead to a large
value, if the number of requests to be handled is small. More threads may be helpful
on clusters with a high number of concurrent queries, or on clusters with hundreds
or thousands of workers.</p>
</div></blockquote>
</div>
<div class="section" id="task-http-timeout-threads">
<h3><code class="docutils literal notranslate"><span class="pre">task.http-timeout-threads</span></code><a class="headerlink" href="#task-http-timeout-threads" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">3</span></code></p></li>
</ul>
<p>Number of threads used to handle timeouts when generating HTTP responses. This value
should be increased if all the threads are frequently in use. This can be monitored
via the <code class="docutils literal notranslate"><span class="pre">io.prestosql.server:name=AsyncHttpExecutionMBean:TimeoutExecutor</span></code>
JMX object. If <code class="docutils literal notranslate"><span class="pre">ActiveCount</span></code> is always the same as <code class="docutils literal notranslate"><span class="pre">PoolSize</span></code>, increase the
number of threads.</p>
</div></blockquote>
</div>
<div class="section" id="task-info-update-interval">
<h3><code class="docutils literal notranslate"><span class="pre">task.info-update-interval</span></code><a class="headerlink" href="#task-info-update-interval" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">duration</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1ms</span></code></p></li>
<li><p><strong>Maximum value:</strong> <code class="docutils literal notranslate"><span class="pre">10s</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">3s</span></code></p></li>
</ul>
<p>Controls staleness of task information, which is used in scheduling. Larger values
can reduce coordinator CPU load, but may result in suboptimal split scheduling.</p>
</div></blockquote>
</div>
<div class="section" id="task-max-partial-aggregation-memory">
<h3><code class="docutils literal notranslate"><span class="pre">task.max-partial-aggregation-memory</span></code><a class="headerlink" href="#task-max-partial-aggregation-memory" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">16MB</span></code></p></li>
</ul>
<p>Maximum size of partial aggregation results for distributed aggregations. Increasing this
value can result in less network transfer and lower CPU utilization, by allowing more
groups to be kept locally before being flushed, at the cost of additional memory usage.</p>
</div></blockquote>
</div>
<div class="section" id="task-max-worker-threads">
<h3><code class="docutils literal notranslate"><span class="pre">task.max-worker-threads</span></code><a class="headerlink" href="#task-max-worker-threads" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">Node</span> <span class="pre">CPUs</span> <span class="pre">*</span> <span class="pre">2</span></code></p></li>
</ul>
<p>Sets the number of threads used by workers to process splits. Increasing this number
can improve throughput, if worker CPU utilization is low and all the threads are in use,
but it causes increased heap space usage. Setting the value too high may cause a drop
in performance due to a context switching. The number of active threads is available
via the <code class="docutils literal notranslate"><span class="pre">RunningSplits</span></code> property of the
<code class="docutils literal notranslate"><span class="pre">io.prestosql.execution.executor:name=TaskExecutor.RunningSplits</span></code> JMX object.</p>
</div></blockquote>
</div>
<div class="section" id="task-min-drivers">
<h3><code class="docutils literal notranslate"><span class="pre">task.min-drivers</span></code><a class="headerlink" href="#task-min-drivers" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">task.max-worker-threads</span> <span class="pre">*</span> <span class="pre">2</span></code></p></li>
</ul>
<p>The target number of running leaf splits on a worker. This is a minimum value because
each leaf task is guaranteed at least <code class="docutils literal notranslate"><span class="pre">3</span></code> running splits. Non-leaf tasks are also
guaranteed to run in order to prevent deadlocks. A lower value may improve responsiveness
for new tasks, but can result in underutilized resources. A higher value can increase
resource utilization, but uses additional memory.</p>
</div></blockquote>
</div>
<div class="section" id="task-writer-count">
<h3><code class="docutils literal notranslate"><span class="pre">task.writer-count</span></code><a class="headerlink" href="#task-writer-count" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Restrictions:</strong> must be a power of two</p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
</ul>
<p>The number of concurrent writer threads per worker per query. Increasing this value may
increase write speed, especially when a query is not I/O bound and can take advantage
of additional CPU for parallel writes. Some connectors can be bottlenecked on CPU when
writing due to compression or other factors. Setting this too high may cause the cluster
to become overloaded due to excessive resource utilization. This can also be specified on
a per-query basis using the <code class="docutils literal notranslate"><span class="pre">task_writer_count</span></code> session property.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="writer-scaling-properties">
<h2>Writer Scaling Properties<a class="headerlink" href="#writer-scaling-properties" title="Permalink to this headline">#</a></h2>
<p>By default, the number of writer tasks is static. Enabling writer scaling allows
Presto to dynamically scale out the number of writer tasks rather than
allocating a fixed number of tasks. Additional tasks are added when the average
amount of physical data per writer is above a minimum threshold, but only if the
query is bottlenecked on writing.</p>
<p>Writer scaling is useful with connectors like Hive that produce one or more
files per writer – reducing the number of writers results in a larger average
file size. However, writer scaling can have a small impact on query wall time
due to the decreased writer parallelism while the writer count ramps up to match
the needs of the query.</p>
<div class="section" id="scale-writers">
<h3><code class="docutils literal notranslate"><span class="pre">scale-writers</span></code><a class="headerlink" href="#scale-writers" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
</ul>
<p>Enable writer scaling. This can be specified on a per-query basis
using the <code class="docutils literal notranslate"><span class="pre">scale_writers</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="writer-min-size">
<h3><code class="docutils literal notranslate"><span class="pre">writer-min-size</span></code><a class="headerlink" href="#writer-min-size" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">32MB</span></code></p></li>
</ul>
<p>The minimum amount of data that must be written by a writer task before
another writer is eligible to be added. Each writer task may have multiple
writers, controlled by <code class="docutils literal notranslate"><span class="pre">task.writer-count</span></code>, thus this value is effectively
divided by the the number of writers per task. This can be specified on a
per-query basis using the <code class="docutils literal notranslate"><span class="pre">writer_min_size</span></code> session property.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="node-scheduler-properties">
<span id="id2"></span><h2>Node Scheduler Properties<a class="headerlink" href="#node-scheduler-properties" title="Permalink to this headline">#</a></h2>
<div class="section" id="node-scheduler-max-splits-per-node">
<h3><code class="docutils literal notranslate"><span class="pre">node-scheduler.max-splits-per-node</span></code><a class="headerlink" href="#node-scheduler-max-splits-per-node" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100</span></code></p></li>
</ul>
<p>The target value for the total number of splits that can be running for
each worker node.</p>
<p>Using a higher value is recommended, if queries are submitted in large batches
(e.g., running a large group of reports periodically), or for connectors that
produce many splits that complete quickly. Increasing this value may improve
query latency, by ensuring that the workers have enough splits to keep them
fully utilized.</p>
<p>Setting this too high wastes memory and may result in lower performance
due to splits not being balanced across workers. Ideally, it should be set
such that there is always at least one split waiting to be processed, but
not higher.</p>
</div></blockquote>
</div>
<div class="section" id="node-scheduler-max-pending-splits-per-task">
<h3><code class="docutils literal notranslate"><span class="pre">node-scheduler.max-pending-splits-per-task</span></code><a class="headerlink" href="#node-scheduler-max-pending-splits-per-task" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">10</span></code></p></li>
</ul>
<p>The number of outstanding splits that can be queued for each worker node
for a single stage of a query, even when the node is already at the limit for
total number of splits. Allowing a minimum number of splits per stage is
required to prevent starvation and deadlocks.</p>
<p>This value must be smaller than <code class="docutils literal notranslate"><span class="pre">node-scheduler.max-splits-per-node</span></code>,
is usually increased for the same reasons, and has similar drawbacks
if set too high.</p>
</div></blockquote>
</div>
<div class="section" id="node-scheduler-min-candidates">
<h3><code class="docutils literal notranslate"><span class="pre">node-scheduler.min-candidates</span></code><a class="headerlink" href="#node-scheduler-min-candidates" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">10</span></code></p></li>
</ul>
<p>The minimum number of candidate nodes that are evaluated by the
node scheduler when choosing the target node for a split. Setting
this value too low may prevent splits from being properly balanced
across all worker nodes. Setting it too high may increase query
latency and increase CPU usage on the coordinator.</p>
</div></blockquote>
</div>
<div class="section" id="node-scheduler-policy">
<h3><code class="docutils literal notranslate"><span class="pre">node-scheduler.policy</span></code><a class="headerlink" href="#node-scheduler-policy" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">uniform</span></code>, <code class="docutils literal notranslate"><span class="pre">topology</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">uniform</span></code></p></li>
</ul>
<p>Sets the node scheduler policy to use when scheduling splits. <code class="docutils literal notranslate"><span class="pre">uniform</span></code>  attempts
to schedule splits on the host where the data is located, while maintaining a uniform
distribution across all hosts. <code class="docutils literal notranslate"><span class="pre">topology</span></code> tries to schedule splits according to
the topology distance between nodes and splits. It is recommended to use <code class="docutils literal notranslate"><span class="pre">uniform</span></code>
for clusters where distributed storage runs on the same nodes as Presto workers.</p>
</div></blockquote>
</div>
<div class="section" id="node-scheduler-network-topology-segments">
<h3><code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.segments</span></code><a class="headerlink" href="#node-scheduler-network-topology-segments" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">machine</span></code></p></li>
</ul>
<p>A comma-separated string describing the meaning of each segment of a network location.
For example, setting <code class="docutils literal notranslate"><span class="pre">region,rack,machine</span></code> means a network location contains three segments.</p>
</div></blockquote>
</div>
<div class="section" id="node-scheduler-network-topology-type">
<h3><code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.type</span></code><a class="headerlink" href="#node-scheduler-network-topology-type" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">flat</span></code>, <code class="docutils literal notranslate"><span class="pre">file</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">flat</span></code></p></li>
</ul>
<p>Sets the network topology type. To use this option, <code class="docutils literal notranslate"><span class="pre">node-scheduler.policy</span></code> must be set to
<code class="docutils literal notranslate"><span class="pre">topology</span></code>. <code class="docutils literal notranslate"><span class="pre">flat</span></code> has only one segment, with one value for each machine.
<code class="docutils literal notranslate"><span class="pre">file</span></code> loads the topology from a file as described below.</p>
</div></blockquote>
</div>
<div class="section" id="node-scheduler-network-topology-file">
<h3><code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.file</span></code><a class="headerlink" href="#node-scheduler-network-topology-file" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
</ul>
<p>Load the network topology from a file. To use this option, <code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.type</span></code>
must be set to <code class="docutils literal notranslate"><span class="pre">file</span></code>. Each line contains a mapping between a host name and a
network location, separated by whitespace. Network location must begin with a leading
<code class="docutils literal notranslate"><span class="pre">/</span></code> and segments are separated by a <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>192.168.0.1 /region1/rack1/machine1
192.168.0.2 /region1/rack1/machine2
hdfs01.example.com /region2/rack2/machine3
</pre></div>
</div>
</div>
<div class="section" id="node-scheduler-network-topology-refresh-period">
<h3><code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.refresh-period</span></code><a class="headerlink" href="#node-scheduler-network-topology-refresh-period" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">duration</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">1ms</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">5m</span></code></p></li>
</ul>
<p>Controls how often the network topology file is reloaded.  To use this option,
<code class="docutils literal notranslate"><span class="pre">node-scheduler.network-topology.type</span></code> must be set to <code class="docutils literal notranslate"><span class="pre">file</span></code>.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="optimizer-properties">
<h2>Optimizer Properties<a class="headerlink" href="#optimizer-properties" title="Permalink to this headline">#</a></h2>
<div class="section" id="optimizer-dictionary-aggregation">
<h3><code class="docutils literal notranslate"><span class="pre">optimizer.dictionary-aggregation</span></code><a class="headerlink" href="#optimizer-dictionary-aggregation" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
</ul>
<p>Enables optimization for aggregations on dictionaries. This can also be specified
on a per-query basis using the <code class="docutils literal notranslate"><span class="pre">dictionary_aggregation</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="optimizer-optimize-hash-generation">
<h3><code class="docutils literal notranslate"><span class="pre">optimizer.optimize-hash-generation</span></code><a class="headerlink" href="#optimizer-optimize-hash-generation" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>Compute hash codes for distribution, joins, and aggregations early during execution,
allowing result to be shared between operations later in the query. This can reduce
CPU usage by avoiding computing the same hash multiple times, but at the cost of
additional network transfer for the hashes. In most cases it decreases overall
query processing time. This can also be specified on a per-query basis using the
<code class="docutils literal notranslate"><span class="pre">optimize_hash_generation</span></code> session property.</p>
<p>It is often helpful to disable this property, when using <a class="reference internal" href="../sql/explain.html"><span class="doc">EXPLAIN</span></a> in order
to make the query plan easier to read.</p>
</div></blockquote>
</div>
<div class="section" id="optimizer-optimize-metadata-queries">
<h3><code class="docutils literal notranslate"><span class="pre">optimizer.optimize-metadata-queries</span></code><a class="headerlink" href="#optimizer-optimize-metadata-queries" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
</ul>
<p>Enable optimization of some aggregations by using values that are stored as metadata.
This allows Presto to execute some simple queries in constant time. Currently, this
optimization applies to <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">approx_distinct</span></code> of partition
keys and other aggregation insensitive to the cardinality of the input,including
<code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code> aggregates. Using this may speed up some queries significantly.</p>
<p>The main drawback is that it can produce incorrect results, if the connector returns
partition keys for partitions that have no rows. In particular, the Hive connector
can return empty partitions, if they were created by other systems. Presto cannot
create them.</p>
</div></blockquote>
</div>
<div class="section" id="optimizer-push-aggregation-through-join">
<h3><code class="docutils literal notranslate"><span class="pre">optimizer.push-aggregation-through-join</span></code><a class="headerlink" href="#optimizer-push-aggregation-through-join" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>When an aggregation is above an outer join and all columns from the outer side of the join
are in the grouping clause, the aggregation is pushed below the outer join. This optimization
is particularly useful for correlated scalar subqueries, which get rewritten to an aggregation
over an outer join. For example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">item</span> <span class="n">i</span>
    <span class="k">WHERE</span> <span class="n">i</span><span class="p">.</span><span class="n">i_current_price</span> <span class="o">&gt;</span> <span class="p">(</span>
        <span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="n">j</span><span class="p">.</span><span class="n">i_current_price</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">item</span> <span class="n">j</span>
            <span class="k">WHERE</span> <span class="n">i</span><span class="p">.</span><span class="n">i_category</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">i_category</span><span class="p">);</span>
</pre></div>
</div>
<p>Enabling this optimization can substantially speed up queries by reducing
the amount of data that needs to be processed by the join.  However, it may slow down some
queries that have very selective joins. This can also be specified on a per-query basis using
the <code class="docutils literal notranslate"><span class="pre">push_aggregation_through_join</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="optimizer-push-table-write-through-union">
<h3><code class="docutils literal notranslate"><span class="pre">optimizer.push-table-write-through-union</span></code><a class="headerlink" href="#optimizer-push-table-write-through-union" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>Parallelize writes when using <code class="docutils literal notranslate"><span class="pre">UNION</span> <span class="pre">ALL</span></code> in queries that write data. This improves the
speed of writing output tables in <code class="docutils literal notranslate"><span class="pre">UNION</span> <span class="pre">ALL</span></code> queries, because these writes do not require
additional synchronization when collecting results. Enabling this optimization can improve
<code class="docutils literal notranslate"><span class="pre">UNION</span> <span class="pre">ALL</span></code> speed, when write speed is not yet saturated. However, it may slow down queries
in an already heavily loaded system. This can also be specified on a per-query basis
using the <code class="docutils literal notranslate"><span class="pre">push_table_write_through_union</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="optimizer-join-reordering-strategy">
<h3><code class="docutils literal notranslate"><span class="pre">optimizer.join-reordering-strategy</span></code><a class="headerlink" href="#optimizer-join-reordering-strategy" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code>, <code class="docutils literal notranslate"><span class="pre">ELIMINATE_CROSS_JOINS</span></code>, <code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code></p></li>
</ul>
<p>The join reordering strategy to use.  <code class="docutils literal notranslate"><span class="pre">NONE</span></code> maintains the order the tables are listed in the
query.  <code class="docutils literal notranslate"><span class="pre">ELIMINATE_CROSS_JOINS</span></code> reorders joins to eliminate cross joins, where possible, and
otherwise maintains the original query order. When reordering joins, it also strives to maintain the
original table order as much as possible. <code class="docutils literal notranslate"><span class="pre">AUTOMATIC</span></code> enumerates possible orders, and uses
statistics-based cost estimation to determine the least cost order. If stats are not available, or if
for any reason a cost could not be computed, the <code class="docutils literal notranslate"><span class="pre">ELIMINATE_CROSS_JOINS</span></code> strategy is used. This can
be specified on a per-query basis using the <code class="docutils literal notranslate"><span class="pre">join_reordering_strategy</span></code> session property.</p>
</div></blockquote>
</div>
<div class="section" id="optimizer-max-reordered-joins">
<h3><code class="docutils literal notranslate"><span class="pre">optimizer.max-reordered-joins</span></code><a class="headerlink" href="#optimizer-max-reordered-joins" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">9</span></code></p></li>
</ul>
<p>When optimizer.join-reordering-strategy is set to cost-based, this property determines the maximum
number of joins that can be reordered at once.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The number of possible join orders scales factorially with the number of relations,
so increasing this value can cause serious performance issues.</p>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="regular-expression-function-properties">
<h2>Regular Expression Function Properties<a class="headerlink" href="#regular-expression-function-properties" title="Permalink to this headline">#</a></h2>
<p>The following properties allow tuning the <a class="reference internal" href="../functions/regexp.html"><span class="doc">Regular Expression Functions</span></a>.</p>
<div class="section" id="regex-library">
<h3><code class="docutils literal notranslate"><span class="pre">regex-library</span></code><a class="headerlink" href="#regex-library" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">JONI</span></code>, <code class="docutils literal notranslate"><span class="pre">RE2J</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">JONI</span></code></p></li>
</ul>
<p>Which library to use for regular expression functions.
<code class="docutils literal notranslate"><span class="pre">JONI</span></code> is generally faster for common usage, but can require exponential
time for certain expression patterns. <code class="docutils literal notranslate"><span class="pre">RE2J</span></code> uses a different algorithm,
which guarantees linear time, but is often slower.</p>
</div></blockquote>
</div>
<div class="section" id="re2j-dfa-states-limit">
<h3><code class="docutils literal notranslate"><span class="pre">re2j.dfa-states-limit</span></code><a class="headerlink" href="#re2j-dfa-states-limit" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">2</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">2147483647</span></code></p></li>
</ul>
<p>The maximum number of states to use when RE2J builds the fast,
but potentially memory intensive, deterministic finite automaton (DFA)
for regular expression matching. If the limit is reached, RE2J falls
back to the algorithm that uses the slower, but less memory intensive
non-deterministic finite automaton (NFA). Decreasing this value decreases the
maximum memory footprint of a regular expression search at the cost of speed.</p>
</div></blockquote>
</div>
<div class="section" id="re2j-dfa-retries">
<h3><code class="docutils literal notranslate"><span class="pre">re2j.dfa-retries</span></code><a class="headerlink" href="#re2j-dfa-retries" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Minimum value:</strong> <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">5</span></code></p></li>
</ul>
<p>The number of times that RE2J retries the DFA algorithm, when
it reaches a states limit before using the slower, but less memory
intensive NFA algorithm, for all future inputs for that search. If hitting the
limit for a given input row is likely to be an outlier, you want to be able
to process subsequent rows using the faster DFA algorithm. If you are likely
to hit the limit on matches for subsequent rows as well, you want to use the
correct algorithm from the beginning so as not to waste time and resources.
The more rows you are processing, the larger this value should be.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="logging-properties">
<h2>Logging Properties<a class="headerlink" href="#logging-properties" title="Permalink to this headline">#</a></h2>
<div class="section" id="log-path">
<h3><code class="docutils literal notranslate"><span class="pre">log.path</span></code><a class="headerlink" href="#log-path" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">var/log/server.log</span></code></p></li>
</ul>
<p>The path to the log file used by Presto. The path is relative to the data
directory, configured by the launcher script as detailed in
<a class="reference internal" href="../installation/deployment.html#running-presto"><span class="std std-ref">Running Presto</span></a>.</p>
</div></blockquote>
</div>
<div class="section" id="log-max-history">
<h3><code class="docutils literal notranslate"><span class="pre">log.max-history</span></code><a class="headerlink" href="#log-max-history" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">30</span></code></p></li>
</ul>
<p>The maximum number of general application log files to use, before log
rotation replaces old content.</p>
</div></blockquote>
</div>
<div class="section" id="log-max-size">
<h3><code class="docutils literal notranslate"><span class="pre">log.max-size</span></code><a class="headerlink" href="#log-max-size" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">100MB</span></code></p></li>
</ul>
<p>The maximum file size for the general application log file.</p>
</div></blockquote>
</div>
<div class="section" id="http-server-log-enabled">
<h3><code class="docutils literal notranslate"><span class="pre">http-server.log.enabled</span></code><a class="headerlink" href="#http-server-log-enabled" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>Flag to enable or disable logging for the HTTP server.</p>
</div></blockquote>
</div>
<div class="section" id="http-server-log-compression-enabled">
<h3><code class="docutils literal notranslate"><span class="pre">http-server.log.compression.enabled</span></code><a class="headerlink" href="#http-server-log-compression-enabled" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>Flag to enable or disable compression of the log files of the HTTP server.</p>
</div></blockquote>
</div>
<div class="section" id="http-server-log-path">
<h3><code class="docutils literal notranslate"><span class="pre">http-server.log.path</span></code><a class="headerlink" href="#http-server-log-path" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">var/log/http-request.log</span></code></p></li>
</ul>
<p>The path to the log file used by the HTTP server. The path is relative to
the data directory, configured by the launcher script as detailed in
<a class="reference internal" href="../installation/deployment.html#running-presto"><span class="std std-ref">Running Presto</span></a>.</p>
</div></blockquote>
</div>
<div class="section" id="http-server-log-max-history">
<h3><code class="docutils literal notranslate"><span class="pre">http-server.log.max-history</span></code><a class="headerlink" href="#http-server-log-max-history" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">integer</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">15</span></code></p></li>
</ul>
<p>The maximum number of log files for the HTTP server to use, before
log rotation replaces old content.</p>
</div></blockquote>
</div>
<div class="section" id="http-server-log-max-size">
<h3><code class="docutils literal notranslate"><span class="pre">http-server.log.max-size</span></code><a class="headerlink" href="#http-server-log-max-size" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">size</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">unlimited</span></code></p></li>
</ul>
<p>The maximum file size for the log file of the HTTP server.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="web-ui-properties">
<span id="id3"></span><h2>Web UI Properties<a class="headerlink" href="#web-ui-properties" title="Permalink to this headline">#</a></h2>
<p>The following properties can be used to configure the <a class="reference internal" href="web-interface.html"><span class="doc">Web UI</span></a>.</p>
<div class="section" id="web-ui-authentication-type">
<h3><code class="docutils literal notranslate"><span class="pre">web-ui.authentication.type</span></code><a class="headerlink" href="#web-ui-authentication-type" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">form</span></code>, <code class="docutils literal notranslate"><span class="pre">fixed</span></code>, <code class="docutils literal notranslate"><span class="pre">certificate</span></code>, <code class="docutils literal notranslate"><span class="pre">kerberos</span></code>, <code class="docutils literal notranslate"><span class="pre">jwt</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">form</span></code></p></li>
</ul>
<p>The authentication mechanism to allow user access to the Web UI. See
<a class="reference internal" href="web-interface.html#web-ui-authentication"><span class="std std-ref">Web UI Authentication</span></a>.</p>
</div></blockquote>
</div>
<div class="section" id="web-ui-enabled">
<h3><code class="docutils literal notranslate"><span class="pre">web-ui.enabled</span></code><a class="headerlink" href="#web-ui-enabled" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
<p>This property controls whether or not the Web UI is available.</p>
</div></blockquote>
</div>
<div class="section" id="web-ui-shared-secret">
<h3><code class="docutils literal notranslate"><span class="pre">web-ui.shared-secret</span></code><a class="headerlink" href="#web-ui-shared-secret" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Default value:</strong> randomly generated unless set</p></li>
</ul>
<p>The shared secret is used to generate authentication cookies for users of
the Web UI. If not set to a static value, any coordinator restart generates
a new random value, which in turn invalidates the session of any currently
logged in Web UI user.</p>
</div></blockquote>
</div>
<div class="section" id="web-ui-session-timeout">
<h3><code class="docutils literal notranslate"><span class="pre">web-ui.session-timeout</span></code><a class="headerlink" href="#web-ui-session-timeout" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">duration</span></code></p></li>
<li><p><strong>Default value:</strong> <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">day</span></code></p></li>
</ul>
<p>The duration how long a user can be logged into the Web UI, before the
session times out, which forces an automatic log-out.</p>
</div></blockquote>
</div>
<div class="section" id="web-ui-user">
<h3><code class="docutils literal notranslate"><span class="pre">web-ui.user</span></code><a class="headerlink" href="#web-ui-user" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">string</span></code></p></li>
<li><p><strong>Default value:</strong></p></li>
</ul>
<p>The username automatically used for authentication to the Web UI with the
<code class="docutils literal notranslate"><span class="pre">fixed</span></code> authentication type. See
<a class="reference internal" href="web-interface.html#web-ui-authentication"><span class="std std-ref">Web UI Authentication</span></a>.</p>
</div></blockquote>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="spill.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="8.5. Spill to Disk" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="jmx.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="8.3. Monitoring with JMX" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>