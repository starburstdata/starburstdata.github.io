

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10.26. Hive Connector GCS Tutorial &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="10. Connectors" href="../connector.html"/>
        <link rel="next" title="10.27. Hive Security Configuration" href="hive-security.html"/>
        <link rel="prev" title="10.25. Hive Connector" href="hive.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../connector.html">10. Connectors</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="starburst-connectors.html">10.1. Starburst Connectors Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-db2.html">10.2. Starburst DB2 Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-generic-jdbc.html">10.3. Starburst Generic JDBC Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive.html">10.4. Starburst Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-security.html">10.5. Starburst Hive Connector Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-ibm-cos.html">10.6. IBM Cloud Object Storage Support for the Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-mapr.html">10.7. MapR Hive metastore (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-cdp.html">10.8. Cloudera Data Platform support (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-delta-lake.html">10.9. Starburst Delta Lake Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-kafka.html">10.10. Starburst Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-mysql.html">10.11. Starburst MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-oracle.html">10.12. Starburst Oracle Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-postgresql.html">10.13. Starburst PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-snowflake.html">10.14. Starburst Snowflake Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-sqlserver.html">10.15. Starburst SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata.html">10.16. Starburst Teradata Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata-parallel-direct.html">10.17. Starburst Teradata Parallel Direct Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo.html">10.18. Accumulo Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigquery.html">10.19. BigQuery Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="blackhole.html">10.20. Black Hole Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra.html">10.21. Cassandra Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="druid.html">10.22. Druid Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">10.23. Elasticsearch Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="googlesheets.html">10.24. Google Sheets Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive.html">10.25. Hive Connector</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">10.26. Hive Connector GCS Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preliminary-steps">Preliminary Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ensure-access-to-gcs">Ensure Access to GCS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hive-connector-configuration">Hive Connector configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hive-metastore-configuration">Hive Metastore configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-gcs-data-from-presto-for-the-first-time">Accessing GCS Data From Presto for the First Time</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#accessing-data-already-mapped-in-the-hive-metastore">Accessing Data Already Mapped in the Hive metastore</a></li>
<li class="toctree-l4"><a class="reference internal" href="#accessing-data-not-yet-mapped-in-the-hive-metastore">Accessing Data Not Yet Mapped in the Hive metastore</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#writing-gcs-data-with-presto">Writing GCS Data with Presto</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-export-schema">Create Export Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#export-data-to-gcs">Export Data to GCS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hive-security.html">10.27. Hive Security Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-caching.html">10.28. Hive Connector Storage Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-azure.html">10.29. Hive Connector with Azure Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-alluxio.html">10.30. Hive Connector with Alluxio</a></li>
<li class="toctree-l2"><a class="reference internal" href="jmx.html">10.31. JMX Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka.html">10.32. Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka-tutorial.html">10.33. Kafka Connector Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="kinesis.html">10.34. Kinesis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kudu.html">10.35. Kudu Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="localfile.html">10.36. Local File Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">10.37. Memory Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb.html">10.38. MongoDB Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="memsql.html">10.39. MemSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">10.40. MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracle.html">10.41. Oracle Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="phoenix.html">10.42. Phoenix Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="pinot.html">10.43. Pinot Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql.html">10.44. PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="prometheus.html">10.45. Prometheus Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">10.46. Redis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redshift.html">10.47. Redshift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlserver.html">10.48. SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="system.html">10.49. System Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="thrift.html">10.50. Thrift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpcds.html">10.51. TPCDS Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpch.html">10.52. TPCH Connector</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/356-e/">Latest LTS (356-e)</option>
    <option value="/350-e/">350-e LTS</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/357-e/">Latest STS (357-e)</option>
    <option value="/355-e/">355-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../connector.html"><span class="section-number">10. </span>Connectors</a> &raquo;</li>
      
    <li><span class="section-number">10.26. </span>Hive Connector GCS Tutorial</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hive-connector-gcs-tutorial">
<h1><span class="section-number">10.26. </span>Hive Connector GCS Tutorial<a class="headerlink" href="#hive-connector-gcs-tutorial" title="Permalink to this headline">#</a></h1>
<div class="section" id="preliminary-steps">
<h2>Preliminary Steps<a class="headerlink" href="#preliminary-steps" title="Permalink to this headline">#</a></h2>
<div class="section" id="ensure-access-to-gcs">
<h3>Ensure Access to GCS<a class="headerlink" href="#ensure-access-to-gcs" title="Permalink to this headline">#</a></h3>
<p>Access to <a class="reference external" href="https://cloud.google.com/storage/">Google Cloud Storage</a>
data is possible thanks to the
<a class="reference external" href="https://cloud.google.com/dataproc/docs/concepts/connectors/cloud-storage">Hadoop Cloud Storage connector</a>.</p>
<p>If your data is publicly available, you do not need to do anything here.
However, in most cases data is not publicly available, and the Presto cluster needs to have access to it.
This is typically achieved by creating a service account, which has permissions to access your data.
You can do this on the
<a class="reference external" href="https://console.cloud.google.com/projectselector2/iam-admin/serviceaccounts">service accounts page in GCP</a>.
Once you create a service account, create a key for it and download the key in JSON format.</p>
</div>
<div class="section" id="hive-connector-configuration">
<h3>Hive Connector configuration<a class="headerlink" href="#hive-connector-configuration" title="Permalink to this headline">#</a></h3>
<p>Another requirement is that you have enabled and configured a Hive connector in Presto.
The connector uses Hive metastore for data discovery and is not limited to data residing on HDFS.</p>
<p><strong>Configuring Hive Connector</strong></p>
<ul>
<li><p>URL to Hive metastore:</p>
<blockquote>
<div><ul>
<li><p>New Hive metastore on GCP:</p>
<blockquote>
<div><p>If your Presto nodes are provisioned by GCP, your Hive metastore should also be on GCP
to minimize latency and costs. The simplest way to create a new Hive metastore on GCP
is to create a small Cloud DataProc cluster (1 master, 0 workers), accessible from
your Presto cluster. Follow the steps for existing Hive metastore after finishing this step.</p>
</div></blockquote>
</li>
<li><p>Existing Hive metastore:</p>
<blockquote>
<div><p>To use an existing Hive metastore with a Presto cluster, you need to set the
<code class="docutils literal notranslate"><span class="pre">hive.metastore.uri</span></code> property in your Hive catalog properties file to
<code class="docutils literal notranslate"><span class="pre">thrift://${METASTORE_ADDRESS}:${METASTORE_THRIFT_PORT}</span></code>.
If the metastore uses authentication, please refer to <a class="reference internal" href="hive-security.html"><span class="doc">Hive Security Configuration</span></a>.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>GCS access:</p>
<blockquote>
<div><p>Here are example values for all GCS configuration properties which can be set in Hive
catalog properties file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="c"># JSON key file used to access Google Cloud Storage</span>
<span class="na">hive.gcs.json-key-file-path</span><span class="o">=</span><span class="s">/path/to/gcs_keyfile.json</span>

<span class="c"># Use client-provided OAuth token to access Google Cloud Storage</span>
<span class="na">hive.gcs.use-access-token</span><span class="o">=</span><span class="s">false</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="hive-metastore-configuration">
<h3>Hive Metastore configuration<a class="headerlink" href="#hive-metastore-configuration" title="Permalink to this headline">#</a></h3>
<p>If your Hive metastore uses StorageBasedAuthorization, it needs to access GCS
to perform POSIX permission checks.
Configuring GCS access for Hive is outside the scope of this tutorial, but there
are some excellent guides online:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://cloud.google.com/dataproc/docs/concepts/connectors/install-storage-connector">Google: Installing the Cloud Storage connector</a></p></li>
<li><p><a class="reference external" href="https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.1.0/bk_cloud-data-access/content/gcp-get-started.html">HortonWorks: Working with Google Cloud Storage</a></p></li>
<li><p><a class="reference external" href="https://www.cloudera.com/documentation/enterprise/latest/topics/admin_gcs_config.html">Cloudera: Configuring Google Cloud Storage Connectivity</a></p></li>
</ul>
<p>GCS access is typically configured in <code class="docutils literal notranslate"><span class="pre">core-site.xml</span></code>, to be used by all components using Apache Hadoop.</p>
<p>GCS connector for Hadoop provides an implementation of a Hadoop FileSystem.
Unfortunately GCS IAM permissions don’t map to POSIX permissions required by Hadoop FileSystem,
so the GCS connector presents fake POSIX file permissions.</p>
<p>When Hive metastore accesses GCS, it see fake POSIX permissions equal to <code class="docutils literal notranslate"><span class="pre">0700</span></code> by default.
If Presto and Hive metastore are running as different user accounts, this causes Hive metastore
to deny Presto data access.
There are two possible solutions to this problem:</p>
<ul class="simple">
<li><p>Run Presto service and Hive service as the same user.</p></li>
<li><p>Make sure Hive GCS configuration includes a <code class="docutils literal notranslate"><span class="pre">fs.gs.reported.permissions</span></code> property
with a value of <code class="docutils literal notranslate"><span class="pre">777</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="accessing-gcs-data-from-presto-for-the-first-time">
<h2>Accessing GCS Data From Presto for the First Time<a class="headerlink" href="#accessing-gcs-data-from-presto-for-the-first-time" title="Permalink to this headline">#</a></h2>
<div class="section" id="accessing-data-already-mapped-in-the-hive-metastore">
<h3>Accessing Data Already Mapped in the Hive metastore<a class="headerlink" href="#accessing-data-already-mapped-in-the-hive-metastore" title="Permalink to this headline">#</a></h3>
<p>If you migrate to Presto from Hive, chances are that your GCS data is already mapped to
SQL tables in the metastore.
In that case, you should be able to query it.</p>
</div>
<div class="section" id="accessing-data-not-yet-mapped-in-the-hive-metastore">
<h3>Accessing Data Not Yet Mapped in the Hive metastore<a class="headerlink" href="#accessing-data-not-yet-mapped-in-the-hive-metastore" title="Permalink to this headline">#</a></h3>
<p>To access GCS data that is not yet mapped in the Hive metastore you need to provide the
schema of the data, the file format, and the data location.
For example, if you have ORC or Parquet files in an GCS bucket <code class="docutils literal notranslate"><span class="pre">my_bucket</span></code>, you need to execute a query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- select schema in which the table will be defined, must already exist</span>
<span class="n">USE</span> <span class="n">hive</span><span class="p">.</span><span class="k">default</span><span class="p">;</span>

<span class="c1">-- create table</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">orders</span> <span class="p">(</span>
     <span class="n">orderkey</span> <span class="nb">bigint</span><span class="p">,</span>
     <span class="n">custkey</span> <span class="nb">bigint</span><span class="p">,</span>
     <span class="n">orderstatus</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
     <span class="n">totalprice</span> <span class="n">double</span><span class="p">,</span>
     <span class="n">orderdate</span> <span class="nb">date</span><span class="p">,</span>
     <span class="n">orderpriority</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
     <span class="n">clerk</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
     <span class="n">shippriority</span> <span class="nb">integer</span><span class="p">,</span>
     <span class="k">comment</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">79</span><span class="p">)</span>
<span class="p">)</span> <span class="k">WITH</span> <span class="p">(</span>
     <span class="n">external_location</span> <span class="o">=</span> <span class="s1">&#39;gs://my_bucket/path/to/folder&#39;</span><span class="p">,</span>
     <span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;ORC&#39;</span> <span class="c1">-- or &#39;PARQUET&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Now you should be able to query the newly mapped table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">orders</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="writing-gcs-data-with-presto">
<h2>Writing GCS Data with Presto<a class="headerlink" href="#writing-gcs-data-with-presto" title="Permalink to this headline">#</a></h2>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">#</a></h3>
<p>Before you attempt to write data to GCS, make sure you have configured everything
necessary to read data from GCS.</p>
</div>
<div class="section" id="create-export-schema">
<h3>Create Export Schema<a class="headerlink" href="#create-export-schema" title="Permalink to this headline">#</a></h3>
<p>If Hive metastore contains schema(s) mapped to GCS locations, you can use them to
export data to GCS.
If you don’t want to use existing schemas, or there are no appropriate schemas in
the Hive metastore, you need to create a new one:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">SCHEMA</span> <span class="n">hive</span><span class="p">.</span><span class="n">gcs_export</span> <span class="k">WITH</span> <span class="p">(</span><span class="k">location</span> <span class="o">=</span> <span class="s1">&#39;gs://my_bucket/some/path&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="export-data-to-gcs">
<h3>Export Data to GCS<a class="headerlink" href="#export-data-to-gcs" title="Permalink to this headline">#</a></h3>
<p>Once you have a schema pointing to a location, where you want to export the data, you can issue
the export using a <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">AS</span></code> statement and select your desired file format. The data
is written to one or more files within the <code class="docutils literal notranslate"><span class="pre">gs://my_bucket/some/path/my_table</span></code> namespace.
Example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">hive</span><span class="p">.</span><span class="n">gcs_export</span><span class="p">.</span><span class="n">orders_export</span>
<span class="k">WITH</span> <span class="p">(</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;ORC&#39;</span><span class="p">)</span>
<span class="k">AS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">tpch</span><span class="p">.</span><span class="n">sf1</span><span class="p">.</span><span class="n">orders</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hive-security.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="10.27. Hive Security Configuration" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hive.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="10.25. Hive Connector" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>