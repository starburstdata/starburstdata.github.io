

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10.34. Kinesis Connector &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="10. Connectors" href="../connector.html"/>
        <link rel="next" title="10.35. Kudu Connector" href="kudu.html"/>
        <link rel="prev" title="10.33. Kafka Connector Tutorial" href="kafka-tutorial.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../connector.html">10. Connectors</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="starburst-connectors.html">10.1. Starburst Connectors Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-db2.html">10.2. Starburst DB2 Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-generic-jdbc.html">10.3. Starburst Generic JDBC Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive.html">10.4. Starburst Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-security.html">10.5. Starburst Hive Connector Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-ibm-cos.html">10.6. IBM Cloud Object Storage Support for the Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-mapr.html">10.7. MapR Hive metastore (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-cdp.html">10.8. Cloudera Data Platform support (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-delta-lake.html">10.9. Starburst Delta Lake Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-kafka.html">10.10. Starburst Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-mysql.html">10.11. Starburst MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-oracle.html">10.12. Starburst Oracle Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-postgresql.html">10.13. Starburst PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-snowflake.html">10.14. Starburst Snowflake Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-sqlserver.html">10.15. Starburst SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata.html">10.16. Starburst Teradata Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata-parallel-direct.html">10.17. Starburst Teradata Parallel Direct Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo.html">10.18. Accumulo Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigquery.html">10.19. BigQuery Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="blackhole.html">10.20. Black Hole Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra.html">10.21. Cassandra Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="druid.html">10.22. Druid Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">10.23. Elasticsearch Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="googlesheets.html">10.24. Google Sheets Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive.html">10.25. Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-gcs-tutorial.html">10.26. Hive Connector GCS Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-security.html">10.27. Hive Security Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-caching.html">10.28. Hive Connector Storage Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-azure.html">10.29. Hive Connector with Azure Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-alluxio.html">10.30. Hive Connector with Alluxio</a></li>
<li class="toctree-l2"><a class="reference internal" href="jmx.html">10.31. JMX Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka.html">10.32. Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka-tutorial.html">10.33. Kafka Connector Tutorial</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">10.34. Kinesis Connector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-properties">Configuration Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-access-key"><code class="docutils literal notranslate"><span class="pre">kinesis.access-key</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-secret-key"><code class="docutils literal notranslate"><span class="pre">kinesis.secret-key</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-aws-region"><code class="docutils literal notranslate"><span class="pre">kinesis.aws-region</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-default-schema"><code class="docutils literal notranslate"><span class="pre">kinesis.default-schema</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-table-description-location"><code class="docutils literal notranslate"><span class="pre">kinesis.table-description-location</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-batch-size"><code class="docutils literal notranslate"><span class="pre">kinesis.batch-size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-max-batches"><code class="docutils literal notranslate"><span class="pre">kinesis.max-batches</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-fetch-attempts"><code class="docutils literal notranslate"><span class="pre">kinesis.fetch-attempts</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-sleep-time"><code class="docutils literal notranslate"><span class="pre">kinesis.sleep-time</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-iterator-from-timestamp"><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-from-timestamp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-iterator-offset-seconds"><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-offset-seconds</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#kinesis-hide-internal-columns"><code class="docutils literal notranslate"><span class="pre">kinesis.hide-internal-columns</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#internal-columns">Internal Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-definition">Table Definition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kudu.html">10.35. Kudu Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="localfile.html">10.36. Local File Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">10.37. Memory Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb.html">10.38. MongoDB Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="memsql.html">10.39. MemSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">10.40. MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracle.html">10.41. Oracle Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="phoenix.html">10.42. Phoenix Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="pinot.html">10.43. Pinot Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql.html">10.44. PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="prometheus.html">10.45. Prometheus Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">10.46. Redis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redshift.html">10.47. Redshift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlserver.html">10.48. SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="system.html">10.49. System Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="thrift.html">10.50. Thrift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpcds.html">10.51. TPCDS Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpch.html">10.52. TPCH Connector</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/356-e/">Latest LTS (356-e)</option>
    <option value="/350-e/">350-e LTS</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/357-e/">Latest STS (357-e)</option>
    <option value="/355-e/">355-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../connector.html"><span class="section-number">10. </span>Connectors</a> &raquo;</li>
      
    <li><span class="section-number">10.34. </span>Kinesis Connector</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kinesis-connector">
<h1><span class="section-number">10.34. </span>Kinesis Connector<a class="headerlink" href="#kinesis-connector" title="Permalink to this headline">#</a></h1>
<p><a class="reference external" href="https://aws.amazon.com/kinesis/">Kinesis</a> is Amazon’s fully managed cloud-based service for real-time processing of large, distributed data streams.</p>
<p>This connector allows the use of Kinesis streams as tables in Presto, such that each data-blob/message
in a Kinesis stream is presented as a row in Presto. A flexible table mapping approach lets us
treat fields of the messages as columns in the table.</p>
<p>Under the hood, a Kinesis
<a class="reference external" href="https://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetShardIterator.html">shard iterator</a>
is used to retrieve the records, along with a series of
<a class="reference external" href="https://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetRecords.html">GetRecords</a> calls.
The shard iterator starts by default 24 hours before the current time, and works its way forward.
To be able to query a stream, table mappings are needed. These table definitions can be
stored on Amazon S3 (preferred), or stored in a local directory on each Presto node.</p>
<p>This connector is a <strong>read-only</strong> connector. It can only fetch data from Kinesis streams,
but cannot create streams or push data into existing streams.</p>
<p>To configure the Kinesis connector, create a catalog properties file <code class="docutils literal notranslate"><span class="pre">etc/catalog/kinesis.properties</span></code>
with the following contents, replacing the properties as appropriate:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>connector.name=kinesis
kinesis.access-key=XXXXXX
kinesis.secret-key=XXXXXX
</pre></div>
</div>
<div class="section" id="configuration-properties">
<h2>Configuration Properties<a class="headerlink" href="#configuration-properties" title="Permalink to this headline">#</a></h2>
<p>The following configuration properties are available:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.access-key</span></code></p></td>
<td><p>Access key to AWS account or blank to use default provider chain</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.secret-key</span></code></p></td>
<td><p>Secret key to AWS account or blank to use default provider chain</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.aws-region</span></code></p></td>
<td><p>AWS region to be used to read kinesis stream from</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.default-schema</span></code></p></td>
<td><p>Default schema name for tables</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.table-description-location</span></code></p></td>
<td><p>Directory containing table description files</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.hide-internal-columns</span></code></p></td>
<td><p>Controls whether internal columns are part of the table schema or not</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.batch-size</span></code></p></td>
<td><p>Maximum number of records to return in one batch</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.fetch-attempts</span></code></p></td>
<td><p>Read attempts made when no records returned and not caught up</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.max-batches</span></code></p></td>
<td><p>Maximum batches to read from Kinesis in one single query</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.sleep-time</span></code></p></td>
<td><p>Time for thread to sleep waiting to make next attempt to fetch batch</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-from-timestamp</span></code></p></td>
<td><p>Begin iterating from a given timestamp instead of the trim horizon</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-offset-seconds</span></code></p></td>
<td><p>Number of seconds before current time to start iterating</p></td>
</tr>
</tbody>
</table>
<div class="section" id="kinesis-access-key">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.access-key</span></code><a class="headerlink" href="#kinesis-access-key" title="Permalink to this headline">#</a></h3>
<p>Defines the access key ID for AWS root account or IAM roles, which is used to sign programmatic requests to AWS Kinesis.</p>
<p>This property is optional; if not defined, the connector tries to follow <code class="docutils literal notranslate"><span class="pre">Default-Credential-Provider-Chain</span></code> provided by AWS in the following order:</p>
<ul class="simple">
<li><p>Environment Variable: Load credentials from environment variables <code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code> and <code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code>.</p></li>
<li><p>Java System Variable: Load from java system as <code class="docutils literal notranslate"><span class="pre">aws.accessKeyId</span></code> and <code class="docutils literal notranslate"><span class="pre">aws.secretKey</span></code>.</p></li>
<li><p>Profile Credentials File: Load from file typically located at <code class="docutils literal notranslate"><span class="pre">~/.aws/credentials</span></code>.</p></li>
<li><p>Instance profile credentials: These credentials can be used on EC2 instances, and are delivered through the Amazon EC2 metadata service.</p></li>
</ul>
</div>
<div class="section" id="kinesis-secret-key">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.secret-key</span></code><a class="headerlink" href="#kinesis-secret-key" title="Permalink to this headline">#</a></h3>
<p>Defines the secret key for AWS root account or IAM roles, which together with Access Key ID, is used to sign programmatic requests to AWS Kinesis.</p>
<p>This property is optional; if not defined, connector will try to follow <code class="docutils literal notranslate"><span class="pre">Default-Credential-Provider-Chain</span></code> same as above.</p>
</div>
<div class="section" id="kinesis-aws-region">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.aws-region</span></code><a class="headerlink" href="#kinesis-aws-region" title="Permalink to this headline">#</a></h3>
<p>Defines AWS Kinesis regional endpoint. Selecting appropriate region may reduce latency in fetching data.</p>
<p>This field is optional; The default region is <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code> referring to end point ‘kinesis.us-east-1.amazonaws.com’.</p>
<p>See <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/rande.html#ak_region">Kinesis Data Streams regions</a>
for a current list of available regions.</p>
</div>
<div class="section" id="kinesis-default-schema">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.default-schema</span></code><a class="headerlink" href="#kinesis-default-schema" title="Permalink to this headline">#</a></h3>
<p>Defines the schema which contains all tables that were defined without a qualifying schema name.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
</div>
<div class="section" id="kinesis-table-description-location">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.table-description-location</span></code><a class="headerlink" href="#kinesis-table-description-location" title="Permalink to this headline">#</a></h3>
<p>References an S3 URL or a folder within Presto deployment that holds one or more JSON files ending with <code class="docutils literal notranslate"><span class="pre">.json</span></code>, which contain table description files.
The S3 bucket and folder will be checked every 10 minutes for updates and changed files.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">etc/kinesis</span></code>.</p>
</div>
<div class="section" id="kinesis-batch-size">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.batch-size</span></code><a class="headerlink" href="#kinesis-batch-size" title="Permalink to this headline">#</a></h3>
<p>Defines the maximum number of records to return in one request to Kinesis Streams. Maximum limit is <code class="docutils literal notranslate"><span class="pre">10000</span></code> records.</p>
<p>This field is optional; the default value is <code class="docutils literal notranslate"><span class="pre">10000</span></code>.</p>
</div>
<div class="section" id="kinesis-max-batches">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.max-batches</span></code><a class="headerlink" href="#kinesis-max-batches" title="Permalink to this headline">#</a></h3>
<p>The maximum number of batches to read in a single query. The default value is <code class="docutils literal notranslate"><span class="pre">1000</span></code>.</p>
</div>
<div class="section" id="kinesis-fetch-attempts">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.fetch-attempts</span></code><a class="headerlink" href="#kinesis-fetch-attempts" title="Permalink to this headline">#</a></h3>
<p>Defines the number of attempts made to read a batch from Kinesis Streams, when no records are returned and the <em>millis behind latest</em>
parameter shows we are not yet caught up. When records are returned no additional attempts are necessary.
<code class="docutils literal notranslate"><span class="pre">GetRecords</span></code> has been observed to return no records even though the shard is not empty.
That is why multiple attempts need to be made.</p>
<p>This field is optional; the default value is <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</div>
<div class="section" id="kinesis-sleep-time">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.sleep-time</span></code><a class="headerlink" href="#kinesis-sleep-time" title="Permalink to this headline">#</a></h3>
<p>Defines the duration for which a thread needs to sleep between <code class="docutils literal notranslate"><span class="pre">kinesis.fetch-attempts</span></code> made to fetch data.</p>
<p>This field is optional; the default value is <code class="docutils literal notranslate"><span class="pre">1000ms</span></code>.</p>
</div>
<div class="section" id="kinesis-iterator-from-timestamp">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-from-timestamp</span></code><a class="headerlink" href="#kinesis-iterator-from-timestamp" title="Permalink to this headline">#</a></h3>
<p>Use an initial shard iterator type of <code class="docutils literal notranslate"><span class="pre">AT_TIMESTAMP</span></code> starting <code class="docutils literal notranslate"><span class="pre">kinesis.iterator-offset-seconds</span></code> before the current time.
When this is false, an iterator type of <code class="docutils literal notranslate"><span class="pre">TRIM_HORIZON</span></code> is used, meaning it starts from the oldest record in the stream.</p>
<p>The default is true.</p>
</div>
<div class="section" id="kinesis-iterator-offset-seconds">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.iterator-offset-seconds</span></code><a class="headerlink" href="#kinesis-iterator-offset-seconds" title="Permalink to this headline">#</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">kinesis.iterator-from-timestamp</span></code> is true, the shard iterator starts at <code class="docutils literal notranslate"><span class="pre">kinesis.iterator-offset-seconds</span></code> before the current time.</p>
<p>The default is <code class="docutils literal notranslate"><span class="pre">86400</span></code> seconds (24 hours).</p>
</div>
<div class="section" id="kinesis-hide-internal-columns">
<h3><code class="docutils literal notranslate"><span class="pre">kinesis.hide-internal-columns</span></code><a class="headerlink" href="#kinesis-hide-internal-columns" title="Permalink to this headline">#</a></h3>
<p>In addition to the data columns defined in a table description file, the connector maintains a number of additional columns for each table.
If these columns are hidden, they can still be used in queries, but they do not show up in <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table-name&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code>.</p>
<p>This property is optional; the default is true.</p>
</div>
</div>
<div class="section" id="internal-columns">
<h2>Internal Columns<a class="headerlink" href="#internal-columns" title="Permalink to this headline">#</a></h2>
<p>For each defined table, the connector maintains the following columns:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 11%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_shard_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p>ID of the Kinesis stream shard which contains this row.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_shard_sequence_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p>Sequence id within the Kinesis shard for this row.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_segment_start</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Lowest offset in the segment (inclusive) which contains this row.
This offset is partition specific.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_segment_end</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Highest offset in the segment (exclusive) which contains this row.
The offset is partition specific.
This is the same value as <code class="docutils literal notranslate"><span class="pre">_segment_start</span></code> of the next segment (if it exists).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_segment_count</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Running count for the current row within the segment. For an uncompacted topic,
<code class="docutils literal notranslate"><span class="pre">_segment_start</span> <span class="pre">+</span> <span class="pre">_segment_count</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">_partition_offset</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_message_valid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p>True if the decoder could decode the message successfully for this row.
When false, data columns mapped from the message should be treated as invalid.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_message</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p>Message bytes as an UTF-8 encoded string. This is only useful for a text topic.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_message_length</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Number of bytes in the message.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_message_timestamp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></p></td>
<td><p>Approximate arrival time of the message (milliseconds granularity).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_key</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p>Key bytes as an UTF-8 encoded string. This is only useful for textual keys.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_partition_key</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p>Partition Key bytes as a UTF-8 encoded string.</p></td>
</tr>
</tbody>
</table>
<p>For tables without a table definition file, the <code class="docutils literal notranslate"><span class="pre">_message_valid</span></code> column is always <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</div>
<div class="section" id="table-definition">
<h2>Table Definition<a class="headerlink" href="#table-definition" title="Permalink to this headline">#</a></h2>
<p>A table definition file consists of a JSON definition for a table, which corresponds to one stream in Kinesis.
The name of the file can be arbitrary but must end in <code class="docutils literal notranslate"><span class="pre">.json</span></code>. The structure of the table definition is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
      &quot;tableName&quot;: ...,
      &quot;schemaName&quot;: ...,
      &quot;streamName&quot;: ...,
      &quot;message&quot;: {
          &quot;dataFormat&quot;: ...,
          &quot;fields&quot;: [
              ...
         ]
      }
  }
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tableName</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Presto table name defined by this file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">schemaName</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Schema which contains the table. If omitted, the default schema name is used.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">streamName</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Name of the Kinesis Stream that is mapped</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">message</span></code></p></td>
<td><p>optional</p></td>
<td><p>JSON object</p></td>
<td><p>Field definitions for data columns mapped to the message itself.</p></td>
</tr>
</tbody>
</table>
<p>Every message in a Kinesis stream can be decoded using the definition provided in the message object.
The JSON object message in the table definition contains two fields:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 6%" />
<col style="width: 9%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Selects the decoder for this group of fields.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fields</span></code></p></td>
<td><p>required</p></td>
<td><p>JSON array</p></td>
<td><p>A list of field definitions. Each field definition creates a new column in the Presto table.</p></td>
</tr>
</tbody>
</table>
<p>Each field definition is a JSON object. At a minimum, a name, type, and mapping must be provided.
The overall structure looks like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;name&quot;: ...,
    &quot;type&quot;: ...,
    &quot;dataFormat&quot;: ...,
    &quot;mapping&quot;: ...,
    &quot;formatHint&quot;: ...,
    &quot;hidden&quot;: ...,
    &quot;comment&quot;: ...
}
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 7%" />
<col style="width: 9%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Name of the column in the Presto table.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Presto type of the column.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dataFormat</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Selects the column decoder for this field. Defaults to
the default decoder for this row data format and column type.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Mapping information for the column. This is decoder specific – see below.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">formatHint</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Sets a column specific format hint to the column decoder.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hidden</span></code></p></td>
<td><p>optional</p></td>
<td><p>boolean</p></td>
<td><p>Hides the column from <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table</span> <span class="pre">name&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>optional</p></td>
<td><p>string</p></td>
<td><p>Adds a column comment which is shown with <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table</span> <span class="pre">name&gt;</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>The name field is exposed to Presto as the column name, while the mapping field is the portion of the message that gets
mapped to that column. For JSON object messages, this refers to the field name of an object, and can be a path that drills
into the object structure of the message. Additionally, you can map a field of the JSON object to a string column type,
and if it is a more complex type (JSON array or JSON object) then the JSON itself becomes the field value.</p>
<p>There is no limit on field descriptions for either key or message.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="kudu.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="10.35. Kudu Connector" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kafka-tutorial.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="10.33. Kafka Connector Tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>