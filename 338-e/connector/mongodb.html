

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11.38. MongoDB Connector &mdash; Starburst Enterprise Presto</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="11. Connectors" href="../connector.html"/>
        <link rel="next" title="11.39. MemSQL Connector" href="memsql.html"/>
        <link rel="prev" title="11.37. Memory Connector" href="memory.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">4. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">5. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">6. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">7. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">8. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">9. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">10. Query Optimizer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../connector.html">11. Connectors</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="starburst-connectors.html">11.1. Starburst Connectors Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-db2.html">11.2. Starburst DB2 Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-generic-jdbc.html">11.3. Starburst Generic JDBC Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive.html">11.4. Starburst Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-security.html">11.5. Starburst Hive Connector Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-ibm-cos.html">11.6. IBM Cloud Object Storage Support for the Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-mapr.html">11.7. MapR Hive metastore (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-cdp.html">11.8. Cloudera Data Platform support (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-delta-lake.html">11.9. Starburst Delta Lake Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-kafka.html">11.10. Starburst Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-mysql.html">11.11. Starburst MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-oracle.html">11.12. Starburst Oracle Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-postgresql.html">11.13. Starburst PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-snowflake.html">11.14. Starburst Snowflake Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-sqlserver.html">11.15. Starburst SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata.html">11.16. Starburst Teradata Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata-parallel-direct.html">11.17. Starburst Teradata Parallel Direct Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo.html">11.18. Accumulo Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigquery.html">11.19. BigQuery Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="blackhole.html">11.20. Black Hole Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra.html">11.21. Cassandra Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="druid.html">11.22. Druid Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">11.23. Elasticsearch Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="googlesheets.html">11.24. Google Sheets Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive.html">11.25. Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-gcs-tutorial.html">11.26. Hive Connector GCS Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-security.html">11.27. Hive Security Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-caching.html">11.28. Hive Connector Storage Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-azure.html">11.29. Hive Connector with Azure Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-alluxio.html">11.30. Hive Connector with Alluxio</a></li>
<li class="toctree-l2"><a class="reference internal" href="jmx.html">11.31. JMX Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka.html">11.32. Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka-tutorial.html">11.33. Kafka Connector Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="kinesis.html">11.34. Kinesis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kudu.html">11.35. Kudu Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="localfile.html">11.36. Local File Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">11.37. Memory Connector</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">11.38. MongoDB Connector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#multiple-mongodb-clusters">Multiple MongoDB Clusters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-properties">Configuration Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-seeds"><code class="docutils literal notranslate"><span class="pre">mongodb.seeds</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-schema-collection"><code class="docutils literal notranslate"><span class="pre">mongodb.schema-collection</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-credentials"><code class="docutils literal notranslate"><span class="pre">mongodb.credentials</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-min-connections-per-host"><code class="docutils literal notranslate"><span class="pre">mongodb.min-connections-per-host</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-connections-per-host"><code class="docutils literal notranslate"><span class="pre">mongodb.connections-per-host</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-max-wait-time"><code class="docutils literal notranslate"><span class="pre">mongodb.max-wait-time</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-connection-timeout"><code class="docutils literal notranslate"><span class="pre">mongodb.connection-timeout</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-socket-timeout"><code class="docutils literal notranslate"><span class="pre">mongodb.socket-timeout</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-socket-keep-alive"><code class="docutils literal notranslate"><span class="pre">mongodb.socket-keep-alive</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-ssl-enabled"><code class="docutils literal notranslate"><span class="pre">mongodb.ssl.enabled</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-read-preference"><code class="docutils literal notranslate"><span class="pre">mongodb.read-preference</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-write-concern"><code class="docutils literal notranslate"><span class="pre">mongodb.write-concern</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-required-replica-set"><code class="docutils literal notranslate"><span class="pre">mongodb.required-replica-set</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-cursor-batch-size"><code class="docutils literal notranslate"><span class="pre">mongodb.cursor-batch-size</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#table-definition">Table Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#objectid">ObjectId</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memsql.html">11.39. MemSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">11.40. MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracle.html">11.41. Oracle Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="phoenix.html">11.42. Phoenix Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="pinot.html">11.43. Pinot Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql.html">11.44. PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="prometheus.html">11.45. Prometheus Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">11.46. Redis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redshift.html">11.47. Redshift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlserver.html">11.48. SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="system.html">11.49. System Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="thrift.html">11.50. Thrift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpcds.html">11.51. TPCDS Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpch.html">11.52. TPCH Connector</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">12. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">13. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">14. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">15. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">16. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">17. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">18. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e.1 LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/338-e/">Latest LTS (338-e)</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/340-e/">Latest STS (340-e)</option>
    <option value="/339-e/">336-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e.1 LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../connector.html"><span class="section-number">11. </span>Connectors</a> &raquo;</li>
      
    <li><span class="section-number">11.38. </span>MongoDB Connector</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mongodb-connector">
<h1><span class="section-number">11.38. </span>MongoDB Connector<a class="headerlink" href="#mongodb-connector" title="Permalink to this headline">#</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">mongodb</span></code> connector allows the use of <a class="reference external" href="https://www.mongodb.com/">MongoDB</a> collections as tables in Presto.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MongoDB 2.6+ is supported, although it is highly recommend to use 3.0 or later.</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h2>
<p>To configure the MongoDB connector, create a catalog properties file
<code class="docutils literal notranslate"><span class="pre">etc/catalog/mongodb.properties</span></code> with the following contents,
replacing the properties as appropriate:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>connector.name=mongodb
mongodb.seeds=host1,host:port
</pre></div>
</div>
<div class="section" id="multiple-mongodb-clusters">
<h3>Multiple MongoDB Clusters<a class="headerlink" href="#multiple-mongodb-clusters" title="Permalink to this headline">#</a></h3>
<p>You can have as many catalogs as you need, so if you have additional
MongoDB clusters, simply add another properties file to <code class="docutils literal notranslate"><span class="pre">etc/catalog</span></code>
with a different name, making sure it ends in <code class="docutils literal notranslate"><span class="pre">.properties</span></code>). For
example, if you name the property file <code class="docutils literal notranslate"><span class="pre">sales.properties</span></code>, Presto
will create a catalog named <code class="docutils literal notranslate"><span class="pre">sales</span></code> using the configured connector.</p>
</div>
</div>
<div class="section" id="configuration-properties">
<h2>Configuration Properties<a class="headerlink" href="#configuration-properties" title="Permalink to this headline">#</a></h2>
<p>The following configuration properties are available:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.seeds</span></code></p></td>
<td><p>List of all MongoDB servers</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.schema-collection</span></code></p></td>
<td><p>A collection which contains schema information</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.case-insensitive-name-matching</span></code></p></td>
<td><p>Match database and collection names case insensitively</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.credentials</span></code></p></td>
<td><p>List of credentials</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.min-connections-per-host</span></code></p></td>
<td><p>The minimum size of the connection pool per host</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.connections-per-host</span></code></p></td>
<td><p>The maximum size of the connection pool per host</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.max-wait-time</span></code></p></td>
<td><p>The maximum wait time</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.connection-timeout</span></code></p></td>
<td><p>The socket connect timeout</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.socket-timeout</span></code></p></td>
<td><p>The socket timeout</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.socket-keep-alive</span></code></p></td>
<td><p>Whether keep-alive is enabled on each socket</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.ssl.enabled</span></code></p></td>
<td><p>Use TLS/SSL for connections to mongod/mongos</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.read-preference</span></code></p></td>
<td><p>The read preference</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.write-concern</span></code></p></td>
<td><p>The write concern</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.required-replica-set</span></code></p></td>
<td><p>The required replica set name</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongodb.cursor-batch-size</span></code></p></td>
<td><p>The number of elements to return in a batch</p></td>
</tr>
</tbody>
</table>
<div class="section" id="mongodb-seeds">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.seeds</span></code><a class="headerlink" href="#mongodb-seeds" title="Permalink to this headline">#</a></h3>
<p>Comma-separated list of <code class="docutils literal notranslate"><span class="pre">hostname[:port]</span></code> all MongoDB servers in the same replica set, or a list of MongoDB servers in the same sharded cluster. If a port is not specified, port 27017 will be used.</p>
<p>This property is required; there is no default and at least one seed must be defined.</p>
</div>
<div class="section" id="mongodb-schema-collection">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.schema-collection</span></code><a class="headerlink" href="#mongodb-schema-collection" title="Permalink to this headline">#</a></h3>
<p>As MongoDB is a document database, there is no fixed schema information in the system. So a special collection in each MongoDB database should define the schema of all tables. Please refer the <a class="reference internal" href="#table-definition-label"><span class="std std-ref">Table Definition</span></a> section for the details.</p>
<p>At startup, this connector tries guessing fields’ types, but it might not be correct for your collection. In that case, you need to modify it manually. <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> and <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">AS</span> <span class="pre">SELECT</span></code> will create an entry for you.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">_schema</span></code>.</p>
</div>
<div class="section" id="mongodb-credentials">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.credentials</span></code><a class="headerlink" href="#mongodb-credentials" title="Permalink to this headline">#</a></h3>
<p>A comma separated list of <code class="docutils literal notranslate"><span class="pre">username:password&#64;database</span></code> credentials.</p>
<p>This property is optional; no default value. The <code class="docutils literal notranslate"><span class="pre">database</span></code> should be the authentication database for the user (e.g. <code class="docutils literal notranslate"><span class="pre">admin</span></code>).</p>
</div>
<div class="section" id="mongodb-min-connections-per-host">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.min-connections-per-host</span></code><a class="headerlink" href="#mongodb-min-connections-per-host" title="Permalink to this headline">#</a></h3>
<p>The minimum number of connections per host for this MongoClient instance. Those connections are kept in a pool when idle, and the pool ensures over time that it contains at least this minimum number.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</div>
<div class="section" id="mongodb-connections-per-host">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.connections-per-host</span></code><a class="headerlink" href="#mongodb-connections-per-host" title="Permalink to this headline">#</a></h3>
<p>The maximum number of connections allowed per host for this MongoClient instance. Those connections are kept in a pool when idle. Once the pool is exhausted, any operation requiring a connection blocks waiting for an available connection.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">100</span></code>.</p>
</div>
<div class="section" id="mongodb-max-wait-time">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.max-wait-time</span></code><a class="headerlink" href="#mongodb-max-wait-time" title="Permalink to this headline">#</a></h3>
<p>The maximum wait time in milliseconds, that a thread may wait for a connection to become available.
A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> means that it does not wait. A negative value means to wait indefinitely for a connection to become available.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">120000</span></code>.</p>
</div>
<div class="section" id="mongodb-connection-timeout">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.connection-timeout</span></code><a class="headerlink" href="#mongodb-connection-timeout" title="Permalink to this headline">#</a></h3>
<p>The connection timeout in milliseconds. A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> means no timeout. It is used solely when establishing a new connection.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">10000</span></code>.</p>
</div>
<div class="section" id="mongodb-socket-timeout">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.socket-timeout</span></code><a class="headerlink" href="#mongodb-socket-timeout" title="Permalink to this headline">#</a></h3>
<p>The socket timeout in milliseconds. It is used for I/O socket read and write operations.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">0</span></code> and means no timeout.</p>
</div>
<div class="section" id="mongodb-socket-keep-alive">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.socket-keep-alive</span></code><a class="headerlink" href="#mongodb-socket-keep-alive" title="Permalink to this headline">#</a></h3>
<p>This flag controls the socket keep alive feature that keeps a connection alive through firewalls.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="mongodb-ssl-enabled">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.ssl.enabled</span></code><a class="headerlink" href="#mongodb-ssl-enabled" title="Permalink to this headline">#</a></h3>
<p>This flag enables SSL connections to MongoDB servers.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="mongodb-read-preference">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.read-preference</span></code><a class="headerlink" href="#mongodb-read-preference" title="Permalink to this headline">#</a></h3>
<p>The read preference to use for queries, map-reduce, aggregation, and count.
The available values are <code class="docutils literal notranslate"><span class="pre">PRIMARY</span></code>, <code class="docutils literal notranslate"><span class="pre">PRIMARY_PREFERRED</span></code>, <code class="docutils literal notranslate"><span class="pre">SECONDARY</span></code>, <code class="docutils literal notranslate"><span class="pre">SECONDARY_PREFERRED</span></code> and <code class="docutils literal notranslate"><span class="pre">NEAREST</span></code>.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">PRIMARY</span></code>.</p>
</div>
<div class="section" id="mongodb-write-concern">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.write-concern</span></code><a class="headerlink" href="#mongodb-write-concern" title="Permalink to this headline">#</a></h3>
<p>The write concern to use. The available values are
<code class="docutils literal notranslate"><span class="pre">ACKNOWLEDGED</span></code>, <code class="docutils literal notranslate"><span class="pre">FSYNC_SAFE</span></code>, <code class="docutils literal notranslate"><span class="pre">FSYNCED</span></code>, <code class="docutils literal notranslate"><span class="pre">JOURNAL_SAFEY</span></code>, <code class="docutils literal notranslate"><span class="pre">JOURNALED</span></code>, <code class="docutils literal notranslate"><span class="pre">MAJORITY</span></code>,
<code class="docutils literal notranslate"><span class="pre">NORMAL</span></code>, <code class="docutils literal notranslate"><span class="pre">REPLICA_ACKNOWLEDGED</span></code>, <code class="docutils literal notranslate"><span class="pre">REPLICAS_SAFE</span></code> and <code class="docutils literal notranslate"><span class="pre">UNACKNOWLEDGED</span></code>.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">ACKNOWLEDGED</span></code>.</p>
</div>
<div class="section" id="mongodb-required-replica-set">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.required-replica-set</span></code><a class="headerlink" href="#mongodb-required-replica-set" title="Permalink to this headline">#</a></h3>
<p>The required replica set name. With this option set, the MongoClient instance performs the following actions:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="p">.</span> <span class="k">Connect</span> <span class="k">in</span> <span class="n">replica</span> <span class="k">set</span> <span class="k">mode</span><span class="p">,</span> <span class="k">and</span> <span class="n">discover</span> <span class="k">all</span> <span class="n">members</span> <span class="k">of</span> <span class="n">the</span> <span class="k">set</span> <span class="n">based</span> <span class="k">on</span> <span class="n">the</span> <span class="n">given</span> <span class="n">servers</span>
<span class="o">#</span><span class="p">.</span> <span class="n">Make</span> <span class="n">sure</span> <span class="n">that</span> <span class="n">the</span> <span class="k">set</span> <span class="n">name</span> <span class="n">reported</span> <span class="k">by</span> <span class="k">all</span> <span class="n">members</span> <span class="n">matches</span> <span class="n">the</span> <span class="n">required</span> <span class="k">set</span> <span class="n">name</span><span class="p">.</span>
<span class="o">#</span><span class="p">.</span> <span class="n">Refuse</span> <span class="k">to</span> <span class="n">service</span> <span class="k">any</span> <span class="n">requests</span><span class="p">,</span> <span class="k">if</span> <span class="k">any</span> <span class="n">member</span> <span class="k">of</span> <span class="n">the</span> <span class="n">seed</span> <span class="n">list</span> <span class="k">is</span> <span class="k">not</span> <span class="n">part</span> <span class="k">of</span> <span class="n">a</span> <span class="n">replica</span> <span class="k">set</span> <span class="k">with</span> <span class="n">the</span> <span class="n">required</span> <span class="n">name</span><span class="p">.</span>
</pre></div>
</div>
<p>This property is optional; no default value.</p>
</div>
<div class="section" id="mongodb-cursor-batch-size">
<h3><code class="docutils literal notranslate"><span class="pre">mongodb.cursor-batch-size</span></code><a class="headerlink" href="#mongodb-cursor-batch-size" title="Permalink to this headline">#</a></h3>
<p>Limits the number of elements returned in one batch. A cursor typically fetches a batch of result objects and stores them locally.
If batchSize is 0, Driver’s default are used.
If batchSize is positive, it represents the size of each batch of objects retrieved. It can be adjusted to optimize performance and limit data transfer.
If batchSize is negative, it limits the number of objects returned, that fit within the max batch size limit (usually 4MB), and the cursor is closed. For example if batchSize is -10, then the server returns a maximum of 10 documents, and as many as can fit in 4MB, then closes the cursor.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not use a batch size of <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</div>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</div>
</div>
<div class="section" id="table-definition">
<span id="table-definition-label"></span><h2>Table Definition<a class="headerlink" href="#table-definition" title="Permalink to this headline">#</a></h2>
<p>MongoDB maintains table definitions on the special collection where <code class="docutils literal notranslate"><span class="pre">mongodb.schema-collection</span></code> configuration value specifies.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There’s no way for the plugin to detect a collection is deleted.
You need to delete the entry by <code class="docutils literal notranslate"><span class="pre">db.getCollection(&quot;_schema&quot;).remove(</span> <span class="pre">{</span> <span class="pre">table:</span> <span class="pre">deleted_table_name</span> <span class="pre">})</span></code> in the Mongo Shell.
Or drop a collection by running <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">TABLE</span> <span class="pre">table_name</span></code> using Presto.</p>
</div>
<p>A schema collection consists of a MongoDB document for a table.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;table&quot;: ...,
    &quot;fields&quot;: [
          { &quot;name&quot; : ...,
            &quot;type&quot; : &quot;varchar|bigint|boolean|double|date|array(bigint)|...&quot;,
            &quot;hidden&quot; : false },
            ...
        ]
    }
}
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 7%" />
<col style="width: 11%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">table</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Presto table name</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fields</span></code></p></td>
<td><p>required</p></td>
<td><p>array</p></td>
<td><p>A list of field definitions. Each field definition creates a new column in the Presto table.</p></td>
</tr>
</tbody>
</table>
<p>Each field definition:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;name&quot;: ...,
    &quot;type&quot;: ...,
    &quot;hidden&quot;: ...
}
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Name of the column in the Presto table.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>required</p></td>
<td><p>string</p></td>
<td><p>Presto type of the column.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hidden</span></code></p></td>
<td><p>optional</p></td>
<td><p>boolean</p></td>
<td><p>Hides the column from <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span> <span class="pre">&lt;table</span> <span class="pre">name&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>There is no limit on field descriptions for either key or message.</p>
</div>
<div class="section" id="objectid">
<h2>ObjectId<a class="headerlink" href="#objectid" title="Permalink to this headline">#</a></h2>
<p>MongoDB collection has the special field <code class="docutils literal notranslate"><span class="pre">_id</span></code>. The connector tries to follow the same rules for this special field, so there will be hidden field <code class="docutils literal notranslate"><span class="pre">_id</span></code>.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">orders</span> <span class="p">(</span>
    <span class="n">orderkey</span> <span class="nb">bigint</span><span class="p">,</span>
    <span class="n">orderstatus</span> <span class="nb">varchar</span><span class="p">,</span>
    <span class="n">totalprice</span> <span class="n">double</span><span class="p">,</span>
    <span class="n">orderdate</span> <span class="nb">date</span>
<span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">orders</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;bad&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="k">current_date</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">orders</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;good&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="k">current_date</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="n">_id</span><span class="p">,</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">orders</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                 _id                 | orderkey | orderstatus | totalprice | orderdate
-------------------------------------+----------+-------------+------------+------------
 55 b1 51 63 38 64 d6 43 8c 61 a9 ce |        1 | bad         |       50.0 | 2015-07-23
 55 b1 51 67 38 64 d6 43 8c 61 a9 cf |        2 | good        |      100.0 | 2015-07-23
(2 rows)
</pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">_id</span><span class="p">,</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">orders</span> <span class="k">WHERE</span> <span class="n">_id</span> <span class="o">=</span> <span class="n">ObjectId</span><span class="p">(</span><span class="s1">&#39;55b151633864d6438c61a9ce&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                 _id                 | orderkey | orderstatus | totalprice | orderdate
-------------------------------------+----------+-------------+------------+------------
 55 b1 51 63 38 64 d6 43 8c 61 a9 ce |        1 | bad         |       50.0 | 2015-07-23
(1 row)
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unfortunately, there is no way to represent <code class="docutils literal notranslate"><span class="pre">_id</span></code> fields more fancy like <code class="docutils literal notranslate"><span class="pre">55b151633864d6438c61a9ce</span></code>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="memsql.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="11.39. MemSQL Connector" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="memory.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="11.37. Memory Connector" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>