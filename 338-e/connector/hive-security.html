

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10.27. Hive Security Configuration &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="10. Connectors" href="../connector.html"/>
        <link rel="next" title="10.28. Hive Connector Storage Caching" href="hive-caching.html"/>
        <link rel="prev" title="10.26. Hive Connector GCS Tutorial" href="hive-gcs-tutorial.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../connector.html">10. Connectors</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="starburst-connectors.html">10.1. Starburst Connectors Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-db2.html">10.2. Starburst DB2 Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-generic-jdbc.html">10.3. Starburst Generic JDBC Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive.html">10.4. Starburst Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-security.html">10.5. Starburst Hive Connector Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-ibm-cos.html">10.6. IBM Cloud Object Storage Support for the Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-mapr.html">10.7. MapR Hive metastore (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-hive-cdp.html">10.8. Cloudera Data Platform support (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-delta-lake.html">10.9. Starburst Delta Lake Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-kafka.html">10.10. Starburst Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-mysql.html">10.11. Starburst MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-oracle.html">10.12. Starburst Oracle Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-postgresql.html">10.13. Starburst PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-snowflake.html">10.14. Starburst Snowflake Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-sqlserver.html">10.15. Starburst SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata.html">10.16. Starburst Teradata Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="starburst-teradata-parallel-direct.html">10.17. Starburst Teradata Parallel Direct Connector (license required)</a></li>
<li class="toctree-l2"><a class="reference internal" href="accumulo.html">10.18. Accumulo Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="bigquery.html">10.19. BigQuery Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="blackhole.html">10.20. Black Hole Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="cassandra.html">10.21. Cassandra Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="druid.html">10.22. Druid Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">10.23. Elasticsearch Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="googlesheets.html">10.24. Google Sheets Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive.html">10.25. Hive Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-gcs-tutorial.html">10.26. Hive Connector GCS Tutorial</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">10.27. Hive Security Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#authorization">Authorization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sql-standard-based-authorization">SQL Standard Based Authorization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#authentication">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kerberos-support">Kerberos Support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hive-metastore-thrift-service-authentication">Hive Metastore Thrift Service Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hdfs-authentication">HDFS Authentication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#end-user-impersonation">End User Impersonation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#impersonation-accessing-hdfs">Impersonation Accessing HDFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#impersonation-accessing-the-hive-metastore">Impersonation Accessing the Hive Metastore</a></li>
<li class="toctree-l4"><a class="reference internal" href="#impersonation-in-hadoop">Impersonation in Hadoop</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#additional-information-about-keytab-files">Additional Information About Keytab Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-based-authorization">File Based Authorization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#schema-rules">Schema Rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#table-rules">Table Rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#session-property-rules">Session Property Rules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hive-caching.html">10.28. Hive Connector Storage Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-azure.html">10.29. Hive Connector with Azure Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-alluxio.html">10.30. Hive Connector with Alluxio</a></li>
<li class="toctree-l2"><a class="reference internal" href="jmx.html">10.31. JMX Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka.html">10.32. Kafka Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka-tutorial.html">10.33. Kafka Connector Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="kinesis.html">10.34. Kinesis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kudu.html">10.35. Kudu Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="localfile.html">10.36. Local File Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">10.37. Memory Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb.html">10.38. MongoDB Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="memsql.html">10.39. MemSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">10.40. MySQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracle.html">10.41. Oracle Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="phoenix.html">10.42. Phoenix Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="pinot.html">10.43. Pinot Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql.html">10.44. PostgreSQL Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="prometheus.html">10.45. Prometheus Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">10.46. Redis Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="redshift.html">10.47. Redshift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlserver.html">10.48. SQL Server Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="system.html">10.49. System Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="thrift.html">10.50. Thrift Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpcds.html">10.51. TPCDS Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="tpch.html">10.52. TPCH Connector</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/356-e/">Latest LTS (356-e)</option>
    <option value="/350-e/">350-e LTS</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/355-e/">Latest STS (355-e)</option>
    <option value="/354-e/">354-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../connector.html"><span class="section-number">10. </span>Connectors</a> &raquo;</li>
      
    <li><span class="section-number">10.27. </span>Hive Security Configuration</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hive-security-configuration">
<h1><span class="section-number">10.27. </span>Hive Security Configuration<a class="headerlink" href="#hive-security-configuration" title="Permalink to this headline">#</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#authorization" id="id3">Authorization</a></p></li>
<li><p><a class="reference internal" href="#authentication" id="id4">Authentication</a></p></li>
<li><p><a class="reference internal" href="#kerberos-support" id="id5">Kerberos Support</a></p></li>
<li><p><a class="reference internal" href="#end-user-impersonation" id="id6">End User Impersonation</a></p></li>
<li><p><a class="reference internal" href="#additional-information-about-keytab-files" id="id7">Additional Information About Keytab Files</a></p></li>
<li><p><a class="reference internal" href="#file-based-authorization" id="id8">File Based Authorization</a></p></li>
</ul>
</div>
<div class="section" id="authorization">
<h2>Authorization<a class="headerlink" href="#authorization" title="Permalink to this headline">#</a></h2>
<p>You can enable authorization checks for the <a class="reference internal" href="hive.html"><span class="doc">Hive Connector</span></a> by setting
the <code class="docutils literal notranslate"><span class="pre">hive.security</span></code> property in the Hive catalog properties file. This
property must be one of the following values:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">legacy</span></code> (default value)</p></td>
<td><p>Few authorization checks are enforced, thus allowing most
operations. The config properties <code class="docutils literal notranslate"><span class="pre">hive.allow-drop-table</span></code>,
<code class="docutils literal notranslate"><span class="pre">hive.allow-rename-table</span></code>, <code class="docutils literal notranslate"><span class="pre">hive.allow-add-column</span></code>,
<code class="docutils literal notranslate"><span class="pre">hive.allow-drop-column</span></code> and
<code class="docutils literal notranslate"><span class="pre">hive.allow-rename-column</span></code> are used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">read-only</span></code></p></td>
<td><p>Operations that read data or metadata, such as <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>,
are permitted, but none of the operations that write data or
metadata, such as <code class="docutils literal notranslate"><span class="pre">CREATE</span></code>, <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> or <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, are
allowed.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">file</span></code></p></td>
<td><p>Authorization checks are enforced using a config file specified
by the Hive configuration property <code class="docutils literal notranslate"><span class="pre">security.config-file</span></code>.
See <a class="reference internal" href="#hive-file-based-authorization"><span class="std std-ref">File Based Authorization</span></a> for details.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sql-standard</span></code></p></td>
<td><p>Users are permitted to perform the operations as long as
they have the required privileges as per the SQL standard.
In this mode, Presto enforces the authorization checks for
queries based on the privileges defined in Hive metastore.
To alter these privileges, use the <a class="reference internal" href="../sql/grant.html"><span class="doc">GRANT</span></a> and
<a class="reference internal" href="../sql/revoke.html"><span class="doc">REVOKE</span></a> commands.
See <a class="reference internal" href="#hive-sql-standard-based-authorization"><span class="std std-ref">SQL Standard Based Authorization</span></a> for details.</p></td>
</tr>
</tbody>
</table>
<div class="section" id="sql-standard-based-authorization">
<span id="hive-sql-standard-based-authorization"></span><h3>SQL Standard Based Authorization<a class="headerlink" href="#sql-standard-based-authorization" title="Permalink to this headline">#</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">sql-standard</span></code> security is enabled, Presto enforces the same SQL
standard based authorization as Hive does.</p>
<p>Since Presto’s <code class="docutils literal notranslate"><span class="pre">ROLE</span></code> syntax support matches the SQL standard, and
Hive does not exactly follow the SQL standard, there are the following
limitations and differences:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">ROLE</span> <span class="pre">role</span> <span class="pre">WITH</span> <span class="pre">ADMIN</span></code> is not supported.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">admin</span></code> role must be enabled to execute <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">ROLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">ROLE</span></code> or <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">SCHEMA</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">role</span> <span class="pre">TO</span> <span class="pre">user</span> <span class="pre">GRANTED</span> <span class="pre">BY</span> <span class="pre">someone</span></code> is not supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REVOKE</span> <span class="pre">role</span> <span class="pre">FROM</span> <span class="pre">user</span> <span class="pre">GRANTED</span> <span class="pre">BY</span> <span class="pre">someone</span></code> is not supported.</p></li>
<li><p>By default, all a user’s roles, except <code class="docutils literal notranslate"><span class="pre">admin</span></code>, are enabled in a new user session.</p></li>
<li><p>One particular role can be selected by executing <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">role</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">ALL</span></code> enables all of a user’s roles except <code class="docutils literal notranslate"><span class="pre">admin</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">admin</span></code> role must be enabled explicitly by executing <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">admin</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">privilege</span> <span class="pre">ON</span> <span class="pre">SCHEMA</span> <span class="pre">schema</span></code> is not supported. Schema ownership can be changed with <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">SCHEMA</span> <span class="pre">schema</span> <span class="pre">SET</span> <span class="pre">AUTHORIZATION</span> <span class="pre">user</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">#</a></h2>
<p>The default security configuration of the <a class="reference internal" href="hive.html"><span class="doc">Hive Connector</span></a> does not use
authentication when connecting to a Hadoop cluster. All queries are executed as
the user who runs the Presto process, regardless of which user submits the
query.</p>
<p>The Hive connector provides additional security options to support Hadoop
clusters that have been configured to use <a class="reference internal" href="#hive-security-kerberos-support"><span class="std std-ref">Kerberos</span></a>.</p>
<p>When accessing <abbr title="Hadoop Distributed File System">HDFS</abbr>, Presto can
<a class="reference internal" href="#hive-security-impersonation"><span class="std std-ref">impersonate</span></a> the end user who is running the
query. This can be used with HDFS permissions and <abbr title="Access Control Lists">ACLs</abbr> to provide additional security for data.</p>
<div class="admonition warning" id="hive-security-kerberos-support">
<p class="admonition-title">Warning</p>
<p>Access to the Presto coordinator should be secured e.g., using Kerberos or password
authentication, when using Kerberos authentication to Hadoop services.
Failure to secure access to the Presto coordinator could result in unauthorized
access to sensitive data on the Hadoop cluster. Refer to <a class="reference internal" href="../security.html"><span class="doc">Security</span></a> for
further information.</p>
<p>See <a class="reference internal" href="../security/server.html"><span class="doc">Coordinator Kerberos Authentication</span></a> and <a class="reference internal" href="../security/cli.html"><span class="doc">CLI Kerberos Authentication</span></a>
for information on setting up Kerberos authentication.</p>
</div>
</div>
<div class="section" id="kerberos-support">
<h2>Kerberos Support<a class="headerlink" href="#kerberos-support" title="Permalink to this headline">#</a></h2>
<p>In order to use the Hive connector with a Hadoop cluster that uses <code class="docutils literal notranslate"><span class="pre">kerberos</span></code>
authentication, you need to configure the connector to work with two
services on the Hadoop cluster:</p>
<ul class="simple">
<li><p>The Hive metastore Thrift service</p></li>
<li><p>The Hadoop Distributed File System (HDFS)</p></li>
</ul>
<p>Access to these services by the Hive connector is configured in the properties
file that contains the general Hive connector configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your <code class="docutils literal notranslate"><span class="pre">krb5.conf</span></code> location is different from <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> you
must set it explicitly using the <code class="docutils literal notranslate"><span class="pre">java.security.krb5.conf</span></code> JVM property
in <code class="docutils literal notranslate"><span class="pre">jvm.config</span></code> file.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">-Djava.security.krb5.conf=/example/path/krb5.conf</span></code>.</p>
</div>
<div class="section" id="hive-metastore-thrift-service-authentication">
<h3>Hive Metastore Thrift Service Authentication<a class="headerlink" href="#hive-metastore-thrift-service-authentication" title="Permalink to this headline">#</a></h3>
<p>In a Kerberized Hadoop cluster, Presto connects to the Hive metastore Thrift
service using <abbr title="Simple Authentication and Security Layer">SASL</abbr> and
authenticates using Kerberos. Kerberos authentication for the metastore is
configured in the connector’s properties file using the following properties:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.authentication.type</span></code></p></td>
<td><p>Hive metastore authentication type.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.thrift.impersonation.enabled</span></code></p></td>
<td><p>Enable Hive metastore end user impersonation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code></p></td>
<td><p>The Kerberos principal of the Hive metastore service.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code></p></td>
<td><p>The Kerberos principal that Presto uses when connecting
to the Hive metastore service.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code></p></td>
<td><p>Hive metastore client keytab location.</p></td>
</tr>
</tbody>
</table>
<div class="section" id="hive-metastore-authentication-type">
<h4><code class="docutils literal notranslate"><span class="pre">hive.metastore.authentication.type</span></code><a class="headerlink" href="#hive-metastore-authentication-type" title="Permalink to this headline">#</a></h4>
<p>One of <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>. When using the default value of <code class="docutils literal notranslate"><span class="pre">NONE</span></code>,
Kerberos authentication is disabled, and no other properties need to be
configured.</p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> the Hive connector connects to the Hive metastore
Thrift service using SASL and authenticate using Kerberos.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>
</div>
<div class="section" id="hive-metastore-thrift-impersonation-enabled">
<h4><code class="docutils literal notranslate"><span class="pre">hive.metastore.thrift.impersonation.enabled</span></code><a class="headerlink" href="#hive-metastore-thrift-impersonation-enabled" title="Permalink to this headline">#</a></h4>
<p>Enable end-user Hive metastore impersonation.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.
See <a class="reference internal" href="#hive-security-metastore-impersonation"><span class="std std-ref">Impersonation Accessing the Hive Metastore</span></a> for more information.</p>
</div>
<div class="section" id="hive-metastore-service-principal">
<h4><code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code><a class="headerlink" href="#hive-metastore-service-principal" title="Permalink to this headline">#</a></h4>
<p>The Kerberos principal of the Hive metastore service. The Presto coordinator
uses this to authenticate the Hive metastore.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_HOST</span></code> placeholder can be used in this property value. When connecting
to the Hive metastore, the Hive connector substitutes in the hostname of
the <strong>metastore</strong> server it is connecting to. This is useful if the metastore
runs on multiple hosts.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">hive/hive-server-host&#64;EXAMPLE.COM</span></code> or <code class="docutils literal notranslate"><span class="pre">hive/_HOST&#64;EXAMPLE.COM</span></code>.</p>
<p>This property is optional; no default value.</p>
</div>
<div class="section" id="hive-metastore-client-principal">
<h4><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code><a class="headerlink" href="#hive-metastore-client-principal" title="Permalink to this headline">#</a></h4>
<p>The Kerberos principal that Presto uses when connecting to the Hive
metastore.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_HOST</span></code> placeholder can be used in this property value. When connecting
to the Hive metastore, the Hive connector substitutes in the hostname of
the <strong>worker</strong> node Presto is running on. This is useful if each worker node
has its own Kerberos principal.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">presto/presto-server-node&#64;EXAMPLE.COM</span></code> or
<code class="docutils literal notranslate"><span class="pre">presto/_HOST&#64;EXAMPLE.COM</span></code>.</p>
<p>This property is optional; no default value.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unless <a class="reference internal" href="#hive-security-metastore-impersonation"><span class="std std-ref">Impersonation Accessing the Hive Metastore</span></a> is enabled,
the principal specified by <code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code> must have
sufficient privileges to remove files and directories within the
<code class="docutils literal notranslate"><span class="pre">hive/warehouse</span></code> directory. If the principal does not, only the metadata
is removed, and the data continues to consume disk space.</p>
<p>This occurs because the Hive metastore is responsible for deleting the
internal table data. When the metastore is configured to use Kerberos
authentication, all of the HDFS operations performed by the metastore are
impersonated. Errors deleting data are silently ignored.</p>
</div>
</div>
<div class="section" id="hive-metastore-client-keytab">
<h4><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code><a class="headerlink" href="#hive-metastore-client-keytab" title="Permalink to this headline">#</a></h4>
<p>The path to the keytab file that contains a key for the principal specified by
<code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code>. This file must be readable by the
operating system user running Presto.</p>
<p>This property is optional; no default value.</p>
</div>
<div class="section" id="example-configuration-with-none-authentication">
<h4>Example configuration with <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication<a class="headerlink" href="#example-configuration-with-none-authentication" title="Permalink to this headline">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hive.metastore.authentication.type=NONE
</pre></div>
</div>
<p>The default authentication type for the Hive metastore is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>. When the
authentication type is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, Presto connects to an unsecured Hive
metastore. Kerberos is not used.</p>
</div>
<div class="section" id="example-configuration-with-kerberos-authentication">
<h4>Example configuration with <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication<a class="headerlink" href="#example-configuration-with-kerberos-authentication" title="Permalink to this headline">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hive.metastore.authentication.type=KERBEROS
hive.metastore.thrift.impersonation.enabled=true
hive.metastore.service.principal=hive/hive-metastore-host.example.com@EXAMPLE.COM
hive.metastore.client.principal=presto@EXAMPLE.COM
hive.metastore.client.keytab=/etc/presto/hive.keytab
</pre></div>
</div>
<p>When the authentication type for the Hive metastore Thrift service is
<code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, Presto connects as the Kerberos principal specified by the
property <code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code>. Presto authenticates this
principal using the keytab specified by the <code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code>
property, and verifies that the identity of the metastore matches
<code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code>.</p>
<p>Keytab files must be distributed to every node in the cluster that runs Presto.</p>
<p><a class="reference internal" href="#hive-security-additional-keytab"><span class="std std-ref">Additional Information About Keytab Files.</span></a></p>
</div>
</div>
<div class="section" id="hdfs-authentication">
<h3>HDFS Authentication<a class="headerlink" href="#hdfs-authentication" title="Permalink to this headline">#</a></h3>
<p>In a Kerberized Hadoop cluster, Presto authenticates to HDFS using Kerberos.
Kerberos authentication for HDFS is configured in the connector’s properties
file using the following properties:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.authentication.type</span></code></p></td>
<td><p>HDFS authentication type.
Possible values are <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.impersonation.enabled</span></code></p></td>
<td><p>Enable HDFS end-user impersonation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.principal</span></code></p></td>
<td><p>The Kerberos principal that Presto uses when connecting
to HDFS.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.keytab</span></code></p></td>
<td><p>HDFS client keytab location.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.wire-encryption.enabled</span></code></p></td>
<td><p>Enable HDFS wire encryption.</p></td>
</tr>
</tbody>
</table>
<div class="section" id="hive-hdfs-authentication-type">
<h4><code class="docutils literal notranslate"><span class="pre">hive.hdfs.authentication.type</span></code><a class="headerlink" href="#hive-hdfs-authentication-type" title="Permalink to this headline">#</a></h4>
<p>One of <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>. When using the default value of <code class="docutils literal notranslate"><span class="pre">NONE</span></code>,
Kerberos authentication is disabled, and no other properties need to be
configured.</p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, the Hive connector authenticates to HDFS using
Kerberos.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>
</div>
<div class="section" id="hive-hdfs-impersonation-enabled">
<h4><code class="docutils literal notranslate"><span class="pre">hive.hdfs.impersonation.enabled</span></code><a class="headerlink" href="#hive-hdfs-impersonation-enabled" title="Permalink to this headline">#</a></h4>
<p>Enable end-user HDFS impersonation.</p>
<p>The section <a class="reference internal" href="#hive-security-impersonation"><span class="std std-ref">End User Impersonation</span></a> gives an
in-depth explanation of HDFS impersonation.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="hive-hdfs-presto-principal">
<h4><code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.principal</span></code><a class="headerlink" href="#hive-hdfs-presto-principal" title="Permalink to this headline">#</a></h4>
<p>The Kerberos principal Presto uses when connecting to HDFS.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_HOST</span></code> placeholder can be used in this property value. When connecting
to HDFS, the Hive connector substitutes in the hostname of the <strong>worker</strong>
node Presto is running on. This is useful if each worker node has its own
Kerberos principal.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">presto-hdfs-superuser/presto-server-node&#64;EXAMPLE.COM</span></code> or
<code class="docutils literal notranslate"><span class="pre">presto-hdfs-superuser/_HOST&#64;EXAMPLE.COM</span></code>.</p>
<p>This property is optional; no default value.</p>
</div>
<div class="section" id="hive-hdfs-presto-keytab">
<h4><code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.keytab</span></code><a class="headerlink" href="#hive-hdfs-presto-keytab" title="Permalink to this headline">#</a></h4>
<p>The path to the keytab file that contains a key for the principal specified by
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.principal</span></code>. This file must be readable by the operating
system user running Presto.</p>
<p>This property is optional; no default value.</p>
</div>
<div class="section" id="hive-hdfs-wire-encryption-enabled">
<h4><code class="docutils literal notranslate"><span class="pre">hive.hdfs.wire-encryption.enabled</span></code><a class="headerlink" href="#hive-hdfs-wire-encryption-enabled" title="Permalink to this headline">#</a></h4>
<p>In a Kerberized Hadoop cluster that uses HDFS wire encryption, this should be
set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to enable Presto to access HDFS. Note that using wire encryption
may impact query execution performance.</p>
</div>
<div class="section" id="hive-security-simple">
<span id="id1"></span><h4>Example configuration with <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication<a class="headerlink" href="#hive-security-simple" title="Permalink to this headline">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=NONE
</pre></div>
</div>
<p>The default authentication type for HDFS is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>. When the authentication
type is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, Presto connects to HDFS using Hadoop’s simple authentication
mechanism. Kerberos is not used.</p>
</div>
<div class="section" id="hive-security-kerberos">
<span id="id2"></span><h4>Example configuration with <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication<a class="headerlink" href="#hive-security-kerberos" title="Permalink to this headline">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=KERBEROS
hive.hdfs.presto.principal=hdfs@EXAMPLE.COM
hive.hdfs.presto.keytab=/etc/presto/hdfs.keytab
</pre></div>
</div>
<p>When the authentication type is <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, Presto accesses HDFS as the
principal specified by the <code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.principal</span></code> property. Presto
authenticates this principal using the keytab specified by the
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.keytab</span></code> keytab.</p>
<p>Keytab files must be distributed to every node in the cluster that runs Presto.</p>
<p><a class="reference internal" href="#hive-security-additional-keytab"><span class="std std-ref">Additional Information About Keytab Files.</span></a></p>
</div>
</div>
</div>
<div class="section" id="end-user-impersonation">
<span id="hive-security-impersonation"></span><h2>End User Impersonation<a class="headerlink" href="#end-user-impersonation" title="Permalink to this headline">#</a></h2>
<div class="section" id="impersonation-accessing-hdfs">
<h3>Impersonation Accessing HDFS<a class="headerlink" href="#impersonation-accessing-hdfs" title="Permalink to this headline">#</a></h3>
<p>Presto can impersonate the end user who is running a query. In the case of a
user running a query from the command line interface, the end user is the
username associated with the Presto CLI process or argument to the optional
<code class="docutils literal notranslate"><span class="pre">--user</span></code> option. Impersonating the end user can provide additional security
when accessing HDFS if HDFS permissions or ACLs are used.</p>
<p>HDFS Permissions and ACLs are explained in the <a class="reference external" href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html">HDFS Permissions Guide</a>.</p>
<div class="section" id="none-authentication-with-hdfs-impersonation">
<span id="hive-security-simple-impersonation"></span><h4><code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with HDFS impersonation<a class="headerlink" href="#none-authentication-with-hdfs-impersonation" title="Permalink to this headline">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=NONE
hive.hdfs.impersonation.enabled=true
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with impersonation, Presto impersonates
the user who is running the query when accessing HDFS. The user Presto is
running as must be allowed to impersonate this user, as discussed in the
section <a class="reference internal" href="#configuring-hadoop-impersonation"><span class="std std-ref">Impersonation in Hadoop</span></a>. Kerberos is not used.</p>
</div>
<div class="section" id="kerberos-authentication-with-hdfs-impersonation">
<span id="hive-security-kerberos-impersonation"></span><h4><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> Authentication With HDFS Impersonation<a class="headerlink" href="#kerberos-authentication-with-hdfs-impersonation" title="Permalink to this headline">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=KERBEROS
hive.hdfs.impersonation.enabled=true
hive.hdfs.presto.principal=presto@EXAMPLE.COM
hive.hdfs.presto.keytab=/etc/presto/hdfs.keytab
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with impersonation, Presto impersonates
the user who is running the query when accessing HDFS. The principal
specified by the <code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.principal</span></code> property must be allowed to
impersonate the current Presto user, as discussed in the section
<a class="reference internal" href="#configuring-hadoop-impersonation"><span class="std std-ref">Impersonation in Hadoop</span></a>. Presto authenticates
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.principal</span></code> using the keytab specified by
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.keytab</span></code>.</p>
<p>Keytab files must be distributed to every node in the cluster that runs Presto.</p>
<p><a class="reference internal" href="#hive-security-additional-keytab"><span class="std std-ref">Additional Information About Keytab Files.</span></a></p>
</div>
</div>
<div class="section" id="impersonation-accessing-the-hive-metastore">
<span id="hive-security-metastore-impersonation"></span><h3>Impersonation Accessing the Hive Metastore<a class="headerlink" href="#impersonation-accessing-the-hive-metastore" title="Permalink to this headline">#</a></h3>
<p>Presto supports impersonating the end user when accessing the Hive metastore.
Metastore impersonation can be enabled with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hive.metastore.thrift.impersonation.enabled=true
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> Metastore authentication with impersonation, the principal
specified by the <code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code> property must be allowed to
impersonate the current Presto user, as discussed in the section
<a class="reference internal" href="#configuring-hadoop-impersonation"><span class="std std-ref">Impersonation in Hadoop</span></a>.</p>
<p>The impersonation is applied when:</p>
<ul class="simple">
<li><p>modifying (creating or deleting) a database (schema),</p></li>
<li><p>getting information about a single table,</p></li>
<li><p>creating or modifying a table.</p></li>
</ul>
<p>Impersonation is not applied when for the following operations. In case of the following operations,
Presto is fully responsible for doing all relevant security checks.</p>
<ul class="simple">
<li><p>listing databases (schemas),</p></li>
<li><p>listing tables,</p></li>
<li><p>listing roles, grants,</p></li>
<li><p>changing roles, grants.</p></li>
</ul>
</div>
<div class="section" id="impersonation-in-hadoop">
<span id="configuring-hadoop-impersonation"></span><h3>Impersonation in Hadoop<a class="headerlink" href="#impersonation-in-hadoop" title="Permalink to this headline">#</a></h3>
<p>In order to use impersonation, the Hadoop cluster must be
configured to allow the user or principal that Presto is running as to
impersonate the users who log in to Presto. Impersonation in Hadoop is
configured in the file <code class="file docutils literal notranslate"><span class="pre">core-site.xml</span></code>. A complete description of the
configuration options can be found in the <a class="reference external" href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/Superusers.html#Configurations">Hadoop documentation</a>.</p>
</div>
</div>
<div class="section" id="additional-information-about-keytab-files">
<span id="hive-security-additional-keytab"></span><h2>Additional Information About Keytab Files<a class="headerlink" href="#additional-information-about-keytab-files" title="Permalink to this headline">#</a></h2>
<p>Keytab files contain encryption keys that are used to authenticate principals
to the Kerberos <abbr title="Key Distribution Center">KDC</abbr>. These encryption keys
must be stored securely; you need to take the same precautions to protect them
that you take to protect ssh private keys.</p>
<p>In particular, access to keytab files should be limited to the accounts that
actually need to use them to authenticate. In practice, this is the user that
the Presto process runs as. The ownership and permissions on keytab files
need to be set to prevent other users from reading or modifying the files.</p>
<p>Keytab files need to be distributed to every node running Presto. Under common
deployment situations, the Hive connector configuration is the same on all
nodes. This means that the keytab needs to be in the same location on every
node.</p>
<p>You should ensure that the keytab files have the correct permissions on every
node after distributing them.</p>
</div>
<div class="section" id="file-based-authorization">
<span id="hive-file-based-authorization"></span><h2>File Based Authorization<a class="headerlink" href="#file-based-authorization" title="Permalink to this headline">#</a></h2>
<p>The config file is specified using JSON and is composed of three sections,
each of which is a list of rules that are matched in the order specified
in the config file. The user is granted the privileges from the first
matching rule. All regexes default to <code class="docutils literal notranslate"><span class="pre">.*</span></code> if not specified.</p>
<div class="section" id="schema-rules">
<h3>Schema Rules<a class="headerlink" href="#schema-rules" title="Permalink to this headline">#</a></h3>
<p>These rules govern who is considered an owner of a schema.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">user</span></code> (optional): regex to match against user name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group</span></code> (optional): regex to match against every user group the user belongs to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schema</span></code> (optional): regex to match against schema name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">owner</span></code> (required): boolean indicating ownership.</p></li>
</ul>
</div>
<div class="section" id="table-rules">
<h3>Table Rules<a class="headerlink" href="#table-rules" title="Permalink to this headline">#</a></h3>
<p>These rules govern the privileges granted on specific tables.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">user</span></code> (optional): regex to match against user name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group</span></code> (optional): regex to match against every user group the user belongs to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schema</span></code> (optional): regex to match against schema name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">table</span></code> (optional): regex to match against table name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">privileges</span></code> (required): zero or more of <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>, <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>,
<code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, <code class="docutils literal notranslate"><span class="pre">OWNERSHIP</span></code>, <code class="docutils literal notranslate"><span class="pre">GRANT_SELECT</span></code>.</p></li>
</ul>
</div>
<div class="section" id="session-property-rules">
<h3>Session Property Rules<a class="headerlink" href="#session-property-rules" title="Permalink to this headline">#</a></h3>
<p>These rules govern who may set session properties.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">user</span></code> (optional): regex to match against user name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group</span></code> (optional): regex to match against every user group the user belongs to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">property</span></code> (optional): regex to match against session property name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowed</span></code> (required): boolean indicating whether this session property may be set.</p></li>
</ul>
<p>See below for an example.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;schemas&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
      <span class="nt">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;.*&quot;</span><span class="p">,</span>
      <span class="nt">&quot;owner&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;group&quot;</span><span class="p">:</span> <span class="s2">&quot;finance|human_resources&quot;</span><span class="p">,</span>
      <span class="nt">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;employees&quot;</span><span class="p">,</span>
      <span class="nt">&quot;owner&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;guest&quot;</span><span class="p">,</span>
      <span class="nt">&quot;owner&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
      <span class="nt">&quot;owner&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;tables&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
      <span class="nt">&quot;privileges&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SELECT&quot;</span><span class="p">,</span> <span class="s2">&quot;INSERT&quot;</span><span class="p">,</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">,</span> <span class="s2">&quot;OWNERSHIP&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;banned_user&quot;</span><span class="p">,</span>
      <span class="nt">&quot;privileges&quot;</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
      <span class="nt">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;.*&quot;</span><span class="p">,</span>
      <span class="nt">&quot;privileges&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SELECT&quot;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;sessionProperties&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;force_local_scheduling&quot;</span><span class="p">,</span>
      <span class="nt">&quot;allow&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
      <span class="nt">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;max_split_size&quot;</span><span class="p">,</span>
      <span class="nt">&quot;allow&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hive-caching.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="10.28. Hive Connector Storage Caching" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hive-gcs-tutorial.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="10.26. Hive Connector GCS Tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>