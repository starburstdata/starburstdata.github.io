

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.3. Prerequisites &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="4. Amazon Web Services" href="../aws.html"/>
        <link rel="next" title="4.4. Deploying Presto" href="deploy.html"/>
        <link rel="prev" title="4.2. Overview" href="overview.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">4.1. Getting Started on AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">4.2. Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.3. Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ssh-keys">SSH Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vpc-and-vpc-subnets">VPC and VPC Subnets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security-groups">Security Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iam-permissions">IAM Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instance-profiles">Instance Profiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aws-security-prerequisites">AWS Security Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#iam-role-permissions-for-presto-cluster-nodes">IAM Role Permissions for Presto Cluster Nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iam-role-permissions-for-cloudformation">IAM Role Permissions for CloudFormation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#presto-license">Presto License</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deploy.html">4.4. Deploying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">4.5. Configuring Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="metastore.html">4.6. Configuring Hive Metastore</a></li>
<li class="toctree-l2"><a class="reference internal" href="access.html">4.7. Accessing the Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html">4.8. Querying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3.html">4.9. Querying AWS S3</a></li>
<li class="toctree-l2"><a class="reference internal" href="glue.html">4.10. AWS Glue Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="superset.html">4.11. Using Apache Superset</a></li>
<li class="toctree-l2"><a class="reference internal" href="manualscale.html">4.12. Manual Scaling a Running Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="autoscale.html">4.13. Auto Scaling a Presto Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="high-availability.html">4.14. Coordinator High Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="secrets.html">4.15. Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="logs.html">4.16. Integration with CloudWatch Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html">4.17. Integration with CloudWatch Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">4.18. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="uninstall.html">4.19. Uninstalling Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html">4.20. AWS AMI/CFT Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/345-e/">Latest LTS (345-e)</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/344-e/">Latest STS (344-e)</option>
    <option value="/343-e/">343-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../aws.html"><span class="section-number">4. </span>Amazon Web Services</a> &raquo;</li>
      
    <li><span class="section-number">4.3. </span>Prerequisites</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="prerequisites">
<h1><span class="section-number">4.3. </span>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">#</a></h1>
<div class="section" id="ssh-keys">
<span id="aws-ssh"></span><h2>SSH Keys<a class="headerlink" href="#ssh-keys" title="Permalink to this headline">#</a></h2>
<p>Amazon EC2 uses public–key cryptography to encrypt and decrypt login
information. Public–key cryptography uses a public key to encrypt a piece of
data, such as a password, then the recipient uses the private key to decrypt the
data. Together, the public and private keys are known as a key pair.</p>
<p>To log into your instance where Presto is installed, you must: (1) create a key
pair; (2) specify the name of the key pair when you launch the instance or
invoke the CloudFormation template; and (3) provide the private key when you
connect to the instance. This enables you to securely access your instance using
the private key pair instead of a password.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Amazon EC2 stores only the public key and you are responsible for storing the
private key. Take action to safeguard your keys, as anyone who possesses your
private key can decrypt your login information.</p>
</div>
<p>You can find more information about <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">key pair usage with EC2 in the
documentation</a>.</p>
</div>
<div class="section" id="vpc-and-vpc-subnets">
<span id="aws-vpc"></span><h2>VPC and VPC Subnets<a class="headerlink" href="#vpc-and-vpc-subnets" title="Permalink to this headline">#</a></h2>
<p>Amazon Virtual Private Cloud (VPC) lets you provision a logically isolated
section of the AWS Cloud where you can launch AWS resources in a virtual network
that you define. You are given complete control over your virtual networking
environment, including the selection of your IP address range, the creation of
subnets, and network gateways.</p>
<p>A VPC spans all the availability zones in the region. After creating a VPC, you
can add one or more subnets in each availability zone. A subnet is a range of IP
addresses in your VPC for which you can launch AWS resources. You can use public
subnets for resources that must be connected to the internet, and private
subnets for resources that won’t be connected to the internet.</p>
<p>When using Starburst’s CloudFormation template for Presto, you must specify
which existing VPC and subnets to deploy to.</p>
<p>You can find more information about <a class="reference external" href="https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html">VPCs and subnets in the documentation</a>.</p>
</div>
<div class="section" id="security-groups">
<span id="aws-security-groups"></span><h2>Security Groups<a class="headerlink" href="#security-groups" title="Permalink to this headline">#</a></h2>
<p>A security group acts as a virtual firewall that controls the traffic allowed to
reach one or more of your EC2 instances. When you deploy an instance, you are
responsible for associating it with one or more security groups. You add rules
to each security group that allow traffic to or from its associated instances on
specified ports. Furthermore, you can modify the rules for a security group at
any time. Once modified, the new rules are automatically applied to all
instances that are associated with the security group.</p>
<p>It’s recommended that ports 8080 and 8088 are accessible in order to access the
Presto Web UI, submit queries from outside the cluster, and access Apache
Superset. Additionally, it’s recommended that port 22 is accessible for SSH
access.</p>
<p>You can find more information about <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html">security groups in the documentation</a>.</p>
</div>
<div class="section" id="iam-permissions">
<h2>IAM Permissions<a class="headerlink" href="#iam-permissions" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html">AWS Identity and Access Management (IAM)</a> is a web
service that helps you securely control access to your AWS resources. You use
IAM to control who is authenticated and authorized to use resources.
Principally, it helps you to define what a user or other entity is allowed to do
in an account. Authorizations are granted through policies that, when attached
to an identity or AWS resource, define their permissions.</p>
<p>There are various features under the IAM umbrella, spanning from granular
permissions and shared account access to secure access to AWS resources for
applications that run on Amazon EC2.</p>
</div>
<div class="section" id="instance-profiles">
<span id="aws-instance-profiles"></span><h2>Instance Profiles<a class="headerlink" href="#instance-profiles" title="Permalink to this headline">#</a></h2>
<p>An instance profile is a container for an IAM role that you can use to pass role
information to an EC2 instance when the instance starts. An IAM role is an IAM
entity that defines a set of permissions for making AWS service requests.</p>
<p>If you use the AWS Management Console to create a role for Amazon EC2, the
console automatically creates an instance profile and gives it the same name as
the role. When you then use the Amazon EC2 console to launch an instance with an
IAM role, you can select a role to associate with the instance. In the console,
the list that’s displayed is actually a list of instance profile names.</p>
<p>However, if you manage your roles from the AWS CLI or the AWS API, you create
roles and instance profiles as separate actions. Because roles and instance
profiles can have different names, you must know the names of your instance
profiles as well as the names of roles they contain. That way you can choose the
correct instance profile when you launch an EC2 instance.</p>
<p>When using Starburst’s CloudFormation template for Presto, you can specify the
instance profile to associate with the EC2 instances. For example, this may be
useful to provide the EC2 instance the appropriate privileges to access data in
S3.</p>
<p>You can find more information about <a class="reference external" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html">instance profiles</a>.</p>
</div>
<div class="section" id="aws-security-prerequisites">
<span id="aws-security-prereq"></span><h2>AWS Security Prerequisites<a class="headerlink" href="#aws-security-prerequisites" title="Permalink to this headline">#</a></h2>
<div class="section" id="iam-role-permissions-for-presto-cluster-nodes">
<span id="aws-security-prereq-nodes"></span><h3>IAM Role Permissions for Presto Cluster Nodes<a class="headerlink" href="#iam-role-permissions-for-presto-cluster-nodes" title="Permalink to this headline">#</a></h3>
<p>Below is a JSON segment for the IAM role automatically created by the Starburst
CloudFormation template. The role is used by the Presto cluster nodes that are
created on the stack. The permissions set below are a minimal subset of IAM
permissions:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;autoscaling:CompleteLifecycleAction&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:RecordLifecycleActionHeartbeat&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudformation:SignalResource&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:PutMetricData&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:BatchCreatePartition&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:BatchGetPartition&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:CreateDatabase&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:CreateTable&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:DeleteDatabase&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:DeletePartition&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:DeleteTable&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:GetDatabase&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:GetDatabases&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:GetPartition&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:GetPartitions&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:GetTable&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:GetTables&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:UpdatePartition&quot;</span><span class="p">,</span>
                <span class="s2">&quot;glue:UpdateTable&quot;</span><span class="p">,</span>
                <span class="s2">&quot;logs:CreateLogGroup&quot;</span><span class="p">,</span>
                <span class="s2">&quot;logs:CreateLogStream&quot;</span><span class="p">,</span>
                <span class="s2">&quot;logs:DescribeLogGroups&quot;</span><span class="p">,</span>
                <span class="s2">&quot;logs:DescribeLogStreams&quot;</span><span class="p">,</span>
                <span class="s2">&quot;logs:PutLogEvents&quot;</span><span class="p">,</span>
                <span class="s2">&quot;logs:PutRetentionPolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;s3:GetObject&quot;</span><span class="p">,</span>
                <span class="s2">&quot;s3:ListBucket&quot;</span><span class="p">,</span>
                <span class="s2">&quot;s3:PutObject&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:ChangeMessageVisibility&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:DeleteMessage&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:GetQueueUrl&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:ReceiveMessage&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the above:</p>
<ul class="simple">
<li><p><em>AutoScaling</em>, <em>EC2</em> and <em>SQS</em> permissions are needed for
<a class="reference internal" href="autoscale.html#graceful-scaledown"><span class="std std-ref">Graceful Scaledown of Workers</span></a> to work, when autoscaling kicks in, or reshaping the
cluster via the stack modification.</p></li>
<li><p><em>CloudWatch Logs</em> permissions are needed to enable logging to AWS CloudWatch
Logs</p></li>
<li><p><em>CloudFormation</em> permission is needed to report startup progress back to
CloudFormation</p></li>
<li><p><em>CloudWatch</em> permissions are needed to run the coordinator high availability
features.</p></li>
<li><p><em>Glue</em> access is needed to leverage the <a class="reference internal" href="glue.html"><span class="doc">Glue catalog</span></a>.</p></li>
<li><p><em>S3</em> permissions are needed for the <a class="reference internal" href="../connector/starburst-hive.html"><span class="doc">Hive connector</span></a> to actually access (read/write) the data on S3.</p></li>
</ul>
<p>If a user wants to have a more precise control over the permissions, and for
example limit S3 access to a specific bucket, then a custom IAM Instance Profile
can be provided and passed to the CloudFormation template during stack creation
(<code class="docutils literal notranslate"><span class="pre">IamInstanceProfile</span></code> field in the stack creation form). It is then used
instead and the IAM Role and Instance Profile are not created.</p>
<p>Caution should be taken though to make sure that all the other permissions
regarding <em>AutoScaling</em>, <em>SQS</em>, <em>EC2</em>, <em>CloudFormation</em>, <em>CloudWatch</em> and <em>Glue</em>
are given to this custom role, otherwise the cluster either fails to start or
does not function as documented.</p>
<p>Additionally the role needs to have a trust relationship to EC2 established, so
that EC2 can use this role on the user’s behalf. Below is a minimal trust
relationship document:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
  <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
      <span class="nt">&quot;Principal&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;Service&quot;</span><span class="p">:</span> <span class="s2">&quot;ec2.amazonaws.com&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;sts:AssumeRole&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="iam-role-permissions-for-cloudformation">
<span id="aws-security-prereq-cft"></span><h3>IAM Role Permissions for CloudFormation<a class="headerlink" href="#iam-role-permissions-for-cloudformation" title="Permalink to this headline">#</a></h3>
<p>The user who launches the CloudFormation template needs to have specific
permissions to issue all necessary actions in AWS during stack creation. In
particular, before proceeding make sure your IAM user/role has a policy with
permissions to manage all of the following:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;apigateway:DELETE&quot;</span><span class="p">,</span>
                <span class="s2">&quot;apigateway:GET&quot;</span><span class="p">,</span>
                <span class="s2">&quot;apigateway:POST&quot;</span><span class="p">,</span>
                <span class="s2">&quot;apigateway:PUT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;apigateway:UpdateRestApiPolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:CreateAutoScalingGroup&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:CreateLaunchConfiguration&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:DeleteAutoScalingGroup&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:DeleteLaunchConfiguration&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:DeleteLifecycleHook&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:DescribeAutoScalingGroups&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:DescribeAutoScalingInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:DescribeLaunchConfigurations&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:DescribeScalingActivities&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:PutLifecycleHook&quot;</span><span class="p">,</span>
                <span class="s2">&quot;autoscaling:UpdateAutoScalingGroup&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudformation:CreateStack&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudformation:DeleteStack&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudformation:DescribeStackEvents&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudformation:DescribeStacks&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:DeleteAlarms&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:DeleteDashboards&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:DescribeAlarms&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:GetDashboard&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:ListDashboards&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:PutDashboard&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:PutMetricAlarm&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:AuthorizeSecurityGroupEgress&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:AuthorizeSecurityGroupIngress&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:CreatePlacementGroup&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:CreateNetworkInterface&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:CreateSecurityGroup&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:CreateTags&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:CreateVpcEndpoint&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DeletePlacementGroup&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DeleteNetworkInterface&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DeleteSecurityGroup&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DeleteVpcEndpoints&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeKeyPairs&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribePlacementGroups&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeNetworkInterfaces&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeSecurityGroups&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeSubnets&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeVpcEndpoints&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeVpcs&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:ModifyNetworkInterfaceAttribute&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:RevokeSecurityGroupEgress&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:RevokeSecurityGroupIngress&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:RunInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:TerminateInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;events:DeleteRule&quot;</span><span class="p">,</span>
                <span class="s2">&quot;events:DescribeRule&quot;</span><span class="p">,</span>
                <span class="s2">&quot;events:PutRule&quot;</span><span class="p">,</span>
                <span class="s2">&quot;events:PutTargets&quot;</span><span class="p">,</span>
                <span class="s2">&quot;events:RemoveTargets&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:AddRoleToInstanceProfile&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:AttachRolePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:CreateInstanceProfile&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:CreateRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeleteInstanceProfile&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeleteRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeleteRolePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DetachRolePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:GetInstanceProfile&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:GetRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:PassRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:PutRolePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:RemoveRoleFromInstanceProfile&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lambda:AddPermission&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lambda:CreateFunction&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lambda:DeleteFunction&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lambda:GetFunctionConfiguration&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lambda:InvokeFunction&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lambda:PutFunctionConcurrency&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lambda:RemovePermission&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:CreateQueue&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:DeleteQueue&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:GetQueueAttributes&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:TagQueue&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The role needs to have a trust relationship to CloudFormation established, so
that CloudFormation can use this role on the user’s behalf. Below is a minimal
trust relationship document:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
  <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
      <span class="nt">&quot;Principal&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;Service&quot;</span><span class="p">:</span> <span class="s2">&quot;cloudformation.amazonaws.com&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;sts:AssumeRole&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="presto-license">
<h3>Presto License<a class="headerlink" href="#presto-license" title="Permalink to this headline">#</a></h3>
<p>To enable additional enterprise features, you need to configure the License S3
URI in the CloudFormation template. This is required when using Starburst’s
CloudFormation template and a privately shared Presto AMI.</p>
<p>Refer to <a class="reference internal" href="../installation/license-requirements.html"><span class="doc">Starburst Enterprise Presto license</span></a> for information on how to
obtain this license. You do not need to configure the license this way when you
have subscribed to the software in AWS Marketplace.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="deploy.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="4.4. Deploying Presto" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="4.2. Overview" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>