

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SSH Configuration &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="User Guide" href="user-guide.html"/>
        <link rel="next" title="Presto-Admin Commands" href="presto-admin-commands.html"/>
        <link rel="prev" title="Configuring the Presto Port" href="installation/presto-port-configuration.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../installation.html">2. Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation/download.html">2.1. Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/license-requirements.html">2.2. Starburst Enterprise Presto license</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/deployment.html">2.3. Deploying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/docker.html">2.4. Docker Container</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../installation/rpm.html">2.5. RPM Package and Presto Admin</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../installation/rpm.html#rpm-package">RPM Package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../installation/rpm.html#presto-admin">Presto Admin</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Presto-Admin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation/azure.html">2.6. Microsoft Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/verifier.html">2.7. Presto Verifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/benchmark-driver.html">2.8. Benchmark Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/356-e/">Latest LTS (356-e)</option>
    <option value="/350-e/">350-e LTS</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/358-e/">Latest STS (358-e)</option>
    <option value="/357-e/">357-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../installation.html"><span class="section-number">2. </span>Installation</a> &raquo;</li>
      
        <li><a href="../installation/rpm.html"><span class="section-number">2.5. </span>RPM Package and Presto Admin</a> &raquo;</li>
      
        <li><a href="index.html">Presto-Admin</a> &raquo;</li>
      
        <li><a href="user-guide.html">User Guide</a> &raquo;</li>
      
    <li>SSH Configuration</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ssh-configuration">
<span id="ssh-configuration-label"></span><h1>SSH Configuration<a class="headerlink" href="#ssh-configuration" title="Permalink to this headline">#</a></h1>
<p>In order to run <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code>, the node that is running <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> must be able to connect to all of the nodes running Presto via SSH. <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> makes the SSH connection with the username and port specified in <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/config.json</span></code>. Even if you have a single-node installation, <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">username&#64;localhost</span></code> needs to work properly.</p>
<p>There are two ways to configure SSH: with keys so that you can use passwordless SSH, or with passwords. If your cluster already has passwordless SSH configured for the username <code class="docutils literal notranslate"><span class="pre">user</span></code>, you can skip this step if the username is root, otherwise the root public key (id_rsa.pub) needs to be appended to the non-root usernameâ€™s authorized_keys file. If you are intending to use <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> with passwords, take a look at the documentation below, because there are several ways to specify the password.</p>
<div class="section" id="using-presto-admin-with-passwordless-ssh">
<h2>Using <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> with passwordless SSH<a class="headerlink" href="#using-presto-admin-with-passwordless-ssh" title="Permalink to this headline">#</a></h2>
<p>In order to set up passwordless SSH, you must first login as username on the presto-admin node and generate keys with no passphrase on the node running <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span> <span class="o">-</span><span class="n">t</span> <span class="n">rsa</span> <span class="o">-</span><span class="n">P</span> <span class="s1">&#39;&#39;</span> <span class="o">-</span><span class="n">f</span> <span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
</pre></div>
</div>
<p>While logged in as username, copy the public key to all of the coordinator and worker nodes:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;@&lt;</span><span class="n">ip</span><span class="o">&gt;</span> <span class="ss">&quot;mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh&quot;</span>
<span class="n">scp</span> <span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">.</span><span class="n">pub</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;@&lt;</span><span class="n">ip</span><span class="o">&gt;</span><span class="p">:</span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">.</span><span class="n">pub</span>
</pre></div>
</div>
<p>Log into all of those nodes and append the public key to the authorized key file:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;@&lt;</span><span class="n">ip</span><span class="o">&gt;</span> <span class="ss">&quot;cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys&quot;</span>
</pre></div>
</div>
<p>For non-root username, log into all of those nodes and append the root user public key to the username authorized key file, provided the passwordless ssh has been setup for root user.:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;@&lt;</span><span class="n">ip</span><span class="o">&gt;</span> <span class="ss">&quot;sudo cat /root/.ssh/id_dsa.pub &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys&quot;</span>
</pre></div>
</div>
<p>Once you have passwordless SSH set up, you can just run <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> commands as they appear in the documentation. If your private key is not in <code class="docutils literal notranslate"><span class="pre">~/.ssh</span></code>, it is possible to specify one or several private keys using the -i CLI option:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">path_to_private_key</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">path_to_second_private_key</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Please also note that it is not common for servers to allow passwordless SSH for root because of security concerns, so it is preferable for the SSH user not to be root.</p>
</div>
<div class="section" id="using-presto-admin-with-ssh-passwords">
<h2>Using <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> with SSH passwords<a class="headerlink" href="#using-presto-admin-with-ssh-passwords" title="Permalink to this headline">#</a></h2>
<p>If you do not want to set up passwordless SSH on your cluster, it is possible to use <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> with SSH passwords. However, you will need to add a password argument to the <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> commands as they appear in the documentation. There are several options. To specify a password on the CLI in plaintext:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">p</span> <span class="o">&lt;</span><span class="n">password</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>However, from a security perspective, it is preferable not to type your password in plaintext. Thus, it is also possible to add an interactive password prompt, which prompts you for the initial value of your password before running any commands:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">I</span>
<span class="n">Initial</span> <span class="n">value</span> <span class="k">for</span> <span class="n">env</span><span class="p">.</span><span class="n">password</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">type</span> <span class="n">your</span> <span class="n">password</span> <span class="n">here</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you do not specify a password, the command will fail with a parallel execution failure, since, by default, <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> runs in parallel and cannot prompt for a password while running in parallel. If you specify the <code class="docutils literal notranslate"><span class="pre">--serial</span></code> option for <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code>, <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> will prompt you for a password if it cannot connect.</p>
<p>Please note that the SSH password for the user specified in <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/config.json</span></code> must match the sudo password for that user.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="presto-admin-commands.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="Presto-Admin Commands" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation/presto-port-configuration.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="Configuring the Presto Port" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>