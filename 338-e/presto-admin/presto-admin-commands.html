

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Presto-Admin Commands &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="User Guide" href="user-guide.html"/>
        <link rel="next" title="Presto-Admin Command-Line Options" href="presto-admin-cli-options.html"/>
        <link rel="prev" title="SSH Configuration" href="ssh-configuration.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../installation.html">2. Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation/download.html">2.1. Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/license-requirements.html">2.2. Starburst Enterprise Presto license</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/deployment.html">2.3. Deploying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/docker.html">2.4. Docker Container</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../installation/rpm.html">2.5. RPM Package and Presto Admin</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../installation/rpm.html#rpm-package">RPM Package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../installation/rpm.html#presto-admin">Presto Admin</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Presto-Admin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation/azure.html">2.6. Microsoft Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/verifier.html">2.7. Presto Verifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/benchmark-driver.html">2.8. Benchmark Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/356-e/">Latest LTS (356-e)</option>
    <option value="/350-e/">350-e LTS</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/357-e/">Latest STS (357-e)</option>
    <option value="/355-e/">355-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../installation.html"><span class="section-number">2. </span>Installation</a> &raquo;</li>
      
        <li><a href="../installation/rpm.html"><span class="section-number">2.5. </span>RPM Package and Presto Admin</a> &raquo;</li>
      
        <li><a href="index.html">Presto-Admin</a> &raquo;</li>
      
        <li><a href="user-guide.html">User Guide</a> &raquo;</li>
      
    <li>Presto-Admin Commands</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="presto-admin-commands">
<h1>Presto-Admin Commands<a class="headerlink" href="#presto-admin-commands" title="Permalink to this headline">#</a></h1>
<div class="section" id="catalog-add">
<span id="id1"></span><h2>catalog add<a class="headerlink" href="#catalog-add" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="k">catalog</span> <span class="k">add</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>This command is used to deploy catalog configurations to the Presto cluster.
<a class="reference external" href="https://trino.io/docs/current/connector.html">Catalog configurations</a> are
kept in the configuration directory <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/catalog</span></code></p>
<p>To add a catalog using <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code>, first create a configuration file in
<code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/catalog</span></code>. The file should be named <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;.properties</span></code> and
contain the configuration for that catalog.</p>
<p>Use the optional <code class="docutils literal notranslate"><span class="pre">name</span></code> argument to add a particular catalog to your
cluster. To deploy all catalogs in the catalog configuration directory,
leave the name argument out.</p>
<p>In order to query using the newly added catalog, you need to restart the
Presto server (see <a class="reference internal" href="#server-restart">server restart</a>):</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">restart</span>
</pre></div>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">#</a></h3>
<p>To add a catalog for the jmx connector, create a file
<code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/catalog/jmx.properties</span></code> with the content
<code class="docutils literal notranslate"><span class="pre">connector.name=jmx</span></code>.
Then run:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="k">catalog</span> <span class="k">add</span> <span class="n">jmx</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">restart</span>
</pre></div>
</div>
<p>If you have two catalog configurations in the catalog directory, for example
<code class="docutils literal notranslate"><span class="pre">jmx.properties</span></code> and <code class="docutils literal notranslate"><span class="pre">dummy.properties</span></code>, and would like to deploy both at
once, you could run</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="k">catalog</span> <span class="k">add</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">restart</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-a-custom-connector">
<h3>Adding a Custom Connector<a class="headerlink" href="#adding-a-custom-connector" title="Permalink to this headline">#</a></h3>
<p>In order to install a catalog for a custom connector not included with Presto, the
jar must be added to the Presto plugin location using the <code class="docutils literal notranslate"><span class="pre">plugin</span> <span class="pre">add_jar</span></code> command
before running the <code class="docutils literal notranslate"><span class="pre">catalog</span> <span class="pre">add</span></code> command.</p>
<p>Example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">plugin</span> <span class="n">add_jar</span> <span class="n">my_connector</span><span class="p">.</span><span class="n">jar</span> <span class="n">my_connector</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="k">catalog</span> <span class="k">add</span> <span class="n">my_connector</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">restart</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">add_jar</span></code> command assumes the default plugin location of
<code class="docutils literal notranslate"><span class="pre">/usr/lib/presto/plugin</span></code> (see <a class="reference internal" href="#plugin-add-jar">plugin add_jar</a>).  As with the default
connectors, a <code class="docutils literal notranslate"><span class="pre">my_connector.properties</span></code> file must be created. Refer to the
custom connector’s documentation for the properties to specify.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">plugin</span> <span class="pre">add_jar</span></code> command works with both jars and directories containing jars.</p>
</div>
</div>
<div class="section" id="catalog-remove">
<h2>catalog remove<a class="headerlink" href="#catalog-remove" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="k">catalog</span> <span class="n">remove</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The catalog remove command is used to remove a catalog from your presto
cluster configuration. Running the command will remove the catalog from all
nodes in the Presto cluster. Additionally, it will remove the local
configuration file for the catalog.</p>
<p>In order for the change to take effect, you will need to restart services.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">restart</span>
</pre></div>
</div>
<div class="section" id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h3>
<p>For example: To remove the catalog for the jmx connector, run</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="k">catalog</span> <span class="n">remove</span> <span class="n">jmx</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">restart</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="collect-logs">
<span id="id3"></span><h2>collect logs<a class="headerlink" href="#collect-logs" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">collect</span> <span class="n">logs</span>
</pre></div>
</div>
<p>This command gathers Presto server logs and launcher logs from the <code class="docutils literal notranslate"><span class="pre">/var/log/presto/</span></code> directory across the cluster along with the
<code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/log/presto-admin.log</span></code> and creates a tar file. The final tar output will be saved at <code class="docutils literal notranslate"><span class="pre">/tmp/presto-debug-logs.tar.gz</span></code>.</p>
<div class="section" id="id4">
<h3>Example<a class="headerlink" href="#id4" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">collect</span> <span class="n">logs</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="collect-query-info">
<span id="id5"></span><h2>collect query_info<a class="headerlink" href="#collect-query-info" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">collect</span> <span class="n">query_info</span> <span class="o">&lt;</span><span class="n">query_id</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This command gathers information about a Presto query identified by the given <code class="docutils literal notranslate"><span class="pre">query_id</span></code> and stores that information in a JSON file.
The output file will be saved at <code class="docutils literal notranslate"><span class="pre">/tmp/presto-debug/query_info_&lt;query_id&gt;.json</span></code>.</p>
<div class="section" id="id6">
<h3>Example<a class="headerlink" href="#id6" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">collect</span> <span class="n">query_info</span> <span class="mi">20150525</span><span class="n">_234711_00000_7qwaz</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="collect-system-info">
<span id="id7"></span><h2>collect system_info<a class="headerlink" href="#collect-system-info" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">collect</span> <span class="n">system_info</span>
</pre></div>
</div>
<p>This command gathers various system specific information from the cluster. The information is saved in a tar file at <code class="docutils literal notranslate"><span class="pre">/tmp/presto-debug-sysinfo.tar.gz</span></code>.
The gathered information includes:</p>
<blockquote>
<div><ul class="simple">
<li><p>Node specific information from Presto like node uri, last response time, recent failures, recent requests made to the node, etc.</p></li>
<li><p>List of catalogs configured</p></li>
<li><p>Catalog configuration files</p></li>
<li><p>Other system specific information like OS information, Java version, <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> version and Presto server version</p></li>
</ul>
</div></blockquote>
<div class="section" id="id8">
<h3>Example<a class="headerlink" href="#id8" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">collect</span> <span class="n">system_info</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuration-deploy">
<span id="configuration-deploy-label"></span><h2>configuration deploy<a class="headerlink" href="#configuration-deploy" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">configuration</span> <span class="n">deploy</span> <span class="p">[</span><span class="n">coordinator</span><span class="o">|</span><span class="n">workers</span><span class="p">]</span>
</pre></div>
</div>
<p>This command deploys <a class="reference external" href="https://trino.io/docs/current/installation/deployment.html">Presto configuration files</a>
onto the cluster. <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> uses different configuration directories for
worker and coordinator configurations so that you can easily create different
configurations for your coordinator and worker nodes. Create a
<code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/coordinator</span></code> directory for your coordinator
configurations and a <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/workers</span></code> directory for your
workers configuration. If you have the <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> configuration
directory path set using the environment variable <code class="docutils literal notranslate"><span class="pre">PRESTO_ADMIN_CONFIG_DIR</span></code>
then the coordinator and worker configuration directories must be created
under <code class="docutils literal notranslate"><span class="pre">$PRESTO_ADMIN_CONFIG_DIR</span></code>.  Place the configuration files for the coordinator
and workers in their respective directories. The optional <code class="docutils literal notranslate"><span class="pre">coordinator</span></code> or <code class="docutils literal notranslate"><span class="pre">workers</span></code>
argument tells <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code> to only deploy the coordinator or workers
configurations. To deploy both configurations at once, don’t specify either
option.</p>
<p>When you run configuration deploy, the following files will be deployed to
the <code class="docutils literal notranslate"><span class="pre">/etc/presto</span></code> directory on your Presto cluster:</p>
<ul class="simple">
<li><p>node.properties</p></li>
<li><p>config.properties</p></li>
<li><p>jvm.config</p></li>
<li><p>log.properties (if it exists)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command will not deploy the configurations for catalogs.  To deploy catalog configurations run <a class="reference internal" href="#id1">catalog add</a></p>
</div>
<p>If the coordinator is also a worker, it will get the coordinator configuration.
The deployed configuration files will overwrite the existing configurations on
the cluster. However, the node.id from the
node.properties file will be preserved. If no <code class="docutils literal notranslate"><span class="pre">node.id</span></code> exists, a new id will be
generated. If any required files are absent when you run configuration deploy,
a default configuration will be deployed. Below are the default
configurations:</p>
<p><em>node.properties</em></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="p">.</span><span class="n">environment</span><span class="o">=</span><span class="n">presto</span>
<span class="n">node</span><span class="p">.</span><span class="k">data</span><span class="o">-</span><span class="n">dir</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">presto</span><span class="o">/</span><span class="k">data</span>
<span class="n">node</span><span class="p">.</span><span class="n">launcher</span><span class="o">-</span><span class="n">log</span><span class="o">-</span><span class="n">file</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">presto</span><span class="o">/</span><span class="n">launcher</span><span class="p">.</span><span class="n">log</span>
<span class="n">node</span><span class="p">.</span><span class="n">server</span><span class="o">-</span><span class="n">log</span><span class="o">-</span><span class="n">file</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">presto</span><span class="o">/</span><span class="n">server</span><span class="p">.</span><span class="n">log</span>
<span class="k">catalog</span><span class="p">.</span><span class="n">config</span><span class="o">-</span><span class="n">dir</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">presto</span><span class="o">/</span><span class="k">catalog</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not change the value of catalog.config-dir=/etc/presto/catalog as it is necessary for Presto to be able to find the catalog directory when Presto has been installed by RPM.</p>
</div>
<p><em>jvm.config</em></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">server</span>
<span class="o">-</span><span class="n">Xmx16G</span>
<span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">-</span><span class="n">UseBiasedLocking</span>
<span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">UseG1GC</span>
<span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="n">G1HeapRegionSize</span><span class="o">=</span><span class="mi">32</span><span class="n">M</span>
<span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">ExplicitGCInvokesConcurrent</span>
<span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">HeapDumpOnOutOfMemoryError</span>
<span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">UseGCOverheadLimit</span>
<span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">ExitOnOutOfMemoryError</span>
<span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="n">ReservedCodeCacheSize</span><span class="o">=</span><span class="mi">512</span><span class="n">M</span>
<span class="o">-</span><span class="n">DHADOOP_USER_NAME</span><span class="o">=</span><span class="n">hive</span>
</pre></div>
</div>
<p><em>config.properties</em></p>
<p>For workers:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">coordinator</span><span class="o">=</span><span class="k">false</span>
<span class="n">discovery</span><span class="p">.</span><span class="n">uri</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">coordinator</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">8080</span>
<span class="n">http</span><span class="o">-</span><span class="n">server</span><span class="p">.</span><span class="n">http</span><span class="p">.</span><span class="n">port</span><span class="o">=</span><span class="mi">8080</span>
<span class="n">query</span><span class="p">.</span><span class="k">max</span><span class="o">-</span><span class="n">memory</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">node</span><span class="o">=</span><span class="mi">8</span><span class="n">GB</span>
<span class="n">query</span><span class="p">.</span><span class="k">max</span><span class="o">-</span><span class="n">memory</span><span class="o">=</span><span class="mi">50</span><span class="n">GB</span>
</pre></div>
</div>
<p>For coordinator:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">coordinator</span><span class="o">=</span><span class="k">true</span>
<span class="n">discovery</span><span class="o">-</span><span class="n">server</span><span class="p">.</span><span class="n">enabled</span><span class="o">=</span><span class="k">true</span>
<span class="n">discovery</span><span class="p">.</span><span class="n">uri</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">coordinator</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">8080</span>
<span class="n">http</span><span class="o">-</span><span class="n">server</span><span class="p">.</span><span class="n">http</span><span class="p">.</span><span class="n">port</span><span class="o">=</span><span class="mi">8080</span>
<span class="n">node</span><span class="o">-</span><span class="n">scheduler</span><span class="p">.</span><span class="n">include</span><span class="o">-</span><span class="n">coordinator</span><span class="o">=</span><span class="k">false</span>
<span class="n">query</span><span class="p">.</span><span class="k">max</span><span class="o">-</span><span class="n">memory</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">node</span><span class="o">=</span><span class="mi">8</span><span class="n">GB</span>
<span class="n">query</span><span class="p">.</span><span class="k">max</span><span class="o">-</span><span class="n">memory</span><span class="o">=</span><span class="mi">50</span><span class="n">GB</span>

<span class="o">#</span> <span class="k">if</span> <span class="n">the</span> <span class="n">coordinator</span> <span class="k">is</span> <span class="n">also</span> <span class="n">a</span> <span class="n">worker</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">have</span> <span class="n">the</span> <span class="n">following</span> <span class="n">property</span> <span class="k">instead</span>
<span class="n">node</span><span class="o">-</span><span class="n">scheduler</span><span class="p">.</span><span class="n">include</span><span class="o">-</span><span class="n">coordinator</span><span class="o">=</span><span class="k">true</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="installation/presto-port-configuration.html#presto-port-configuration-label"><span class="std std-ref">Configuring the Presto Port</span></a> for details on http port configuration.</p>
<div class="section" id="id9">
<h3>Example<a class="headerlink" href="#id9" title="Permalink to this headline">#</a></h3>
<p>If you want to change the jvm configuration on the coordinator and the
<code class="docutils literal notranslate"><span class="pre">node.environment</span></code> property from <code class="docutils literal notranslate"><span class="pre">node.properties</span></code> on all nodes, add the
following <code class="docutils literal notranslate"><span class="pre">jvm.config</span></code> to <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/coordinator</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-server
-Xmx16G
-XX:-UseBiasedLocking
-XX:+UseG1GC
-XX:G1HeapRegionSize=32M
-XX:+ExplicitGCInvokesConcurrent
-XX:+HeapDumpOnOutOfMemoryError
-XX:+UseGCOverheadLimit
-XX:+ExitOnOutOfMemoryError
-XX:ReservedCodeCacheSize=512M
</pre></div>
</div>
<p>Further, add the following <code class="docutils literal notranslate"><span class="pre">node.properties</span></code> to
<code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/coordinator</span></code> and <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/workers</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="p">.</span><span class="n">environment</span><span class="o">=</span><span class="n">test</span>
<span class="n">node</span><span class="p">.</span><span class="k">data</span><span class="o">-</span><span class="n">dir</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">presto</span><span class="o">/</span><span class="k">data</span>
<span class="n">node</span><span class="p">.</span><span class="n">launcher</span><span class="o">-</span><span class="n">log</span><span class="o">-</span><span class="n">file</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">presto</span><span class="o">/</span><span class="n">launcher</span><span class="p">.</span><span class="n">log</span>
<span class="n">node</span><span class="p">.</span><span class="n">server</span><span class="o">-</span><span class="n">log</span><span class="o">-</span><span class="n">file</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">presto</span><span class="o">/</span><span class="n">server</span><span class="p">.</span><span class="n">log</span>
<span class="k">catalog</span><span class="p">.</span><span class="n">config</span><span class="o">-</span><span class="n">dir</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">presto</span><span class="o">/</span><span class="k">catalog</span>
</pre></div>
</div>
<p>Then run:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">configuration</span> <span class="n">deploy</span>
</pre></div>
</div>
<p>This will distribute to the coordinator a default <code class="docutils literal notranslate"><span class="pre">config.properties</span></code>, the new
<code class="docutils literal notranslate"><span class="pre">jvm.config</span></code> and <code class="docutils literal notranslate"><span class="pre">node.properties</span></code>.  The workers will
receive the default <code class="docutils literal notranslate"><span class="pre">config.properties</span></code> and <code class="docutils literal notranslate"><span class="pre">jvm.config</span></code>, and the same
<code class="docutils literal notranslate"><span class="pre">node.properties</span></code> as the coordinator.</p>
<p>If instead you just want to update the coordinator configuration, run:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">configuration</span> <span class="n">deploy</span> <span class="n">coordinator</span>
</pre></div>
</div>
<p>This will leave the workers configuration as it was, but update the
coordinator’s configuration</p>
</div>
</div>
<div class="section" id="configuration-show">
<h2>configuration show<a class="headerlink" href="#configuration-show" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">configuration</span> <span class="k">show</span> <span class="p">[</span><span class="n">node</span><span class="o">|</span><span class="n">jvm</span><span class="o">|</span><span class="n">config</span><span class="o">|</span><span class="n">log</span><span class="p">]</span>
</pre></div>
</div>
<p>This command prints the contents of the Presto configuration files deployed in the cluster. It takes an optional configuration name argument for the configuration files node.properties, jvm.config, config.properties and log.properties. For missing configuration files a warning will be printed except for log.properties file, since it is an optional configuration file in your Presto cluster.</p>
<p>If no argument is specified, then all four configurations will be printed.</p>
<div class="section" id="id10">
<h3>Example<a class="headerlink" href="#id10" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">configuration</span> <span class="k">show</span> <span class="n">node</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="package-install">
<h2>package install<a class="headerlink" href="#package-install" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">package</span> <span class="n">install</span> <span class="n">local_path</span> <span class="p">[</span><span class="c1">--nodeps]</span>
</pre></div>
</div>
<p>This command copies any rpm from <code class="docutils literal notranslate"><span class="pre">local_path</span></code> to all the nodes in the cluster and installs it. Similar to <code class="docutils literal notranslate"><span class="pre">server</span> <span class="pre">install</span></code> the cluster topology is obtained from the file <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/config.json</span></code>. If this file is missing, then the command prompts for user input to get the topology information.</p>
<p>This command takes an optional <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> flag which indicates if the rpm installed should ignore checking any package dependencies.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> can result in installing the rpm even with any missing dependencies, so you may end up with a broken rpm installation.</p>
</div>
<div class="section" id="id11">
<h3>Example<a class="headerlink" href="#id11" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">package</span> <span class="n">install</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">jdk</span><span class="o">-</span><span class="mi">8</span><span class="n">u45</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="p">.</span><span class="n">rpm</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="package-uninstall">
<h2>package uninstall<a class="headerlink" href="#package-uninstall" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">package</span> <span class="n">uninstall</span> <span class="n">rpm_package_name</span> <span class="p">[</span><span class="c1">--nodeps]</span>
</pre></div>
</div>
<p>This command uninstalls an rpm package from all the nodes in the cluster. Similar to <code class="docutils literal notranslate"><span class="pre">server</span> <span class="pre">uninstall</span></code> the cluster
topology is obtained from the file <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/config.json</span></code>. If this file is missing, then the command
prompts for user input to get the topology information.</p>
<p>This command takes an optional <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> flag which indicates if the rpm installed should ignore checking any package
dependencies.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> can result in uninstalling the rpm even when dependant packages are installed. It may end up with a broken rpm installation.</p>
</div>
<div class="section" id="id12">
<h3>Example<a class="headerlink" href="#id12" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">package</span> <span class="n">uninstall</span> <span class="n">jdk</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="plugin-add-jar">
<h2>plugin add_jar<a class="headerlink" href="#plugin-add-jar" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">plugin</span> <span class="n">add_jar</span> <span class="o">&lt;</span><span class="k">local</span><span class="o">-</span><span class="n">path</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">plugin</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">plugin</span><span class="o">-</span><span class="n">dir</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>This command deploys the jar at <code class="docutils literal notranslate"><span class="pre">local-path</span></code> to the plugin directory for
<code class="docutils literal notranslate"><span class="pre">plugin-name</span></code>.  By default <code class="docutils literal notranslate"><span class="pre">/usr/lib/presto/plugin</span></code> is used as the
top-level plugin directory. To deploy the jar to a different location, use the
optional <code class="docutils literal notranslate"><span class="pre">plugin-dir</span></code> argument.</p>
<div class="section" id="id13">
<h3>Example<a class="headerlink" href="#id13" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">plugin</span> <span class="n">add_jar</span> <span class="n">connector</span><span class="p">.</span><span class="n">jar</span> <span class="n">my_connector</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">plugin</span> <span class="n">add_jar</span> <span class="n">connector</span><span class="p">.</span><span class="n">jar</span> <span class="n">my_connector</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">plugin</span><span class="o">/</span><span class="n">dir</span>
</pre></div>
</div>
<p>The first example will deploy connector.jar to
<code class="docutils literal notranslate"><span class="pre">/usr/lib/presto/plugin/my_connector/connector.jar</span></code>
The second example will deploy it to <code class="docutils literal notranslate"><span class="pre">/my/plugin/dir/my_connector/program.jar</span></code>.</p>
</div>
</div>
<div class="section" id="script-run">
<h2>script run<a class="headerlink" href="#script-run" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">script</span> <span class="n">run</span> <span class="o">&lt;</span><span class="k">local</span><span class="o">-</span><span class="n">path</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="n">script</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">remote</span><span class="o">-</span><span class="n">dir</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="n">put</span><span class="o">-</span><span class="n">script</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>This command can be used to run an arbitrary script on a cluster. It copies the
script from its local location to the specified remote directory (defaults to
/tmp), makes the file executable, and runs it.</p>
<div class="section" id="id14">
<h3>Example<a class="headerlink" href="#id14" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">script</span> <span class="n">run</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="k">local</span><span class="o">/</span><span class="n">script</span><span class="p">.</span><span class="n">sh</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">script</span> <span class="n">run</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="k">local</span><span class="o">/</span><span class="n">script</span><span class="p">.</span><span class="n">sh</span> <span class="o">/</span><span class="n">remote</span><span class="o">/</span><span class="n">dir</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-install">
<span id="server-install-label"></span><h2>server install<a class="headerlink" href="#server-install" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">install</span> <span class="o">&lt;</span><span class="n">rpm_specifier</span><span class="o">&gt;</span> <span class="p">[</span><span class="c1">--rpm-source] [--nodeps]</span>
</pre></div>
</div>
<p>This command takes in a parameter <code class="docutils literal notranslate"><span class="pre">rpm_specifier</span></code>. The parameter can be one of the following forms, listed in order of decreasing precedence:
‘latest’ - This downloads of the latest version of the presto rpm.
url - This downloads the presto rpm found at the given url.
version number - This downloads the presto rpm of the specified version.
local path - This uses a previously downloaded rpm. The local path should be accessible by <code class="docutils literal notranslate"><span class="pre">presto-admin</span></code>.
If <code class="docutils literal notranslate"><span class="pre">rpm_specifier</span></code> matches multiple forms, it is interpreted only as the form with highest precedence.
For forms that require the rpm to be downloaded, if a local copy is found with a matching version to the rpm that would be downloaded, the local copy is used.
Rpms downloaded using a version number or ‘latest’ come from Maven Central.
This command fails if it cannot find or download the requested presto-server rpm.</p>
<p>After successfully finding the rpm, this command copies the presto-server rpm to all the nodes in the cluster,
installs it, deploys the general presto configuration along with tpch connector configuration.
The topology used to configure the nodes are obtained from <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/config.json</span></code>. See <a class="reference internal" href="installation/presto-admin-configuration.html#presto-admin-configuration-label"><span class="std std-ref">Configuring Presto-Admin</span></a> on how to configure your cluster using config.json. If this file is missing, then the command prompts for user input to get the topology information.</p>
<p>The general configurations for Presto’s coordinator and workers are taken from the directories <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/coordinator</span></code> and <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/workers</span></code> respectively. If these directories or any required configuration files are absent when you run <code class="docutils literal notranslate"><span class="pre">server</span> <span class="pre">install</span></code>, a default configuration will be deployed. See <a class="reference internal" href="#configuration-deploy">configuration deploy</a> for details.</p>
<p>The catalog directory <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin/catalog/</span></code> should contain the configuration files for any catalogs that you would
like to connect to in your Presto cluster.
The <code class="docutils literal notranslate"><span class="pre">server</span> <span class="pre">install</span></code> command will configure the cluster with all the catalogs in the directory. If the directory does
not exist or is empty prior to <code class="docutils literal notranslate"><span class="pre">server</span> <span class="pre">install</span></code>, then by default the tpch connector is configured. See <a class="reference internal" href="#id1">catalog add</a>
on how to add catalog configuration files after installation.</p>
<p>This command takes an optional <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> flag which indicates if the rpm installed should ignore checking any package dependencies.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> can result in installing the rpm even with any missing dependencies, so you may end up with a broken rpm installation.</p>
</div>
<div class="section" id="id15">
<h3>Example<a class="headerlink" href="#id15" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">install</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">presto</span><span class="p">.</span><span class="n">rpm</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">install</span> <span class="mi">316</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">install</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="k">search</span><span class="p">.</span><span class="n">maven</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">remotecontent</span><span class="o">?</span><span class="n">filepath</span><span class="o">=</span><span class="n">io</span><span class="o">/</span><span class="n">prestosql</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">rpm</span><span class="o">/</span><span class="mi">316</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">rpm</span><span class="o">-</span><span class="mi">316</span><span class="p">.</span><span class="n">rpm</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">install</span> <span class="n">latest</span>
</pre></div>
</div>
<p><strong>Standalone RPM Install</strong></p>
<p>If you want to do a single node installation where coordinator and worker are co-located, you can just use:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">rpm</span> <span class="o">-</span><span class="n">i</span> <span class="n">presto</span><span class="p">.</span><span class="n">rpm</span>
</pre></div>
</div>
<p>This will deploy the necessary configurations for the presto-server to operate in single-node mode.</p>
</div>
</div>
<div class="section" id="server-restart">
<span id="server-restart-label"></span><h2>server restart<a class="headerlink" href="#server-restart" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">restart</span>
</pre></div>
</div>
<p>This command first stops any Presto servers running and then starts them. A status check is performed on the entire cluster and is reported at the end.</p>
<div class="section" id="id16">
<h3>Example<a class="headerlink" href="#id16" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">restart</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-start">
<span id="server-start-label"></span><h2>server start<a class="headerlink" href="#server-start" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">start</span>
</pre></div>
</div>
<p>This command starts the Presto servers on the cluster. A status check is performed on the entire cluster and is reported at the end.</p>
<div class="section" id="id17">
<h3>Example<a class="headerlink" href="#id17" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="k">start</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-status">
<span id="id18"></span><h2>server status<a class="headerlink" href="#server-status" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">status</span>
</pre></div>
</div>
<p>This command prints the status information of Presto in the cluster. This command will
fail to report the correct status if the Presto installed is older than version 0.100. It will not print any status information if a given node is inaccessible.</p>
<dl class="simple">
<dt>The status output will have the following information:</dt><dd><ul class="simple">
<li><p>server status</p></li>
<li><p>node uri</p></li>
<li><p>Presto version installed</p></li>
<li><p>node is active/inactive</p></li>
<li><p>catalogs deployed</p></li>
</ul>
</dd>
</dl>
<div class="section" id="id19">
<h3>Example<a class="headerlink" href="#id19" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">status</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-stop">
<h2>server stop<a class="headerlink" href="#server-stop" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">stop</span>
</pre></div>
</div>
<p>This command stops the Presto servers on the cluster.</p>
<div class="section" id="id20">
<h3>Example<a class="headerlink" href="#id20" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">stop</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-uninstall">
<h2>server uninstall<a class="headerlink" href="#server-uninstall" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">uninstall</span> <span class="p">[</span><span class="c1">--nodeps]</span>
</pre></div>
</div>
<p>This command stops the Presto server if running on the cluster and uninstalls the Presto rpm. The uninstall command removes any presto
related files deployed during <code class="docutils literal notranslate"><span class="pre">server</span> <span class="pre">install</span></code> but retains the Presto logs at <code class="docutils literal notranslate"><span class="pre">/var/log/presto</span></code>.</p>
<p>This command takes an optional <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> flag which indicates if the rpm uninstalled should ignore checking any package dependencies.</p>
<div class="section" id="id21">
<h3>Example<a class="headerlink" href="#id21" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">uninstall</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-upgrade">
<h2>server upgrade<a class="headerlink" href="#server-upgrade" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">upgrade</span> <span class="n">path</span><span class="o">/</span><span class="k">to</span><span class="o">/</span><span class="k">new</span><span class="o">/</span><span class="n">package</span><span class="p">.</span><span class="n">rpm</span> <span class="p">[</span><span class="n">local_config_dir</span><span class="p">]</span> <span class="p">[</span><span class="c1">--nodeps]</span>
</pre></div>
</div>
<p>This command upgrades the Presto RPM on all of the nodes in the cluster to the RPM at
<code class="docutils literal notranslate"><span class="pre">path/to/new/package.rpm</span></code>, preserving the existing configuration on the cluster. The existing
cluster configuration is saved locally to local_config_dir (which defaults to a temporary
folder if not specified). The path can either be absolute or relative to the current
directory.</p>
<p>This command can also be used to downgrade the Presto installation, if the RPM at
<code class="docutils literal notranslate"><span class="pre">path/to/new/package.rpm</span></code> is an earlier version than the Presto installed on the cluster.</p>
<p>Note that if the configuration files on the cluster differ from the presto-admin configuration
files found in <code class="docutils literal notranslate"><span class="pre">~/.prestoadmin</span></code>, the presto-admin configuration files are not updated.</p>
<p>This command takes an optional <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> flag which indicates if the rpm upgrade should ignore checking any package dependencies.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">--nodeps</span></code> can result in installing the rpm even with any missing dependencies, so you may end up with a broken rpm upgrade.</p>
</div>
<div class="section" id="id22">
<h3>Example<a class="headerlink" href="#id22" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">upgrade</span> <span class="n">path</span><span class="o">/</span><span class="k">to</span><span class="o">/</span><span class="k">new</span><span class="o">/</span><span class="n">package</span><span class="p">.</span><span class="n">rpm</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="k">cluster</span><span class="o">-</span><span class="n">configuration</span>
<span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">server</span> <span class="n">upgrade</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="k">to</span><span class="o">/</span><span class="k">new</span><span class="o">/</span><span class="n">package</span><span class="p">.</span><span class="n">rpm</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="k">cluster</span><span class="o">-</span><span class="n">configuration</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="topology-show">
<h2>topology show<a class="headerlink" href="#topology-show" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">topology</span> <span class="k">show</span>
</pre></div>
</div>
<p>This command shows the current topology configuration for the cluster (including the coordinators, workers, SSH port, and SSH username).</p>
<div class="section" id="id23">
<h3>Example<a class="headerlink" href="#id23" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">presto</span><span class="o">-</span><span class="k">admin</span> <span class="n">topology</span> <span class="k">show</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="presto-admin-cli-options.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="Presto-Admin Command-Line Options" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ssh-configuration.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="SSH Configuration" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>