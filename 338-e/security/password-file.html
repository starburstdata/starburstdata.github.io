

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.4. Password File Authentication &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="7. Security" href="../security.html"/>
        <link rel="next" title="7.5. User Mapping" href="user-mapping.html"/>
        <link rel="prev" title="7.3. LDAP Authentication" href="ldap.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../security.html">7. Security</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="server.html">7.1. Coordinator Kerberos Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">7.2. CLI Kerberos Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap.html">7.3. LDAP Authentication</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7.4. Password File Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#password-authenticator-configuration">Password Authenticator Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#password-files">Password Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#file-format">File Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-password-file">Creating a Password File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user-mapping.html">7.5. User Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="tls.html">7.6. Java Keystores and Truststores</a></li>
<li class="toctree-l2"><a class="reference internal" href="built-in-system-access-control.html">7.7. Built-in System Access Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap-group-provider.html">7.8. LDAP group provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="secrets.html">7.9. Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="internal-communication.html">7.10. Secure Internal Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="audit.html">7.11. Query audit</a></li>
<li class="toctree-l2"><a class="reference internal" href="event-logger.html">7.12. Event Logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html">7.13. Role Based Access Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="system-ranger.html">7.14. System level security with Apache Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-ranger.html">7.15. Hive level security with Apache Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive-sentry.html">7.16. Hive level security with Apache Sentry</a></li>
<li class="toctree-l2"><a class="reference internal" href="impersonation.html">7.17. User Impersonation</a></li>
<li class="toctree-l2"><a class="reference internal" href="credential-passthrough.html">7.18. Kerberos Credential Passthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="okta-authentication.html">7.19. Okta authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/350-e/">Latest LTS (350-e)</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/355-e/">Latest STS (355-e)</option>
    <option value="/354-e/">354-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../security.html"><span class="section-number">7. </span>Security</a> &raquo;</li>
      
    <li><span class="section-number">7.4. </span>Password File Authentication</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="password-file-authentication">
<h1><span class="section-number">7.4. </span>Password File Authentication<a class="headerlink" href="#password-file-authentication" title="Permalink to this headline">#</a></h1>
<p>Presto can be configured to enable frontend password authentication over
HTTPS for clients, such as the CLI, or the JDBC and ODBC drivers. The
username and password are validated against usernames and passwords stored
in a file.</p>
<p>Password file authentication is very similar to <a class="reference internal" href="ldap.html"><span class="doc">LDAP Authentication</span></a>. Please see
the LDAP documentation for generic instructions on configuring the server
and clients to use TLS and authenticate with a username and password.</p>
<div class="section" id="password-authenticator-configuration">
<h2>Password Authenticator Configuration<a class="headerlink" href="#password-authenticator-configuration" title="Permalink to this headline">#</a></h2>
<p>Enable password file authentication by creating an
<code class="docutils literal notranslate"><span class="pre">etc/password-authenticator.properties</span></code> file on the coordinator:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>password-authenticator.name=file
file.password-file=/path/to/password.db
</pre></div>
</div>
<p>The following configuration properties are available:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">file.password</span></code></p></td>
<td><p>Path of the password file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">file.refresh-period</span></code></p></td>
<td><p>How often to reload the password file.
Defaults to <code class="docutils literal notranslate"><span class="pre">1m</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">file.auth-token-cache.max-size</span></code></p></td>
<td><p>Max number of cached authenticated passwords.
Defaults to <code class="docutils literal notranslate"><span class="pre">1000</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="password-files">
<h2>Password Files<a class="headerlink" href="#password-files" title="Permalink to this headline">#</a></h2>
<div class="section" id="file-format">
<h3>File Format<a class="headerlink" href="#file-format" title="Permalink to this headline">#</a></h3>
<p>The password file contains a list of usernames and passwords, one per line,
separated by a colon. Passwords must be securely hashed using bcrypt or PBKDF2.</p>
<p>bcrypt passwords start with <code class="docutils literal notranslate"><span class="pre">$2y$</span></code> and must use a minimum cost of <code class="docutils literal notranslate"><span class="pre">8</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>test:$2y$10$BqTb8hScP5DfcpmHo5PeyugxHz5Ky/qf3wrpD7SNm8sWuA3VlGqsa
</pre></div>
</div>
<p>PBKDF2 passwords are composed of the iteration count, followed by the
hex encoded salt and hash:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>test:1000:5b4240333032306164:f38d165fce8ce42f59d366139ef5d9e1ca1247f0e06e503ee1a611dd9ec40876bb5edb8409f5abe5504aab6628e70cfb3d3a18e99d70357d295002c3d0a308a0
</pre></div>
</div>
</div>
<div class="section" id="creating-a-password-file">
<h3>Creating a Password File<a class="headerlink" href="#creating-a-password-file" title="Permalink to this headline">#</a></h3>
<p>Password files utilizing the bcrypt format can be created using the
<a class="reference external" href="https://httpd.apache.org/docs/current/programs/htpasswd.html">htpasswd</a>
utility from the <a class="reference external" href="https://httpd.apache.org/">Apache HTTP Server</a>.
The cost must be specified, as Presto enforces a higher minimum cost
than the default.</p>
<p>Create an empty password file to get started:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>touch password.db
</pre></div>
</div>
<p>Add or update the password for the user <code class="docutils literal notranslate"><span class="pre">test</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>htpasswd -B -C 10 password.db test
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="user-mapping.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="7.5. User Mapping" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ldap.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="7.3. LDAP Authentication" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>