

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.7. Operation &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="5. Kubernetes with Helm" href="../k8s.html"/>
        <link rel="next" title="5.8. Helm chart release notes" href="release-notes.html"/>
        <link rel="prev" title="5.6. Ranger configuration" href="ranger-configuration.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">5.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">5.2. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">5.3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="sep-configuration.html">5.4. SEP configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="hms-configuration.html">5.5. Hive metastore configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ranger-configuration.html">5.6. Ranger configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.7. Operation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running">Running</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connecting-tools">Connecting tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updates">Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scaling">Scaling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-notes.html">5.8. Helm chart release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="eks.html">5.9. Amazon Elastic Kubernetes Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="gke.html">5.10. Google Kubernetes Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="aks.html">5.11. Microsoft Azure Kubernetes Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="openshift.html">5.12. Red Hat OpenShift</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/345-e/">Latest LTS (345-e)</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/348-e/">Latest STS (348-e)</option>
    <option value="/347-e/">347-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../k8s.html"><span class="section-number">5. </span>Kubernetes with Helm</a> &raquo;</li>
      
    <li><span class="section-number">5.7. </span>Operation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="operation">
<h1><span class="section-number">5.7. </span>Operation<a class="headerlink" href="#operation" title="Permalink to this headline">#</a></h1>
<p>Congratulations! Your cluster is up and running. Now it is time to test it out
by connecting your clients like the CLI or some BI application using the JDBC
driver.</p>
<p>With that usage you gain insights on the correct configuration, data sources and
sizing of the cluster for the desired usage and performance. This in turn leads
you to further work such as updating configuration, scaling your cluster or even
upgrading to a newer release.</p>
<p>This document covers these and other aspects associated to running your SEP
cluster, or even clusters.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#running" id="id1">Running</a></p></li>
<li><p><a class="reference internal" href="#connecting-tools" id="id2">Connecting tools</a></p></li>
<li><p><a class="reference internal" href="#updates" id="id3">Updates</a></p></li>
<li><p><a class="reference internal" href="#scaling" id="id4">Scaling</a></p></li>
</ul>
</div>
<div class="section" id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">#</a></h2>
<p>Once you have <a class="reference internal" href="installation.html#k8s-installation-step-by-step"><span class="std std-ref">successfully installed</span></a>
SEP, you can confirm that the coordinator pod is running with tools such as
<code class="docutils literal notranslate"><span class="pre">kubectl</span></code> or Octant.</p>
<p>You can also check the log in the server pod. A successful start of the
coordinator, and also each worker, shows with a log entry similar to the
following snippet:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span>  <span class="n">main</span>    <span class="n">io</span><span class="p">.</span><span class="n">prestosql</span><span class="p">.</span><span class="n">server</span><span class="p">.</span><span class="n">Server</span>      <span class="o">========</span> <span class="n">SERVER</span> <span class="n">STARTED</span> <span class="o">========</span>
</pre></div>
</div>
<p>With these checks performed, you can access the <a class="reference internal" href="../admin/web-interface.html"><span class="doc">Web UI</span></a> on
the coordinator. Determine the FQDN and port of the coordinator as configured in
the <a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">expose section</span></a>.</p>
<p>A default deployment exposes the UI via HTTP and does not require a password.
Production deployments should use HTTPS and have authentication configured.</p>
<p>The main page of the Web UI displays the number of connected workers. Confirm
that the number is identical to the number specific in the <a class="reference internal" href="sep-configuration.html#helm-sep-workers"><span class="std std-ref">worker section</span></a>. The default number of workers is two.</p>
</div>
<div class="section" id="connecting-tools">
<h2>Connecting tools<a class="headerlink" href="#connecting-tools" title="Permalink to this headline">#</a></h2>
<p>With the knowledge that you can access the Web UI, and therefore the
coordinator, and that some workers are running, you are ready to connect client
tools for running queries.</p>
<p>Use the protocol, FQDN and port with the <code class="docutils literal notranslate"><span class="pre">--server</span></code> option for starting the
<a class="reference internal" href="../installation/cli.html"><span class="doc">CLI</span></a> to access SEP:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">presto</span> <span class="c1">--server https://presto.example.com:9999</span>
</pre></div>
</div>
<p>The same URL can be used to configure the JDBC driver or ODBC driver connection
and connection from any other client.</p>
</div>
<div class="section" id="updates">
<span id="helm-ops-updates"></span><h2>Updates<a class="headerlink" href="#updates" title="Permalink to this headline">#</a></h2>
<p>Initial <a class="reference internal" href="installation.html"><span class="doc">installation</span></a> should use the simplest possible
configuration to allow you cluster to start and run, with some of the following
characteristics:</p>
<ul class="simple">
<li><p>only SEP deployment</p></li>
<li><p>limited or no catalogs</p></li>
<li><p>no authentication</p></li>
<li><p>minimal worker replicas without scaling</p></li>
</ul>
<p>This allows you to update the configuration incrementally:</p>
<ul class="simple">
<li><p>update the values YAML file by adding or updating configuration</p></li>
<li><p>run a helm upgrade just like for installation</p></li>
<li><p>verify that the desired changes are applied successfully</p></li>
<li><p>repeat the process with the next desired change</p></li>
</ul>
<p>Typically Helm applies the relevant changes in a granular fashion. For example,
if you change the worker configuration, no coordinator changes are performed and
the coordinator continues to run while workers are updated.</p>
<p>If you need to ensure that pods are recreated completely, you can use the
<code class="docutils literal notranslate"><span class="pre">--recreate-pods</span></code> option for your <code class="docutils literal notranslate"><span class="pre">helm</span></code> command. This essentially restarts
all workers as well as the coordinator and therefore restarts the cluster. This
includes a downtime for users.</p>
</div>
<div class="section" id="scaling">
<span id="helm-ops-scaling"></span><h2>Scaling<a class="headerlink" href="#scaling" title="Permalink to this headline">#</a></h2>
<p>You can scale your SEP cluster manually by adding more workers. This is done by
updating <a class="reference internal" href="sep-configuration.html#helm-sep-workers"><span class="std std-ref">the worker replicas</span></a> and <a class="reference internal" href="#helm-ops-updates"><span class="std std-ref">updating your
deployment</span></a>. Sufficient resources available in the cluster is
a requirement.</p>
<p>Alternatively, you can enable autoscaling in your your worker configuration and
updating the deployment. Sufficient resources available in the cluster is a
requirement.</p>
<p>Alternatively you can increase the memory resources allocated to the workers and
updating your deployment.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-notes.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="5.8. Helm chart release notes" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ranger-configuration.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="5.6. Ranger configuration" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>