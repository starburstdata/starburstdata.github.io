

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.6. Ranger configuration &mdash; Starburst Enterprise Presto</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="5. Kubernetes with Helm" href="../k8s.html"/>
        <link rel="next" title="5.7. Operation" href="operation.html"/>
        <link rel="prev" title="5.5. Hive metastore configuration" href="hms-configuration.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">5.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">5.2. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">5.3. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="sep-configuration.html">5.4. SEP configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="hms-configuration.html">5.5. Hive metastore configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.6. Ranger configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#docker-registry-access">Docker registry access</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ranger-server">Ranger server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ldap-user-synchronization-server">LDAP user synchronization server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#backing-database-server">Backing database server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exposing-the-cluster-to-outside-network">Exposing the cluster to outside network</a></li>
<li class="toctree-l3"><a class="reference internal" href="#datasources">Datasources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#server-start-up-configuration">Server start up configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extra-secrets">Extra secrets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#node-assignment">Node assignment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="operation.html">5.7. Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="eks.html">5.8. Amazon Elastic Kubernetes Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="gke.html">5.9. Google Kubernetes Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="aks.html">5.10. Microsoft Azure Kubernetes Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="openshift.html">5.11. Red Hat OpenShift</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e.2 LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/338-e/">Latest LTS (338-e)</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/341-e/">Latest STS (341-e)</option>
    <option value="/340-e/">340-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e.2 LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../k8s.html"><span class="section-number">5. </span>Kubernetes with Helm</a> &raquo;</li>
      
    <li><span class="section-number">5.6. </span>Ranger configuration</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ranger-configuration">
<h1><span class="section-number">5.6. </span>Ranger configuration<a class="headerlink" href="#ranger-configuration" title="Permalink to this headline">#</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">starburst-ranger</span></code> Helm chart configures Ranger usage in the cluster
with the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file detailed in the following sections. It allows you
to use the <a class="reference internal" href="../security/system-ranger.html"><span class="doc">system level security support of Starburst Enterprise Presto</span></a>.</p>
<p>It creates the following setup:</p>
<ul class="simple">
<li><p>A pod with the <a class="reference internal" href="#helm-ranger-server"><span class="std std-ref">Ranger server</span></a> with the Presto
Ranger plugin deployed and configured to connect to Presto</p></li>
<li><p>Optionally a pod with <a class="reference internal" href="#helm-ranger-usersync"><span class="std std-ref">Ranger LDAP user synchronization system</span></a> deployed and configured</p></li>
<li><p>Optionally a pod with a <a class="reference internal" href="#helm-ranger-database"><span class="std std-ref">PostgreSQL database backend</span></a> for Ranger</p></li>
</ul>
<p>A minimal values file <a class="reference internal" href="requirements.html#k8s-docker-registry"><span class="std std-ref">adds the registry credentials</span></a>
and overrides any defaults to suitable values.</p>
<p>Ranger needs to be <a class="reference internal" href="sep-configuration.html#helm-sep-ranger"><span class="std std-ref">enabled in the SEP configuration</span></a> and
deployed with Helm after SEP.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#docker-registry-access" id="id1">Docker registry access</a></p></li>
<li><p><a class="reference internal" href="#ranger-server" id="id2">Ranger server</a></p></li>
<li><p><a class="reference internal" href="#ldap-user-synchronization-server" id="id3">LDAP user synchronization server</a></p></li>
<li><p><a class="reference internal" href="#backing-database-server" id="id4">Backing database server</a></p></li>
<li><p><a class="reference internal" href="#exposing-the-cluster-to-outside-network" id="id5">Exposing the cluster to outside network</a></p></li>
<li><p><a class="reference internal" href="#datasources" id="id6">Datasources</a></p></li>
<li><p><a class="reference internal" href="#server-start-up-configuration" id="id7">Server start up configuration</a></p></li>
<li><p><a class="reference internal" href="#extra-secrets" id="id8">Extra secrets</a></p></li>
<li><p><a class="reference internal" href="#node-assignment" id="id9">Node assignment</a></p></li>
</ul>
</div>
<div class="section" id="docker-registry-access">
<span id="helm-ranger-registry"></span><h2>Docker registry access<a class="headerlink" href="#docker-registry-access" title="Permalink to this headline">#</a></h2>
<p>Same as <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Docker image and registry section for the SEP Helm chart</span></a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">registryCredentials</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">registry</span><span class="p">:</span>
  <span class="nt">username</span><span class="p">:</span>
  <span class="nt">password</span><span class="p">:</span>
</pre></div>
</div>
</div>
<div class="section" id="ranger-server">
<span id="helm-ranger-server"></span><h2>Ranger server<a class="headerlink" href="#ranger-server" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">admin</span></code> section configures the Ranger server and the included user
interface for policy management.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">admin</span><span class="p">:</span>
  <span class="nt">image</span><span class="p">:</span>
    <span class="nt">repository</span><span class="p">:</span> <span class="s">&quot;harbor.starburstdata.net/starburstdata/starburst-ranger-admin&quot;</span>
    <span class="nt">tag</span><span class="p">:</span> <span class="s">&quot;2.0.33&quot;</span>
    <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">&quot;IfNotPresent&quot;</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6080</span>
  <span class="nt">resources</span><span class="p">:</span>
    <span class="nt">requests</span><span class="p">:</span>
      <span class="nt">memory</span><span class="p">:</span> <span class="s">&quot;1Gi&quot;</span>
      <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">limits</span><span class="p">:</span>
      <span class="nt">memory</span><span class="p">:</span> <span class="s">&quot;1Gi&quot;</span>
      <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
  <span class="c1"># serviceUser is used by Presto to access Ranger</span>
  <span class="nt">serviceUser</span><span class="p">:</span> <span class="s">&quot;presto_service&quot;</span>
  <span class="nt">passwords</span><span class="p">:</span>
    <span class="nt">admin</span><span class="p">:</span> <span class="s">&quot;RangerPassword1&quot;</span>
    <span class="nt">tagsync</span><span class="p">:</span> <span class="s">&quot;TagSyncPassword1&quot;</span>
    <span class="nt">usersync</span><span class="p">:</span> <span class="s">&quot;UserSyncPassword1&quot;</span>
    <span class="nt">keyadmin</span><span class="p">:</span> <span class="s">&quot;KeyAdminPassword1&quot;</span>
    <span class="nt">service</span><span class="p">:</span> <span class="s">&quot;PrestoServicePassword1&quot;</span>
  <span class="c1"># optional truststore containing CA certificates to use instead of default one</span>
  <span class="nt">truststore</span><span class="p">:</span>
    <span class="c1"># existing secret containing truststore.jks key</span>
    <span class="nt">secret</span><span class="p">:</span>
    <span class="c1"># password to truststore</span>
    <span class="nt">password</span><span class="p">:</span>
  <span class="nt">env</span><span class="p">:</span>
    <span class="c1"># Additional env variables to pass to Ranger Admin.</span>
    <span class="c1"># To pass Ranger install property, use variable with name RANGE__&lt;property_name&gt;,</span>
    <span class="c1"># for example RANGER__authentication_method.</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">admin.serviceUser</span></code></p>
<p>The operating system user that is used to run the Ranger application.</p>
<p><code class="docutils literal notranslate"><span class="pre">admin.passwords</span></code></p>
<p>A number of passwords need to be set to any desired values. They are used for
administrative and Ranger internal purposes and do not need to be changed or
used elsewhere.</p>
</div>
<div class="section" id="ldap-user-synchronization-server">
<span id="helm-ranger-usersync"></span><h2>LDAP user synchronization server<a class="headerlink" href="#ldap-user-synchronization-server" title="Permalink to this headline">#</a></h2>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">usersync</span></code> block to configure the details of the
synchronization of users and groups between Ranger and your LDAP system. It runs
on a separate pod when deployed.</p>
<p>The default configuration enables user synchronization:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">usersync</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">image</span><span class="p">:</span>
    <span class="nt">repository</span><span class="p">:</span> <span class="s">&quot;harbor.starburstdata.net/starburstdata/ranger-usersync&quot;</span>
    <span class="nt">tag</span><span class="p">:</span> <span class="s">&quot;2.0.33&quot;</span>
    <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">&quot;IfNotPresent&quot;</span>
  <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;ranger-usersync&quot;</span>
  <span class="nt">resources</span><span class="p">:</span>
    <span class="nt">requests</span><span class="p">:</span>
      <span class="nt">memory</span><span class="p">:</span> <span class="s">&quot;1Gi&quot;</span>
      <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">limits</span><span class="p">:</span>
      <span class="nt">memory</span><span class="p">:</span> <span class="s">&quot;1Gi&quot;</span>
      <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="nt">tls</span><span class="p">:</span>
    <span class="c1"># set true to enable tls</span>
    <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="c1"># optional truststore containing CA certificate for ldap server</span>
    <span class="nt">truststore</span><span class="p">:</span>
      <span class="c1"># existing secret containing truststore.jks key</span>
      <span class="nt">secret</span><span class="p">:</span>
      <span class="c1"># password to truststore</span>
      <span class="nt">password</span><span class="p">:</span>
  <span class="c1"># env is a map of ranger config variables</span>
  <span class="nt">env</span><span class="p">:</span>
    <span class="c1"># Use RANGER__&lt;property_name&gt; variables to set Ranger install properties.</span>
    <span class="nt">RANGER__SYNC_LDAP_URL</span><span class="p">:</span> <span class="s">&quot;ldap://ranger-ldap:389&quot;</span>
    <span class="nt">RANGER__SYNC_LDAP_BIND_DN</span><span class="p">:</span> <span class="s">&quot;cn=admin,dc=ldap,dc=example,dc=org&quot;</span>
    <span class="nt">RANGER__SYNC_LDAP_BIND_PASSWORD</span><span class="p">:</span> <span class="s">&quot;cieX7moong3u&quot;</span>
    <span class="nt">RANGER__SYNC_LDAP_SEARCH_BASE</span><span class="p">:</span> <span class="s">&quot;dc=ldap,dc=example,dc=org&quot;</span>
    <span class="nt">RANGER__SYNC_LDAP_USER_SEARCH_BASE</span><span class="p">:</span> <span class="s">&quot;ou=users,dc=ldap,dc=example,dc=org&quot;</span>
    <span class="nt">RANGER__SYNC_LDAP_USER_OBJECT_CLASS</span><span class="p">:</span> <span class="s">&quot;person&quot;</span>
    <span class="nt">RANGER__SYNC_GROUP_SEARCH_ENABLED</span><span class="p">:</span> <span class="s">&quot;true&quot;</span>
    <span class="nt">RANGER__SYNC_GROUP_USER_MAP_SYNC_ENABLED</span><span class="p">:</span> <span class="s">&quot;true&quot;</span>
    <span class="nt">RANGER__SYNC_GROUP_SEARCH_BASE</span><span class="p">:</span> <span class="s">&quot;ou=groups,dc=ldap,dc=example,dc=org&quot;</span>
    <span class="nt">RANGER__SYNC_GROUP_OBJECT_CLASS</span><span class="p">:</span> <span class="s">&quot;groupOfNames&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">usersync.enabled</span></code></p>
<p>Enable or disable user synchronization feature.</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.name</span></code></p>
<p>Name of the pod.</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.tls.enabled</span></code></p>
<p>Enable or disable TLS for usersync.</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.tls.truststore.secret</span></code></p>
<p>Name of the secret created from the truststore.</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.tls.truststore.password</span></code></p>
<p>Password for the truststore.</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env</span></code></p>
<p>A map of Ranger config variables related to the user synchronization.</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_LDAP_URL</span></code></p>
<p>URL to the LDAP server.</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_LDAP_BIND_DN</span></code></p>
<p>Distinguished name (DN) string used to bind for the LDAP connection.</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env</span> <span class="pre">/</span> <span class="pre">RANGER__SYNC_LDAP_BIND_PASSWORD</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_LDAP_SEARCH_BASE</span></code>
<code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_LDAP_USER_SEARCH_BASE</span></code></p>
<p>User information search base in the LDAP directory</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_LDAP_USER_OBJECT_CLASS</span></code></p>
<p>Object class for users</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_GROUP_SEARCH_ENABLED</span></code></p>
<p>Enable or disable group search</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_GROUP_USER_MAP_SYNC_ENABLED</span></code></p>
<p>Enable or disable synchronization of group-user mapping</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_GROUP_SEARCH_BASE</span></code></p>
<p>Group information search base in the LDAP directory</p>
<p><code class="docutils literal notranslate"><span class="pre">usersync.env.RANGER__SYNC_GROUP_OBJECT_CLASS</span></code></p>
<p>Object class for groups</p>
<p>—</p>
<p>The following steps can be used to enable TLS with the LDAP server:</p>
<ul>
<li><p>Create a truststore file named <code class="docutils literal notranslate"><span class="pre">truststore.jks</span></code> from the LDAP server</p></li>
<li><p>Create a Kubernetes secret <code class="docutils literal notranslate"><span class="pre">ldap-cert</span></code> from the truststore file</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl create secret generic ldap-cert --from-file truststore.jks
</pre></div>
</div>
</li>
<li><p>Update values to reflect the secret name in the <code class="docutils literal notranslate"><span class="pre">tls</span></code> section</p></li>
<li><p>Update truststore password in the <code class="docutils literal notranslate"><span class="pre">tls</span></code> section</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">tls</span><span class="p">:</span>
  <span class="n">enabled</span><span class="p">:</span> <span class="k">true</span>
  <span class="n">truststore</span><span class="p">:</span>
    <span class="n">secret</span><span class="p">:</span> <span class="n">ldap</span><span class="o">-</span><span class="n">cert</span>
    <span class="n">password</span><span class="p">:</span> <span class="ss">&quot;truststore password&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="backing-database-server">
<span id="helm-ranger-database"></span><h2>Backing database server<a class="headerlink" href="#backing-database-server" title="Permalink to this headline">#</a></h2>
<p>You can use a PostgreSQL database within the cluster, created by the chart, as
backend for the policy storage of Ranger in the <code class="docutils literal notranslate"><span class="pre">database</span></code> block for testing.</p>
<p>Alternatively, you can use an external PostgreSQL database for production usage.
You have to manage this server and database yourself.</p>
<p>By default an internal database is configured:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;internal&quot;</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span>
      <span class="nt">repository</span><span class="p">:</span> <span class="s">&quot;library/postgres&quot;</span>
      <span class="nt">tag</span><span class="p">:</span> <span class="s">&quot;10.6&quot;</span>
      <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">&quot;IfNotPresent&quot;</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">persistentVolumeClaim</span><span class="p">:</span>
        <span class="nt">storageClassName</span><span class="p">:</span>
        <span class="nt">accessModes</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ReadWriteOnce</span>
        <span class="nt">resources</span><span class="p">:</span>
          <span class="nt">requests</span><span class="p">:</span>
            <span class="nt">storage</span><span class="p">:</span> <span class="s">&quot;2Gi&quot;</span>
    <span class="nt">resources</span><span class="p">:</span>
      <span class="nt">requests</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="s">&quot;1Gi&quot;</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
      <span class="nt">limits</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="s">&quot;1Gi&quot;</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5432</span>
    <span class="nt">databaseName</span><span class="p">:</span> <span class="s">&quot;ranger&quot;</span>
    <span class="nt">databaseUser</span><span class="p">:</span> <span class="s">&quot;ranger&quot;</span>
    <span class="nt">databasePassword</span><span class="p">:</span> <span class="s">&quot;RangerPass123&quot;</span>
    <span class="nt">databaseRootUser</span><span class="p">:</span> <span class="s">&quot;rangeradmin&quot;</span>
    <span class="nt">databaseRootPassword</span><span class="p">:</span> <span class="s">&quot;RangerAdminPass123&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">database.type</span></code></p>
<p>Set to <code class="docutils literal notranslate"><span class="pre">internal</span></code> to use a database in the k8s cluster, managed by the chart.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.image</span></code></p>
<p>Docker container images used for the PostgreSQL server.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.volume</span></code></p>
<p>Storage volume to persist the database. The default configuration requests a new
persistent volume (PV). Alternatively you can an use existing volume claim by
referencing the name:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;internal&quot;</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">existingVolumeClaim</span><span class="p">:</span> <span class="s">&quot;my_claim&quot;</span>
</pre></div>
</div>
<p>You can also configure an empty directory on the pod, keeping in mind that a pod
replacement looses the database content.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;internal&quot;</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>
<p>Other volume types can also be used.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.resources</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">database.internal.databaseName</span></code></p>
<p>Name of the internal database.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.internal.databaseUser</span></code></p>
<p>User to connect to the internal database.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.internal.databasePassword</span></code></p>
<p>Password to connect to internal database.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.internal.databaseRootUser</span></code></p>
<p>User to administrate the internal database for creating and updating tables and
similar operations.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.internal.databaseRootPassword</span></code></p>
<p>Password for the administrator to connect to the the internal database.</p>
<p>—</p>
<p>The following section shows the empty default setup for using  of an external
PostgreSQL database. You just provide the necessary details for the external
server and ensure that it can be reached from the k8s cluster pod.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;external&quot;</span>
  <span class="nt">external</span><span class="p">:</span>
    <span class="nt">port</span><span class="p">:</span>
    <span class="nt">host</span><span class="p">:</span>
    <span class="nt">databaseName</span><span class="p">:</span>
    <span class="nt">databaseUser</span><span class="p">:</span>
    <span class="nt">databasePassword</span><span class="p">:</span>
    <span class="nt">databaseRootUser</span><span class="p">:</span>
    <span class="nt">databaseRootPassword</span><span class="p">:</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">database.type</span></code></p>
<p>Set to <code class="docutils literal notranslate"><span class="pre">external</span></code> to use a database managed externally.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external</span> <span class="pre">/</span> <span class="pre">port</span></code></p>
<p>Port to access the external database</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external</span> <span class="pre">/</span> <span class="pre">host</span></code></p>
<p>Host of the external database</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external</span> <span class="pre">/</span> <span class="pre">databaseName</span></code></p>
<p>Name of the database.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external</span> <span class="pre">/</span> <span class="pre">databaseUser</span></code></p>
<p>User to connect to the database.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external</span> <span class="pre">/</span> <span class="pre">databasePassword</span></code></p>
<p>Password to connect to the database.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external</span> <span class="pre">/</span> <span class="pre">databaseRootUser</span></code></p>
<p>User to administrate the external database by creating and updating tables and
similar operations.</p>
<p><code class="docutils literal notranslate"><span class="pre">database.external</span> <span class="pre">/</span> <span class="pre">databaseRootPassword</span></code></p>
<p>Password for the administrator to connect to the external database.</p>
</div>
<div class="section" id="exposing-the-cluster-to-outside-network">
<span id="helm-ranger-expose"></span><h2>Exposing the cluster to outside network<a class="headerlink" href="#exposing-the-cluster-to-outside-network" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">expose</span></code> section for Ranger works identical to the <a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">SEP server expose
section</span></a>. It exposes the Ranger user interface for configuring
and managing policies outside the cluster.</p>
<p>Differences are isolated to the configured default values. The default type is
<code class="docutils literal notranslate"><span class="pre">clusterIp</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;clusterIp&quot;</span>
  <span class="nt">clusterIp</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;ranger&quot;</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6080</span>
</pre></div>
</div>
<p>The following section shows the default values with an activated <code class="docutils literal notranslate"><span class="pre">nodePort</span></code>
type:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;nodePort&quot;</span>
  <span class="nt">nodePort</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;ranger&quot;</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6080</span>
        <span class="nt">nodePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30680</span>
</pre></div>
</div>
<p>The following section shows the default values with an activated
<code class="docutils literal notranslate"><span class="pre">loadBalancer</span></code> type:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;loadBalancer&quot;</span>
  <span class="nt">loadBalancer</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;ranger&quot;</span>
    <span class="nt">IP</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6080</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
    <span class="nt">sourceRanges</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>
<p>The following section shows the default values with an activated <code class="docutils literal notranslate"><span class="pre">ingress</span></code>
type:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;ingress&quot;</span>
  <span class="nt">ingress</span><span class="p">:</span>
    <span class="nt">tls</span><span class="p">:</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">secretName</span><span class="p">:</span>
    <span class="nt">host</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;/&quot;</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>
</div>
<div class="section" id="datasources">
<span id="helm-ranger-datasources"></span><h2>Datasources<a class="headerlink" href="#datasources" title="Permalink to this headline">#</a></h2>
<p># datasources - list of Presto datasources to configure Ranger
# services. It is mounted as file /config/datasources.yaml inside
# container and processed by init script.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">datasources</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;fake-presto-1&quot;</span>
    <span class="nt">host</span><span class="p">:</span> <span class="s">&quot;presto.fake-presto-1-namespace&quot;</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">username</span><span class="p">:</span> <span class="s">&quot;presto_service1&quot;</span>
    <span class="nt">password</span><span class="p">:</span> <span class="s">&quot;Password123&quot;</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;fake-presto-2&quot;</span>
    <span class="nt">host</span><span class="p">:</span> <span class="s">&quot;presto.fake-presto-2-namespace&quot;</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">username</span><span class="p">:</span> <span class="s">&quot;presto_service2&quot;</span>
    <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Password123</span>
</pre></div>
</div>
</div>
<div class="section" id="server-start-up-configuration">
<span id="helm-ranger-startup"></span><h2>Server start up configuration<a class="headerlink" href="#server-start-up-configuration" title="Permalink to this headline">#</a></h2>
<p># initFile - optional startup script, called with container name
# as parameter - either ranger-admin or ranger-usersync
# Use “files/initFile.sh” to enable Presto integration using datasources section</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span>
</pre></div>
</div>
<p># List of extra arguments to be passed to initFile</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">extraArguments</span><span class="p">:</span>
</pre></div>
</div>
</div>
<div class="section" id="extra-secrets">
<span id="helm-ranger-secrets"></span><h2>Extra secrets<a class="headerlink" href="#extra-secrets" title="Permalink to this headline">#</a></h2>
<p># Below secret will be mounted in /extra-secret/ within containers</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">extraSecret</span><span class="p">:</span>
  <span class="c1"># Replace this with secret name that should be used from namespace you are deploying to</span>
  <span class="nt">name</span><span class="p">:</span>
  <span class="c1"># Optionally &#39;file&#39; may be provided which will be deployed as secret with given &#39;name&#39; in used namespace.</span>
  <span class="nt">file</span><span class="p">:</span>
</pre></div>
</div>
</div>
<div class="section" id="node-assignment">
<h2>Node assignment<a class="headerlink" href="#node-assignment" title="Permalink to this headline">#</a></h2>
<p>You can add configuration to <a class="reference internal" href="installation.html#helm-node-assignment"><span class="std std-ref">determine the node and pod to use</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">nodeSelector</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">tolerations</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">affinity</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="operation.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="5.7. Operation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hms-configuration.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="5.5. Hive metastore configuration" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>