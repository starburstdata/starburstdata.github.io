

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.3. Deployment of Presto on Kubernetes &mdash; Starburst Enterprise Presto</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="6. Kubernetes operator" href="../kubernetes.html"/>
        <link rel="next" title="6.4. Presto Kubernetes Resource" href="presto_resource.html"/>
        <link rel="prev" title="6.2. Prerequisites" href="prerequisites.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">4. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">5. Kubernetes with Helm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../kubernetes.html">6. Kubernetes operator</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">6.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html">6.2. Prerequisites</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">6.3. Deployment of Presto on Kubernetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="presto_resource.html">6.4. Presto Kubernetes Resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html">6.5. Querying Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="customizing_presto_image.html">6.6. Customizing Presto Docker Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpa.html">6.7. Horizontal Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="secrets.html">6.8. Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="ranger.html">6.9. Ranger</a></li>
<li class="toctree-l2"><a class="reference internal" href="eks.html">6.10. Using Amazon Elastic Kubernetes Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcp-marketplace.html">6.11. GCP Marketplace</a></li>
<li class="toctree-l2"><a class="reference internal" href="gke.html">6.12. Using Google Kubernetes Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure-marketplace.html">6.13. Azure Marketplace</a></li>
<li class="toctree-l2"><a class="reference internal" href="aks.html">6.14. Using Microsoft Azure Kubernetes Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="openshift.html">6.15. Using Red Hat OpenShift</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html">6.16. Kubernetes Resources Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/356-e/">Latest LTS (356-e)</option>
    <option value="/350-e/">350-e LTS</option>
    <option value="/345-e/">345-e LTS</option>
    <option value="/338-e/">338-e LTS</option>
    <option value="/359-e/">Latest STS (359-e)</option>
    <option value="/358-e/">358-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../kubernetes.html"><span class="section-number">6. </span>Kubernetes operator</a> &raquo;</li>
      
    <li><span class="section-number">6.3. </span>Deployment of Presto on Kubernetes</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deployment-of-presto-on-kubernetes">
<h1><span class="section-number">6.3. </span>Deployment of Presto on Kubernetes<a class="headerlink" href="#deployment-of-presto-on-kubernetes" title="Permalink to this headline">#</a></h1>
<p>Starburst Enterprise Presto on Kubernetes can be deployed using online resources
on DockerHub and Starburst storage systems. Ensure your k8s cluster is up and
running, and you are connected to it with <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> before you proceed.</p>
<p>Alternatively to using the following commands directly, you can download the
YAML files individually and then use them from local copies, or even transfer
them to another server before proceeding.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/service_account.yaml">service_account.yaml</a></p></li>
<li><p><a class="reference external" href="https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/role.yaml">role.yaml</a></p></li>
<li><p><a class="reference external" href="https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/role_binding.yaml">role_binding.yaml</a></p></li>
<li><p><a class="reference external" href="https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/presto_v1_crd.yaml">presto_v1_crd.yaml</a></p></li>
<li><p><a class="reference external" href="https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/operator.yaml">operator.yaml</a></p></li>
<li><p><a class="reference external" href="https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/example_presto_v1_cr.yaml">example_presto_v1_cr.yaml</a></p></li>
</ul>
<p>If you need to operate completely without access to the internet for the
deployment, you can use an offline installation package available from
Starburst. The package contains the Kubernetes resource YAML files, the needed
Docker images and installation instructions.</p>
<p><a class="reference external" href="https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/offline-installer.338-e.5-k8s-0.50.tar.gz">offline-installer.338-e.5-k8s-0.50.tar.gz</a> (file &gt; 2.5GB)</p>
<p>All installation methods then follow the same steps, and can either use the online files with a URL or local files.</p>
<p>Create a service account for the Presto K8s operator:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/service_account.yaml
</pre></div>
</div>
<p>Using a local file the command looks like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f service_account.yaml
</pre></div>
</div>
<p>Create a role and role binding for the Presto K8s operator:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/role.yaml
kubectl apply -f https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/role_binding.yaml
</pre></div>
</div>
<p>Create a Presto K8s custom resource definition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/presto_v1_crd.yaml
</pre></div>
</div>
<p>Start the Presto K8s operator:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/operator.yaml
</pre></div>
</div>
<p>Starting Presto by creating a K8s Presto resource:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl apply -f https://starburstdata.s3.us-east-2.amazonaws.com/k8s/338-e.5-k8s-0.50/example_presto_v1_cr.yaml
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="presto_resource.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="6.4. Presto Kubernetes Resource" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="prerequisites.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="6.2. Prerequisites" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>