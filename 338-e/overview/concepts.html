

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.2. Presto Concepts &mdash; Starburst Enterprise Presto</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/starburst.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Starburst Enterprise Presto" href="../index.html"/>
        <link rel="up" title="1. Overview" href="../overview.html"/>
        <link rel="next" title="2. Installation" href="../installation.html"/>
        <link rel="prev" title="1.1. Use Cases" href="use-cases.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Starburst Enterprise Presto
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../overview.html">1. Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="use-cases.html">1.1. Use Cases</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.2. Presto Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#server-types">Server Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#coordinator">Coordinator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#worker">Worker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-sources">Data Sources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#connector">Connector</a></li>
<li class="toctree-l4"><a class="reference internal" href="#catalog">Catalog</a></li>
<li class="toctree-l4"><a class="reference internal" href="#schema">Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#table">Table</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#query-execution-model">Query Execution Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#statement">Statement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query">Query</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stage">Stage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#task">Task</a></li>
<li class="toctree-l4"><a class="reference internal" href="#split">Split</a></li>
<li class="toctree-l4"><a class="reference internal" href="#driver">Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operator">Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exchange">Exchange</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">3. Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission-control.html">4. Mission Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws.html">5. Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">6. Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">7. Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">8. Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">9. Query Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">10. Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">11. Functions and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">12. SQL Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">13. SQL Statement Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration.html">14. Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">15. Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">16. Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">17. Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../404.html">404 - Nothing to See Here</a></li>
</ul>

            
          

        </div>
        <div style="margin-top: 1em; margin-left: 2em;">
          Version <a href="../versions.html">338-e.1 LTS and others</a>
          <br><br>
        <span>
  <select name="versions" id="versions" onChange="window.location.href=this.value">
    <option value="./">Choose another version</option>
    <option value="/338-e/">Latest LTS (338-e)</option>
    <option value="/332-e/">332-e LTS</option>
    <option value="/323-e/">323-e LTS</option>
    <option value="/340-e/">Latest STS (340-e)</option>
    <option value="/339-e/">336-e STS</option>
  </select>
</span>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://www.starburstdata.com/">
          <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px;"
          src="../_static/img/starburst-darkbg.png"/></a>
        <span class="optional">
          <a href="../index.html">Starburst Enterprise Presto</a>
          <a href="../versions.html" style="font-size: small;margin-left: 0.5em;">338-e.1 LTS and others</a>
          <a href="https://www.starburstdata.com/oreilly-presto-guide-download/?utm_campaign=O%27Reilly%20Presto%20Book&utm_source=starburst&utm_medium=docs">
            <img class="logo"style="background-color: transparent; border-radius: 0%; width: auto; height: auto ;padding: 0px; margin-left: 0.5em;"
          src="../_static/img/ptdg-banner.png"/></a>
          </span>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../overview.html"><span class="section-number">1. </span>Overview</a> &raquo;</li>
      
    <li><span class="section-number">1.2. </span>Presto Concepts</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="presto-concepts">
<h1><span class="section-number">1.2. </span>Presto Concepts<a class="headerlink" href="#presto-concepts" title="Permalink to this headline">#</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#server-types" id="id2">Server Types</a></p></li>
<li><p><a class="reference internal" href="#data-sources" id="id3">Data Sources</a></p></li>
<li><p><a class="reference internal" href="#query-execution-model" id="id4">Query Execution Model</a></p></li>
</ul>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p>To understand Presto, you must first understand the terms and concepts
used throughout the Presto documentation.</p>
<p>While it’s easy to understand statements and queries, as an end-user
you should have familiarity with concepts such as stages and splits to
take full advantage of Presto to execute efficient queries.  As a
Presto administrator or a Presto contributor you should understand how
Presto’s concepts of stages map to tasks and how tasks contain a set
of drivers which process data.</p>
<p>This section provides a solid definition for the core concepts
referenced throughout Presto, and these sections are sorted from most
general to most specific.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The book <a class="reference external" href="https://prestosql.io/presto-the-definitive-guide.html">Presto: The Definitive Guide</a> and the research
paper <a class="reference external" href="https://prestosql.io/paper.html">Presto: SQL on Everything</a> can
provide further information about Presto and the concepts in use.</p>
</div>
</div>
<div class="section" id="server-types">
<h2>Server Types<a class="headerlink" href="#server-types" title="Permalink to this headline">#</a></h2>
<p>There are two types of Presto servers: coordinators and workers. The
following section explains the difference between the two.</p>
<div class="section" id="coordinator">
<h3>Coordinator<a class="headerlink" href="#coordinator" title="Permalink to this headline">#</a></h3>
<p>The Presto coordinator is the server that is responsible for parsing
statements, planning queries, and managing Presto worker nodes.  It is
the “brain” of a Presto installation and is also the node to which a
client connects to submit statements for execution. Every Presto
installation must have a Presto coordinator alongside one or more
Presto workers. For development or testing purposes, a single
instance of Presto can be configured to perform both roles.</p>
<p>The coordinator keeps track of the activity on each worker and
coordinates the execution of a query. The coordinator creates
a logical model of a query involving a series of stages, which is then
translated into a series of connected tasks running on a cluster of
Presto workers.</p>
<p>Coordinators communicate with workers and clients using a REST API.</p>
</div>
<div class="section" id="worker">
<h3>Worker<a class="headerlink" href="#worker" title="Permalink to this headline">#</a></h3>
<p>A Presto worker is a server in a Presto installation, which is responsible
for executing tasks and processing data. Worker nodes fetch data from
connectors and exchange intermediate data with each other. The coordinator
is responsible for fetching results from the workers and returning the
final results to the client.</p>
<p>When a Presto worker process starts up, it advertises itself to the discovery
server in the coordinator, which makes it available to the Presto coordinator
for task execution.</p>
<p>Workers communicate with other workers and Presto coordinators
using a REST API.</p>
</div>
</div>
<div class="section" id="data-sources">
<h2>Data Sources<a class="headerlink" href="#data-sources" title="Permalink to this headline">#</a></h2>
<p>Throughout this documentation, you’ll read terms such as connector,
catalog, schema, and table. These fundamental concepts cover Presto’s
model of a particular data source and are described in the following
section.</p>
<div class="section" id="connector">
<h3>Connector<a class="headerlink" href="#connector" title="Permalink to this headline">#</a></h3>
<p>A connector adapts Presto to a data source such as Hive or a
relational database. You can think of a connector the same way you
think of a driver for a database. It is an implementation of Presto’s
<a class="reference internal" href="../develop/spi-overview.html"><span class="doc">SPI</span></a>, which allows Presto to interact
with a resource using a standard API.</p>
<p>Presto contains several built-in connectors: a connector for
<a class="reference internal" href="../connector/jmx.html"><span class="doc">JMX</span></a>, a <a class="reference internal" href="../connector/system.html"><span class="doc">System</span></a>
connector which provides access to built-in system tables,
a <a class="reference internal" href="../connector/hive.html"><span class="doc">Hive</span></a> connector, and a
<a class="reference internal" href="../connector/tpch.html"><span class="doc">TPCH</span></a> connector designed to serve TPC-H benchmark
data. Many third-party developers have contributed connectors so that
Presto can access data in a variety of data sources.</p>
<p>Every catalog is associated with a specific connector. If you examine
a catalog configuration file, you see that each contains a
mandatory property <code class="docutils literal notranslate"><span class="pre">connector.name</span></code>, which is used by the catalog
manager to create a connector for a given catalog. It is possible
to have more than one catalog use the same connector to access two
different instances of a similar database. For example, if you have
two Hive clusters, you can configure two catalogs in a single Presto
cluster that both use the Hive connector, allowing you to query data
from both Hive clusters, even within the same SQL query.</p>
</div>
<div class="section" id="catalog">
<h3>Catalog<a class="headerlink" href="#catalog" title="Permalink to this headline">#</a></h3>
<p>A Presto catalog contains schemas and references a data source via a
connector.  For example, you can configure a JMX catalog to provide
access to JMX information via the JMX connector. When you run a SQL
statement in Presto, you are running it against one or more catalogs.
Other examples of catalogs include the Hive catalog to connect to a
Hive data source.</p>
<p>When addressing a table in Presto, the fully-qualified table name is
always rooted in a catalog. For example, a fully-qualified table name
of <code class="docutils literal notranslate"><span class="pre">hive.test_data.test</span></code> refers to the <code class="docutils literal notranslate"><span class="pre">test</span></code> table in the
<code class="docutils literal notranslate"><span class="pre">test_data</span></code> schema in the <code class="docutils literal notranslate"><span class="pre">hive</span></code> catalog.</p>
<p>Catalogs are defined in properties files stored in the Presto
configuration directory.</p>
</div>
<div class="section" id="schema">
<h3>Schema<a class="headerlink" href="#schema" title="Permalink to this headline">#</a></h3>
<p>Schemas are a way to organize tables. Together, a catalog and schema
define a set of tables that can be queried. When accessing Hive or a
relational database such as MySQL with Presto, a schema translates to
the same concept in the target database. Other types of connectors may
choose to organize tables into schemas in a way that makes sense for
the underlying data source.</p>
</div>
<div class="section" id="table">
<h3>Table<a class="headerlink" href="#table" title="Permalink to this headline">#</a></h3>
<p>A table is a set of unordered rows, which are organized into named columns
with types. This is the same as in any relational database. The mapping
from source data to tables is defined by the connector.</p>
</div>
</div>
<div class="section" id="query-execution-model">
<h2>Query Execution Model<a class="headerlink" href="#query-execution-model" title="Permalink to this headline">#</a></h2>
<p>Presto executes SQL statements and turns these statements into queries,
that are executed across a distributed cluster of coordinator and workers.</p>
<div class="section" id="statement">
<h3>Statement<a class="headerlink" href="#statement" title="Permalink to this headline">#</a></h3>
<p>Presto executes ANSI-compatible SQL statements.  When the Presto
documentation refers to a statement, it is referring to statements as
defined in the ANSI SQL standard, which consists of clauses,
expressions, and predicates.</p>
<p>Some readers might be curious why this section lists separate concepts
for statements and queries. This is necessary because, in Presto,
statements simply refer to the textual representation of a SQL
statement. When a statement is executed, Presto creates a query along
with a query plan that is then distributed across a series of Presto
workers.</p>
</div>
<div class="section" id="query">
<h3>Query<a class="headerlink" href="#query" title="Permalink to this headline">#</a></h3>
<p>When Presto parses a statement, it converts it into a query and creates
a distributed query plan, which is then realized as a series of
interconnected stages running on Presto workers. When you retrieve
information about a query in Presto, you receive a snapshot of every
component that is involved in producing a result set in response to a
statement.</p>
<p>The difference between a statement and a query is simple. A statement
can be thought of as the SQL text that is passed to Presto, while a query
refers to the configuration and components instantiated to execute
that statement. A query encompasses stages, tasks, splits, connectors,
and other components and data sources working in concert to produce a
result.</p>
</div>
<div class="section" id="stage">
<h3>Stage<a class="headerlink" href="#stage" title="Permalink to this headline">#</a></h3>
<p>When Presto executes a query, it does so by breaking up the execution
into a hierarchy of stages. For example, if Presto needs to aggregate
data from one billion rows stored in Hive, it does so by creating a
root stage to aggregate the output of several other stages, all of
which are designed to implement different sections of a distributed
query plan.</p>
<p>The hierarchy of stages that comprises a query resembles a tree.
Every query has a root stage, which is responsible for aggregating
the output from other stages. Stages are what the coordinator uses to
model a distributed query plan, but stages themselves don’t run on
Presto workers.</p>
</div>
<div class="section" id="task">
<h3>Task<a class="headerlink" href="#task" title="Permalink to this headline">#</a></h3>
<p>As mentioned in the previous section, stages model a particular
section of a distributed query plan, but stages themselves don’t
execute on Presto workers. To understand how a stage is executed,
you need to understand that a stage is implemented as a series of
tasks distributed over a network of Presto workers.</p>
<p>Tasks are the “work horse” in the Presto architecture as a distributed
query plan is deconstructed into a series of stages, which are then
translated to tasks, which then act upon or process splits. A Presto
task has inputs and outputs, and just as a stage can be executed in
parallel by a series of tasks, a task is executing in parallel with a
series of drivers.</p>
</div>
<div class="section" id="split">
<h3>Split<a class="headerlink" href="#split" title="Permalink to this headline">#</a></h3>
<p>Tasks operate on splits, which are sections of a larger data
set. Stages at the lowest level of a distributed query plan retrieve
data via splits from connectors, and intermediate stages at a higher
level of a distributed query plan retrieve data from other stages.</p>
<p>When Presto is scheduling a query, the coordinator queries a
connector for a list of all splits that are available for a table.
The coordinator keeps track of which machines are running which tasks,
and what splits are being processed by which tasks.</p>
</div>
<div class="section" id="driver">
<h3>Driver<a class="headerlink" href="#driver" title="Permalink to this headline">#</a></h3>
<p>Tasks contain one or more parallel drivers. Drivers act upon data and
combine operators to produce output that is then aggregated by a task
and then delivered to another task in another stage. A driver is a
sequence of operator instances, or you can think of a driver as a
physical set of operators in memory. It is the lowest level of
parallelism in the Presto architecture. A driver has one input and
one output.</p>
</div>
<div class="section" id="operator">
<h3>Operator<a class="headerlink" href="#operator" title="Permalink to this headline">#</a></h3>
<p>An operator consumes, transforms and produces data. For example, a table
scan fetches data from a connector and produces data that can be consumed
by other operators, and a filter operator consumes data and produces a
subset by applying a predicate over the input data.</p>
</div>
<div class="section" id="exchange">
<h3>Exchange<a class="headerlink" href="#exchange" title="Permalink to this headline">#</a></h3>
<p>Exchanges transfer data between Presto nodes for different stages of
a query. Tasks produce data into an output buffer and consume data
from other tasks using an exchange client.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../installation.html" style="box-shadow: none; border: none;" class="btn btn-neutral float-right" title="2. Installation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="use-cases.html" style="box-shadow: none; border: none;" class="btn btn-neutral" title="1.1. Use Cases" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'338',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>