<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst | Optimizing query performance</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst - Optimizing query performance">
    <meta property="og:description" content="Your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/logo/starburst-reverse.png">

    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/style.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114610397-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114610397-1');
</script>

</head>
<body>


<div class="wrap">
  

<header style="padding-top:74px;">
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="navbar-left-container">
      <a class="navbar-brand" href="https://www.starburst.io/">
        <img src="/assets/img/logo/starburst-reverse.png" height="40" alt=" Starburst">
      </a>
      <span class="navbar-divider"></span>
      <a href="/" class="nav-item nav-link">Documentation</a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a  class="nav-link active"  href="/starburst-enterprise/index.html">Starburst Enterprise</a>
        </li>
        <li class="nav-item">
          <a  class="nav-link"  href="/ecosystems/index.html">Starburst cloud deployments</a>
        </li>
        <li class="nav-item">
          <a  class="nav-link"  href="/starburst-galaxy/index.html">Starburst Galaxy</a>
        </li>
        <li class="nav-item">
          <a  class="nav-link"  href="/support.html">Support</a>
        </li>
      </li>
      
      <li class="dropdown" id="site-search">
  <a id="dropdownSearch" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <i class="fa fa-search" style="color:white; vertical-align: sub;"></i>
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdownSearch">
    <div id="search-container">
      <div id="search-input-bar">
        <input type="text" id="search-input" name="search" placeholder="Search..." />
      </div>
      <div id="results-container"></div>
    </div>
  </div>
</li>

<script type="text/javascript" src="/assets/js/simple-jekyll-search.js"></script>
<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('results-container'),
  json: '/search.json',
  limit: 30
})
</script>

      
      </ul>
    </div>
  </nav>
</header>

  
  <div class="content">
    <div class="row">
      <div class="col-md-3 side-navigation">
        <div class="spacer-60 toc-sticky left-nav">
          
          <div>
    <h6 class="overline product-nav-title">Starburst Enterprise</h6>
</div>
<hr />

 
  
  
<li >
  <a href="/starburst-enterprise/index.html" >Starburst Enterprise overview</a>
</li>



 
  
  
<li >
  <a href="/data-consumer/index.html" >Data consumers</a>
</li>



 





<li  class="active" 
    onclick="toggle_navigation_visibility('engineers');">
  <a>
    Data engineers
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="engineers" class="doc-subnav ">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/data-engineer/index.html" >Home</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/data-engineer/catalogs.html" >Catalogs</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/data-engineer/custom-connectors.html" >Custom connectors</a>
  </li>
  
  
  
    
    
    
  <li class="active"
      
    >
    <a href="/starburst-enterprise/data-engineer/query-performance.html" >Query performance</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('admins');">
  <a>
    Platform administrators
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="admins" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/platform-administrator/index.html" >Home</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/platform-administrator/cluster.html" >Starburst Enterprise cluster basics</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/platform-administrator/deploy-update.html" >Deploying and updating Starburst Enterprise</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/platform-administrator/performance-tuning.html" >Tuning cluster performance</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/platform-administrator/security.html" >Securing Starburst Enterprise</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('try');">
  <a>
    Try Starburst Enterprise
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="try" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/docker.html" >Docker</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/any-linux.html" >Any Linux</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/verify.html" >Verify server</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('starburst-admin');">
  <a>
    Starburst Admin
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="starburst-admin" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/index.html" >Overview and getting started</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/installation-guide.html" >Installation guide</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/operation-guides.html" >Operation guides</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/playbook-reference.html" >Playbook reference</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/release-notes.html" >Release notes</a>
  </li>
  
  
</ul>



<div style="padding-top: 3em;">
    <h6 class="overline product-nav-title">Resources</h6>
  </div>
  <hr />
  
   
  
  
<li >
  <a href="/starburst-enterprise/index.html" >Starburst Enterprise</a>
</li>


  
   
  
  
<li >
  <a href="/ecosystems/index.html" >Ecosystem deployments</a>
</li>


  
   
  
  
<li >
  <a href="/starburst-galaxy/index.html" >Starburst Galaxy</a>
</li>


  
   





<li 
    onclick="toggle_navigation_visibility('personas');">
  <a>
    User personas
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="personas" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
      
      
    >
    <a href="/starburst-personas.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
      
      
    >
    <a href="/data-consumer/index.html" >Data consumer</a>
  </li>
  
  
  
    
    
    
  <li 
      
      
      
    >
    <a href="/data-engineer/index.html" >Data engineer</a>
  </li>
  
  
  
    
    
    
  <li 
      
      
      
    >
    <a href="/platform-administrator/index.html" >Platform administrator</a>
  </li>
  
  
  
    
    
    
  <li 
      
      
      
    >
    <a href="/data-leader/index.html" >Data leader</a>
  </li>
  
  
</ul>


  
   
  
  
<li >
  <a href="https://docs.starburst.io/latest/index.html" >Reference documentation</a>
</li>


  
   
  
  
<li >
  <a href="/glossary.html" >Glossary</a>
</li>


  
   
  
  
<li >
  <a href="/videos/index.html" >Video library</a>
</li>


  
          
        </div>
      </div>
      <div class="col-md-9 col-lg-6 spacer-30 docs-content">
        



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/starburst-enterprise/"
        style="text-transform: uppercase"
      > starburst enterprise</a> >
    
  
    
      <a href="/starburst-enterprise/data-engineer/"
        style="text-transform: uppercase"
      > data engineer</a> >
    
  
    
      Optimizing query performance
    
  </p>
</div>

        <h1 id="optimizing-query-performance">
        
        
          Optimizing query performance <a href="#optimizing-query-performance" class="titleAnchor">#</a>
        
        
      </h1>
    

<p>Starburst Enterprise platform (SEP) is fast. But did you know that there are still
many opportunities to make it even faster depending on how you write your
queries?</p>

<p>Learn how to use <code class="language-plaintext highlighter-rouge">EXPLAIN</code> and <code class="language-plaintext highlighter-rouge">ANALYZE</code> to improve your query performance in
this training video presented by one of our founders, Martin Traverso. For your
convenience, we’ve divided the video training course up into topic sections, and
provided links to the relevant parts of our documentation below.</p>
      <h2 id="the-query-lifecycle">
        
        
          The query lifecycle <a href="#the-query-lifecycle" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Knowing what’s happening under the hood in SQL can help you to write queries
that capitalize on possible optimizations and avoid approaches that will cost
you performance. This section provides an overview of what happens as a query is
executed.</p>

<div class="container">
  <div class="row">
    <div class="col-md-6">
       <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/GcS02yTNwC0?start=491&amp;end=1217" width="350" max-height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li>Parsing</li>
        <li>Analysis</li>
        <li>Planning</li>
        <li>Optimization</li>
        <li>Scheduling and execution</li>
      </ul>
      <p class="caption">Running time: ~12 min.</p>
    </div>
  </div>
</div><hr />
      <h2 id="the-explain-statement-in-detail">
        
        
          The EXPLAIN statement in detail <a href="#the-explain-statement-in-detail" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>If you want to understand what the SEP engine is basing its decisions on
as it executes a query, you need to use the <code class="language-plaintext highlighter-rouge">EXPLAIN</code> statement. This section
walks you through this very informative tool in detail.</p>

<div class="container">
  <div class="row">
    <div class="col-md-6">
       <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/GcS02yTNwC0?start=1218&amp;end=2469" width="350" max-height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li><a href="https://docs.starburst.io/latest/sql/explain.html">EXPLAIN</a></li>
        <li>EXPLAIN vs <a href="https://docs.starburst.io/latest/sql/explain-analyze.html">EXPLAIN ANALYZE</a></li>
        <li><a href="https://docs.starburst.io/latest/admin/dynamic-filtering.html#analysis-and-confirmation">Fragment
            structure, distribution, row layout, estimates, and performance stats in EXPLAIN ANALYZE</a></li>
        <li><a href="https://docs.starburst.io/latest/admin/properties-exchange.html">Exchanges</a></li>
      </ul>
      Click the links to read more on that topic in our reference manual.<br /><br />
      <p class="caption">Running time: ~20 min.</p>
    </div>
  </div>
</div><hr />
      <h2 id="general-optimizations">
        
        
          General optimizations <a href="#general-optimizations" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>The content in this section is more technique-oriented, and is a complex
subject. We strongly suggest watching it all the way through thoroughly first to
gain a broad awareness of how you write a query can affect its performance
before trying these on your own. For further reading, we recommend our
<a href="https://docs.starburst.io/latest/optimizer/pushdown.html">pushdown</a>
documentation.</p>

<p>The SQL engine relies on table statistics to make decisions on optimizations.
Enabling dynamic filtering can take optimizations even further. We recommend
reading about these powerful features to ensure you are getting the best
performance possible out of your cluster:</p>

<ul>
  <li><a href="https://docs.starburst.io/latest/admin/dynamic-filtering.html">Dynamic filtering</a></li>
  <li><a href="https://docs.starburst.io/latest/optimizer/statistics">Table statistics</a></li>
</ul>

<div class="container">
  <div class="row">
    <div class="col-md-6">
           <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/GcS02yTNwC0?start=2470&amp;end=5940" width="350" max-height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li>Constant folding</li>
        <li>Predicate pushdown</li>
        <li>Predicate pushdown into the Hive connector</li>
        <li>Hive partition pruning</li>
        <li>Hive bucket pruning</li>
        <li>Row group skipping for ORC and Parquet</li>
        <li>Limit, partial limit, and aggregation pushdown</li>
        <li>Skew</li>
      </ul>
      <p class="caption">Running time: ~58 min.</p>
    </div>
  </div>
</div>

<p>SEP offers <a href="https://docs.starburst.io/latest/admin/properties-optimizer.html">several properties to control how the
optimizer</a> handles certain
operations.</p><hr />
      <h2 id="cost-based-optimizations">
        
        
          Cost-based optimizations <a href="#cost-based-optimizations" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>This section presents on overview of how cost-based optimizations work in SEP,
and provides great context for the following recommended reading:</p>

<ul>
  <li><a href="https://docs.starburst.io/latest/optimizer/cost-based-optimizations.html">Cost-based optimizations</a></li>
  <li><a href="https://docs.starburst.io/latest/optimizer/cost-in-explain.html?highlight=explain">Cost in EXPLAIN</a></li>
</ul>

<div class="container">
  <div class="row">
    <div class="col-md-6">
       <div class="embed-container">
    <iframe src="https://www.youtube.com/embed/GcS02yTNwC0?start=5941&amp;end=6729" width="350" max-height="240" frameborder="0" allowfullscreen="">
    </iframe>
  </div>
    </div>
    <div class="col-md-6">
      Topics:
      <ul>
        <li>Partitioned and broadcast joins</li>
        <li>Disabling cost-based optimizations</li>
        <li>Join reordering</li>
        <li>Table statistics</li>
        <li>Computing statistics with <a href="https://docs.starburst.io/latest/sql/analyze.html">ANALYZE</a></li>
      </ul>
      <p class="caption">Running time: ~13 min.</p>
    </div>
  </div>
</div><hr />

        <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
    <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

      </div>
      <div class="col-lg-3 toc-styles d-none d-lg-block">
        <div class="spacer-60 toc-sticky">
          <ul><li><a href="#optimizing-query-performance">Optimizing query performance</a><ul><li><a href="#the-query-lifecycle">The query lifecycle</a></li><li><a href="#the-explain-statement-in-detail">The EXPLAIN statement in detail</a></li><li><a href="#general-optimizations">General optimizations</a></li><li><a href="#cost-based-optimizations">Cost-based optimizations</a></li></ul></li></ul>

        </div>
      </div>
  </div>
  
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-presto-guide/" target="_blank">Free O'Reilly book - Presto: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <a href="https://www.starburst.io/" target="_blank"><img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst" style="margin-bottom:20px;"></a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2021<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>


  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
  <script type="text/javascript" src="/assets/js/custom.js"></script>
</body>
</html>

