<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst | Starburst Admin operation guides</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst - Starburst Admin operation guides">
    <meta property="og:description" content="Your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/starburst-og-image.png">

    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/fonts.css">
    <link rel="stylesheet" href="/assets/css/style.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114610397-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114610397-1');
</script>

<script>
  var ALGOLIA_INSIGHTS_SRC = "https://cdn.jsdelivr.net/npm/search-insights@2.2.1";

  !function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){
  (e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],
  i.async=1,i.src=n,c.parentNode.insertBefore(i,c)
  }(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");
</script>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Starburst Admin operation guides | Starburst</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Starburst Admin operation guides" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Your hub to all knowledge about Starburst products." />
<meta property="og:description" content="Your hub to all knowledge about Starburst products." />
<link rel="canonical" href="https://docs.starburst.io/starburst-enterprise/starburst-admin/operation-guides.html" />
<meta property="og:url" content="https://docs.starburst.io/starburst-enterprise/starburst-admin/operation-guides.html" />
<meta property="og:site_name" content="Starburst" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Starburst Admin operation guides" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Your hub to all knowledge about Starburst products.","headline":"Starburst Admin operation guides","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.starburst.io/assets/img/logo/starburst-reverse.png"}},"url":"https://docs.starburst.io/starburst-enterprise/starburst-admin/operation-guides.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>


<div class="wrap">
  

<header class="main-header">
  <div class="navbar fixed-top navbar-dark">
    <div class="navbar-left-container">
      <a class="navbar-brand" href="https://www.starburst.io/">
        <img src="/assets/img/logo/starburst_KO-T.png" height="32" alt="Starburst">
      </a>
      <span class="navbar-divider"></span>
      <a href="/" class="header-text">Documentation</a>
    </div>
    
    <div class="nav-item dropdown" id="site-search">
  <div id="dropdownSearchDisplay" aria-labelledby="dropdownSearch">
    <div id="algolia-search">
      <div id="searchbox"></div>
      <div id="refinement-list">
        <h6>Filter:</h6>
      </div>
      <div id="hits"></div>
      <div id="stats"></div>
    </div>
  </div>
</div>

    
  </div>
  <nav class="primary-nav">
    <ul class="navbar-layout ml-auto">
      <li class="nav-item dropdown">
        <a id="get-started"
           class="nav-link dropdown-toggle" 
          aria-haspopup="true" aria-label="Get started" data-is-click="false"
          href="/get-started/index.html">Get started</a>
        <div class="dropdown-menu dropdown-docs">
          <a class="dropdown-item" href="/get-started/concepts.html">Concepts</a>
          <a class="dropdown-item" href="/get-started/data-sources-catalogs.html">Data sources and catalogs</a>
          <a class="dropdown-item" href="/get-started/choose-your-starburst-product.html">Choose your Starburst product</a>
          <a class="dropdown-item" href="/data-consumer/index.html">Data consumer</a>
          <a class="dropdown-item" href="/data-engineer/index.html">Data engineer</a>
          <a class="dropdown-item" href="/platform-administrator/index.html">Platform administrator</a>
        </div>
      </li>
       <li class="nav-item dropdown">
        <a id="starburst-galaxy"
           class="nav-link dropdown-toggle" 
          aria-haspopup="true" aria-label="Starburst Galaxy" data-is-click="false"
          href="/starburst-galaxy/index.html">Starburst Galaxy</a>
        <div class="dropdown-menu dropdown-docs">
          <a class="dropdown-item" href="/starburst-galaxy/query/index.html">Query</a>
          <a class="dropdown-item" href="/starburst-galaxy/catalogs/index.html">Catalogs</a>
          <a class="dropdown-item" href="/starburst-galaxy/clusters/index.html">Clusters</a>
          <a class="dropdown-item" href="/starburst-galaxy/sql/index.html">SQL</a>
          <a class="dropdown-item" href="/starburst-galaxy/admin/index.html">Admin</a>
          <a class="dropdown-item" href="/starburst-galaxy/access-control/index.html">Access control</a>
          <a class="dropdown-item" href="/starburst-galaxy/cloud-settings/index.html">Cloud settings</a>
          <a class="dropdown-item" href="/starburst-galaxy/security/index.html">Security</a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a id="starburst-enterprise"
           class="nav-link dropdown-toggle active"
          
          aria-haspopup="true" aria-label="Get started" data-is-click="false"
          href="/starburst-enterprise/index.html">Starburst Enterprise</a>
        <div class="dropdown-menu dropdown-docs">
          <a class="dropdown-item" href="/starburst-enterprise/try/index.html">Try Starburst Enterprise</a>
          <a class="dropdown-item" href="/starburst-enterprise/web-ui/index.html">Web UI</a>
          <a class="dropdown-item" href="/starburst-enterprise/sql.html">SQL</a>
          <a class="dropdown-item" href="/starburst-enterprise/admin-topics/index.html">Administration</a>
          <a class="dropdown-item" href="/starburst-enterprise/k8s/index.html">Kubernetes deployments</a>
          <a class="dropdown-item" href="/starburst-enterprise/starburst-admin/index.html">Starburst Admin</a>
          <a class="dropdown-item" href="/latest/index.html">Reference documentation</a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a id="ecosystems"
           class="nav-link dropdown-toggle" 
          aria-haspopup="true" aria-label="Get started" data-is-click="false"
          href="/ecosystems/index.html">Ecosystems</a>
        <div class="dropdown-menu dropdown-docs">
          <a class="dropdown-item" href="/ecosystems/amazon/index.html">Amazon AWS</a>
          <a class="dropdown-item" href="/ecosystems/google/index.html">Google Cloud</a>
          <a class="dropdown-item" href="/ecosystems/microsoft/index.html">Microsoft Azure</a>
          <a class="dropdown-item" href="/ecosystems/redhat/index.html">Red Hat OpenShift</a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a id="resources"
           class="nav-link dropdown-toggle" 
          aria-haspopup="true" aria-label="resources" data-is-click="false"
          href="/resources.html">Resources</a>
        <div class="dropdown-menu dropdown-docs">
          <a class="dropdown-item" href="/support.html">Support</a>
          <a class="dropdown-item" href="/security/index.html">Security</a>
          <a class="dropdown-item" href="/blog/index.html">Developer blog</a>
          <a class="dropdown-item" href="/videos/index.html">Video library</a>
          <a class="dropdown-item" href="/glossary.html">Glossary</a>
          <a class="dropdown-item" href="https://www.trinoforum.org/">Trino forum</a>
        </div>
      </li>
    </ul>
  </nav>
</header>

  
  <div class="content">
    <div class="row">
      <div class="col-md-3 side-navigation">
        <div class="spacer-60 toc-sticky left-nav">
          
          <div>
    <h6 class="overline product-nav-title">Starburst Enterprise</h6>
</div>
<hr />

 
  
    
    
<li >
  <a href="/starburst-enterprise/index.html" >Starburst Enterprise overview</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('try');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    Try Starburst Enterprise&nbsp;
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="try" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/k8s.html" >Kubernetes</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/docker.html" >Docker</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/tarball.html" >Tarball</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/rpm.html" >RPM</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/verify.html" >Verify server</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/catalog.html" >Create a catalog</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('sepwebui');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    Web UI&nbsp;
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="sepwebui" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/web-ui/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/web-ui/query-editor.html" >Query editor</a>
  </li>
  
  
</ul>



 
  
    
    
<li >
  <a href="/starburst-enterprise/sql.html" >SQL</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('admintasks');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    Administration topics&nbsp;
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="admintasks" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/catalogs.html" >Define catalogs</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/autoscaling.html" >Autoscaling</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/security.html" >Secure your cluster</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/performance-tuning.html" >Tune your cluster</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/cache-service.html" >Enable the cache service</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('k8s');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    Kubernetes&nbsp;
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="k8s" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/index.html" >Starburst Enterprise and Kubernetes</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/k8s-operation.html" >Cluster operation</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/deploy-sep.html" >Deploy Starburst Enterprise</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/deploy-hms.html" >Deploy Hive metastore</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/deploy-cache-service.html" >Deploy the cache service</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/deploy-ranger.html" >Deploy Ranger</a>
  </li>
  
  
</ul>



 





<li  class="active" 
    onclick="toggle_navigation_visibility('starburst-admin');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    Starburst Admin&nbsp;
    <i class="fa fa-angle-left nav-icon"></i>
  </a>
</li>

<ul id="starburst-admin" class="doc-subnav ">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/index.html" >Get started</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/installation-guide.html" >Installation guide</a>
  </li>
  
  
  
    
    
    
  <li class="active"
      
    >
    <a href="/starburst-enterprise/starburst-admin/operation-guides.html" >Operation guides</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/playbook-reference.html" >Playbook reference</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/starburst-admin/release-notes.html" >Release notes</a>
  </li>
  
  
</ul>



<div style="padding-top: 3em;">
    <h6 class="overline product-nav-title">Resources</h6>
  </div>
  <hr />
  
   
  
    
    
<li >
  <a href="/support.html" >Support</a>
</li>
  


  
   
  
    
    
<li >
  <a href="/security/index.html" >Security</a>
</li>
  


  
   
  
    
    
<li >
  <a href="/blog/index.html" >Developer blog</a>
</li>
  


  
   
  
    
    
<li >
  <a href="/videos/index.html" >Video library</a>
</li>
  


  
   
  
    
    
<li >
  <a href="/glossary.html" >Glossary</a>
</li>
  


  
   
  
    
    
<li >
  <a href="https://www.trinoforum.org/" >Trino Forum</a>
</li>
  


  
          
        </div>
      </div>
      <div class="col-md-9 col-lg-6 spacer-30 docs-content">
        



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/starburst-enterprise/"
        style="text-transform: uppercase"
      > starburst enterprise</a> >
    
  
    
      <a href="/starburst-enterprise/starburst-admin/"
        style="text-transform: uppercase"
      > starburst admin</a> >
    
  
    
      Starburst Admin operation guides
    
  </p>
</div>

        <h1 id="starburst-admin-operation-guides">
        
        
          Starburst Admin operation guides <a href="#starburst-admin-operation-guides" class="titleAnchor">#</a>
        
        
      </h1>
    

<p>After satisfying the <a href="./index.html#requirements">initial requirements</a> for the
control node and all the managed nodes in the cluster, you can get a cluster up
and running with the help of the
<a href="./installation-guide.html">installation guide</a>.</p>

<p>A fully configured deployment requires a bit more configuration and work. It is
typically performed incrementally and you use Starburst Admin to help you
for a number of scenarios. They range from simple tasks like changing a
configuration in a catalog file to more complex ones such as adding a new
catalog file, scaling the cluster up or down, or adding security configuration.</p>

<p>The following sections includes these and many other scenarios and refers to the
<a href="./playbook-reference.html">playbook reference</a> and other sections as necessary.</p>
      <h2 id="targeting-specific-hosts">
        
        
          Targeting specific hosts <a href="#targeting-specific-hosts" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>By default, Ansible runs the tasks defined in the playbooks on all cluster nodes
defined in the inventory <code class="language-plaintext highlighter-rouge">hosts</code> file.</p>

<p>You can target specific host groups or even specific hosts with the <code class="language-plaintext highlighter-rouge">-l</code> option.
The example hosts files uses the groups <code class="language-plaintext highlighter-rouge">coordinator</code> and <code class="language-plaintext highlighter-rouge">worker</code> to target the
groups. Individual hosts are targeted with the IP address.</p>

<p><strong>Example: Roll out configuration changes to workers only</strong></p>

<ul>
  <li>Update the relevant configuration files in <code class="language-plaintext highlighter-rouge">files/worker</code>, for example changed
JVM configuration.</li>
  <li>Push the configuration only to the workers
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l worker playbooks/push-configs.yml
</code></pre></div>    </div>
  </li>
  <li>Restart only the workers
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l worker playbooks/restart.yml
</code></pre></div>    </div>
  </li>
</ul>

<p><strong>Example: Update security configuration on the coordinator</strong></p>

<ul>
  <li>Update the relevant configuration files in <code class="language-plaintext highlighter-rouge">files/coordinator</code>, for example
updated certificate files.</li>
  <li>Push the configuration only to the coordinator
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l coordinator playbooks/push-configs.yml
</code></pre></div>    </div>
  </li>
  <li>Restart only the coordinator
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l coordinator playbooks/restart.yml
</code></pre></div>    </div>
  </li>
</ul>

<p><strong>Example: Restart or remove a misbehaving worker only</strong></p>

<ul>
  <li>Determine the worker that has problem, for example from <a href="./playbook-reference.html#collect-logs">collecting the
logs</a> or <a href="./playbook-reference.html#check-status">checking the service
status</a></li>
  <li>Attempt a restart of the one worker that seems to have problems
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l 172.28.0.3 playbooks/restart.yml
</code></pre></div>    </div>
  </li>
  <li>Check status after restart
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l 172.28.0.3 playbooks/check-status.yml
</code></pre></div>    </div>
  </li>
  <li>Check the logs after restart
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l 172.28.0.3 playbooks/collect-logs.yml
</code></pre></div>    </div>
  </li>
</ul>
      <h2 id="adding-removing-and-updating-catalogs">
        
        
          Adding, removing and updating catalogs <a href="#adding-removing-and-updating-catalogs" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>You can add a new catalog, update an existing catalog or even remove a catalog
and roll that change out across the cluster with the following steps:</p>

<ul>
  <li>Perform the desired changes in the <code class="language-plaintext highlighter-rouge">files/catalog</code> directory.</li>
  <li><a href="./playbook-reference.html#stop">Stop the cluster</a>.</li>
  <li><a href="./playbook-reference.html#push-configs">Push the configuration</a>.</li>
  <li><a href="./playbook-reference.html#start">Start the cluster</a>.</li>
</ul>

<p>A full cluster restart of the coordinator and all workers is necessary to apply
the updated configuration.</p>
      <h2 id="changing-other-configuration">
        
        
          Changing other configuration <a href="#changing-other-configuration" class="titleAnchor">#</a>
        
        
      </h2>
    

<ul>
  <li>Perform the desired changes in the <code class="language-plaintext highlighter-rouge">files</code> subdirectories and files.</li>
  <li><a href="./playbook-reference.html#stop">Stop the cluster</a> or selectively the
coordinator or all workers.</li>
  <li><a href="./playbook-reference.html#push-configs">Push the configuration</a>.</li>
  <li><a href="./playbook-reference.html#start">Start the cluster</a> or selectively the
coordinator or all workers..</li>
</ul>

<p>The safest option is to restart the complete cluster. Depending on the
configuration changes it can be possible to just restart all the workers or the
coordinator only. For example, for authentication configuration to
SEP a coordinator restart can be sufficient.</p>
      <h2 id="upgrading-starburst-enterprise">
        
        
          Upgrading Starburst Enterprise <a href="#upgrading-starburst-enterprise" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Upgrading SEP using Ansible is similar to initial installation. The process has
to be performed without any users running queries.</p>

<p>Use the following steps to perform the update:</p>

<ul>
  <li>Download the binary package for the new version and place it in <code class="language-plaintext highlighter-rouge">files</code>.</li>
  <li>Alternatively place the binary package on a server and update the installer URL.</li>
  <li>Update the version number in <code class="language-plaintext highlighter-rouge">vars.yml</code>.</li>
  <li>Update all the configuration and add any new configuration files.</li>
  <li><a href="./playbook-reference.html#stop">Stop the cluster</a>.</li>
  <li><a href="./playbook-reference.html#install">Install the new packages to the cluster</a>.</li>
  <li><a href="./playbook-reference.html#push-configs">Push the configuration</a>.</li>
  <li><a href="./playbook-reference.html#start">Start the cluster</a>.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook playbooks/stop.yml
ansible-playbook playbooks/install.yml
ansible-playbook playbooks/push-configs.yml
ansible-playbook playbooks/start.yml
</code></pre></div></div>

<p>To rollback the upgrade, revert any configuration changes, change the value
of <code class="language-plaintext highlighter-rouge">version</code> to the previous one, and execute the same playbooks above.</p>

<p>Note that because all nodes in the cluster must use the same version,
it is not possible to perform a rolling restart and avoid interruptions.
To minimize down time, we recommend installing the new version on a set
of new hosts, and reconfigure clients to connect to this cluster or update
DNS entries to point to it. Old cluster can be decommissioned after all queries
running on it are done.</p>

<p>To manage separate installations on more than one sets of hosts, copy
the <code class="language-plaintext highlighter-rouge">hosts</code> file and update values inside it. Then, to use the new file,
add the <code class="language-plaintext highlighter-rouge">-i &lt;new-hosts&gt;</code> parameter when running the <code class="language-plaintext highlighter-rouge">ansible-playbook</code> command.</p>
      <h3 id="bluegreen-deployments-and-upgrades">
        
        
          Blue/Green deployments and upgrades <a href="#bluegreen-deployments-and-upgrades" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>With sufficient resources you can significantly improve your upgrade process by
managing two productions cluster behind a load balancer (LB) with a defined
fully qualified domain name (FQDN). The upgrade process can then follow a
blue-green deployment process:</p>

<ul>
  <li>Current production cluster in use is <em>green</em> and LB uses the FQDN to point
users to it.</li>
  <li>Update all configuration and resources for the inactive <em>blue</em> cluster to the
new version and configuration.</li>
  <li>Install, push configuration and start the <em>blue</em> cluster.</li>
  <li>Test the <em>blue</em> cluster with the direct IP address or an alternative FQDN
configured on the LB.</li>
  <li>Switch the LB configuration to point the <em>blue</em> cluster.</li>
  <li>Shut down the <em>green</em> cluster.</li>
</ul>

<p>For the next upgrade the process is the identical, just the role of the two
clusters is reversed.</p>

<p>The inactive cluster can be kept running for failover and high availability
usage or decommissioned and recreated again for future upgrades.</p>
      <h2 id="adding-or-removing-workers">
        
        
          Adding or removing workers <a href="#adding-or-removing-workers" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>You can use Starburst Admin to help with scaling your cluster up and
down by adding or removing workers with the following steps.</p>

<p><strong>Scaling up</strong></p>

<ul>
  <li>Provision the new machine with <a href="./index.html#requirements">necessary requirements for cluster
nodes</a>.</li>
  <li>Add the IP address and access details to the <code class="language-plaintext highlighter-rouge">worker</code> section in the <code class="language-plaintext highlighter-rouge">hosts</code>
file.</li>
  <li>Install on the new node</li>
  <li>Push configuration to the new node</li>
  <li>Start the new node</li>
  <li>Check the log of the new node</li>
</ul>

<p>For example, if you add the new host at <code class="language-plaintext highlighter-rouge">172.28.0.5</code> as worker you can run the
installation just to this node:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[coordinator]
172.28.0.2 ansible_user=root ansible_password=changeme

[worker]
172.28.0.3 ansible_user=root ansible_password=changeme
172.28.0.4 ansible_user=root ansible_password=changeme
172.28.0.5 ansible_user=root ansible_password=changeme
</code></pre></div></div>

<p>Playbook invocations:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l 172.28.0.5 playbooks/install.yml
ansible-playbook -l 172.28.0.5 playbooks/push-configs.yml
ansible-playbook -l 172.28.0.5 playbooks/start.yml
</code></pre></div></div>

<p>Specifying the host is optional and can be omitted since the playbooks can run
without side effects if the desired state is already reached. As a result you
can add a number of workers and then just install, push configuration and start
them all together.</p>

<p><strong>Scaling down</strong></p>

<ul>
  <li>Stop the worker or perform a graceful shutdown.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Hard stop
ansible-playbook -l 172.28.0.5 playbooks/stop.yml

# Graceful shutdown
ansible-playbook -l 172.28.0.5 playbooks/graceful-shutdown.yml
</code></pre></div>    </div>
  </li>
  <li>Optionally run <a href="#uninstall">uninstall</a> for the specific worker only
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ansible-playbook -l 172.28.0.5 playbooks/uninstall.yml
</code></pre></div>    </div>
  </li>
  <li>Remove the worker from <code class="language-plaintext highlighter-rouge">hosts</code></li>
</ul>
      <h2 id="configuring-tls">
        
        
          Configuring TLS <a href="#configuring-tls" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>You can configure <a href="../../latest/security/tls.html">TLS for the coordinator</a> as
well as <a href="../../latest/security/internal-communication.html">cluster internal authentication and
TLS</a> as usual.</p>

<p>For the functionality of the playbooks you need to additionally update the ports
configured in <code class="language-plaintext highlighter-rouge">vars.yml</code> so that they can continue to interoperate with the
nodes for status checks and other aspects.</p>

<p>Using 8443 on the coordinator and workers:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>coordinator_port: 8443
worker_port: 8443
</code></pre></div></div>
      <h2 id="using-secrets">
        
        
          Using secrets <a href="#using-secrets" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>You can use <a href="../../latest/security/secrets.html">secrets in environment
variables</a> to avoid clear text password and
other sensitive data in the configuration files.</p>

<p>To inject a secret value into an environment variable, you can modify the
<code class="language-plaintext highlighter-rouge">env.sh</code> shell scripts in <code class="language-plaintext highlighter-rouge">files/worker</code> and <code class="language-plaintext highlighter-rouge">files/coordinator</code>. The script is
executed before SEP is started. For example, you can insert code
to retrieve secret values from a secret manager such as <a href="https://www.hashicorp.com/products/vault">Hashicorp
 Vault</a>,
<a href="https://github.com/square/keywhiz">Keywhiz</a>, or a secret manager from your
cloud provider.</p>

        <div class="d-lg-none">
          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

        </div>
      </div>
      <div class="col-lg-3 toc-styles d-none d-lg-block">
        <div class="spacer-60 toc-sticky">
          <ul><li><a href="#starburst-admin-operation-guides">Starburst Admin operation guides</a><ul><li><a href="#targeting-specific-hosts">Targeting specific hosts</a></li><li><a href="#adding-removing-and-updating-catalogs">Adding, removing and updating catalogs</a></li><li><a href="#changing-other-configuration">Changing other configuration</a></li><li><a href="#upgrading-starburst-enterprise">Upgrading Starburst Enterprise</a><ul><li><a href="#bluegreen-deployments-and-upgrades">Blue/Green deployments and upgrades</a></li></ul></li><li><a href="#adding-or-removing-workers">Adding or removing workers</a></li><li><a href="#configuring-tls">Configuring TLS</a></li><li><a href="#using-secrets">Using secrets</a></li></ul></li></ul>

          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

        </div>
      </div>
  </div>
  
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://trinoforum.org" target="_blank">Trino Forum</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#download" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <a href="https://www.starburst.io/" target="_blank"><img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst" style="margin-bottom:20px;"></a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright Â© 2017-2022<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>

  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
  <script type="text/javascript" src="/assets/js/custom.js"></script>
  <script type="text/javascript" src="/assets/js/algolia.js"></script>
  <script type="text/javascript" src="/assets/js/search-box.js"></script>
  <script type="text/javascript" src="/assets/js/search-results.js"></script>
</body>
</html>

