<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst | Starburst Enterprise and Kubernetes</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst - Starburst Enterprise and Kubernetes">
    <meta property="og:description" content="Your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/starburst-og-image.png">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded">
    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/fonts.css">
    <link rel="stylesheet" href="/assets/css/style.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114610397-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114610397-1');
</script>

<script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
    heap.load("588835629");
</script>
<script>
  var ALGOLIA_INSIGHTS_SRC = "https://cdn.jsdelivr.net/npm/search-insights@2.2.1";

  !function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){
  (e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],
  i.async=1,i.src=n,c.parentNode.insertBefore(i,c)
  }(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");
</script>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Starburst Enterprise and Kubernetes | Starburst</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Starburst Enterprise and Kubernetes" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Your hub to all knowledge about Starburst products." />
<meta property="og:description" content="Your hub to all knowledge about Starburst products." />
<link rel="canonical" href="https://docs.starburst.io/starburst-enterprise/k8s/" />
<meta property="og:url" content="https://docs.starburst.io/starburst-enterprise/k8s/" />
<meta property="og:site_name" content="Starburst" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Starburst Enterprise and Kubernetes" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Your hub to all knowledge about Starburst products.","headline":"Starburst Enterprise and Kubernetes","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.starburst.io/assets/img/logo/starburst-reverse.png"}},"url":"https://docs.starburst.io/starburst-enterprise/k8s/"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>


<div class="wrap">
  

<header class="main-header navbar-expand-sm">
  <div class="navbar fixed-top navbar-dark">
    <div class="navbar-left-container">
      <a class="navbar-brand" href="https://www.starburst.io/">
        <img src="/assets/img/logo/starburst_KO-T.png" height="32" alt="Starburst">
      </a>
      <span class="navbar-divider"></span>
      <a href="/" class="header-text">Documentation</a>
    </div>
    
    <div class="nav-item dropdown" id="site-search">
  <div id="dropdownSearchDisplay" aria-labelledby="dropdownSearch">
    <div id="algolia-search">
      <div id="searchbox"></div>
      <div
        class="refinement-list"
        id="versionsRefinementList"
        style="display: none"
      ></div>
      <div class="refinement-list" id="product-list">
        <h6>Product:</h6>
      </div>
      <div id="hits"></div>
      <div id="stats"></div>
    </div>
  </div>
</div>

    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
    <nav class="primary-nav">
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-layout navbar-nav mr-auto">
          <li class="nav-item dropdown">
            <a id="introduction"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Introduction" data-is-click="false"
              href="/introduction/index.html">Introduction</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/introduction/concepts.html">Concepts</a>
              <a class="dropdown-item" href="/introduction/architecture.html">Architecture</a>
              <a class="dropdown-item" href="/introduction/choose-your-starburst-product.html">Choose your Starburst product</a>
              <a class="dropdown-item" href="/introduction/data-sources-catalogs.html">Data sources and catalogs</a>
              <a class="dropdown-item" href="/introduction/data-lake.html">Data lakes</a>
              <a class="dropdown-item" href="/introduction/object-storage.html">Using object storage systems</a>
              <a class="dropdown-item" href="/introduction/metastores.html">Metastore options</a>
              <a class="dropdown-item" href="/introduction/security.html">Security</a>
              <a class="dropdown-item" href="/introduction/querying-data.html">Querying data with Starburst products</a>
              <a class="dropdown-item" href="/introduction/starburst-sql.html">Using SQL</a>
              <a class="dropdown-item" href="/introduction/migration.html">Migrating queries to Starburst</a>
              <a class="dropdown-item" href="/introduction/query-performance.html">Query performance</a>
              <a class="dropdown-item" href="/introduction/performance-features.html">Performance features</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="clients"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Clients" data-is-click="false"
              href="/clients/index.html">Clients</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/clients/index.html">Overview</a>
              <a class="dropdown-item" href="/clients/gather-connection-information.html">Gather connection information</a>
              <a class="dropdown-item" href="/clients/cli.html">CLI</a>
              <a class="dropdown-item" href="/clients/jdbc.html">JDBC driver</a>
              <a class="dropdown-item" href="/clients/odbc.html">ODBC driver</a>
              <a class="dropdown-item" href="/clients/airbyte.html">Airbyte</a>
              <a class="dropdown-item" href="/clients/alation.html">Alation</a>
              <a class="dropdown-item" href="/clients/datagrip.html">Datagrip</a>
              <a class="dropdown-item" href="/clients/dbeaver.html">dBeaver</a>
              <a class="dropdown-item" href="/clients/dbt.html">dbt</a>
              <a class="dropdown-item" href="/clients/looker.html">Looker</a>
              <a class="dropdown-item" href="/clients/metabase.html">Metabase</a>
              <a class="dropdown-item" href="/clients/microstrategy.html">Microstrategy</a>
              <a class="dropdown-item" href="/clients/powerbi.html">Power BI</a>
              <a class="dropdown-item" href="/clients/python/index.html">Python</a>
              <a class="dropdown-item" href="/clients/querybook.html">Querybook</a>
              <a class="dropdown-item" href="/clients/quicksight.html">QuickSight</a>
              <a class="dropdown-item" href="/clients/squirrel-sql.html">SQuirreL SQL</a>
              <a class="dropdown-item" href="/clients/superset.html">Superset</a>
              <a class="dropdown-item" href="/clients/tableau/index.html">Tableau</a>
              <a class="dropdown-item" href="/clients/thoughtspot.html">Thoughtspot</a>
              <a class="dropdown-item" href="/clients/zingdata.html">Zing Data</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="starburst-galaxy"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Starburst Galaxy" data-is-click="false"
              href="/starburst-galaxy/index.html">Starburst Galaxy</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/starburst-galaxy/get-started/index.html">Get started</a>
              <a class="dropdown-item" href="/starburst-galaxy/global/get-support.html">Help center</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/index.html">Working with data</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/query-data/index.html"> Query data</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/explore-data/index.html"> Explore data</a>
              <a class="dropdown-item" href="/starburst-galaxy/catalogs/index.html">Catalogs</a>
              <a class="dropdown-item" href="/starburst-galaxy/clusters/index.html">Clusters</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/explore-data/browse-data-products.html">Data products</a>
              <a class="dropdown-item" href="/starburst-galaxy/admin/index.html">Admin</a>
              <a class="dropdown-item" href="/starburst-galaxy/access-control/index.html">Access control</a>
              <a class="dropdown-item" href="/starburst-galaxy/cloud-settings/index.html">Cloud settings</a>
              <a class="dropdown-item" href="/starburst-galaxy/security/index.html">Security</a>
              <a class="dropdown-item" href="/starburst-galaxy/sso/index.html">Single sign-on</a>
              <a class="dropdown-item" href="/starburst-galaxy/troubleshooting/index.html">Troubleshooting</a>
              <a class="dropdown-item" href="/starburst-galaxy/python/index.html">Python</a>
              <a class="dropdown-item" href="/starburst-galaxy/sql/index.html">SQL</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="starburst-enterprise"
               class="nav-link dropdown-toggle active"
              
              aria-haspopup="true" aria-label="Get started" data-is-click="false"
              href="/starburst-enterprise/index.html">Starburst Enterprise</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/starburst-enterprise/try/index.html">Try Starburst Enterprise</a>
              <a class="dropdown-item" href="/starburst-enterprise/web-ui/index.html">Web UI</a>
              <a class="dropdown-item" href="/starburst-enterprise/sql.html">SQL</a>
              <a class="dropdown-item" href="/starburst-enterprise/admin-topics/index.html">Administration</a>
              <a class="dropdown-item" href="/starburst-enterprise/k8s/index.html">Kubernetes deployments</a>
              <a class="dropdown-item" href="/starburst-enterprise/starburst-admin/index.html">Starburst Admin</a>
              <a class="dropdown-item" href="/latest/index.html">Reference documentation</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="resources"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="resources" data-is-click="false"
              href="/resources.html">Resources</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/support.html">Support</a>
              <a class="dropdown-item" href="https://www.starburst.io/community/forum/">Community forum</a>              
              <a class="dropdown-item" href="https://www.starburst.io/blog/technical">Technical blog</a>
              <a class="dropdown-item" href="/security/index.html">Security</a>
              <a class="dropdown-item" href="https://academy.starburst.io/">Starburst Academy</a>
              <a class="dropdown-item" href="/videos/index.html">Video library</a>
              <a class="dropdown-item" href="/glossary.html">Glossary</a>
              <a class="dropdown-item" href="/conventions.html">Conventions</a>
              <a class="dropdown-item" href="/iconography.html">Iconography</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
</header>

  
  <div class="content">
    <div class="row">
      <div class="col-md-3 side-navigation">
        <div class="spacer-60 toc-sticky left-nav">
          
          <div>
    <h6 class="overline product-nav-title">Starburst Enterprise</h6>
</div>
<hr />

  
  
      <li >
        <a href="/starburst-enterprise/index.html" >Starburst Enterprise overview</a>
      </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('k8s');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" style="transform: rotate(90deg);">
        </i>&nbsp;Kubernetes</a>
      <ul id="k8s" class="doc-subnav ">
        
  
  
      <li class="active">
        <a href="/starburst-enterprise/k8s/index.html" >Starburst Enterprise and Kubernetes</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-enterprise/k8s/k8s-operation.html" >Cluster operation</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-enterprise/k8s/deploy-sep.html" >Deploy Starburst Enterprise</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-enterprise/k8s/deploy-hms.html" >Deploy Hive metastore</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-enterprise/k8s/deploy-cache-service.html" >Deploy the cache service</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-enterprise/k8s/deploy-ranger.html" >Deploy Ranger</a>
      </li>
  


      </ul>
    </li>
  


          
        </div>
      </div>
      <div class="col-md-9 col-lg-6 spacer-30 docs-content">
        



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/starburst-enterprise/"
        style="text-transform: uppercase"
      > starburst enterprise</a> >
    
  
    
      <a href="/starburst-enterprise/k8s/"
        style="text-transform: uppercase"
      > k8s</a> >
    
  
    
      Starburst Enterprise and Kubernetes
    
  </p>
</div>

        <h1 id="starburst-enterprise-and-kubernetes">
        
        
          Starburst Enterprise and Kubernetes <a href="#starburst-enterprise-and-kubernetes" class="titleAnchor">#</a>
        
        
      </h1>
    

<p>Kubernetes (k8s) support for Starburst Enterprise platform (SEP) allows you to run your
SEP clusters and additional components such as your Hive
Metastore Service (HMS) or Apache Ranger. The features of k8s allow you to
efficiently create, operate, and scale your clusters, and adapt them to your
workload requirements. The Kubernetes support for SEP uses
<a href="https://helm.sh/">Helm</a> charts.</p>

<div class="alert alert-info" role="alert">
  <i class="fa fa-info-circle"></i>
  <b>Note: </b>
  Familiarity with Kubernetes and Helm is strongly
suggested to understand all aspects of deployment and configuration in our
documentation.</div>
      <h2 id="kubernetes-platform-services">
        
        
          Kubernetes platform services <a href="#kubernetes-platform-services" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>The following Kubernetes platform services are tested regularly and supported:</p>

<ul>
  <li>Amazon Elastic Kubernetes Service (EKS)</li>
  <li>Google Kubernetes Engine (GKE)</li>
  <li>Microsoft Azure Kubernetes Service (AKS)</li>
  <li>Red Hat OpenShift</li>
</ul>

<p>This topic focuses on k8s usage and practice that applies to all services.</p>

<p>Other Kubernetes distributions and installations can potentially work if the
<a href="../../latest/k8s/requirements.html">requirements</a> are fulfilled, but they are
not tested and not supported.</p>
      <h2 id="available-helm-charts">
        
        
          Available Helm charts <a href="#available-helm-charts" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>The following Helm charts are available as part of the SEP k8s
offering:</p>

<ul>
  <li><a href="./deploy-sep.html">Starburst Enterprise</a> includes the coordinator and worker
configurations, as well as images, security, catalogs, mounted volumes,
and other properties.</li>
  <li>Apache <a href="./deploy-hms.html">Hive Metastore Service</a></li>
  <li><a href="./deploy-cache-service.html">Starburst Cache Service</a> to use with
Starburst Cached Views</li>
  <li><a href="./deploy-ranger.html">Apache Ranger</a> including the Starburst plugin,
policy database and everything you need to integrate Ranger with
SEP</li>
</ul>

<p>Whether you are new to Kubernetes or not, we strongly suggest that you first
read about SEP Kubernetes cluster design and our best practices
guide for Helm chart customization in this topic to learn how SEP
uses them to build the configuration properties files it relies on.</p>
      <h2 id="kubernetes-cluster-design-for-starburst-enterprise">
        
        
          Kubernetes cluster design for Starburst Enterprise <a href="#kubernetes-cluster-design-for-starburst-enterprise" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>SEP by its nature is built for performance. How it operates
differs from other typical applications running in Kubernetes.</p>

<p>Typically, an enterprise application comprises many stateless microservices,
each of which can be run on a small instance. SEP’s exceptional
performance comes from its powerful query optimization engine, which expects all
nodes to be identically sized for query planning. It also depends on each node
to have large amounts of memory, to allow parallel processing within a node as
well as processing of large amounts of data per node.</p>

<p>Once work is divided up among worker nodes, it is not redirected if a node dies,
as this would obviate any performance gains. SEP coordinator and
worker nodes are therefore stateful, and clusters by design rely on fewer,
larger nodes.</p>

<p>Ideally SEP runs within a namespace dedicated to it and it alone.
Separate pods can be defined for worker nodes and coordinator nodes in that
namespace, and taints and tolerations can be defined for node selection in
SEP.</p>

<p>You must review the SEP Kubernetes
<a href="../../latest/k8s/requirements.html">requirements</a> before you begin installing
the Helm charts to ensure that you have the correct credentials in place and
understand sizing requirements.</p>
      <h2 id="configuring-sep-with-helm-charts">
        
        
          Configuring SEP with Helm charts <a href="#configuring-sep-with-helm-charts" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>SEP uses a number of configuration files internally that
determine how it behaves:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">etc/catalog/&lt;catalog name&gt;.properties</code></li>
  <li><code class="language-plaintext highlighter-rouge">etc/config.properties</code></li>
  <li><code class="language-plaintext highlighter-rouge">etc/jvm.properties</code></li>
  <li><code class="language-plaintext highlighter-rouge">etc/log.properties</code></li>
  <li><code class="language-plaintext highlighter-rouge">etc/node.properties</code></li>
  <li><code class="language-plaintext highlighter-rouge">etc/access-control.properties</code></li>
</ul>

<p>With our Kubernetes deployment, these files are built using Helm charts, and are
nested in the <code class="language-plaintext highlighter-rouge">coordinator.etcFiles</code> YAML node.</p>

<p>Catalog properties files are also built using Helm charts. They are defined
under the top-level <code class="language-plaintext highlighter-rouge">catalogs:</code> YAML node. The catalogs and properties you
create depend on what data sources you connect
to with SEP. You can configure as many as you need.</p>
      <h2 id="customization-best-practices-">
        
        
          Customization best practices <a name="best-practices"></a> <a href="#customization-best-practices-" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Every helm-based deployment includes a <code class="language-plaintext highlighter-rouge">values.yaml</code> file, and
SEP is no exception. It contains the default values, any and all
of which can be overridden.</p>

<p>Along with basic instance configuration for the various cloud platforms,
<code class="language-plaintext highlighter-rouge">values.yaml</code> also includes the key-value pairs necessary to build the
required <code class="language-plaintext highlighter-rouge">*.properties</code> files that configure SEP.</p>

<p>Our SEP <a href="../../latest/k8s/sep-configuration.html">configuration properties reference for
Kubernetes</a> contains the complete list
of available configuration options.</p>

<p>A recommended set of customization files is included later in this topic,
including recommendations for creating specific override files, with examples.</p>
      <h3 id="default-yaml-files">
        
        
          Default YAML files <a href="#default-yaml-files" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>Default values are provided in for a minimum configuration only, not including
security or any catalog connector properties, as these vary by customer needs.
The configuration in the Helm chart also contains deployment information such as
registry credentials and instance size.</p>

<p>Each new release of SEP includes new chart version, and the
default values may change. For this reason, we <strong>highly recommend</strong> that you
follow best practices and leave the <code class="language-plaintext highlighter-rouge">values.yaml</code> file in the chart untouched,
overriding only very specific values as needed in one or more separate YAML
files.</p>

<div class="alert alert-danger" role="alert">
  <i class="fa fa-radiation"></i> <b>Warning:</b>

  Do not change the <code class="language-plaintext highlighter-rouge">values.yaml</code>, or copy it
in its entirety and make changes to it and specify that as the override file, as
new releases may change default values or render your values non-performant. Use
separate files with changed values only,
as described above.

</div>
      <h3 id="using-version-control">
        
        
          Using version control <a href="#using-version-control" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>We <strong>very strongly</strong> recommend that you manage your customizations in a version
control system such as a git repository. Each cluster and deployment has to be
managed in separate files.</p>
      <h3 id="creating-and-using-yaml-files">
        
        
          Creating and using YAML files <a href="#creating-and-using-yaml-files" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The following is a snippet of default values from the SEP
<code class="language-plaintext highlighter-rouge">values.yaml</code> file embedded in the Helm chart:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">coordinator</span><span class="pi">:</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">60Gi"</span>
      <span class="na">requests</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="m">16</span>
</code></pre></div></div>

<p>The default 60GB of required memory is potentially larger than any of the
available pods in your cluster. As a result the default prevents your deployment
success, since no suitable pod is available.</p>

<p>To create a customization that overrides the default size for a test cluster,
copy and paste <strong>only that section</strong> into a new file named
<code class="language-plaintext highlighter-rouge">sep-test-setup.yaml</code>, and make any changes. You must also include the relevant
structure above that section. The memory settings for workers have the same
default values and need to be overridden as well:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">coordinator</span><span class="pi">:</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10Gi"</span>
      <span class="na">requests</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">worker</span><span class="pi">:</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10Gi"</span>
      <span class="na">requests</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="m">2</span>
</code></pre></div></div>

<p>Store the new file in a path accessible from the <code class="language-plaintext highlighter-rouge">helm upgrade --install</code>
command.</p>

<p>When you are ready to install, specify the new file using the <code class="language-plaintext highlighter-rouge">--values</code>
argument as in the following example. Replace 4XX.0.0 with the Helm chart
version of the desired SEP release as documented on the <a href="../../latest/versions.html">versions
page</a>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  helm upgrade my-sep-test-cluster starburstdata/starburst-enterprise <span class="se">\</span>
    <span class="nt">--install</span> <span class="se">\</span>
    <span class="nt">--version</span> 4XX.0.0 <span class="se">\</span>
    <span class="nt">--values</span> ./registry-access.yaml <span class="se">\</span>
    <span class="nt">--values</span> ./sep-test-setup.yaml
</code></pre></div></div>

<p>You can chain as many override files as you need. If a value appears in multiple
files, the value in the rightmost, last specified file takes precedence.
Typically it is useful to limit the number of files as well as the size of the
individual files. For example, it can be useful to create a separate file that
contains all catalog definitions.</p>

<p>To view the built-in configuration of the Helm chart for a specific version of
SEP, run the following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  helm template starburstdata/starburst-enterprise <span class="nt">--version</span> 4XX.0.0
</code></pre></div></div>

<p>Use this command with different version values to compare the configuration of
different SEP releases as part of your upgrade process.</p>

<p>To generate the specific configuration files for your deployment, use the
template command with your additional values files:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  helm template starburstdata/starburst-enterprise <span class="se">\</span>
    <span class="nt">--version</span> 4XX.0.0 <span class="se">\</span>
    <span class="nt">--values</span> ./registry-access.yaml <span class="se">\</span>
    <span class="nt">--values</span> ./sep-test-setup.yaml
</code></pre></div></div>

<div class="alert alert-info" role="alert">
  <i class="fa fa-info-circle"></i>
  <b>Note: </b>
  The generated files are for review purposes only.
To apply changes to your deployment, use the <code class="language-plaintext highlighter-rouge">helm upgrade</code> command with your
files specified using the <code class="language-plaintext highlighter-rouge">--values</code> argument.</div>
      <h2 id="recommended-customization-file-set">
        
        
          Recommended customization file set <a href="#recommended-customization-file-set" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>The file set described below describes a series of focused configuration files.
If you have more than one cluster, such as a test cluster and a production
cluster, name the files accordingly before you begin. Examples are provided in
the sections that follow.</p>

<table>
  <caption>Recommended customization file set</caption>
  <thead>
    <tr>
      <th>File name</th>
      <th>Content</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>registry-access.yaml</code></td>
      <td>Docker registry access credentials file, typically to access the
        Docker registry on the Starburst Harbor instance. Include the
        <code>registryCredentials:</code> or <code>imagePullSecrets:</code> top
        level node in this file to configure access to the Docker registry. This
        file can be used for all SEP, HMS, and Ranger
        configuration for all clusters you operate.</td>
    </tr>
    <tr>
      <td><code>sep-prod-catalogs.yaml</code></td>
      <td>Catalog configuration for all catalogs configured for SEP
      on the <code>prod</code> cluster. It is typically useful to separate catalog
      configurations out into a separate file to allow reuse across clusters, as
      well as to separate the large amount of configuration of the catalogs from
      all the cluster configuration.</td>
    </tr>
    <tr>
      <td><code>sep-prod-setup.yaml</code></td>
      <td>Main configuration file for the <code>prod</code> cluster. Include any
      configuration for all other top level nodes that configure the
      coordinator, workers, and all other aspects of the cluster.</td>
    </tr>
  </tbody>
</table>

<p>Create and manage additional configuration files, if you are operating multiple
clusters, while reusing the credentials file. For example, if you run a <code class="language-plaintext highlighter-rouge">dev</code>
and <code class="language-plaintext highlighter-rouge">stage</code> cluster use the following additional files:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">sep-dev-catalogs.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">sep-dev-setup.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">sep-stage-catalogs.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">sep-stage-setup.yaml</code></li>
</ul>

<p>There are several supporting services available for use with SEP,
each with their own Helm chart:</p>

<ul>
  <li>Starburst <a href="./deploy-cache-service.html">cache service</a></li>
  <li><a href="./deploy-hms.html">Hive Metastore Service</a></li>
  <li><a href="./deploy-ranger.html">Apache Ranger</a></li>
</ul>

<p>If you opt to use these services, you can create a configuration file for each
of these per cluster as well:</p>

<p>Production <code class="language-plaintext highlighter-rouge">prod</code> cluster:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cache-service-prod.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">hms-prod.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">ranger-prod.yaml</code></li>
</ul>

<p>Development <code class="language-plaintext highlighter-rouge">dev</code> cluster:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cache-service-dev.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">hms-dev.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">ranger-dev.yaml</code></li>
</ul>

<p>Staging <code class="language-plaintext highlighter-rouge">stage</code> cluster:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cache-service-stage.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">hms-stage.yaml</code></li>
  <li><code class="language-plaintext highlighter-rouge">ranger-stage.yaml</code></li>
</ul>
      <h3 id="registry-accessyaml">
        
        
          <code class="language-plaintext highlighter-rouge">registry-access.yaml</code> <a href="#registry-accessyaml" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>You can get started with a minimal file that only <a href="../../latest/k8s/installation.html#create-this-one-file-before-you-begin.html">adds your credentials to the
Starburst Harbor
instance</a>, as
shown below:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">registryCredentials</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">registry</span><span class="pi">:</span> <span class="s">harbor.starburstdata.net/starburstdata</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;yourusername&gt;</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;yourpassword&gt;</span>
</code></pre></div></div>

<p>In the examples throughout our documentation, this file is named
<code class="language-plaintext highlighter-rouge">registry-access.yaml</code>.</p>
      <h3 id="sep-prod-catalogsyaml">
        
        
          <code class="language-plaintext highlighter-rouge">sep-prod-catalogs.yaml</code> <a href="#sep-prod-catalogsyaml" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>A catalog YAML file adds all the configurations for defining the catalogs and
their connection details to the underlying data sources. The following snippet
contains a few completely configured catalogs that are ready to use:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">tpch-testdata</code> exposes the TPC-H benchmark data useful for learning SQL
and testing.</li>
  <li><code class="language-plaintext highlighter-rouge">tmpmemory</code> uses the <a href="../../latest/connector/memory.html">Memory connector</a> to
provide a small temporary test ground for users.</li>
  <li><code class="language-plaintext highlighter-rouge">metrics</code> uses the <a href="../../latest/connector/jmx.html">JMX connector</a> and
exposes the internal metrics of SEP for monitoring and
troubleshooting.</li>
  <li><code class="language-plaintext highlighter-rouge">clientdb</code> uses the <a href="../../latest/connector/starburst-postgresql.html">Starburst PostgreSQL connector</a>
to access the <code class="language-plaintext highlighter-rouge">clientdb</code> database.</li>
  <li><code class="language-plaintext highlighter-rouge">datalake</code> and <code class="language-plaintext highlighter-rouge">s3</code> are stubs of catalogs using the
<a href="../../latest/connector/starburst-hive.html">Starburst Hive connector</a> with a
HMS and a Glue catalog as metastore.</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">catalogs</span><span class="pi">:</span>
    <span class="na">tpch-testdata</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connector.name=tpch</span>
    <span class="na">tmpmemory</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connector.name=memory</span>
    <span class="na">metrics</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connector.name=jmx</span>
    <span class="na">clientdb</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connector.name=postgresql</span>
      <span class="s">connection-url=jdbc:postgresql://postgresql.example.com:5432/clientdb</span>
      <span class="s">connection-password=${ENV:PSQL_PASSWORD}</span>
      <span class="s">connection-user=${ENV:PSQL_USERNAME}</span>
    <span class="na">datalake</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connector.name=hive</span>
      <span class="s">hive.metastore.uri=thrift://hive:9083</span>
    <span class="na">s3</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">connector.name=hive</span>
      <span class="s">hive.metastore=glue</span>
</code></pre></div></div>
      <h3 id="sep-prod-setupyaml">
        
        
          <code class="language-plaintext highlighter-rouge">sep-prod-setup.yaml</code> <a href="#sep-prod-setupyaml" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>This example provides a minimal starting point as a best practice. It achieves
the following:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">environment:</code> provides the name <strong>production</strong> for the environment, which
becomes visible in the Web UI.</li>
  <li><code class="language-plaintext highlighter-rouge">sharedSecret:</code> sets a <a href="../../latest/security/internal-communication.html">shared random secret
string</a> for communications
between the coordinator and all workers. <strong>NOTE:</strong> This is different than the
shared secret set for the license file with the <code class="language-plaintext highlighter-rouge">kubectl create secret</code>
command.</li>
  <li><code class="language-plaintext highlighter-rouge">replicas:</code> configures the cluster to use four workers.</li>
  <li><code class="language-plaintext highlighter-rouge">resources:</code> adjusts the memory and CPU requirements for the workers and the
coordinator. In this example, it increases the values for use with more
powerful servers than the default.</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">environment</span><span class="pi">:</span> <span class="s">production</span>
  <span class="na">sharedSecret</span><span class="pi">:</span> <span class="s">AN0Qhhw9PsZmEgEXAMPLEkIj3AJZ5/Mnyy5iRANDOMceM+SSV+APSTiSTRING</span>

  <span class="na">coordinator</span><span class="pi">:</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">256Gi"</span>
      <span class="na">requests</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="m">32</span>

  <span class="na">worker</span><span class="pi">:</span>
    <span class="na">replicas</span><span class="pi">:</span> <span class="m">4</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">256Gi"</span>
      <span class="na">requests</span><span class="pi">:</span>
        <span class="na">cpu</span><span class="pi">:</span> <span class="m">32</span>
</code></pre></div></div>

<div class="alert alert-danger" role="alert">
  <i class="fa fa-radiation"></i> <b>Warning:</b>

  The values for memory and CPU resources
<strong>must</strong> reflect your cluster’s available resources. If you attempt to run
SEP with the defaults and there are no pods available with those
resources, no container is allocated to SEP by Kubernetes and therefore SEP does
not start.

</div>

        <div class="d-lg-none">
          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

        </div>
      </div>
      <div class="col-lg-3 toc-styles d-none d-lg-block">
        <div class="spacer-60 toc-sticky">
          <ul><li><a href="#starburst-enterprise-and-kubernetes">Starburst Enterprise and Kubernetes</a><ul><li><a href="#kubernetes-platform-services">Kubernetes platform services</a></li><li><a href="#available-helm-charts">Available Helm charts</a></li><li><a href="#kubernetes-cluster-design-for-starburst-enterprise">Kubernetes cluster design for Starburst Enterprise</a></li><li><a href="#configuring-sep-with-helm-charts">Configuring SEP with Helm charts</a></li><li><a href="#customization-best-practices-">Customization best practices <a name="best-practices"></a></a><ul><li><a href="#default-yaml-files">Default YAML files</a></li><li><a href="#using-version-control">Using version control</a></li><li><a href="#creating-and-using-yaml-files">Creating and using YAML files</a></li></ul></li><li><a href="#recommended-customization-file-set">Recommended customization file set</a><ul><li><a href="#registry-accessyaml"><code class="language-plaintext highlighter-rouge">registry-access.yaml</code></a></li><li><a href="#sep-prod-catalogsyaml"><code class="language-plaintext highlighter-rouge">sep-prod-catalogs.yaml</code></a></li><li><a href="#sep-prod-setupyaml"><code class="language-plaintext highlighter-rouge">sep-prod-setup.yaml</code></a></li></ul></li></ul></li></ul>

          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

          <button type="button" class="btn btn-primary waves-effect waves-light print-button" onclick="window.print()">Print this page</button>
        </div>
      </div>
  </div>
  
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/community/forum/" target="_blank">Starburst forum</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#download" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <a href="https://www.starburst.io/" target="_blank"><img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst" style="margin-bottom:20px;"></a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>

  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
  <script type="text/javascript" src="/assets/js/custom.js"></script>
  <script type="text/javascript" src="/assets/js/algolia.js"></script>
  <script type="text/javascript" src="/assets/js/search-box.js"></script>
  <script type="text/javascript" src="/assets/js/search-results.js"></script>
</body>
</html>

