<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst | Enable fault-tolerant execution for queries in SEP</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst - Enable fault-tolerant execution for queries in SEP">
    <meta property="og:description" content="Your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/starburst-og-image.png">

    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/fonts.css">
    <link rel="stylesheet" href="/assets/css/style.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114610397-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114610397-1');
</script>

<script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
    heap.load("588835629");
</script>
<script>
  var ALGOLIA_INSIGHTS_SRC = "https://cdn.jsdelivr.net/npm/search-insights@2.2.1";

  !function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){
  (e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],
  i.async=1,i.src=n,c.parentNode.insertBefore(i,c)
  }(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");
</script>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Enable fault-tolerant execution for queries in SEP | Starburst</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Enable fault-tolerant execution for queries in SEP" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Your hub to all knowledge about Starburst products." />
<meta property="og:description" content="Your hub to all knowledge about Starburst products." />
<link rel="canonical" href="https://docs.starburst.io/starburst-enterprise/admin-topics/fault-tolerant-execution.html" />
<meta property="og:url" content="https://docs.starburst.io/starburst-enterprise/admin-topics/fault-tolerant-execution.html" />
<meta property="og:site_name" content="Starburst" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Enable fault-tolerant execution for queries in SEP" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Your hub to all knowledge about Starburst products.","headline":"Enable fault-tolerant execution for queries in SEP","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.starburst.io/assets/img/logo/starburst-reverse.png"}},"url":"https://docs.starburst.io/starburst-enterprise/admin-topics/fault-tolerant-execution.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>


<div class="wrap">
  

<header class="main-header navbar-expand-sm">
  <div class="navbar fixed-top navbar-dark">
    <div class="navbar-left-container">
      <a class="navbar-brand" href="https://www.starburst.io/">
        <img src="/assets/img/logo/starburst_KO-T.png" height="32" alt="Starburst">
      </a>
      <span class="navbar-divider"></span>
      <a href="/" class="header-text">Documentation</a>
    </div>
    
    <div class="nav-item dropdown" id="site-search">
  <div id="dropdownSearchDisplay" aria-labelledby="dropdownSearch">
    <div id="algolia-search">
      <div id="searchbox"></div>
      <div
        class="refinement-list"
        id="versionsRefinementList"
        style="display: none"
      ></div>
      <div class="refinement-list" id="product-list">
        <h6>Product:</h6>
      </div>
      <div id="hits"></div>
      <div id="stats"></div>
    </div>
  </div>
</div>

    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
    <nav class="primary-nav">
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-layout navbar-nav mr-auto">
          <li class="nav-item dropdown">
            <a id="get-started"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Get started" data-is-click="false"
              href="/get-started/index.html">Get started</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/get-started/concepts.html">Concepts</a>
              <a class="dropdown-item" href="/get-started/architecture.html">Architecture</a>
              <a class="dropdown-item" href="/get-started/data-sources-catalogs.html">Data sources and catalogs</a>
              <a class="dropdown-item" href="/get-started/data-lake.html">Data lake</a>
              <a class="dropdown-item" href="/get-started/security.html">Security</a>
              <a class="dropdown-item" href="/get-started/choose-your-starburst-product.html">Choose your Starburst product</a>
              <a class="dropdown-item" href="/data-consumer/index.html">Data consumer</a>
              <a class="dropdown-item" href="/data-engineer/index.html">Data engineer</a>
              <a class="dropdown-item" href="/platform-administrator/index.html">Platform administrator</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="starburst-galaxy"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Starburst Galaxy" data-is-click="false"
              href="/starburst-galaxy/index.html">Starburst Galaxy</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/starburst-galaxy/get-started/index.html">Get started</a>
              <a class="dropdown-item" href="/starburst-galaxy/global/get-support.html">Help center</a>
              <a class="dropdown-item" href="/starburst-galaxy/query/index.html">Query</a>
              <a class="dropdown-item" href="/starburst-galaxy/catalogs/index.html">Catalogs</a>
              <a class="dropdown-item" href="/starburst-galaxy/catalog-explorer/index.html">Catalog explorer</a>
              <a class="dropdown-item" href="/starburst-galaxy/clusters/index.html">Clusters</a>
              <a class="dropdown-item" href="/starburst-galaxy/data-products/index.html">Data products</a>
              <a class="dropdown-item" href="/starburst-galaxy/partner-connect.html">Partner connect</a>
              <a class="dropdown-item" href="/starburst-galaxy/admin/index.html">Admin</a>
              <a class="dropdown-item" href="/starburst-galaxy/access-control/index.html">Access control</a>
              <a class="dropdown-item" href="/starburst-galaxy/cloud-settings/index.html">Cloud settings</a>
              <a class="dropdown-item" href="/starburst-galaxy/security/index.html">Security</a>
              <a class="dropdown-item" href="/starburst-galaxy/sso/index.html">Single sign-on</a>
              <a class="dropdown-item" href="/starburst-galaxy/troubleshooting/index.html">Troubleshooting</a>
              <a class="dropdown-item" href="/starburst-galaxy/python/index.html">Python</a>
              <a class="dropdown-item" href="/starburst-galaxy/api.html">API</a>
              <a class="dropdown-item" href="/starburst-galaxy/sql/index.html">SQL</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="starburst-enterprise"
               class="nav-link dropdown-toggle active"
              
              aria-haspopup="true" aria-label="Get started" data-is-click="false"
              href="/starburst-enterprise/index.html">Starburst Enterprise</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/starburst-enterprise/try/index.html">Try Starburst Enterprise</a>
              <a class="dropdown-item" href="/starburst-enterprise/web-ui/index.html">Web UI</a>
              <a class="dropdown-item" href="/starburst-enterprise/sql.html">SQL</a>
              <a class="dropdown-item" href="/starburst-enterprise/admin-topics/index.html">Administration</a>
              <a class="dropdown-item" href="/starburst-enterprise/k8s/index.html">Kubernetes deployments</a>
              <a class="dropdown-item" href="/starburst-enterprise/starburst-admin/index.html">Starburst Admin</a>
              <a class="dropdown-item" href="/latest/index.html">Reference documentation</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="ecosystems"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Get started" data-is-click="false"
              href="/ecosystems/index.html">Ecosystems</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/ecosystems/amazon/index.html">Amazon AWS</a>
              <a class="dropdown-item" href="/ecosystems/google/index.html">Google Cloud</a>
              <a class="dropdown-item" href="/ecosystems/microsoft/index.html">Microsoft Azure</a>
              <a class="dropdown-item" href="/ecosystems/redhat/index.html">Red Hat OpenShift</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="resources"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="resources" data-is-click="false"
              href="/resources.html">Resources</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/support.html">Support</a>
              <a class="dropdown-item" href="/security/index.html">Security</a>
              <a class="dropdown-item" href="https://www.starburst.io/blog/technical">Technical blog</a>
              <a class="dropdown-item" href="/videos/index.html">Video library</a>
              <a class="dropdown-item" href="https://academy.starburst.io/">Starburst Academy</a>
              <a class="dropdown-item" href="/glossary.html">Glossary</a>
              <a class="dropdown-item" href="/conventions.html">Conventions</a>
              <a class="dropdown-item" href="/iconography.html">Iconography</a>
              <a class="dropdown-item" href="https://www.starburst.io/community/forum/">Starburst forum</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
</header>

  
  <div class="content">
    <div class="row">
      <div class="col-md-3 side-navigation">
        <div class="spacer-60 toc-sticky left-nav">
          
          <div>
    <h6 class="overline product-nav-title">Starburst Enterprise</h6>
</div>
<hr />

 
  
    
    
<li >
  <a href="/starburst-enterprise/index.html" >Starburst Enterprise overview</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('try');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Try Starburst Enterprise
  </a>
</li>

<ul id="try" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/k8s.html" >Kubernetes</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/try/starburst-admin.html" >Starburst Admin</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('sepwebui');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Web UI
  </a>
</li>

<ul id="sepwebui" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/web-ui/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/web-ui/query-editor.html" >Query editor</a>
  </li>
  
  
</ul>



 
  
    
    
<li >
  <a href="/starburst-enterprise/sql.html" >SQL</a>
</li>
  



 





<li  class="active" 
    onclick="toggle_navigation_visibility('admintasks');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Administration topics
  </a>
</li>

<ul id="admintasks" class="doc-subnav ">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/catalogs.html" >Define catalogs</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/web-ui-configuration.html" >Configure the web UI</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/autoscaling.html" >Autoscaling</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/security.html" >Secure your cluster</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/performance-tuning.html" >Tune your cluster</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/warp-speed.html" >Starburst Warp Speed</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/cache-service.html" >Enable the cache service</a>
  </li>
  
  
  
    
    
    
  <li class="active"
      
    >
    <a href="/starburst-enterprise/admin-topics/fault-tolerant-execution.html" >Enable fault-tolerant execution for queries</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/admin-topics/verify.html" >Verify server with the web UI</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('k8s');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Kubernetes
  </a>
</li>

<ul id="k8s" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/index.html" >Starburst Enterprise and Kubernetes</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/k8s-operation.html" >Cluster operation</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/deploy-sep.html" >Deploy Starburst Enterprise</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/deploy-hms.html" >Deploy Hive metastore</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/deploy-cache-service.html" >Deploy the cache service</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-enterprise/k8s/deploy-ranger.html" >Deploy Ranger</a>
  </li>
  
  
</ul>




          
        </div>
      </div>
      <div class="col-md-9 col-lg-6 spacer-30 docs-content">
        



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/starburst-enterprise/"
        style="text-transform: uppercase"
      > starburst enterprise</a> >
    
  
    
      <a href="/starburst-enterprise/admin-topics/"
        style="text-transform: uppercase"
      > admin topics</a> >
    
  
    
      Enable fault-tolerant execution for queries in SEP
    
  </p>
</div>

        <h1 id="enable-fault-tolerant-execution-for-queries-in-sep">
        
        
          Enable fault-tolerant execution for queries in SEP <a href="#enable-fault-tolerant-execution-for-queries-in-sep" class="titleAnchor">#</a>
        
        
      </h1>
    

<p>You can configure SEP to be more resilient against query failure
by enabling fault-tolerant execution. This allows SEP to handle
larger queries such as batch operations without worker node interruptions
causing the query to fail.</p>

<p>When configured, the SEP cluster buffers data used by workers
during query processing. If a worker node fails for any reason, such as a
network outage or running out of available resources, the coordinator issues the
data to an available worker that can pick up query processing, allowing the
query to continue.</p>
      <h2 id="architecture">
        
        
          Architecture <a href="#architecture" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>The coordinator node uses a configured exchange manager service that buffers
data for query processing in an external location such as an S3 bucket. Worker
nodes send data to the buffer as they execute their query tasks.</p>

<p><img src="../../assets/img/diagrams/fault-tolerant-execution-s3-exchange-architecture.png" alt="Fault-tolerant cluster exchange architecture" class="img-fluid " description="" width="650px" style="" /></p>
      <h2 id="best-practices-and-considerations">
        
        
          Best practices and considerations <a href="#best-practices-and-considerations" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>A fault-tolerant cluster is best suited for large batch queries. Fault-tolerant
execution of a high volume of short-running may experience increased latency. As
such, it is recommended to run a dedicated fault-tolerant SEP
cluster for handling batch operations, separate from a cluster that is
designated for a higher query volume.</p>

<p>Catalogs for the following data sources support fault-tolerant execution of read
and write operations:</p>

<ul>
  <li>BigQuery</li>
  <li>Delta Lake</li>
  <li>Hive</li>
  <li>Iceberg</li>
  <li>MongoDB</li>
  <li>MySQL</li>
  <li>Oracle</li>
  <li>PostgreSQL</li>
  <li>Redshift</li>
  <li>SingleStore</li>
  <li>SQL Server</li>
</ul>

<p>Catalogs for other data sources only support fault-tolerant execution of read
operations. The <a href="../../latest/connector/starburst-teradata.html#starburst-teradata-direct-connector">Starburst Teradata direct
connector</a>
only supports fault-tolerant execution of read operations with a <code class="language-plaintext highlighter-rouge">QUERY</code> retry
policy.</p>

<p>When fault-tolerant execution is enabled on a cluster, write operations fail for
any catalogs that do not support fault-tolerant execution of those operations.</p>

<p>The exchange manager may send a large amount of data to the exchange storage,
resulting in high I/O load on that storage. You can configure multiple storage
locations for use by the exchange manager to help balance the I/O load between
them.</p>
      <h2 id="configuration">
        
        
          Configuration <a href="#configuration" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>The following steps describe how to configure a SEP cluster for
fault-tolerant execution with an S3 bucket-based exchange:</p>

<ol>
  <li>
    <p>Set up an S3 bucket to use as the exchange storage. For this example we are
using an AWS S3 bucket, but other storage options are described in the
<a href="../../latest/admin/fault-tolerant-execution.html">reference documentation</a>
as well. You can use multiple S3 buckets for exchange storage.</p>

    <p>For each bucket in AWS, collect the following information:</p>

    <ul>
      <li>
        <p>S3 URI location for the bucket, such as <code class="language-plaintext highlighter-rouge">s3://exchange-spooling-bucket</code></p>
      </li>
      <li>
        <p>Region that the bucket is located in, such as <code class="language-plaintext highlighter-rouge">us-west-1</code></p>
      </li>
      <li>
        <p>AWS access and secret keys for the bucket</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Add the following exchange manager configuration in both the
 <code class="language-plaintext highlighter-rouge">coordinator.etcFiles.properties</code> and <code class="language-plaintext highlighter-rouge">worker.etcFiles.properties</code> sections
 of the Helm chart in a new <code class="language-plaintext highlighter-rouge">exchange-manager.properties:</code> entry, using the
 gathered S3 bucket information:</p>

    <pre><code class="language-YAML"> coordinator:
   etcFiles:
     properties:
     ...
       exchange-manager.properties: |
         exchange-manager.name=filesystem
         exchange.base-directories=s3://exchange-spooling-bucket-1,s3://exchange-spooling-bucket-2
         exchange.s3.region=us-west-1
         exchange.s3.aws-access-key=example-access-key
         exchange.s3.aws-secret-key=example-secret-key
 ...
 worker:
   etcFiles:
     properties:
     ...
       exchange-manager.properties: |
         exchange-manager.name=filesystem
         exchange.base-directories=s3://exchange-spooling-bucket-1,s3://exchange-spooling-bucket-2
         exchange.s3.region=us-west-1
         exchange.s3.aws-access-key=example-access-key
         exchange.s3.aws-secret-key=example-secret-key
</code></pre>

    <p>In non-Kubernetes installations, the same properties must be defined in the
 <code class="language-plaintext highlighter-rouge">etc/exchange-manager.properties</code> configuration file on the coordinator and
 all worker nodes.</p>
  </li>
  <li>
    <p>Add the following configuration for fault-tolerant execution in both the
 <code class="language-plaintext highlighter-rouge">coordinator.additionalProperties:</code> and <code class="language-plaintext highlighter-rouge">worker.additionalProperties:</code>
 sections of the Helm chart:</p>

    <pre><code class="language-YAML"> coordinator:
   additionalProperties:
     ...
     retry-policy=TASK
     exchange.compression-enabled=true
     query.low-memory-killer.delay=0s
 ...
 worker:
   additionalProperties:
     ...
     retry-policy=TASK
     exchange.compression-enabled=true
     query.low-memory-killer.delay=0s
</code></pre>

    <p>In non-Kubernetes installations, the same properties must be defined in the
 <code class="language-plaintext highlighter-rouge">config.properties</code> file on the coordinator and all worker nodes.</p>
  </li>
  <li>
    <p>Re-deploy your instance of SEP or, for non-Kubernetes
installations, restart the cluster.</p>
  </li>
</ol>

<p>Your SEP cluster is now configured with fault-tolerant query
execution. If a query run on the cluster would normally fail due to an
interruption of query processing, fault-tolerant execution now resumes the
query processing to ensure successful execution of the query.</p>
      <h2 id="next-steps">
        
        
          Next steps <a href="#next-steps" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>For more information about fault-tolerant execution, including simple query
retries that do not require an exchange manager and advanced configuration
operations, see the <a href="../../latest/admin/fault-tolerant-execution.html">reference
documentation</a>.</p>

        <div class="d-lg-none">
          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

        </div>
      </div>
      <div class="col-lg-3 toc-styles d-none d-lg-block">
        <div class="spacer-60 toc-sticky">
          <ul><li><a href="#enable-fault-tolerant-execution-for-queries-in-sep">Enable fault-tolerant execution for queries in SEP</a><ul><li><a href="#architecture">Architecture</a></li><li><a href="#best-practices-and-considerations">Best practices and considerations</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#next-steps">Next steps</a></li></ul></li></ul>

          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

          <button type="button" class="btn btn-primary waves-effect waves-light print-button" onclick="window.print()">Print this page</button>
        </div>
      </div>
  </div>
  
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/community/forum/" target="_blank">Starburst forum</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#download" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <a href="https://www.starburst.io/" target="_blank"><img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst" style="margin-bottom:20px;"></a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>

  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
  <script type="text/javascript" src="/assets/js/custom.js"></script>
  <script type="text/javascript" src="/assets/js/algolia.js"></script>
  <script type="text/javascript" src="/assets/js/search-box.js"></script>
  <script type="text/javascript" src="/assets/js/search-results.js"></script>
</body>
</html>

