

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Secure internal communication &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Secrets" href="secrets.html" />
    <link rel="prev" title="JKS files" href="inspect-jks.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/security/internal-communication.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/internal-communication" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/starburst_KO-T.png"
                   alt="Starburst Enterprise 422-e STS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 422-e STS</a>
          <span class="md-header-nav__topic"> Secure internal communication </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (413-e)" href="/413-e/">Latest LTS (413-e)</a>
      
          <a title="407-e LTS" href="/407-e/">407-e LTS</a>
      
          <a title="402-e LTS" href="/402-e/">402-e LTS</a>
      
          <a title="393-e LTS" href="/393-e/">393-e LTS</a>
      
          <a title="Latest STS (423-e)" href="/423-e/">Latest STS (423-e)</a>
      
          <a title="422-e STS" href="/422-e/">422-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/get-started/index.html" class="md-tabs__link">Get started</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/ecosystems/index.html" class="md-tabs__link">Ecosystems</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/starburst_KO-T.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 422-e STS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Overview</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Features, use cases, and support</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For all users</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview/sep-ui.html" class="md-nav__link">Starburst Enterprise web UI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For data engineers</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For platform administrators</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Performance, logging, and governance features</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="overview.html" class="md-nav__link">Security overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#security-topic-areas" class="md-nav__link">Security topic areas</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="../security.html#built-in-access-control" class="md-nav__link">Built-in access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#user-authentication-and-client-security" class="md-nav__link">User authentication and client security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#cluster-security" class="md-nav__link">Cluster security</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="tls.html" class="md-nav__link">TLS and HTTPS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="inspect-pem.html" class="md-nav__link">- PEM files</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="inspect-jks.html" class="md-nav__link">- JKS files</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Secure internal communication </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Secure internal communication</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-internal-communication--page-root" class="md-nav__link">Secure internal communication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#configure-shared-secret" class="md-nav__link">Configure shared secret</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#verify-configuration" class="md-nav__link">Verify configuration</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configure-internal-tls" class="md-nav__link">Configure internal TLS</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#performance-with-ssl-tls-enabled" class="md-nav__link">Performance with SSL/TLS enabled</a>
        </li>
        <li class="md-nav__item"><a href="#advanced-performance-tuning" class="md-nav__link">Advanced performance tuning</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="secrets.html" class="md-nav__link">Secrets</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#third-party-access-control" class="md-nav__link">Third-party access control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#miscellaneous-security-options" class="md-nav__link">Miscellaneous security options</a>
      
    
    </li></ul>
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../starburst-rest-api.html" class="md-nav__link">Starburst Enterprise REST API</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Data sources</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connector overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../object-storage.html" class="md-nav__link">Object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html" class="md-nav__link">Non-object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../utilities.html" class="md-nav__link">Utilities</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector/starburst-connectors.html" class="md-nav__link">Starburst connectors feature matrix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">SQL reference</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">422-e STS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Appendix</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Version-specific notices and information</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-internal-communication--page-root" class="md-nav__link">Secure internal communication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#configure-shared-secret" class="md-nav__link">Configure shared secret</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#verify-configuration" class="md-nav__link">Verify configuration</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configure-internal-tls" class="md-nav__link">Configure internal TLS</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#performance-with-ssl-tls-enabled" class="md-nav__link">Performance with SSL/TLS enabled</a>
        </li>
        <li class="md-nav__item"><a href="#advanced-performance-tuning" class="md-nav__link">Advanced performance tuning</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="secure-internal-communication">
<h1 id="security-internal-communication--page-root">Secure internal communication<a class="headerlink" href="#security-internal-communication--page-root" title="Permalink to this heading">#</a></h1>
<p>The Trino cluster can be configured to use secured communication with internal
authentication of the nodes in the cluster, and to optionally use added security
with <a class="reference internal" href="../glossary.html#glosstls"><span class="std std-ref">TLS</span></a>.</p>
<section id="configure-shared-secret">
<h2 id="configure-shared-secret">Configure shared secret<a class="headerlink" href="#configure-shared-secret" title="Permalink to this heading">#</a></h2>
<p>Configure a shared secret to authenticate all communication between nodes of the
cluster. Use this configuration under the following conditions:</p>
<ul class="simple">
<li><p>When opting to configure <a class="reference external" href="#configure-internal-tls">internal TLS encryption</a>
between nodes of the cluster</p></li>
<li><p>When using any <a class="reference internal" href="authentication-types.html"><span class="doc">external authentication</span></a> method
between clients and the coordinator</p></li>
</ul>
<p>Set the shared secret to the same value in <a class="reference internal" href="../installation/deployment.html#config-properties"><span class="std std-ref">config.properties</span></a> on all nodes of the cluster:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>internal-communication.shared-secret=&lt;secret&gt;
</pre></div>
</div>
<p>A large random key is recommended, and can be generated with the following Linux
command:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>openssl rand 512 | base64
</pre></div>
</div>
<section id="verify-configuration">
<span id="verify-secrets"></span><h3 id="verify-configuration">Verify configuration<a class="headerlink" href="#verify-configuration" title="Permalink to this heading">#</a></h3>
<p>To verify shared secret configuration:</p>
<ol class="arabic simple">
<li><p>Start your Trino cluster with two or more nodes configured with a shared
secret.</p></li>
<li><p>Connect to the <a class="reference internal" href="../admin/web-interface.html"><span class="doc">Web UI</span></a>.</p></li>
<li><p>Confirm the number of <code class="docutils literal notranslate"><span class="pre">ACTIVE</span> <span class="pre">WORKERS</span></code> equals the number of nodes
configured with your shared secret.</p></li>
<li><p>Change the value of the shared secret on one worker, and restart the worker.</p></li>
<li><p>Log in to the Web UI and confirm the number of <code class="docutils literal notranslate"><span class="pre">ACTIVE</span> <span class="pre">WORKERS</span></code> is one
less. The worker with the invalid secret is not authenticated, and therefore
not registered with the coordinator.</p></li>
<li><p>Stop your Trino cluster, revert the value change on the worker, and restart
your cluster.</p></li>
<li><p>Confirm the number of <code class="docutils literal notranslate"><span class="pre">ACTIVE</span> <span class="pre">WORKERS</span></code> equals the number of nodes
configured with your shared secret.</p></li>
</ol>
</section>
</section>
<section id="configure-internal-tls">
<h2 id="configure-internal-tls">Configure internal TLS<a class="headerlink" href="#configure-internal-tls" title="Permalink to this heading">#</a></h2>
<p>You can optionally add an extra layer of security by configuring the cluster to
encrypt communication between nodes with <a class="reference internal" href="../glossary.html#glosstls"><span class="std std-ref">TLS</span></a>.</p>
<p>You can configure the coordinator and all workers to encrypt all communication
with each other using TLS. Every node in the cluster must be configured. Nodes
that have not been configured, or are configured incorrectly, are not able to
communicate with other nodes in the cluster.</p>
<p>In typical deployments, you should enable <a class="reference internal" href="tls.html#https-secure-directly"><span class="std std-ref">TLS directly on the coordinator</span></a> for fully encrypted access to the cluster by client
tools.</p>
<p>Enable TLS for internal communication with the following
configuration identical on all cluster nodes.</p>
<ol class="arabic">
<li><p>Configure a shared secret for internal communication as described in
the preceding section.</p></li>
<li><p>Enable automatic certificate creation and trust setup in
<code class="docutils literal notranslate"><span class="pre">etc/config.properties</span></code>:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">internal-communication.https.required</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
</li>
<li><p>Change the URI for the discovery service to use HTTPS and point to the IP
address of the coordinator in <code class="docutils literal notranslate"><span class="pre">etc/config.properties</span></code>:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">discovery.uri</span><span class="o">=</span><span class="s">https://&lt;coordinator ip address&gt;:&lt;https port&gt;</span>
</pre></div>
</div>
<p>Note that using hostnames or fully qualified domain names for the URI is
not supported. The automatic certificate creation for internal TLS only
supports IP addresses.</p>
</li>
<li><p>Enable the HTTPS endpoint on all workers.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">http-server.https.enabled</span><span class="o">=</span><span class="s">true</span>
<span class="na">http-server.https.port</span><span class="o">=</span><span class="s">&lt;https port&gt;</span>
</pre></div>
</div>
</li>
<li><p>Restart all nodes.</p></li>
</ol>
<p>Certificates are automatically created and used to ensure all communication
inside the cluster is secured with TLS.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Older versions of Trino required you to manually manage all the certificates
on the nodes. If you upgrade from this setup, you must remove the following
configuration properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">internal-communication.https.keystore.path</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">internal-communication.https.truststore.path</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node.internal-address-source</span></code></p></li>
</ul>
</div>
<section id="performance-with-ssl-tls-enabled">
<h3 id="performance-with-ssl-tls-enabled">Performance with SSL/TLS enabled<a class="headerlink" href="#performance-with-ssl-tls-enabled" title="Permalink to this heading">#</a></h3>
<p>Enabling encryption impacts performance. The performance degradation can vary
based on the environment, queries, and concurrency.</p>
<p>For queries that do not require transferring too much data between the Trino
nodes e.g. <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">count(*)</span> <span class="pre">FROM</span> <span class="pre">table</span></code>, the performance impact is negligible.</p>
<p>However, for CPU intensive queries which require a considerable amount of data
to be transferred between the nodes (for example, distributed joins, aggregations and
window functions, which require repartitioning), the performance impact can be
considerable. The slowdown may vary from 10% to even 100%+, depending on the network
traffic and the CPU utilization.</p>
</section>
<section id="advanced-performance-tuning">
<h3 id="advanced-performance-tuning">Advanced performance tuning<a class="headerlink" href="#advanced-performance-tuning" title="Permalink to this heading">#</a></h3>
<p>In some cases, changing the source of random numbers improves performance
significantly.</p>
<p>By default, TLS encryption uses the <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> system device as a source of entropy.
This device has limited throughput, so on environments with high network bandwidth
(e.g. InfiniBand), it may become a bottleneck. In such situations, it is recommended to try
to switch the random number generator algorithm to <code class="docutils literal notranslate"><span class="pre">SHA1PRNG</span></code>, by setting it via
<code class="docutils literal notranslate"><span class="pre">http-server.https.secure-random-algorithm</span></code> property in <code class="docutils literal notranslate"><span class="pre">config.properties</span></code> on the coordinator
and all of the workers:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http-server.https.secure-random-algorithm=SHA1PRNG
</pre></div>
</div>
<p>Be aware that this algorithm takes the initial seed from
the blocking <code class="docutils literal notranslate"><span class="pre">/dev/random</span></code> device. For environments that do not have enough entropy to seed
the <code class="docutils literal notranslate"><span class="pre">SHAPRNG</span></code> algorithm, the source can be changed to <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code>
by adding the <code class="docutils literal notranslate"><span class="pre">java.security.egd</span></code> property to <code class="docutils literal notranslate"><span class="pre">jvm.config</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-Djava.security.egd=file:/dev/urandom
</pre></div>
</div>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="inspect-jks.html" title="JKS files"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> JKS files </span>
              </div>
            </a>
          
          
            <a href="secrets.html" title="Secrets"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Secrets </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/starburst_KO-T.png" height="26"
                  alt="Starburst Enterprise 422-e STS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js" data-versions="{'Latest LTS (413-e)': '/413-e/', '407-e LTS': '/407-e/', '402-e LTS': '/402-e/', '393-e LTS': '/393-e/', 'Latest STS (423-e)': '/423-e/', '422-e STS': '/422-e/'}"></script>
<script src="../_static/searchresults.js" data-versions="{'Latest LTS (413-e)': '/413-e/', '407-e LTS': '/407-e/', '402-e LTS': '/402-e/', '393-e LTS': '/393-e/', 'Latest STS (423-e)': '/423-e/', '422-e STS': '/422-e/'}"></script>
  </body>
</html>