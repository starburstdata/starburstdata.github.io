

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Insights query details &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Insights cluster history" href="cluster-history.html" />
    <link rel="prev" title="Insights query overview" href="query-overview.html" />

  
   



<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/insights/query-details.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#insights/query-details" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 372-e STS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 372-e STS</span>
          <span class="md-header-nav__topic"> Insights query details </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (370-e)" href="/370-e/">Latest LTS (370-e)</a>
      
          <a title="364-e LTS" href="/364-e/">364-e LTS</a>
      
          <a title="360-e LTS" href="/360-e/">360-e LTS</a>
      
          <a title="356-e LTS" href="/356-e/">356-e LTS</a>
      
          <a title="350-e LTS" href="/350-e/">350-e LTS</a>
      
          <a title="Latest STS (372-e)" href="/372-e/">Latest STS (372-e)</a>
      
          <a title="371-e STS" href="/371-e/">371-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../insights.html" class="md-tabs__link">Insights</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 372-e STS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">Insights overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html" class="md-nav__link">Insights configuration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="query-overview.html" class="md-nav__link">Insights query overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Insights query details </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Insights query details</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#insights-query-details--page-root" class="md-nav__link">Insights query details</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#general" class="md-nav__link">General</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#query-text" class="md-nav__link">Query text</a>
        </li>
        <li class="md-nav__item"><a href="#basic-information" class="md-nav__link">Basic information</a>
        </li>
        <li class="md-nav__item"><a href="#query-execution" class="md-nav__link">Query execution</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#cluster-resources" class="md-nav__link">Cluster resources</a>
        </li>
        <li class="md-nav__item"><a href="#stages" class="md-nav__link">Stages</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#query-status" class="md-nav__link">Query status</a>
        </li>
        <li class="md-nav__item"><a href="#stage-views" class="md-nav__link">Stage views</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#list-view" class="md-nav__link">List view</a>
        </li>
        <li class="md-nav__item"><a href="#graph-view" class="md-nav__link">Graph view</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#advanced" class="md-nav__link">Advanced</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#tables" class="md-nav__link">Tables</a>
        </li>
        <li class="md-nav__item"><a href="#query-plan" class="md-nav__link">Query plan</a>
        </li>
        <li class="md-nav__item"><a href="#execution-details" class="md-nav__link">Execution details</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cluster-history.html" class="md-nav__link">Insights cluster history</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="usage-metrics-overview.html" class="md-nav__link">Insights usage metrics</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">372-e STS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#insights-query-details--page-root" class="md-nav__link">Insights query details</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#general" class="md-nav__link">General</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#query-text" class="md-nav__link">Query text</a>
        </li>
        <li class="md-nav__item"><a href="#basic-information" class="md-nav__link">Basic information</a>
        </li>
        <li class="md-nav__item"><a href="#query-execution" class="md-nav__link">Query execution</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#cluster-resources" class="md-nav__link">Cluster resources</a>
        </li>
        <li class="md-nav__item"><a href="#stages" class="md-nav__link">Stages</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#query-status" class="md-nav__link">Query status</a>
        </li>
        <li class="md-nav__item"><a href="#stage-views" class="md-nav__link">Stage views</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#list-view" class="md-nav__link">List view</a>
        </li>
        <li class="md-nav__item"><a href="#graph-view" class="md-nav__link">Graph view</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#advanced" class="md-nav__link">Advanced</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#tables" class="md-nav__link">Tables</a>
        </li>
        <li class="md-nav__item"><a href="#query-plan" class="md-nav__link">Query plan</a>
        </li>
        <li class="md-nav__item"><a href="#execution-details" class="md-nav__link">Execution details</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="insights-query-details--page-root">Insights query details<a class="headerlink" href="#insights-query-details--page-root" title="Permalink to this headline">#</a></h1>
<p>Click on a specific query ID in the <a class="reference internal" href="query-overview.html"><span class="doc">Insights query overview</span></a> pane
to view <strong>Query details</strong> for that query.</p>
<p>The <strong>Query details</strong> pane displays general and advanced information
about a specific query. Use the <strong>Back</strong> button to navigate back to the query
history.</p>

<h2 id="general">General<a class="headerlink" href="#general" title="Permalink to this headline">#</a></h2>
<p>The <strong>General</strong> tab provides high-level information about the query processing.</p>

<h3 id="query-text">Query text<a class="headerlink" href="#query-text" title="Permalink to this headline">#</a></h3>
<p>The <strong>Query text</strong> shows the SQL statement as submitted to the SEP
cluster for processing. You can copy the text with the copy icon, or maximize
the text area with the window icon. You can re-run the query in the
<a class="reference internal" href="../client/query-editor.html"><span class="doc">Query editor</span></a> by clicking the <strong>&gt;_</strong> icon.</p>
<img alt="Query details text area" src="../_images/insights-query-details-text-area.png"/>


<h3 id="basic-information">Basic information<a class="headerlink" href="#basic-information" title="Permalink to this headline">#</a></h3>
<p>The displayed metadata about the query processing includes the following
information:</p>
<ul class="simple">
<li><p>ID</p></li>
<li><p>User</p></li>
<li><p>Principal</p></li>
<li><p>User groups</p></li>
<li><p>Client</p></li>
<li><p>Client address</p></li>
<li><p>CPU time</p></li>
<li><p>Elapsed time</p></li>
</ul>


<h3 id="query-execution">Query execution<a class="headerlink" href="#query-execution" title="Permalink to this headline">#</a></h3>
<p>The <strong>Query execution</strong> diagram displays performance and timing data about query
processing:</p>
<img alt="Query execution diagram" src="../_images/insights-query-execution-diagram.png"/>



<h2 id="cluster-resources">Cluster resources<a class="headerlink" href="#cluster-resources" title="Permalink to this headline">#</a></h2>
<p>The <strong>Cluster resources</strong> tab provides information about the cluster load during
the time when the query was queued and executing. Query execution times are
influenced by the available resources (CPU, memory), and the number of
concurrent queries. This tab provides you with the context necessary to
interpret query execution data.</p>
<img alt="Query cluster resources" src="../_images/insights-query-cluster-resources.png"/>
<p>The charts included in this tab are similar to the ones on the <a class="reference internal" href="cluster-history.html"><span class="doc">cluster
history pane</span></a>. They additionally show the time
range when the query ran as a highlighted area on the timeline.</p>


<span id="insights-query-detail-stages"></span><h2 id="stages">Stages<a class="headerlink" href="#stages" title="Permalink to this headline">#</a></h2>
<p>The <strong>Stages</strong> tab shows details about query processing stages. A stage is the
runtime incarnation of a plan fragment in a distributed query plan, and is
identified by a stage number. The maximum number of stages in a query plan is
defined by the <code class="docutils literal notranslate"><span class="pre">query.max-stage-count</span></code> <a class="reference internal" href="../admin/properties-query-management.html"><span class="doc">configuration property</span></a>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>This tab is for advanced users with a very good understanding of query
processing. The following materials can help you begin to understand the
necessary concepts:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../overview/concepts.html"><span class="doc">Trino concepts</span></a></p></li>
<li><p>Starburst <a class="reference external" href="../../videos/2020-08-12-query-performance.html">video training</a>
to learn how SEP executes queries</p></li>
<li><p><a class="reference external" href="https://trino.io/trino-the-definitive-guide.html">Trino: The Definitive Guide</a></p></li>
</ul>
</div>
<p>The following information is included on this tab that applies to the query and
its processing as a whole:</p>
<ul class="simple">
<li><p><strong>User:</strong> The user that is running the query.</p></li>
<li><p><strong>Query state:</strong> Queued, planning, starting, running, blocked, finishing,
finished, failed.</p></li>
<li><p><strong>CPU time:</strong> Total CPU time used by this query, including the cumulative time
used by all tasks. Can exceed wall time.</p></li>
<li><p><strong>Elapsed time:</strong> The elapsed wall time for the query.</p></li>
<li><p><strong>Active:</strong> The percentage of <code class="docutils literal notranslate"><span class="pre">CPU</span> <span class="pre">time</span></code> out of the total
scheduled time, which includes both <code class="docutils literal notranslate"><span class="pre">CPU</span> <span class="pre">time</span></code> and waiting times. This
metric estimates the query’s processing efficiency. Ideally, the value should
be a high percentage. A low percentage indicates the query is spending a long
time reading from storage.</p></li>
</ul>

<h3 id="query-status">Query status<a class="headerlink" href="#query-status" title="Permalink to this headline">#</a></h3>
<p>Query statuses are dependent on the statuses of its stages and tasks. Generally,
queries start in the <code class="docutils literal notranslate"><span class="pre">QUEUED</span></code> state, and move on briefly to the <code class="docutils literal notranslate"><span class="pre">PLANNING</span></code>
state. Queries may return to <code class="docutils literal notranslate"><span class="pre">QUEUED</span></code> state if they must briefly wait for
resources. If the resources are not available fast enough, the time period
depending on a myriad of configuration properties, it moves into a <code class="docutils literal notranslate"><span class="pre">BLOCKED</span></code>
state. If at least one worker task is running and nothing is blocked, the query
is in the <code class="docutils literal notranslate"><span class="pre">RUNNING</span></code> state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">PLANNING</span></code> stage should be very brief for most queries. If you notice
that queries are spending more than a brief amount of time in the <code class="docutils literal notranslate"><span class="pre">PLANNING</span></code>
stage consistently, your cluster may have insufficient resources.</p>
</div>
<p>Stages encompass all the tasks of the work described by the stage’s plan
fragment. Stages can be in one of several states:</p>
<ul class="simple">
<li><p><strong>Planned:</strong> The coordinator created the query plan, and from that, the
distributed query plan.</p></li>
<li><p><strong>Scheduling:</strong> The coordinator is scheduling tasks across workers.</p></li>
<li><p><strong>Scheduling splits:</strong> The coordinator is scheduling tasks on workers using
the list of <a class="reference external" href="../overview/concepts.html#split">splits</a>.</p></li>
<li><p><strong>Scheduled:</strong> All workers have tasks, and the coordinator is waiting for the
first task to start running.</p></li>
<li><p><strong>Running:</strong> There is at least one running task.</p></li>
<li><p><strong>Flushing:</strong> Stage has finished executing and output being consumed. At least
one of the tasks is flushing and the non-flushing tasks are finished.</p></li>
<li><p><strong>Finished:</strong> The query has finished executing and all output has been
consumed.</p></li>
<li><p><strong>Canceled:</strong> The query was canceled by the user.</p></li>
<li><p><strong>Aborted:</strong> Stage was aborted by the coordinator.</p></li>
<li><p><strong>Failed:</strong> Query execution failed.</p></li>
</ul>


<h3 id="stage-views">Stage views<a class="headerlink" href="#stage-views" title="Permalink to this headline">#</a></h3>
<p>Query stage information is rendered in two different views, <strong>List</strong> and
<strong>Graph</strong>. Use the toggle in the upper right corner to switch between the two
visualizations.</p>

<h4 id="list-view">List view<a class="headerlink" href="#list-view" title="Permalink to this headline">#</a></h4>
<p>List view shows a list of stages and includes information about the
associated tasks:</p>
<img alt="Query details Stages list view" src="../_images/insights-query-detail-stages-list.png"/>
<p>The list view focuses on statistics about stages and their tasks. This view is
useful for examining stage performance, and understanding if all nodes in the
cluster perform well.</p>
<p>Several stage level statistics are shown:</p>
<ul class="simple">
<li><p>State</p></li>
<li><p>CPU time</p></li>
<li><p>Active percentage</p></li>
<li><p>Input buffer</p></li>
<li><p>Number of tasks</p></li>
</ul>
<p>Each stage can be expanded or collapsed with the chevron in its upper right
corner. Expanding a stage reveals task level details. Stages can have multiple
tasks, which have their own row with separate statistics and statuses in the
stage panel. Tasks are assigned to workers to be executed in parallel. Comparing
task statistics within the same stage can identify bottlenecks caused by slower
nodes.</p>
<p>Tasks can be in one of the following states:</p>
<ul class="simple">
<li><p><strong>Planned:</strong> The plan has been created by the coordinator.</p></li>
<li><p><strong>Running:</strong> The task is running.</p></li>
<li><p><strong>Flushing:</strong> The task is flushing results after having been consumed.</p></li>
<li><p><strong>Finished:</strong> The task is complete and its data passed on to the next <a class="reference external" href="../overview/concepts.html#split">split</a>.</p></li>
<li><p><strong>Canceled:</strong> The task was canceled by the coordinator due to a user action.</p></li>
<li><p><strong>Aborted:</strong> The task was aborted by the worker or coordinator.</p></li>
<li><p><strong>Failed:</strong> The task failed to execute.</p></li>
</ul>
<p>The following per-task statistics are displayed:</p>
<ul class="simple">
<li><p><strong>Host:</strong> URI of the node processing the task</p></li>
<li><p><strong>State:</strong> State of the task</p></li>
<li><p><strong>Queued splits:</strong> Number of <a class="reference external" href="../overview/concepts.html#split">splits</a> in
the task not yet running. This value fluctuates as the task runs.</p></li>
<li><p><strong>Running splits:</strong> Number of splits in the task not yet complete. This value
fluctuates as the task runs.</p></li>
<li><p><strong>Blocked splits:</strong> Number of blocked splits in the task. This value
fluctuates as the task runs.</p></li>
<li><p><strong>Completed splits:</strong> Number of completed splits in the task</p></li>
<li><p><strong>Rows:</strong> Number of rows read or written by the task; the number increases as
the task runs.</p></li>
<li><p><strong>Rows per second:</strong> Rate at which rows are read or written by the task</p></li>
<li><p><strong>Bytes:</strong> Number of bytes read or written by the task; the number increases
as the task runs.</p></li>
<li><p><strong>Bytes per second:</strong> Rate at which bytes are read or written by the task</p></li>
<li><p><strong>Elapsed:</strong> Time elapsed wall time since the task creation time</p></li>
<li><p><strong>CPU time:</strong> CPU time used by this task</p></li>
<li><p><strong>Buffered:</strong> Amount of data waiting to be sent to the next processing stage
(high values may indicate that the upstream stage is slow)</p></li>
</ul>


<h4 id="graph-view">Graph view<a class="headerlink" href="#graph-view" title="Permalink to this headline">#</a></h4>
<p>Graph (tree) view depicts stages and the way data flows between them in
parent-child relationships:</p>
<img alt="Query details Stages graph view" src="../_images/insights-query-detail-stages-tree.png"/>
<p>Graph view is available only for queries for which the coordinator still has
information in memory. How long query information is retained in memory depends
on the query volume, as well as the <code class="docutils literal notranslate"><span class="pre">query.max-history</span></code> and
<code class="docutils literal notranslate"><span class="pre">query.min-expire-age</span></code> configuration properties. The view provides a
visualization of the distributed query plan and shows how plan fragments are
mapped to stages. The visual representation is a tree, in which nodes represent
stages and edges indicate how data is transferred between stages. A stage
processes data produced by its children.</p>
<p>Each of the nodes shows stage level statistics, as well as a graphical
representation of the corresponding plan fragment. A plan fragment is rendered
as a tree of operators. Finally, statistics about the number of rows and total
size of the data read from each child stage are also shown.</p>




<h2 id="advanced">Advanced<a class="headerlink" href="#advanced" title="Permalink to this headline">#</a></h2>
<p>The <strong>Advanced</strong> tab provides lower level details about the query processing.</p>
<img alt="Query details Advanced tab" src="../_images/insights-query-details-advanced.png"/>

<h3 id="tables">Tables<a class="headerlink" href="#tables" title="Permalink to this headline">#</a></h3>
<p>A list of all tables accessed by the query, including the following information:</p>
<ul class="simple">
<li><p>Table</p></li>
<li><p>Schema</p></li>
<li><p>Catalog</p></li>
<li><p>Rows processed</p></li>
<li><p>Bytes processed</p></li>
<li><p>Read or write operation</p></li>
</ul>


<h3 id="query-plan">Query plan<a class="headerlink" href="#query-plan" title="Permalink to this headline">#</a></h3>
<p>The query plan used for processing the query on the cluster. It can be copied or
maximized using the icons.</p>


<h3 id="execution-details">Execution details<a class="headerlink" href="#execution-details" title="Permalink to this headline">#</a></h3>
<p>You can see the following timing and performance details about query processing
on the cluster:</p>
<ul class="simple">
<li><p>Elapsed time</p></li>
<li><p>CPU time</p></li>
<li><p>Parallelism</p></li>
<li><p>Active</p></li>
<li><p>Rows read</p></li>
<li><p>Bytes read</p></li>
<li><p>Rows written</p></li>
<li><p>Bytes written</p></li>
<li><p>Peak memory</p></li>
</ul>





          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="query-overview.html" title="Insights query overview"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Insights query overview </span>
              </div>
            </a>
          
          
            <a href="cluster-history.html" title="Insights cluster history"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Insights cluster history </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 372-e STS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2021<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>