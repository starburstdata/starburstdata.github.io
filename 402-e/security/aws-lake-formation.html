

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>AWS Lake Formation access control support &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="System access control" href="built-in-system-access-control.html" />
    <link rel="prev" title="Hive access control with Apache Sentry" href="hive-sentry.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/security/aws-lake-formation.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/aws-lake-formation" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/starburst_KO-T.png"
                   alt="Starburst Enterprise 402-e.0 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 402-e.0 LTS</a>
          <span class="md-header-nav__topic"> AWS Lake Formation access control support </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (402-e)" href="/402-e/">Latest LTS (402-e)</a>
      
          <a title="393-e LTS" href="/393-e/">393-e LTS</a>
      
          <a title="380-e LTS" href="/380-e/">380-e LTS</a>
      
          <a title="370-e LTS" href="/370-e/">370-e LTS</a>
      
          <a title="364-e LTS" href="/364-e/">364-e LTS</a>
      
          <a title="Latest STS (401-e)" href="/401-e/">Latest STS (401-e)</a>
      
          <a title="399-e STS" href="/399-e/">399-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/get-started/index.html" class="md-tabs__link">Get started</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/ecosystems/index.html" class="md-tabs__link">Ecosystems</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/starburst_KO-T.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 402-e.0 LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Overview</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Features, use cases, and support</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For all users</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview/sep-ui.html" class="md-nav__link">Starburst Enterprise web UI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For data engineers</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For platform administrators</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Performance, logging, and governance features</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="overview.html" class="md-nav__link">Security overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#security-topic-areas" class="md-nav__link">Security topic areas</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="../security.html#authentication-and-client-security" class="md-nav__link">Authentication and client security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#cluster-security" class="md-nav__link">Cluster security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#security-between-the-cluster-and-data-sources" class="md-nav__link">Security between the cluster and data sources</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#miscellaneous-security-options" class="md-nav__link">Miscellaneous security options</a>
      
    
    </li></ul>
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Data sources</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connector overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../object-storage.html" class="md-nav__link">Object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html" class="md-nav__link">Non-object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../utilities.html" class="md-nav__link">Utilities</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector/starburst-connectors.html" class="md-nav__link">Starburst connectors feature matrix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">SQL reference</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">402-e LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Appendix</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Version-specific notices and information</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-aws-lake-formation--page-root" class="md-nav__link">AWS Lake Formation access control support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a>
        </li>
        <li class="md-nav__item"><a href="#configure-aws-lake-formation" class="md-nav__link">Configure AWS Lake Formation</a>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties" class="md-nav__link">Configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#lake-formation-security-mapping" class="md-nav__link">Lake formation security mapping</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#security-mapping-configuration-properties" class="md-nav__link">Security mapping configuration properties</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#caching" class="md-nav__link">Caching</a>
        </li>
        <li class="md-nav__item"><a href="#limitations" class="md-nav__link">Limitations</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="aws-lake-formation-access-control-support">
<h1 id="security-aws-lake-formation--page-root">AWS Lake Formation access control support<a class="headerlink" href="#security-aws-lake-formation--page-root" title="Permalink to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>AWS Lake Formation access control support is a <a class="reference internal" href="../versions.html#feature-release-status"><span class="std std-ref">public preview</span></a> feature. Contact <a class="reference external" href="../../support.html">Starburst support</a> with questions or feedback.</p>
</div>
<p>Starburst Enterprise platform (SEP) provides support for using an existing AWS Lake Formation access
control system.</p>
<section id="requirements">
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<p>In order to use AWS Lake Formation integration with Starburst Enterprise, you need:</p>
<ul class="simple">
<li><p>An existing AWS Lake Formation configuration and AWS credentials that allow
interacting with it’s API.</p></li>
<li><p>A valid <a class="reference internal" href="../installation/license-requirements.html"><span class="doc">Starburst Enterprise license</span></a>.</p></li>
</ul>
</section>
<section id="overview">
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>AWS Lake Formation provides a single place to manage access controls policies.
You can define security policies that restrict access to data at database,
table, column, row and cell levels. These policies apply to AWS Identity and
Access Management (IAM) users and roles, and to users and groups when federating
through an external identity provider.</p>
<p>Starburst Enterprise platform (SEP) integration with AWS Lake Formation enforces <a class="reference external" href="https://docs.aws.amazon.com/lake-formation/latest/dg/lake-formation-permissions.html">AWS Lake Formation
access control policies</a>
when accessing <a class="reference external" href="https://docs.aws.amazon.com/lake-formation/latest/dg/permitting-third-party-call.html">registered Amazon S3 data lake locations</a>.</p>
<p>AWS Lake Formation access control support is only available for catalogs, that
use the Hive connector, since it utilizes the <a class="reference internal" href="../connector/hive-security.html"><span class="doc">security system of the Hive connector</span></a>.</p>
</section>
<section id="configure-aws-lake-formation">
<h2 id="configure-aws-lake-formation">Configure AWS Lake Formation<a class="headerlink" href="#configure-aws-lake-formation" title="Permalink to this heading">#</a></h2>
<p>Each catalog that needs to be controlled with AWS Lake Formation must have the
catalog properties file configured to use the <code class="docutils literal notranslate"><span class="pre">lake-formation</span></code> Hive security:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">hive.security</span><span class="o">=</span><span class="s">lake-formation</span>
</pre></div>
</div>
<p>The following is a more complex example of a catalog properties file that is
configured to use AWS Lake Formation for authorization with the Hive connector.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connector.name</span><span class="o">=</span><span class="s">hive</span>
<span class="na">hive.security</span><span class="o">=</span><span class="s">lake-formation</span>
<span class="na">hive.metastore</span><span class="o">=</span><span class="s">glue</span>
<span class="na">hive.metastore.glue.region</span><span class="o">=</span><span class="s">us-east-2</span>
<span class="na">hive.metastore.glue.default-warehouse-dir</span><span class="o">=</span><span class="s">s3://data-lake-bucket</span>
<span class="na">hive.metastore.glue.iam-role</span><span class="o">=</span><span class="s">arn:aws:iam::&lt;account_id&gt;:role/role_for_glue</span>
<span class="na">hive.s3.iam-role</span><span class="o">=</span><span class="s">arn:aws:iam::&lt;account_id&gt;:role/role_for_s3</span>
<span class="na">lake-formation.authorized-caller-tag</span><span class="o">=</span><span class="s">starburst-enterprise</span>
<span class="na">lake-formation.security-mapping.config-file</span><span class="o">=</span><span class="s">etc/lakeformation-security-mapping.json</span>
<span class="na">lake-formation.security-mapping.iam-role-credential-name</span><span class="o">=</span><span class="s">Example_Role_Credential_Name</span>
</pre></div>
</div>
<p>More information on lake formation security mapping can be found <a class="reference internal" href="#lake-formation-security-mapping"><span class="std std-ref">later in
this topic</span></a>.</p>
</section>
<section id="configuration-properties">
<h2 id="configuration-properties">Configuration properties<a class="headerlink" href="#configuration-properties" title="Permalink to this heading">#</a></h2>
<table id="id2">
<caption><span class="caption-text">AWS Lake Formation configuration properties</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.role-credential</span></code></p></td>
<td><p>The name of the extra credential used to provide role ARN which is used
when communicating with AWS Lake Formation. For example, given
<code class="docutils literal notranslate"><span class="pre">lake-formation.role-credential=aws_lf_role</span></code> add
<code class="docutils literal notranslate"><span class="pre">extraCredentials=aws_lf_role:arn:aws:iam::&lt;account_id&gt;:role/lf_role</span></code> to
the parameters used with the <a class="reference internal" href="../client/jdbc.html"><span class="doc">JDBC driver</span></a> to connect to
SEP. Users of the <a class="reference internal" href="../client/cli.html"><span class="doc">CLI</span></a> can use the
<code class="docutils literal notranslate"><span class="pre">--extraCredential</span></code> option.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.authorized-caller-tag</span></code></p></td>
<td><p>The value of <code class="docutils literal notranslate"><span class="pre">LakeFormationAuthorizedCaller</span></code> registered for SEP in
<a class="reference external" href="https://docs.aws.amazon.com/lake-formation/latest/dg/permitting-third-party-call.html">third-party query engine integration</a>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lake-formation-security-mapping">
<span id="id1"></span><h2 id="lake-formation-security-mapping">Lake formation security mapping<a class="headerlink" href="#lake-formation-security-mapping" title="Permalink to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is in <a class="reference internal" href="../versions.html#feature-release-status"><span class="std std-ref">limited preview</span></a>. It is
subject to change and not supported for production environments.</p>
</div>
<p>SEP supports flexible security mapping for lake formation, which associates
SEP users or groups with AWS security entities like IAM roles according to a
JSON mappings file. The IAM role for a specific query can be selected from a
list of allowed roles by providing it as an extra credential.</p>
<p>Each security mapping entry may specify one or more match criteria. If multiple
criteria are specified, all criteria must match. The following match criteria
are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">"user":</span></code> - Regular expression to match against username. For example:
<code class="docutils literal notranslate"><span class="pre">alice|bob</span></code> to match either SEP users “alice” and “bob”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">"group":</span></code> - Regular expression to match against any of the groups that the
user belongs to. For example: <code class="docutils literal notranslate"><span class="pre">finance|sales</span></code> to match either the finance or
sales groups in SEP.</p></li>
</ul>
<p>Each SEP match criteria can be mapped to one or more of the following AWS
security entities:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">"iamRole":</span></code> IAM role to use if no user provided role is specified as an extra
credential. This overrides any globally configured IAM role. This role is
allowed to be specified as an extra credential, although specifying it
explicitly has no effect, as it would be used anyway.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">"roleSessionName":</span></code> (Optional) Only valid when <code class="docutils literal notranslate"><span class="pre">iamRole</span></code> is specified. If
<code class="docutils literal notranslate"><span class="pre">roleSessionName</span></code> includes the string <code class="docutils literal notranslate"><span class="pre">${USER}</span></code>, then the <code class="docutils literal notranslate"><span class="pre">${USER}</span></code>
portion of the string will be replaced with the current session’s username. If
<code class="docutils literal notranslate"><span class="pre">roleSessionName</span></code> is not specified, it defaults to <code class="docutils literal notranslate"><span class="pre">trino-session</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">"allowedIamRoles":</span></code> Comma-separated list of IAM roles that are allowed to be
specified as an extra credential. This is useful because a particular AWS
account may have permissions to use many roles, but a specific user should
only be allowed to use a subset of those roles.</p></li>
</ul>
<p>The security mapping entries are processed in the order listed in the
JSON mapping. More specific mapping entries should thus be specified
before less specific mapping entries. For example, the mapping list might have a
<code class="docutils literal notranslate"><span class="pre">"group":</span></code> entry for “salesnorth” followed by an entry for “sales” to allow to
apply a more specific lake formation security mapping to the north sales team,
before applying a more broad security mapping to the whole sales department.</p>
<p>You can set a default mapping by adding an entry to the end of the file that
does not specify an SEP match criteria. If no mapping entry matches and no
default is configured, access is denied.</p>
<p>The JSON mapping can either be retrieved from a file or REST-endpoint
specified via the <code class="docutils literal notranslate"><span class="pre">lake-formation.security-mapping.config-file</span></code> config
property.</p>
<p>The following example JSON mapping applies SEP user and group mappings to
security entities in AWS lake formation:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"mappings"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"user"</span><span class="p">:</span> <span class="s2">"bob|charlie"</span><span class="p">,</span>
      <span class="nt">"iamRole"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789101:role/test_default"</span><span class="p">,</span>
      <span class="nt">"allowedIamRoles"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"arn:aws:iam::123456789101:role/test1"</span><span class="p">,</span>
        <span class="s2">"arn:aws:iam::123456789101:role/test2"</span><span class="p">,</span>
        <span class="s2">"arn:aws:iam::123456789101:role/test3"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"user"</span><span class="p">:</span> <span class="s2">"salesnorth"</span><span class="p">,</span>
      <span class="nt">"iamRole"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789101:role/sales_north_users"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"group"</span><span class="p">:</span> <span class="s2">"sales*"</span><span class="p">,</span>
      <span class="nt">"iamRole"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789101:role/sales_all_users"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"iamRole"</span><span class="p">:</span> <span class="s2">"arn:aws:iam::123456789101:role/default"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="security-mapping-configuration-properties">
<h3 id="security-mapping-configuration-properties">Security mapping configuration properties<a class="headerlink" href="#security-mapping-configuration-properties" title="Permalink to this heading">#</a></h3>
<table id="id3">
<caption><span class="caption-text">Security mapping configuration properties</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.security-mapping.config-file</span></code></p></td>
<td><p>Path and filename of the JSON mapping file, or REST-endpoint URI
containing security mappings.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.security-mapping.iam-role-credential-name</span></code></p></td>
<td><p>The name of the extra credential used to provide the IAM role.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.security-mapping.refresh-period</span></code></p></td>
<td><p>How often to refresh the security mapping configuration. For example, use
<code class="docutils literal notranslate"><span class="pre">5min</span></code> to direct SEP to refresh security mappings every 5 minutes
against the JSON mapping.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.security-mapping.colon-replacement</span></code></p></td>
<td><p>This property is for use in shells that do not handle the colon properly.
It is otherwise not required. When defined, the character or characters
are used in place of the colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>) character in IAM role names used as
an extra credential. Do not use quotes to enclose the replacement string.
Any instances of this replacement string in the extra credential value are
converted to a colon. Choose a value that is not used in any of your
IAM ARNs, for example <code class="docutils literal notranslate"><span class="pre">%colon%</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>The following example shows the lake formation security mapping configuration
properties:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">lake-formation.role-credential</span><span class="o">=</span><span class="s">aws_role</span>
<span class="na">lake-formation.authorized-caller-tag</span><span class="o">=</span><span class="s">starburst-enterprise</span>
<span class="na">lake-formation.security-mapping.config-file</span><span class="o">=</span><span class="s">etc/example-lake-formation-security-mapping.json</span>
<span class="na">lake-formation.security-mapping.iam-role-credential-name</span><span class="o">=</span><span class="s">Example_Role_Credential_Name</span>
<span class="na">lake-formation.security-mapping.refresh-period</span><span class="o">=</span><span class="s">5m</span>
<span class="na">lake-formation.security-mapping.colon-replacement</span><span class="o">=</span><span class="s">%colon%</span>
</pre></div>
</div>
</section>
</section>
<section id="caching">
<h2 id="caching">Caching<a class="headerlink" href="#caching" title="Permalink to this heading">#</a></h2>
<p>In order to make permission checks run as fast as possible, lake formation
access control caches permission data for each user. By default, permissions
are stored for a maximum of 1000 users, and expire ofter 10 minutes. In the
following example, the permissions cache size is reduced to 100 users, and the
permissions set to expire after two hours:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">lake-formation.cache-ttl</span><span class="o">=</span><span class="s">2h</span>
<span class="na">lake-formation.cache-size</span><span class="o">=</span><span class="s">100</span>
</pre></div>
</div>
<table id="id4">
<caption><span class="caption-text">Cache configuration properties</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 65%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.cache-ttl</span></code></p></td>
<td><p>Time duration for which to store lake formation permission data for each
user.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lake-formation.cache-size</span></code></p></td>
<td><p>Maximum number of users for which to store lake formation permission data.</p></td>
</tr>
</tbody>
</table>
<p>If needed, the cache can be manually cleared using a SQL procedure call in the
catalog:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CALL system.flush_access_control_cache()
</pre></div>
</div>
</section>
<section id="limitations">
<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Starburst Enterprise platform (SEP) does not support cell filters and column masking defined in AWS
Lake Formation.</p></li>
</ul>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="hive-sentry.html" title="Hive access control with Apache Sentry"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Hive access control with Apache Sentry </span>
              </div>
            </a>
          
          
            <a href="built-in-system-access-control.html" title="System access control"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> System access control </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/starburst_KO-T.png" height="26"
                  alt="Starburst Enterprise 402-e.0 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2022<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>