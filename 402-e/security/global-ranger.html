

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Global access control with Apache Ranger &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Hive and Delta Lake access control with Apache Ranger" href="hive-ranger.html" />
    <link rel="prev" title="Apache Ranger overview" href="ranger-overview.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/security/global-ranger.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#security/global-ranger" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/starburst_KO-T.png"
                   alt="Starburst Enterprise 402-e.12 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 402-e.12 LTS</a>
          <span class="md-header-nav__topic"> Global access control with Apache Ranger </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (413-e)" href="/413-e/">Latest LTS (413-e)</a>
      
          <a title="407-e LTS" href="/407-e/">407-e LTS</a>
      
          <a title="402-e LTS" href="/402-e/">402-e LTS</a>
      
          <a title="393-e LTS" href="/393-e/">393-e LTS</a>
      
          <a title="Latest STS (422-e)" href="/422-e/">Latest STS (422-e)</a>
      
          <a title="420-e STS" href="/420-e/">420-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/get-started/index.html" class="md-tabs__link">Get started</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/ecosystems/index.html" class="md-tabs__link">Ecosystems</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../security.html" class="md-tabs__link">Security</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/starburst_KO-T.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 402-e.12 LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Overview</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Features, use cases, and support</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For all users</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview/sep-ui.html" class="md-nav__link">Starburst Enterprise web UI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For data engineers</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For platform administrators</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Performance, logging, and governance features</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="overview.html" class="md-nav__link">Security overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#security-topic-areas" class="md-nav__link">Security topic areas</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="../security.html#authentication-and-client-security" class="md-nav__link">Authentication and client security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#cluster-security" class="md-nav__link">Cluster security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#security-between-the-cluster-and-data-sources" class="md-nav__link">Security between the cluster and data sources</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html#miscellaneous-security-options" class="md-nav__link">Miscellaneous security options</a>
      
    
    </li></ul>
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Data sources</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connector overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../object-storage.html" class="md-nav__link">Object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html" class="md-nav__link">Non-object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../utilities.html" class="md-nav__link">Utilities</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector/starburst-connectors.html" class="md-nav__link">Starburst connectors feature matrix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">SQL reference</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">402-e.12 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Appendix</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Version-specific notices and information</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#security-global-ranger--page-root" class="md-nav__link">Global access control with Apache Ranger</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#ranger-installation-and-configuration" class="md-nav__link">Ranger installation and configuration</a>
        </li>
        <li class="md-nav__item"><a href="#sep-ranger-plugin-installation" class="md-nav__link">SEP Ranger plugin installation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#secure-the-ranger-to-sep-connection-with-tls" class="md-nav__link">Secure the Ranger to SEP connection with TLS</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#ranger-plugin-configuration" class="md-nav__link">Ranger plugin configuration</a>
        </li>
        <li class="md-nav__item"><a href="#resource-and-privilege-sets" class="md-nav__link">Resource and privilege sets</a>
        </li>
        <li class="md-nav__item"><a href="#denying-access-to-specific-tables-and-columns" class="md-nav__link">Denying access to specific tables and columns</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#non-hive-catalogs" class="md-nav__link">Non-Hive catalogs</a>
        </li>
        <li class="md-nav__item"><a href="#hive-catalogs" class="md-nav__link">Hive catalogs</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#starburst-ranger-plugin-upgrade" class="md-nav__link">Starburst Ranger plugin upgrade</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#upgrade-from-350-e-or-lower" class="md-nav__link">Upgrade from 350-e or lower</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="global-access-control-with-apache-ranger">
<h1 id="security-global-ranger--page-root">Global access control with Apache Ranger<a class="headerlink" href="#security-global-ranger--page-root" title="Permalink to this heading">#</a></h1>
<p>The integration of <a class="reference external" href="https://ranger.apache.org/">Apache Ranger</a> with
Starburst Enterprise platform (SEP) enables global access control for all configured catalogs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Global access control with Apache Ranger requires a valid
<a class="reference internal" href="../installation/license-requirements.html"><span class="doc">Starburst Enterprise license</span></a>.</p>
</div>
<p>Policies in Ranger are created with the Ranger user interface and define access
and authorization for data sources including Starburst-supported data sources such
as relational databases. Each policy combines user and group information with a
resource and access rights to the resource. Ranger is configured to your
organization’s LDAP system for user and group information. Ranger usage requires
the installation of the SEP Ranger plugin. It creates the SEP
<code class="docutils literal notranslate"><span class="pre">starburst-enterprise</span></code> service type, or service definition, in Ranger.
This encompasses a SEP-specific set of resources that include catalog, schema,
table, column, and more, so access rules for there resources can be configured
in Ranger. Specific user interface elements with drop down and auto-completion
are available for all resources.</p>
<p>The Ranger SEP plugin is responsible for connecting to Ranger from SEP and
using the defined policies for SEP resources. Any user action in SEP, such
as submitting a query, is validated against the policies from Ranger and
potentially prevented.</p>
<p>For example, a query is parsed and analyzed to determine all involved resources
such as schemas and tables. Once a list is created, all policies are analyzed in
SEP to determine if the user initiating the query has all necessary access
rights. Processing only continues if all rights are granted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Contrary to the <a class="reference internal" href="hive-ranger.html"><span class="doc">Hive level security</span></a>, the global access
control with Ranger is suitable to define role-based access to catalogs using
any connector as well as a number of other system resources.</p>
</div>
<p>Using Ranger for role-based access control can be summarized in a few steps:</p>
<ul class="simple">
<li><p>Contact Starburst Support to obtain download access to the Ranger plugin</p></li>
<li><p>Install Ranger and add the SEP Ranger plugin</p></li>
<li><p>Configure Ranger for user and group information from LDAP</p></li>
<li><p>Configure SEP to use Ranger</p></li>
<li><p>Define policies with the Ranger user interface</p></li>
<li><p>Enjoy the access control for catalogs, schema, tables and more for all users</p></li>
</ul>
<p>Details for all these steps and more are documented in the following sections.</p>
<section id="ranger-installation-and-configuration">
<span id="ranger-installation"></span><h2 id="ranger-installation-and-configuration">Ranger installation and configuration<a class="headerlink" href="#ranger-installation-and-configuration" title="Permalink to this heading">#</a></h2>
<p>Your first important step is the installation and configuration of
Ranger, which can be summarized to the following steps:</p>
<ul class="simple">
<li><p>Install Ranger 2.0.0 or higher</p></li>
<li><p>Configure Ranger to access your LDAP system for user, group and role
information</p></li>
<li><p>Add SEP Ranger plugin to Ranger</p></li>
</ul>
<p><strong>Installation</strong></p>
<dl class="simple">
<dt>AWS CloudFoundation deployment</dt><dd><p>The Starburst support for Amazon CFT-based installation includes installation
of Apache Ranger and all relevant configuration. Detailed information is
available in the <a class="reference internal" href="../aws/configuration.html#cft-ranger-configuration"><span class="std std-ref">AWS documentation</span></a>.</p>
</dd>
<dt>K8s deployment</dt><dd><p>The Starburst support for Kubernetes-based installation includes installation
of Apache Ranger and all relevant configuration. Detailed information is
available in the <a class="reference internal" href="../k8s.html"><span class="doc">Kubernetes documentation</span></a>.</p>
</dd>
<dt>Connect existing Ranger</dt><dd><p>Using an existing Ranger 2.0.0 or higher is supported. You just have to make
sure that the coordinator has network access to Ranger and LDAP is configured,
so that all relevant users, groups and roles are available. As a next step you
need <a class="reference internal" href="#ranger-plugin-installation"><span class="std std-ref">install the Starburst Ranger plugin</span></a>.</p>
</dd>
<dt>Manual Ranger installation</dt><dd><p>If you are running SEP on-premise or some other custom deployment, you need
to install Ranger 2.0.0 or higher following the documentation from the Ranger
project.</p>
</dd>
</dl>
<p><strong>Connect Ranger to LDAP</strong></p>
<p>Ranger needs to access the information about your users, groups and roles in
your LDAP system. With the K8s and AWS installation methods, all details are
already configured. For existing Ranger usage or manual installation, you need
to ensure that Ranger is connected to your LDAP directory provider and a
synchronization process is in place. The process varies based on your LDAP
system and documented in the Ranger documentation.</p>
</section>
<section id="sep-ranger-plugin-installation">
<span id="ranger-plugin-installation"></span><h2 id="sep-ranger-plugin-installation">SEP Ranger plugin installation<a class="headerlink" href="#sep-ranger-plugin-installation" title="Permalink to this heading">#</a></h2>
<p>The SEP Ranger plugin is automatically installed with Ranger when using the
AWS CFT and Kubernetes/Helm installations tooling from SEP. For existing Ranger
instances or custom Ranger installations, follow the steps below:</p>
<ul>
<li><p>Download JAR files <code class="docutils literal notranslate"><span class="pre">starburst-ranger-plugin.jar</span></code> and <code class="docutils literal notranslate"><span class="pre">trino-jdbc.jar</span></code>.
Contact Starburst Support if you do not have access to these files.</p></li>
<li><p>Place the JAR files in <code class="docutils literal notranslate"><span class="pre">${RANGER_HOME}/ews/webapp/WEB-INF/lib</span></code> directory on
the Ranger server.</p></li>
<li><p>Add the necessary <a class="reference internal" href="#ranger-plugin-configuration"><span class="std std-ref">Ranger plugin configuration</span></a> to connect SEP to Ranger.</p></li>
<li><p>Restart the Ranger server and the SEP cluster.</p></li>
<li><p>Create the Ranger configuration properties file for the <a class="reference internal" href="#ranger-plugin-configuration"><span class="std std-ref">Ranger plugin
configuration</span></a>.</p></li>
<li><p>Use the properties file to create the SEP service type in Ranger with the
<a class="reference internal" href="ranger-overview.html#starburst-ranger-cli"><span class="std std-ref">Starburst Ranger CLI</span></a>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>starburst-ranger-cli service-definition starburst create --properties<span class="o">=</span>access-control-ranger.properties
</pre></div>
</div>
</li>
<li><p>Access the Ranger user interface and confirm that you can find the
<strong>Starburst Enterprise</strong> service type.</p></li>
<li><p>Add an SEP service type with a service name that matches SEP’s
<code class="docutils literal notranslate"><span class="pre">ranger.service-name</span></code> configuration property by clicking the “plus” icon
next to the SEP service type in the Ranger Service Manager.</p></li>
</ul>
<p>With the SEP Ranger plugin installed in Ranger, you can create one or multiple
services with SEP. This allows you to have separate services for different
SEP clusters. The connection to the SEP cluster is configured with the JDBC
connection string in the <strong>jdbc.url</strong> field and requires a SEP username and
password.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Every upgrade of SEP, requires an <a class="reference internal" href="#ranger-plugin-upgrade"><span class="std std-ref">upgrade of the Starburst Ranger
plugin</span></a>.</p>
</div>
<section id="secure-the-ranger-to-sep-connection-with-tls">
<span id="ranger-plugin-tls"></span><h3 id="secure-the-ranger-to-sep-connection-with-tls">Secure the Ranger to SEP connection with TLS<a class="headerlink" href="#secure-the-ranger-to-sep-connection-with-tls" title="Permalink to this heading">#</a></h3>
<p>You can connect the Ranger plugin with the Starburst coordinator without using TLS.
Navigate to the <strong>Edit Service</strong> section in the <strong>Service Manager</strong> and specify
the coordinator’s HTTP port in the <strong>jdbc.url</strong> field. This means the connection
is not secured, for example a default deployment accesses it directly using:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:trino://sep.example.com:8080
</pre></div>
</div>
<p>Alternatively, behind the load balancer using port 80.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:trino://sep.example.com
</pre></div>
</div>
<p>To secure the connection with TLS, configure SEP to <a class="reference internal" href="tls.html"><span class="doc">use TLS</span></a> and update the connection string:</p>
<p>In <code class="docutils literal notranslate"><span class="pre">jdbc.url</span></code> use the coordinator HTTPS port and add <code class="docutils literal notranslate"><span class="pre">ssl=true</span></code>, for example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:trino://sep.example.com:8443?ssl=true
</pre></div>
</div>
<p>If you use the default HTTPS port 443, for example behind a load balancer, you
can remove <code class="docutils literal notranslate"><span class="pre">ssl=true</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:trino://sep.example.com:443
</pre></div>
</div>
<p>In the <strong>Common Name for Certificate</strong> field, enter the host name that is
covered in the TLS certificate, for example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sep.example.com
</pre></div>
</div>
<p>Make sure you save your TLS updates before you exit out of the <strong>Edit Service</strong>
section of the <strong>Service Manager</strong>.</p>
</section>
</section>
<section id="ranger-plugin-configuration">
<span id="id1"></span><h2 id="ranger-plugin-configuration">Ranger plugin configuration<a class="headerlink" href="#ranger-plugin-configuration" title="Permalink to this heading">#</a></h2>
<p>With Ranger installed and configured you are now ready to configure Ranger as
the activated <a class="reference internal" href="built-in-system-access-control.html"><span class="doc">access control system</span></a>. Update <code class="docutils literal notranslate"><span class="pre">etc/config.properties</span></code>
and set the path to your Ranger access control configuration file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">access-control.config-files</span><span class="o">=</span><span class="s">etc/access-control-ranger.properties</span>
</pre></div>
</div>
<p>Subsequently configure details in the file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">access-control.name</span><span class="o">=</span><span class="s">ranger</span>
<span class="na">ranger.policy-rest-url</span><span class="o">=</span><span class="s">http://ranger.example.com:6080</span>
<span class="na">ranger.service-name</span><span class="o">=</span><span class="s">starburst-enterprise</span>
<span class="na">ranger.username</span><span class="o">=</span><span class="s">&lt;username&gt;</span>
<span class="na">ranger.password</span><span class="o">=</span><span class="s">&lt;password&gt;</span>
<span class="na">ranger.policy-refresh-interval</span><span class="o">=</span><span class="s">30s</span>
</pre></div>
</div>
<p>More details about the supported <a class="reference internal" href="ranger-overview.html#ranger-config-properties"><span class="std std-ref">configuration properties are available in
the Ranger overview</span></a>.</p>
</section>
<section id="resource-and-privilege-sets">
<h2 id="resource-and-privilege-sets">Resource and privilege sets<a class="headerlink" href="#resource-and-privilege-sets" title="Permalink to this heading">#</a></h2>
<p>All resource and privilege sets, documented in the <a class="reference internal" href="ranger-overview.html#ranger-concepts"><span class="std std-ref">key concepts section
Ranger overview</span></a>, are available.</p>
</section>
<section id="denying-access-to-specific-tables-and-columns">
<span id="system-ranger-deny"></span><h2 id="denying-access-to-specific-tables-and-columns">Denying access to specific tables and columns<a class="headerlink" href="#denying-access-to-specific-tables-and-columns" title="Permalink to this heading">#</a></h2>
<p>You may need to restrict access for users to tables or columns for security or
other reasons.</p>
<section id="non-hive-catalogs">
<h3 id="non-hive-catalogs">Non-Hive catalogs<a class="headerlink" href="#non-hive-catalogs" title="Permalink to this heading">#</a></h3>
<p>The following example shows how to control access for users to tables or columns
in non-Hive catalogs, such as a PostgreSQL database exposed by a catalog
called``mypostgres``:</p>
<ul class="simple">
<li><p>In the SEP Ranger UI, create an <code class="docutils literal notranslate"><span class="pre">ALLOW</span></code> policy with <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>
access type and assign it to the users, groups or roles you need.</p></li>
<li><p>Add a pattern to allow all resources in the the <code class="docutils literal notranslate"><span class="pre">mypostgres</span></code> catalog:</p>
<ul>
<li><p>catalog: <code class="docutils literal notranslate"><span class="pre">mypostgres</span></code></p></li>
<li><p>schema: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>table: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>column: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
</ul>
</li>
<li><p>Create a similar policy in the UI, this time with the <code class="docutils literal notranslate"><span class="pre">DENY</span></code> type.</p></li>
<li><p>Add a pattern to deny access to the <code class="docutils literal notranslate"><span class="pre">empl_salary</span></code> column:</p>
<ul>
<li><p>catalog: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>schema: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>table: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>column: <code class="docutils literal notranslate"><span class="pre">empl_salary</span></code></p></li>
</ul>
</li>
</ul>
<p>You can proceed with layering more restrictive access policies for specific
columns and tables because Ranger processes <code class="docutils literal notranslate"><span class="pre">DENY</span></code> policies before <code class="docutils literal notranslate"><span class="pre">ALLOW</span></code>
policies for non-Hive catalogs.</p>
</section>
<section id="hive-catalogs">
<h3 id="hive-catalogs">Hive catalogs<a class="headerlink" href="#hive-catalogs" title="Permalink to this heading">#</a></h3>
<p>The following example shows how to achieve that for any <code class="docutils literal notranslate"><span class="pre">$path</span></code> column and any
<code class="docutils literal notranslate"><span class="pre">$partitions</span></code> table exposed by a catalog called <code class="docutils literal notranslate"><span class="pre">myhive</span></code>:</p>
<ul class="simple">
<li><p>In the Ranger UI, create an <code class="docutils literal notranslate"><span class="pre">ALLOW</span></code> policy with <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> access type and
assign it to the users, groups or roles you need.</p></li>
<li><p>Add a pattern to allow all resources in the the <code class="docutils literal notranslate"><span class="pre">myhive</span></code> catalog:</p>
<ul>
<li><p>catalog: <code class="docutils literal notranslate"><span class="pre">myhive</span></code></p></li>
<li><p>schema: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>table: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>column: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
</ul>
</li>
<li><p>Create a similar policy in the UI, this time with the <code class="docutils literal notranslate"><span class="pre">DENY</span></code> type.</p></li>
<li><p>Add a pattern to deny access to the <code class="docutils literal notranslate"><span class="pre">$path</span></code> column:</p>
<ul>
<li><p>catalog: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>schema: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>table: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>column: <code class="docutils literal notranslate"><span class="pre">$path</span></code></p></li>
</ul>
</li>
<li><p>Create another <code class="docutils literal notranslate"><span class="pre">DENY</span></code> policy in the UI that restricts access to
<code class="docutils literal notranslate"><span class="pre">$partitions</span></code> tables:</p>
<ul>
<li><p>catalog: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>schema: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>table: <code class="docutils literal notranslate"><span class="pre">*$partitions</span></code></p></li>
<li><p>column: <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
</ul>
</li>
</ul>
<p>This method of restricting access works, because Ranger processes <code class="docutils literal notranslate"><span class="pre">DENY</span></code>
policies before <code class="docutils literal notranslate"><span class="pre">ALLOW</span></code> policies, when evaluating conditions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">$path</span></code> column is an artificial column in Hive.  It contains information
about the location of data file. The <code class="docutils literal notranslate"><span class="pre">table$partitions</span></code> table contains
internal information about the partitioning of the table. All this information
should typically not be available to normal users. The above examples shows
how you can implement this best practice for catalogs using the Hive
connector.</p>
</div>
</section>
</section>
<section id="starburst-ranger-plugin-upgrade">
<span id="ranger-plugin-upgrade"></span><h2 id="starburst-ranger-plugin-upgrade">Starburst Ranger plugin upgrade<a class="headerlink" href="#starburst-ranger-plugin-upgrade" title="Permalink to this heading">#</a></h2>
<p><strong>Typically</strong> you automatically get the latest version of the SEP Ranger
plugin, when updating and there is <strong>no necessary configuration changes</strong> you
need to apply.</p>
<p>One exception is if you use user impersonation in combination with Ranger. This
feature is new with version 345-e, and if you are upgrading to that
release you need to perform the following manual upgrade steps.</p>
<p>Before starting this upgrade, you need to gather the following information:</p>
<ul class="simple">
<li><p>the path to your current SEP Ranger plugin,
<code class="docutils literal notranslate"><span class="pre">${RANGER_HOME}/ews/webapp/WEB-INF/lib/presto-ranger-plugin-*.jar</span></code> for
SEP 350-e or lower, or
<code class="docutils literal notranslate"><span class="pre">${RANGER_HOME}/ews/webapp/WEB-INF/lib/starburst-ranger-plugin-*.jar</span></code> for
newer releases</p></li>
<li><p>your Ranger host information</p></li>
<li><p>the Ranger plugin download for your SEP release</p></li>
</ul>
<p>The changes need to be performed while SEP is not running.</p>
<p>Remove the old plugin:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rm <span class="si">${</span><span class="nv">RANGER_HOME</span><span class="si">}</span>/ews/webapp/WEB-INF/lib/presto-ranger-plugin-*.jar
rm <span class="si">${</span><span class="nv">RANGER_HOME</span><span class="si">}</span>/ews/webapp/WEB-INF/lib/starburst-ranger-plugin-*.jar
</pre></div>
</div>
<p>Remove the old JDBC driver:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rm <span class="si">${</span><span class="nv">RANGER_HOME</span><span class="si">}</span>/ews/webapp/WEB-INF/lib/presto-jdbc-*.jar
rm <span class="si">${</span><span class="nv">RANGER_HOME</span><span class="si">}</span>/ews/webapp/WEB-INF/lib/trino-jdbc-*.jar
</pre></div>
</div>
<p>Add the new plugin:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cp starburst-ranger-plugin-*.jar <span class="si">${</span><span class="nv">RANGER_HOME</span><span class="si">}</span>/ews/webapp/WEB-INF/lib
</pre></div>
</div>
<p>Add the new JDBC driver:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cp trino-jdbc-*.jar <span class="si">${</span><span class="nv">RANGER_HOME</span><span class="si">}</span>/ews/webapp/WEB-INF/lib
</pre></div>
</div>
<p>Start Ranger:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="si">${</span><span class="nv">RANGER_BASE</span><span class="si">}</span>/start.sh
</pre></div>
</div>
<p>Recreate the SEP service definition in Ranger with the <a class="reference internal" href="ranger-overview.html#starburst-ranger-cli"><span class="std std-ref">Starburst Ranger
CLI</span></a> and the properties files as used in the
<a class="reference internal" href="#ranger-plugin-installation"><span class="std std-ref">initial installation</span></a>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>starburst-ranger-cli service-definition starburst override --properties<span class="o">=</span>access-control-ranger.properties
</pre></div>
</div>
<p>After the service definitions are updated, start SEP.</p>
<section id="upgrade-from-350-e-or-lower">
<h3 id="upgrade-from-350-e-or-lower">Upgrade from 350-e or lower<a class="headerlink" href="#upgrade-from-350-e-or-lower" title="Permalink to this heading">#</a></h3>
<p>Another exception is an upgrade from SEP version 350 or lower, to SEP
version 354 or higher. The following steps, using commands as mentioned in the
preceding section, are necessary in this situation:</p>
<ul class="simple">
<li><p>Export all policies from the <strong>starburst-enterprise-presto</strong> Ranger service
with the Ranger UI. This is required since the policies need to be associated
to the new service.</p></li>
<li><p>If you are not using LDAP Usersync then you must take note of the users and
groups that exists as these are deleted once you drop the database.</p></li>
<li><p>Remove the old version of the Ranger plugin <code class="docutils literal notranslate"><span class="pre">presto-ranger-plugin-*.jar</span></code>,
for Kubernetes deployments this is done automatically as part of the Helm
chart update.</p></li>
<li><p>Drop the Ranger database and recreate it, alternatively remove all tables in
the database.</p></li>
<li><p>Install the new version of the Starburst Ranger plugin
<code class="docutils literal notranslate"><span class="pre">starburst-ranger-plugin-*.jar</span></code> and the new version of the JDBC driver, for
Kubernetes deployments this is done automatically as part of the Helm chart
update.</p></li>
<li><p>Start Ranger.</p></li>
<li><p>Create the service <strong>starburst-enterprise</strong> in Ranger with the updated JDBC
details.</p></li>
<li><p>Import the policies into the new <strong>starburst-enterprise</strong> Ranger service
with the Ranger UI, and choose <strong>Override Policy</strong> to map to the new service
name.</p></li>
<li><p>Update the <a class="reference internal" href="#ranger-plugin-configuration"><span class="std std-ref">Ranger plugin configuration</span></a> with the new service name and
credentials.</p></li>
</ul>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="ranger-overview.html" title="Apache Ranger overview"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Apache Ranger overview </span>
              </div>
            </a>
          
          
            <a href="hive-ranger.html" title="Hive and Delta Lake access control with Apache Ranger"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Hive and Delta Lake access control with Apache Ranger </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/starburst_KO-T.png" height="26"
                  alt="Starburst Enterprise 402-e.12 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2022<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>