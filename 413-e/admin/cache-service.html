

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Cache service &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cache service CLI" href="cache-service-cli.html" />
    <link rel="prev" title="Table scan redirection" href="table-scan-redirection.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/admin/cache-service.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#admin/cache-service" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/starburst_KO-T.png"
                   alt="Starburst Enterprise 413-e.9 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 413-e.9 LTS</a>
          <span class="md-header-nav__topic"> Cache service </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="product-list">
    <h6 class="filter-label">Product:</h6>
  </div>
  <div id="versionsRefinementList" id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (423-e)" href="/423-e/">Latest LTS (423-e)</a>
      
          <a title="413-e LTS" href="/413-e/">413-e LTS</a>
      
          <a title="407-e LTS" href="/407-e/">407-e LTS</a>
      
          <a title="402-e LTS" href="/402-e/">402-e LTS</a>
      
          <a title="Latest STS (427-e)" href="/427-e/">Latest STS (427-e)</a>
      
          <a title="426-e STS" href="/426-e/">426-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/get-started/index.html" class="md-tabs__link">Get started</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/ecosystems/index.html" class="md-tabs__link">Ecosystems</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../admin.html" class="md-tabs__link">Performance, logging, and governance features</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/starburst_KO-T.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 413-e.9 LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Overview</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Features, use cases, and support</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For all users</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview/sep-ui.html" class="md-nav__link">Starburst Enterprise web UI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For data engineers</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For platform administrators</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Performance, logging, and governance features</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="../admin.html#feature-topic-areas" class="md-nav__link">Feature topic areas</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="../admin.html#properties-reference" class="md-nav__link">Properties reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html#performance-related-properties-and-features" class="md-nav__link">Performance-related properties and features</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html#sb-cached-views" class="md-nav__link">Starburst Cached Views</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html#data-governance" class="md-nav__link">Data governance</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html#platform-features" class="md-nav__link">Platform features</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html#other-resources" class="md-nav__link">Other resources</a>
      
    
    </li></ul>
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../starburst-rest-api.html" class="md-nav__link">Starburst Enterprise REST API</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Data sources</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connector overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../object-storage.html" class="md-nav__link">Object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html" class="md-nav__link">Non-object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../utilities.html" class="md-nav__link">Utilities</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector/starburst-connectors.html" class="md-nav__link">Starburst connectors feature matrix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">SQL reference</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">413-e.9 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Appendix</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Version-specific notices and information</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#admin-cache-service--page-root" class="md-nav__link">Cache service</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#linux-operating-system" class="md-nav__link">Linux Operating System</a>
        </li>
        <li class="md-nav__item"><a href="#java-runtime-environment" class="md-nav__link">Java Runtime Environment</a>
        </li>
        <li class="md-nav__item"><a href="#python" class="md-nav__link">Python</a>
        </li>
        <li class="md-nav__item"><a href="#relational-database" class="md-nav__link">Relational database</a>
        </li>
        <li class="md-nav__item"><a href="#materialized-views" class="md-nav__link">Materialized views</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#deploy-the-cache-service" class="md-nav__link">Deploy the cache service</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#standalone-deployment" class="md-nav__link">Standalone deployment</a>
        </li>
        <li class="md-nav__item"><a href="#embedded-deployment" class="md-nav__link">Embedded deployment</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#run-the-cache-service" class="md-nav__link">Run the cache service</a>
        </li>
        <li class="md-nav__item"><a href="#configure-the-cache-service" class="md-nav__link">Configure the cache service</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#general-configuration-properties" class="md-nav__link">General configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#http-tls-and-authentication-configuration-properties" class="md-nav__link">HTTP/TLS and authentication configuration properties</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#configure-the-cache-service-for-https-tls-connections" class="md-nav__link">Configure the cache service for HTTPS/TLS connections</a>
        </li>
        <li class="md-nav__item"><a href="#configure-the-cache-service-for-insecure-http-connections" class="md-nav__link">Configure the cache service for insecure HTTP connections</a>
        </li>
        <li class="md-nav__item"><a href="#file-based-authentication" class="md-nav__link">File-based authentication</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#database-related-configuration-properties" class="md-nav__link">Database-related configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#table-import-configuration-properties" class="md-nav__link">Table import configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#configuration-properties-for-table-scan-redirection" class="md-nav__link">Configuration properties for table scan redirection</a>
        </li>
        <li class="md-nav__item"><a href="#log-levels-configuration-property" class="md-nav__link">Log levels configuration property</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#type-mapping" class="md-nav__link">Type mapping</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#type-mapping-behavior" class="md-nav__link">Type mapping behavior</a>
        </li>
        <li class="md-nav__item"><a href="#type-mapping-configuration" class="md-nav__link">Type mapping configuration</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#jvm-configuration" class="md-nav__link">JVM configuration</a>
        </li>
        <li class="md-nav__item"><a href="#jmx-metrics" class="md-nav__link">JMX metrics</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="cache-service">
<h1 id="admin-cache-service--page-root">Cache service<a class="headerlink" href="#admin-cache-service--page-root" title="Permalink to this heading">#</a></h1>
<p>The Starburst Enterprise platform (SEP) cache service provides the ability to configure and automate the
management of <a class="reference internal" href="table-scan-redirection.html"><span class="doc">table scan redirections</span></a> and
materialized views in supported connectors.</p>
<p>The service connects to an existing SEP installation to run queries for
copying data from the source catalog to the target catalog. The target catalog
is regularly synchronized with the source and used as a cache.</p>
<p>The cache service can be run as a standalone service or within the coordinator
process. You can interact with it using its REST API, or the <a class="reference internal" href="cache-service-cli.html"><span class="doc">cache service
CLI</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The cache service requires a valid
<a class="reference internal" href="../installation/license-requirements.html"><span class="doc">Starburst Enterprise license</span></a>.</p>
</div>
<section id="requirements">
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<p>The cache service has similar requirements to SEP, which are described on
the <a class="reference internal" href="../installation/deployment.html"><span class="doc">Deploying</span></a> page. In particular, you must
enable and configure the <a class="reference internal" href="query-logger.html"><span class="doc">query logger</span></a>.</p>
<section id="linux-operating-system">
<h3 id="linux-operating-system">Linux Operating System<a class="headerlink" href="#linux-operating-system" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>64-bit required</p></li>
<li><p>Newer release preferred, especially when running on containers</p></li>
</ul>
</section>
<section id="java-runtime-environment">
<h3 id="java-runtime-environment">Java Runtime Environment<a class="headerlink" href="#java-runtime-environment" title="Permalink to this heading">#</a></h3>
<p>The cache service requires a 64-bit version of Java 17.</p>
</section>
<section id="python">
<h3 id="python">Python<a class="headerlink" href="#python" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>version 2.6.x, 2.7.x, or 3.x</p></li>
<li><p>required by the <code class="docutils literal notranslate"><span class="pre">bin/launcher</span></code> script only</p></li>
</ul>
</section>
<section id="relational-database">
<span id="cache-service-external-rdbms"></span><h3 id="relational-database">Relational database<a class="headerlink" href="#relational-database" title="Permalink to this heading">#</a></h3>
<p>The cache service requires an externally managed database for storing table scan
redirections data and materialized view definitions. The following RDBMS are
supported:</p>
<ul class="simple">
<li><p>MySQL 8.0.12 or higher</p></li>
<li><p>PostgreSQL 9.6 or higher</p></li>
<li><p>OracleDB 12.2.0.1 or higher</p></li>
</ul>
</section>
<section id="materialized-views">
<h3 id="materialized-views">Materialized views<a class="headerlink" href="#materialized-views" title="Permalink to this heading">#</a></h3>
<p>The cache service handles materialized view refreshes. To enable this, each
supported catalog where storage tables reside must be <a class="reference internal" href="../connector/starburst-hive.html#sb-hive-mv-catalog-config"><span class="std std-ref">configured to allow
the creation of these tables</span></a>.</p>
</section>
</section>
<section id="deploy-the-cache-service">
<h2 id="deploy-the-cache-service">Deploy the cache service<a class="headerlink" href="#deploy-the-cache-service" title="Permalink to this heading">#</a></h2>
<p>The cache service can be deployed either as a standalone application separate
from your SEP cluster or within the existing coordinator process. The cache
service is available at the configured <code class="docutils literal notranslate"><span class="pre">cache-service.uri</span></code> for both
standalone and embedded deployments.</p>
<section id="standalone-deployment">
<span id="cache-service-standalone"></span><h3 id="standalone-deployment">Standalone deployment<a class="headerlink" href="#standalone-deployment" title="Permalink to this heading">#</a></h3>
<p>A standalone deployment ensures that the service is not affected by coordinator
performance, or the deployment of a new release on the SEP cluster.</p>
<p>Deployment of the cache service in Kubernetes can be
<a class="reference external" href="../../starburst-enterprise/k8s/deploy-cache-service.html">managed with the available Helm chart</a>.</p>
<p>Manual deployment relies on using a tarball:</p>
<ul class="simple">
<li><p>To download the cache service binary file, contact Starburst Support</p></li>
<li><p>Starburst Support provides access to a file named much like
<code class="docutils literal notranslate"><span class="pre">starburst-cache-service-*.tar.gz</span></code></p></li>
<li><p>Extract it, for example with <code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">xfvz</span> <span class="pre">starburst-cache-service-*.tar.gz</span></code></p></li>
</ul>
<p>The resulting directory <code class="docutils literal notranslate"><span class="pre">starburst-cache-service-nnn</span></code>, with <em>nnn</em> replaced by
the release number, is called the <em>installation</em> directory. It contains all
necessary resources.</p>
<p>Move the extracted directory into the desired location, such as <code class="docutils literal notranslate"><span class="pre">/opt/</span></code>, and
you are ready to proceed with configuring the service.</p>
</section>
<section id="embedded-deployment">
<span id="cache-service-embedded"></span><h3 id="embedded-deployment">Embedded deployment<a class="headerlink" href="#embedded-deployment" title="Permalink to this heading">#</a></h3>
<p>The cache service can be setup to run embedded within the coordinator process by
<a class="reference internal" href="#cache-service-config-properties"><span class="std std-ref">configuring the cache service</span></a> on the
coordinator in <code class="docutils literal notranslate"><span class="pre">etc/cache.properties</span></code>. This mode of deployment does not
require installation of any additional packages or running a separate service.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When running in embedded mode, the cache service uses the coordinator’s
resources such as the JVM and logging. This additional resource usage must be
planned for when sizing your cluster.</p>
</div>
</section>
</section>
<section id="run-the-cache-service">
<span id="running-cache-service"></span><h2 id="run-the-cache-service">Run the cache service<a class="headerlink" href="#run-the-cache-service" title="Permalink to this heading">#</a></h2>
<p>Once deployed and <a class="reference internal" href="#cache-service-config-properties"><span class="std std-ref">configured</span></a>, the cache
service is run using the launcher script in <code class="docutils literal notranslate"><span class="pre">bin/launcher</span></code> as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bin/launcher start
</pre></div>
</div>
<p>Alternatively, it can be run in the foreground, with the logs and other output
written to stdout/stderr. Both streams should be captured if using a supervision
system like <code class="docutils literal notranslate"><span class="pre">daemontools</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bin/launcher run
</pre></div>
</div>
<p>Run the launcher with <code class="docutils literal notranslate"><span class="pre">--help</span></code> to see the supported commands and command line
options. In particular, the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option is very useful for debugging
the installation.</p>
<p>The launcher configures default values for the configuration directory <code class="docutils literal notranslate"><span class="pre">etc</span></code>,
configuration files, the data directory <code class="docutils literal notranslate"><span class="pre">var</span></code>, and log files in the data
directory. You can change these values to adjust your usage to any requirements,
such as using a directory outside the installation directory, specific mount
points or locations, and even using other file names.</p>
<p>After starting the cache service, you can find log files in the <code class="docutils literal notranslate"><span class="pre">log</span></code>
directory inside the data directory <code class="docutils literal notranslate"><span class="pre">var</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">launcher.log</span></code>:
This log is created by the launcher and is connected to the stdout and stderr
streams of the server. It contains a few log messages that occur while the
server logging is being initialized, and any errors or diagnostics produced by
the JVM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">server.log</span></code>:
This is the main log file used by the service. It typically contains the
relevant information if the server fails during initialization. It is
automatically rotated and compressed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">http-request.log</span></code>:
This is the HTTP request log which contains every HTTP request received by the
server. It is automatically rotated and compressed.</p></li>
</ul>
</section>
<section id="configure-the-cache-service">
<span id="cache-service-config-properties"></span><h2 id="configure-the-cache-service">Configure the cache service<a class="headerlink" href="#configure-the-cache-service" title="Permalink to this heading">#</a></h2>
<p>The following files must exist inside the installation directory to hold the
following configuration files. These files are used by the cache service alone
in a standalone deployment, or by both the cache service and the coordinator in
an embedded deployment:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">etc/jvm.config</span></code> -  <a class="reference internal" href="#cache-service-jvm-config"><span class="std std-ref">command line configurations options for starting
the Java Virtual Machine (JVM)</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">etc/config.properties</span></code> - <a class="reference internal" href="#cache-service-config-properties"><span class="std std-ref">configuration for the cache
service</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">etc/log.properties</span></code> - optional <a class="reference internal" href="#cache-service-log-properties"><span class="std std-ref">logging
configuration</span></a></p></li>
</ul>
<p>The following file is specific to the cache service, and must also
exist inside the installation directory to support type mapping:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">etc/type-mapping.json</span></code> - optional
<a class="reference internal" href="#cache-service-type-mapping"><span class="std std-ref">JSON file</span></a> to specify type mapping
between source and target catalogs.</p></li>
</ul>
<p>The following file is specific the table scan redirection feature of the cache
service, and must also exist inside the installation directory to support define
table scan redirection rules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">etc/rules.json</span></code> -  <a class="reference internal" href="table-scan-redirection.html#table-scan-redirection-rule-sets"><span class="std std-ref">JSON file</span></a>
specifying the source tables and target connector for the cache along with the
schedule for refreshing them</p></li>
</ul>
<section id="general-configuration-properties">
<span id="cache-service-general-config-properties"></span><h3 id="general-configuration-properties">General configuration properties<a class="headerlink" href="#general-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The configuration properties file, <code class="docutils literal notranslate"><span class="pre">etc/config.properties</span></code>, contains the
configuration for the cache service, when deployed as a <a class="reference internal" href="#cache-service-standalone"><span class="std std-ref">standalone system</span></a>. Users of the <a class="reference internal" href="#cache-service-embedded"><span class="std std-ref">embedded mode</span></a> use a <code class="docutils literal notranslate"><span class="pre">etc/cache.properties</span></code> file on the coordinator
with the same properties.</p>
<p>The following is a minimal configuration for the service:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>service-database.user=alice
service-database.password=test123
service-database.jdbc-url=jdbc:mysql://mysql-server:3306/&lt;service-database-name&gt;
starburst.user=bob
starburst.jdbc-url=jdbc:trino://coordinator:8080
rules.file=etc/rules.json
</pre></div>
</div>
<p>The properties to configure the cache service are explained in detail in the
following sections.</p>
<table id="id1">
<caption><span class="caption-text">General configuration properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">starburst.user</span></code></p></td>
<td><p>Username to connect to the SEP cluster for executing queries to refresh
the cached tables. This user must also be able to read the source tables
for any materialized views it refreshes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">starburst.password</span></code></p></td>
<td><p>Password to connect to the SEP cluster when password based
authentication is enabled on the SEP cluster.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">starburst.jdbc-url</span></code></p></td>
<td><p>JDBC URL of the SEP cluster used for executing queries to refresh the
cached tables. You can use <a class="reference internal" href="../client/jdbc.html"><span class="doc">JDBC driver parameters</span></a> in
the connection string to configure details of the connection. For example,
use <code class="docutils literal notranslate"><span class="pre">jdbc:trino://coordinator:8080?SSL=true</span></code> for a cluster secured with
TLS.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cache-service.uri</span></code></p></td>
<td><p>URI of the cache service, including the hostname and port number.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rules.file</span></code></p></td>
<td><p>Path to the JSON file containing rules for identifying source tables and
target connector for caching. It also specifies a schedule for refreshing
cached tables.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rules.refresh-period</span></code></p></td>
<td><p>Frequency at which cache rules are refreshed from the <code class="docutils literal notranslate"><span class="pre">rules.file</span></code>.
Defaults to <code class="docutils literal notranslate"><span class="pre">1m</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max-table-import-threads</span></code></p></td>
<td><p>Maximum number of table import jobs that can be run in parallel. Defaults
to <code class="docutils literal notranslate"><span class="pre">20</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">refresh-interval</span></code></p></td>
<td><p>Frequency at which the cache service triggers refresh of cached tables
and checks for a need to refresh materialized views based on their refresh
interval and cron expression. Do not set this cache service interval to
large values that can cause defined materialized view refreshes to be
skipped. Defaults to <code class="docutils literal notranslate"><span class="pre">2m</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">refresh-initial-delay</span></code></p></td>
<td><p>Initial delay for startup of the refresh.
Defaults to <code class="docutils literal notranslate"><span class="pre">0s</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cleanup-interval</span></code></p></td>
<td><p>Frequency at which cache service triggers cleanup of expired tables in the
cache. Defaults to <code class="docutils literal notranslate"><span class="pre">5m</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cleanup-initial-delay</span></code></p></td>
<td><p>Initial delay for startup of the cleanup. Defaults to <code class="docutils literal notranslate"><span class="pre">0s</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="http-tls-and-authentication-configuration-properties">
<span id="cache-service-authentication"></span><h3 id="http-tls-and-authentication-configuration-properties">HTTP/TLS and authentication configuration properties<a class="headerlink" href="#http-tls-and-authentication-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The following properties allow you to configure the cache service to use either
HTTP or HTTPS, and to set up file-based authentication if appropriate for your
environment.</p>
<table id="id2">
<caption><span class="caption-text">HTTP/TLS and authentication properties</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 60%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.http.port</span></code></p></td>
<td><p>HTTP port for the cache service</p></td>
<td><p>8180</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.port</span></code></p></td>
<td><p>HTTPS port of the cache service</p></td>
<td><p>8543</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.enabled</span></code></p></td>
<td><p>Flag to activate HTTPS/TLS</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.authentication.type</span></code></p></td>
<td><p>Authentication type used for the cache service, use <code class="docutils literal notranslate"><span class="pre">password</span></code> for
password file based authentication</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.keystore.path</span></code></p></td>
<td><p>Path to the JKS keystore file used for TLS</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http-server.https.keystore.key</span></code></p></td>
<td><p>Name of the key in the JKS keystore used for TLS</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">file.password-file</span></code></p></td>
<td><p>Path to the password file used with the <a class="reference internal" href="../security/password-file.html"><span class="doc">file authentication type</span></a></p></td>
<td></td>
</tr>
</tbody>
</table>
<section id="configure-the-cache-service-for-https-tls-connections">
<h4 id="configure-the-cache-service-for-https-tls-connections">Configure the cache service for HTTPS/TLS connections<a class="headerlink" href="#configure-the-cache-service-for-https-tls-connections" title="Permalink to this heading">#</a></h4>
<p>To configure the cache service to use HTTPS connections, add the following
configuration properties to the <code class="docutils literal notranslate"><span class="pre">cache.properties</span></code> file on the coordinator:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">starburst</span><span class="p">.</span><span class="k">user</span><span class="o">=&lt;</span><span class="n">starburst</span><span class="o">-</span><span class="k">user</span><span class="o">&gt;</span>
<span class="n">starburst</span><span class="p">.</span><span class="n">password</span><span class="o">=&lt;</span><span class="n">starburst</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
<span class="n">starburst</span><span class="p">.</span><span class="n">jdbc</span><span class="o">-</span><span class="n">url</span><span class="o">=</span><span class="n">jdbc</span><span class="p">:</span><span class="n">trino</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">coordinator</span><span class="o">-</span><span class="n">hostname</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">8443</span><span class="o">?</span><span class="n">SSL</span><span class="o">=</span><span class="k">true</span>
</pre></div>
</div>
<p>This example assumes that your cluster has the default <code class="docutils literal notranslate"><span class="pre">8443</span></code> HTTPS port
already enabled.</p>
<p>You can configure the cache service to accept incoming HTTPS connections on a
custom port by using the <code class="docutils literal notranslate"><span class="pre">http-server.https.port</span></code> configuration property in
the <code class="docutils literal notranslate"><span class="pre">cache.properties</span></code> file:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="o">-</span><span class="n">server</span><span class="p">.</span><span class="n">https</span><span class="p">.</span><span class="n">port</span><span class="o">=&lt;</span><span class="n">custom</span><span class="o">-</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="configure-the-cache-service-for-insecure-http-connections">
<h4 id="configure-the-cache-service-for-insecure-http-connections">Configure the cache service for insecure HTTP connections<a class="headerlink" href="#configure-the-cache-service-for-insecure-http-connections" title="Permalink to this heading">#</a></h4>
<p>To configure the cache service to use HTTP connections, add the following
configuration properties to your <code class="docutils literal notranslate"><span class="pre">cache.properties</span></code> file:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">starburst</span><span class="p">.</span><span class="k">user</span><span class="o">=</span><span class="k">cache</span><span class="o">-</span><span class="n">service</span>
<span class="n">starburst</span><span class="p">.</span><span class="n">jdbc</span><span class="o">-</span><span class="n">url</span><span class="o">=</span><span class="n">jdbc</span><span class="p">:</span><span class="n">trino</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">coordinator</span><span class="o">-</span><span class="n">hostname</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">8080</span>
</pre></div>
</div>
<p>The following configuration property must also be set in the
<code class="docutils literal notranslate"><span class="pre">config.properties</span></code> file:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">server</span><span class="p">.</span><span class="n">authentication</span><span class="p">.</span><span class="n">allow</span><span class="o">-</span><span class="n">insecure</span><span class="o">-</span><span class="n">over</span><span class="o">-</span><span class="n">http</span><span class="o">=</span><span class="k">true</span>
</pre></div>
</div>
<p>This example assumes that your cluster has the default <code class="docutils literal notranslate"><span class="pre">8080</span></code> HTTP
port still enabled.</p>
<p>You can configure the cache service to accept incoming HTTP connections on a
custom port by using the <code class="docutils literal notranslate"><span class="pre">http-server.http.port</span></code> configuration property in the
<code class="docutils literal notranslate"><span class="pre">cache.properties</span></code> file:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="o">-</span><span class="n">server</span><span class="p">.</span><span class="n">http</span><span class="p">.</span><span class="n">port</span><span class="o">=&lt;</span><span class="n">custom</span><span class="o">-</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="file-based-authentication">
<span id="cache-service-file-based-authentication"></span><h4 id="file-based-authentication">File-based authentication<a class="headerlink" href="#file-based-authentication" title="Permalink to this heading">#</a></h4>
<p>File-based password authentication can be configured for the cache service
by adding the following properties in the <code class="docutils literal notranslate"><span class="pre">config.properties</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http-server.https.enabled=true
http-server.authentication.type=password
http-server.https.keystore.path=etc/auth/localhost.keystore
http-server.https.keystore.key=changeit
file.password-file=etc/auth/password.db
</pre></div>
</div>
</section>
</section>
<section id="database-related-configuration-properties">
<span id="cache-service-database-config-properties"></span><h3 id="database-related-configuration-properties">Database-related configuration properties<a class="headerlink" href="#database-related-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The following required properties allow you to configure the connectivity to the
service database used for storing redirections.</p>
<table id="id3">
<caption><span class="caption-text">Database-related configuration properties</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.user</span></code></p></td>
<td><p>Username used to connect to the database storing table redirections</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.password</span></code></p></td>
<td><p>Password used to connect to the database storing table redirections</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.jdbc-url</span></code></p></td>
<td><p>JDBC URL of the database storing table redirections, only MySQL,
PostgreSQL and Oracle URLs are supported</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.connection-pool.enabled</span></code></p></td>
<td><p>Enables pooling for connections to the service database. Defaults to
<code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.connection-pool.max-size</span></code></p></td>
<td><p>Maximum number of connections in the pool. Defaults to <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">service-database.connection-pool.idle-timeout</span></code></p></td>
<td><p>Maximum time an idle connection is kept in the pool. Defaults to <code class="docutils literal notranslate"><span class="pre">10m</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="table-import-configuration-properties">
<span id="cache-service-table-import-config-properties"></span><h3 id="table-import-configuration-properties">Table import configuration properties<a class="headerlink" href="#table-import-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The following optional properties allow you to configure the table import
configuration used when running queries on SEP to populate the cached views.</p>
<table id="id4">
<caption><span class="caption-text">Cache service cached view import properties</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 60%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unpartitioned.writer-count</span></code></p></td>
<td><p>Number of writers per task when writing unpartitioned table</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unpartitioned.scale-writers</span></code></p></td>
<td><p>Scale writers when writing unpartitioned table</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unpartitioned.writer-min-size</span></code></p></td>
<td><p>Target minimum size of writer output when writing unpartitioned table
with writers scaling</p></td>
<td><p>32MB</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.use-preferred-write-partitioning</span></code></p></td>
<td><p>Use table partitioning to parallelize writes between worker nodes when
writing to a partitioned table. This reduces import memory usage and
improves cached table file sizes.</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.preferred-write-partitioning-min-number-of-partitions</span></code></p></td>
<td><p>The minimum number of written partitions that is required to use connector
<code class="docutils literal notranslate"><span class="pre">preferred</span> <span class="pre">write</span> <span class="pre">partitioning</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.writer-count</span></code></p></td>
<td><p>Number of writers per task when writing partitioned table</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.scale-writers</span></code></p></td>
<td><p>Scale writers when writing partitioned table</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned.writer-min-size</span></code></p></td>
<td><p>Target minimum size of writer output when writing partitioned table with
writers scaling</p></td>
<td><p>32MB</p></td>
</tr>
</tbody>
</table>
</section>
<section id="configuration-properties-for-table-scan-redirection">
<span id="cache-service-import-config-settings"></span><h3 id="configuration-properties-for-table-scan-redirection">Configuration properties for table scan redirection<a class="headerlink" href="#configuration-properties-for-table-scan-redirection" title="Permalink to this heading">#</a></h3>
<p>The global table scan redirection properties for
<code class="docutils literal notranslate"><span class="pre">defaultPartitionedImportConfig</span></code> and <code class="docutils literal notranslate"><span class="pre">defaultUnpartitionedImportConfig</span></code>, as
well as the rule-specific <code class="docutils literal notranslate"><span class="pre">importConfig</span></code> and <code class="docutils literal notranslate"><span class="pre">incrementalImportConfig</span></code>
properties for table scan redirection use the following sub-properties:</p>
<table id="id5">
<caption><span class="caption-text">Table scan redirection-specific configuration properties</span><a class="headerlink" href="#id5" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 40%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>usePreferredWritePartitioning</p></td>
<td><p>Implements
<a class="reference internal" href="properties-write-partitioning.html"><span class="doc">use-preferred-write-partitioning</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>preferredWritePartitioningMinNumberOfPartitions</p></td>
<td><p>Implements
<a class="reference internal" href="properties-write-partitioning.html"><span class="doc">preferred-write-partitioning-min-number-of-partitions</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>writerCount</p></td>
<td><p>Implements <a class="reference internal" href="properties-task.html"><span class="doc">task.writer-count</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>scaleWriters</p></td>
<td><p>Implements <a class="reference internal" href="properties-writer-scaling.html"><span class="doc">scale-writers</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>writerMinSize</p></td>
<td><p>Implements <a class="reference internal" href="properties-writer-scaling.html"><span class="doc">writer-min-size</span></a>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="log-levels-configuration-property">
<span id="cache-service-log-properties"></span><h3 id="log-levels-configuration-property">Log levels configuration property<a class="headerlink" href="#log-levels-configuration-property" title="Permalink to this heading">#</a></h3>
<p>The optional log levels file, <code class="docutils literal notranslate"><span class="pre">etc/log.properties</span></code>, allows setting the
minimum log level for named logger hierarchies. There are four decreasingly
verbose levels: <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARN</span></code> and <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>. The default
logging level is <code class="docutils literal notranslate"><span class="pre">INFO</span></code>.</p>
<p>Every logger has a name,
which is typically the fully qualified name of the class that uses the logger.
Loggers have a hierarchy based on the dots in the name, like Java packages.
For example, consider the following log levels file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>com.starburstdata.cache=WARN
</pre></div>
</div>
<p>This sets the minimum level to <code class="docutils literal notranslate"><span class="pre">WARN</span></code> for both <code class="docutils literal notranslate"><span class="pre">com.starburstdata.cache.db</span></code>
and <code class="docutils literal notranslate"><span class="pre">com.starburstdata.cache.rules</span></code>.</p>
</section>
</section>
<section id="type-mapping">
<span id="cache-service-type-mapping"></span><h2 id="type-mapping">Type mapping<a class="headerlink" href="#type-mapping" title="Permalink to this heading">#</a></h2>
<p>Type mapping overcomes missing type support in target storage catalogs for cache
service-manged <a class="reference internal" href="table-scan-redirection.html"><span class="doc">table scan redirections</span></a> and
<a class="reference internal" href="../connector/starburst-hive.html#sb-hive-materialized-views"><span class="std std-ref">materialized views</span></a> with Hive as the target
catalog. It allows your users to create materialized views without the need to
perform <a class="reference internal" href="../functions/conversion.html"><span class="doc">data type casting</span></a>, and allows data
engineers to create cached table projections in target catalogs where there is
not a one-to-one type mapping. Type mapping uses definitions in a JSON file,
<code class="docutils literal notranslate"><span class="pre">type-mapping.json</span></code>, to define type casting rules used when the target catalog
is created or updated.</p>
<p>Mappings are key-value pairs as <code class="docutils literal notranslate"><span class="pre">source:</span> <span class="pre">target</span></code>. The following example shows
how to construct type mapping rules for the target catalog, <code class="docutils literal notranslate"><span class="pre">myhivesalesdata</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"rules"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"myhivesalesdata"</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">"timestamp(0)"</span><span class="p">:</span> <span class="s2">"timestamp(3)"</span><span class="p">,</span>
      <span class="nt">"timestamp(1)"</span><span class="p">:</span> <span class="s2">"timestamp(3)"</span><span class="p">,</span>
      <span class="nt">"timestamp(2)"</span><span class="p">:</span> <span class="s2">"timestamp(3)"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each target catalog has a separate entry in the JSON file. The Trino name of any
type that is supported by the source catalog can be used as a key in the type
map. Values must be Trino types supported by the target catalog.</p>
<p>Type casting is applied to regular columns, partition columns, and the column
used for incremental update.</p>
<section id="type-mapping-behavior">
<h3 id="type-mapping-behavior">Type mapping behavior<a class="headerlink" href="#type-mapping-behavior" title="Permalink to this heading">#</a></h3>
<p>Columns can only be cast based on their type. It is impossible to cast one
column of a given type without casting all columns of that same type.</p>
<p>There are pre-configured type mappings <code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_MILLISECONDS</span></code>,
<code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_MICROSECONDS</span></code> and <code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_NANOSECONDS</span></code> that
can only be set using cache properties, not via the JSON type mapping. These
mappings extend the precision of all timestamp-related types, they never
truncate data, and ignore the target catalog name.</p>
<p>Some mappings, like <code class="docutils literal notranslate"><span class="pre">integer</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">varchar</span></code>, can change the semantics of the
<code class="docutils literal notranslate"><span class="pre">max()</span></code> function used for calculating the contents of an incremental update.
For example <code class="docutils literal notranslate"><span class="pre">"-1"</span> <span class="pre">&gt;</span> <span class="pre">"7"</span></code> because string lengths are compared first, so in
incremental update the row with <code class="docutils literal notranslate"><span class="pre">"-1"</span></code> is added even if the table already
contains data up to <code class="docutils literal notranslate"><span class="pre">"7"</span></code>.</p>
<p>Using timestamp columns for partitioning is strongly discouraged. Timestamp
partitions are silently changed to <code class="docutils literal notranslate"><span class="pre">timestamp(3)</span></code> while being written. This
behavior can result in  loss of precision for some columns. Additionally, it can
lead to a huge amount of partitions, which negatively impacts performance.</p>
</section>
<section id="type-mapping-configuration">
<span id="cache-service-type-mapping-configuration"></span><h3 id="type-mapping-configuration">Type mapping configuration<a class="headerlink" href="#type-mapping-configuration" title="Permalink to this heading">#</a></h3>
<p>The following optional properties allow configuring type mapping rules:</p>
<table id="id6">
<caption><span class="caption-text">Cache service type mapping configuration</span><a class="headerlink" href="#id6" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type-mapping</span></code></p></td>
<td><p>Set the kind of type mapping to apply:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_MILLISECONDS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_MICROSECONDS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CAST_TIMESTAMPS_TO_NANOSECONDS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FILE</span></code></p></li>
</ul>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type-mapping.file</span></code></p></td>
<td><p>Path to the <a class="reference internal" href="#cache-service-config-properties"><span class="std std-ref">JSON file</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type-mapping.file.refresh-period</span></code></p></td>
<td><p>Frequency to use to refresh the type mapping rules from the
<code class="docutils literal notranslate"><span class="pre">type-mapping.file</span></code> file. Defaults to <code class="docutils literal notranslate"><span class="pre">1m</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="jvm-configuration">
<span id="cache-service-jvm-config"></span><h2 id="jvm-configuration">JVM configuration<a class="headerlink" href="#jvm-configuration" title="Permalink to this heading">#</a></h2>
<p>The Java Virtual Machine (JVM) config file, <code class="docutils literal notranslate"><span class="pre">etc/jvm.config</span></code>, contains a list
of command line options used for launching the JVM running the cache service
for the cache service, when deployed as a <a class="reference internal" href="#cache-service-standalone"><span class="std std-ref">standalone system</span></a>. When deployed embedded within the coordinator, the
contents of the <code class="docutils literal notranslate"><span class="pre">etc/jvm.config</span></code> apply to both the cache-service and to all
other services and processes running on the coordinator.</p>
<p>The format of the file is a list of options, one per line. These options are not
interpreted by the shell, so options containing spaces, or other special
characters, should not be quoted.</p>
<p>The following is a basic <code class="docutils literal notranslate"><span class="pre">etc/jvm.config</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-server
-Xmx512M
-XX:+ExitOnOutOfMemoryError
-XX:+HeapDumpOnOutOfMemoryError
</pre></div>
</div>
<p>An <code class="docutils literal notranslate"><span class="pre">OutOfMemoryError</span></code> typically leaves the JVM in an inconsistent state. The
above configuration causes the JVM to write a heap dump file for debugging, and
forcibly terminate the process when this occurs.</p>
</section>
<section id="jmx-metrics">
<h2 id="jmx-metrics">JMX metrics<a class="headerlink" href="#jmx-metrics" title="Permalink to this heading">#</a></h2>
<p>Metrics about table import are reported in the JMX table
<code class="docutils literal notranslate"><span class="pre">jmx.current."com.starburstdata.cache:name=TableImportService"</span></code>.</p>
<p>Metrics about cached table cleanup are reported in the JMX table
<code class="docutils literal notranslate"><span class="pre">jmx.current."com.starburstdata.cache:name=CleanupService"</span></code>.</p>
<p>Metrics about redirections requests on the web service resources are reported in
the JMX table
<code class="docutils literal notranslate"><span class="pre">jmx.current."com.starburstdata.cache.resource:name=RedirectionsResource"</span></code>.</p>
<p>Metrics about table import and expiration requests on the web service resource are reported in
the JMX table
<code class="docutils literal notranslate"><span class="pre">jmx.current."com.starburstdata.cache.resource:name=CacheResource"</span></code>.</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="table-scan-redirection.html" title="Table scan redirection"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Table scan redirection </span>
              </div>
            </a>
          
          
            <a href="cache-service-cli.html" title="Cache service CLI"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Cache service CLI </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/starburst_KO-T.png" height="26"
                  alt="Starburst Enterprise 413-e.9 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/413-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/413-e/_static/searchbox.js" data-versions="{'Latest LTS (423-e)': '/423-e/', '413-e LTS': '/413-e/', '407-e LTS': '/407-e/', '402-e LTS': '/402-e/', 'Latest STS (427-e)': '/427-e/', '426-e STS': '/426-e/'}"></script>
<script src="https://docs.starburst.io/413-e/_static/searchresults.js" data-versions="{'Latest LTS (423-e)': '/423-e/', '413-e LTS': '/413-e/', '407-e LTS': '/407-e/', '402-e LTS': '/402-e/', 'Latest STS (427-e)': '/427-e/', '426-e STS': '/426-e/'}"></script>
  </body>
</html>