

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Delta Lake connector &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Starburst HBase connector" href="starburst-hbase.html" />
    <link rel="prev" title="BigQuery connector" href="bigquery.html" />

  
   

<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/connector/delta-lake.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#connector/delta-lake" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/starburst_KO-T.png"
                   alt="Starburst Enterprise 413-e.6 LTS logo">
          
        </a>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <a href="/starburst-enterprise/index.html"
          class="md-header-nav__topic">
          Documentation: Starburst Enterprise 413-e.6 LTS</a>
          <span class="md-header-nav__topic"> Delta Lake connector </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="version-list" style="display:none"></div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (423-e)" href="/423-e/">Latest LTS (423-e)</a>
      
          <a title="413-e LTS" href="/413-e/">413-e LTS</a>
      
          <a title="407-e LTS" href="/407-e/">407-e LTS</a>
      
          <a title="402-e LTS" href="/402-e/">402-e LTS</a>
      
          <a title="Latest STS (426-e)" href="/426-e/">Latest STS (426-e)</a>
      
          <a title="422-e STS" href="/422-e/">422-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="/get-started/index.html" class="md-tabs__link">Get started</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-galaxy/index.html" class="md-tabs__link">Starburst Galaxy</a></li>
            
            <li class="md-tabs__item"><a href="/starburst-enterprise/index.html" class="md-tabs__link">Starburst Enterprise</a></li>
            
            <li class="md-tabs__item"><a href="/ecosystems/index.html" class="md-tabs__link">Ecosystems</a></li>
            
            <li class="md-tabs__item"><a href="/resources.html" class="md-tabs__link">Resources</a></li>
          <li class="md-tabs__item"><a href="../non-object-storage.html" class="md-tabs__link">Non-object storage connectors</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/starburst_KO-T.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 413-e.6 LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Overview</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Features, use cases, and support</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For all users</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview/sep-ui.html" class="md-nav__link">Starburst Enterprise web UI</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For data engineers</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">For platform administrators</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Performance, logging, and governance features</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../starburst-rest-api.html" class="md-nav__link">Starburst Enterprise REST API</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Data sources</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connector overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../object-storage.html" class="md-nav__link">Object storage connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html" class="md-nav__link">Non-object storage connectors</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html#connector-types" class="md-nav__link">Connector types</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html#rdbms-connectors" class="md-nav__link">RDBMS connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html#key-value-store-connectors" class="md-nav__link">Key-value store connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html#stream-processing-system-connectors" class="md-nav__link">Stream processing system connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html#document-oriented-databases" class="md-nav__link">Document-oriented databases</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../non-object-storage.html#other-connectors" class="md-nav__link">Other connectors</a>
      
    
    </li></ul>
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../utilities.html" class="md-nav__link">Utilities</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-connectors.html" class="md-nav__link">Starburst connectors feature matrix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">SQL reference</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">413-e.6 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Appendix</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Version-specific notices and information</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-delta-lake--page-root" class="md-nav__link">Delta Lake connector</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#general-configuration" class="md-nav__link">General configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#delta-lake-general-configuration-properties" class="md-nav__link">Delta lake general configuration properties</a>
        </li>
        <li class="md-nav__item"><a href="#catalog-session-properties" class="md-nav__link">Catalog session properties</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#type-mapping" class="md-nav__link">Type mapping</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#delta-lake-to-trino-type-mapping" class="md-nav__link">Delta Lake to Trino type mapping</a>
        </li>
        <li class="md-nav__item"><a href="#trino-to-delta-lake-type-mapping" class="md-nav__link">Trino to Delta Lake type mapping</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#security" class="md-nav__link">Security</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#authorization-checks" class="md-nav__link">Authorization checks</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#sql-support" class="md-nav__link">SQL support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#basic-usage-examples" class="md-nav__link">Basic usage examples</a>
        </li>
        <li class="md-nav__item"><a href="#procedures" class="md-nav__link">Procedures</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#register-table" class="md-nav__link">Register table</a>
        </li>
        <li class="md-nav__item"><a href="#unregister-table" class="md-nav__link">Unregister table</a>
        </li>
        <li class="md-nav__item"><a href="#flush-metadata-cache" class="md-nav__link">Flush metadata cache</a>
        </li>
        <li class="md-nav__item"><a href="#updating-data" class="md-nav__link">Updating data</a>
        </li>
        <li class="md-nav__item"><a href="#vacuum" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">VACUUM</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#data-management" class="md-nav__link">Data management</a>
        </li>
        <li class="md-nav__item"><a href="#schema-and-table-management" class="md-nav__link">Schema and table management</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#alter-table-execute" class="md-nav__link">ALTER TABLE EXECUTE</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#optimize" class="md-nav__link">optimize</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#table-properties" class="md-nav__link">Table properties</a>
        </li>
        <li class="md-nav__item"><a href="#metadata-tables" class="md-nav__link">Metadata tables</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#data-table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">$data</span></code> table</a>
        </li>
        <li class="md-nav__item"><a href="#history-table" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">$history</span></code> table</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#metadata-columns" class="md-nav__link">Metadata columns</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#performance" class="md-nav__link">Performance</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#table-statistics" class="md-nav__link">Table statistics</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#fine-tuning" class="md-nav__link">Fine tuning</a>
        </li>
        <li class="md-nav__item"><a href="#disable-and-drop-extended-statistics" class="md-nav__link">Disable and drop extended statistics</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#memory-usage" class="md-nav__link">Memory usage</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#memory-monitoring" class="md-nav__link">Memory monitoring</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#table-redirection" class="md-nav__link">Table redirection</a>
        </li>
        <li class="md-nav__item"><a href="#performance-tuning-configuration-properties" class="md-nav__link">Performance tuning configuration properties</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="delta-lake-connector">
<h1 id="connector-delta-lake--page-root">Delta Lake connector<a class="headerlink" href="#connector-delta-lake--page-root" title="Permalink to this heading">#</a></h1>
<img class="connector-logo" src="../_static/img/delta-lake.png"/><p>The Delta Lake connector allows querying data stored in <a class="reference external" href="https://delta.io">Delta Lake</a> format, including <a class="reference external" href="https://docs.databricks.com/delta/index.html">Databricks Delta Lake</a>. It can natively read the Delta
transaction log, and thus detect when external systems change data.</p>
<section id="requirements">
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<p>To connect to Databricks Delta Lake, you need:</p>
<ul class="simple">
<li><p>Tables written by Databricks Runtime 7.3 LTS, 9.1 LTS, 10.4 LTS and 11.3 LTS are supported.</p></li>
<li><p>Deployments using AWS, HDFS, Azure Storage, and Google Cloud Storage (GCS) are
fully supported.</p></li>
<li><p>Network access from the coordinator and workers to the Delta Lake storage.</p></li>
<li><p>Access to the Hive metastore service (HMS) of Delta Lake or a separate HMS.</p></li>
<li><p>Network access to the HMS from the coordinator and workers. Port 9083 is the
default port for the Thrift protocol used by the HMS.</p></li>
</ul>
</section>
<section id="general-configuration">
<h2 id="general-configuration">General configuration<a class="headerlink" href="#general-configuration" title="Permalink to this heading">#</a></h2>
<p>The connector requires a Hive metastore for table metadata and supports the same
metastore configuration properties as the <a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a>. At a minimum, <code class="docutils literal notranslate"><span class="pre">hive.metastore.uri</span></code> must be configured.</p>
<p>The connector recognizes Delta tables created in the metastore by the Databricks
runtime. If non-Delta tables are present in the metastore, as well, they are not
visible to the connector.</p>
<p>To configure the Delta Lake connector, create a catalog properties file
<code class="docutils literal notranslate"><span class="pre">etc/catalog/example.properties</span></code> that references the <code class="docutils literal notranslate"><span class="pre">delta_lake</span></code>
connector. Update the <code class="docutils literal notranslate"><span class="pre">hive.metastore.uri</span></code> with the URI of your Hive metastore
Thrift service:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connector.name</span><span class="o">=</span><span class="s">delta_lake</span>
<span class="na">hive.metastore.uri</span><span class="o">=</span><span class="s">thrift://example.net:9083</span>
</pre></div>
</div>
<p>If you are using AWS Glue as Hive metastore, you can simply set the metastore to
<code class="docutils literal notranslate"><span class="pre">glue</span></code>:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">connector.name</span><span class="o">=</span><span class="s">delta_lake</span>
<span class="na">hive.metastore</span><span class="o">=</span><span class="s">glue</span>
</pre></div>
</div>
<p>The Delta Lake connector reuses certain functionalities from the Hive connector,
including the metastore <a class="reference internal" href="hive.html#hive-thrift-metastore"><span class="std std-ref">Thrift</span></a> and <a class="reference internal" href="hive.html#hive-glue-metastore"><span class="std std-ref">Glue</span></a> configuration, detailed in the <a class="reference internal" href="hive.html"><span class="doc">Hive connector
documentation</span></a>.</p>
<p>To configure access to S3 and S3-compatible storage, Azure storage, and others,
consult the appropriate section of the Hive documentation.</p>
<ul class="simple">
<li><p><a class="reference internal" href="hive-s3.html"><span class="doc">Amazon S3</span></a></p></li>
<li><p><a class="reference internal" href="hive-azure.html"><span class="doc">Azure storage documentation</span></a></p></li>
<li><p><a class="reference internal" href="hive.html#hive-google-cloud-storage-configuration"><span class="std std-ref">GCS</span></a></p></li>
</ul>
<section id="delta-lake-general-configuration-properties">
<h3 id="delta-lake-general-configuration-properties">Delta lake general configuration properties<a class="headerlink" href="#delta-lake-general-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The following configuration properties are all using reasonable, tested default
values. Typical usage does not require you to configure them.</p>
<table id="id1">
<caption><span class="caption-text">Delta Lake configuration properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 55%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.metadata.cache-ttl</span></code></p></td>
<td><p>Frequency of checks for metadata updates, equivalent to transactions, to
update the metadata cache specified in <a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5m</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.metadata.cache-size</span></code></p></td>
<td><p>The maximum number of Delta table metadata entries to cache.</p></td>
<td><p>1000</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.metadata.live-files.cache-size</span></code></p></td>
<td><p>Amount of memory allocated for caching information about files. Must
be specified in <a class="reference internal" href="../admin/properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> values such as <code class="docutils literal notranslate"><span class="pre">64MB</span></code>.
Default is calculated to 10% of the maximum memory allocated to the JVM.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.metadata.live-files.cache-ttl</span></code></p></td>
<td><p>Caching duration for active files which correspond to the Delta Lake
tables.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30m</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.compression-codec</span></code></p></td>
<td><p>The compression codec to be used when writing new data files.
Possible values are</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SNAPPY</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ZSTD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GZIP</span></code></p></li>
</ul>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">SNAPPY</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.max-partitions-per-writer</span></code></p></td>
<td><p>Maximum number of partitions per writer.</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.hide-non-delta-lake-tables</span></code></p></td>
<td><p>Hide information about tables that are not managed by Delta Lake. Hiding
only applies to tables with the metadata managed in a Glue catalog, does
not apply to usage with a Hive metastore service.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.enable-non-concurrent-writes</span></code></p></td>
<td><p>Enable <a class="reference internal" href="#delta-lake-data-management"><span class="std std-ref">write support</span></a> for all
supported file systems, specifically take note of the warning about
concurrency and checkpoints.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.default-checkpoint-writing-interval</span></code></p></td>
<td><p>Default integer count to write transaction log checkpoint entries. If
the value is set to N, then checkpoints are written after every Nth
statement performing table writes. The value can be overridden for a
specific table with the <code class="docutils literal notranslate"><span class="pre">checkpoint_interval</span></code> table property.</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.hive-catalog-name</span></code></p></td>
<td><p>Name of the catalog to which <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> queries are redirected when a
Hive table is detected.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.checkpoint-row-statistics-writing.enabled</span></code></p></td>
<td><p>Enable writing row statistics to checkpoint files.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.dynamic-filtering.wait-timeout</span></code></p></td>
<td><p>Duration to wait for completion of <a class="reference internal" href="../admin/dynamic-filtering.html"><span class="doc">dynamic filtering</span></a> during split generation.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.table-statistics-enabled</span></code></p></td>
<td><p>Enables <a class="reference internal" href="#delta-lake-table-statistics"><span class="std std-ref">Table statistics</span></a> for
performance improvements.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.per-transaction-metastore-cache-maximum-size</span></code></p></td>
<td><p>Maximum number of metastore data objects per transaction in
the Hive metastore cache.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1000</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.delete-schema-locations-fallback</span></code></p></td>
<td><p>Whether schema locations are deleted when Trino can’t
determine whether they contain external files.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.parquet.time-zone</span></code></p></td>
<td><p>Time zone for Parquet read and write.</p></td>
<td><p>JVM default</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.target-max-file-size</span></code></p></td>
<td><p>Target maximum size of written files; the actual size may be larger.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1GB</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.unique-table-location</span></code></p></td>
<td><p>Use randomized, unique table locations.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.register-table-procedure.enabled</span></code></p></td>
<td><p>Enable to allow users to call the <code class="docutils literal notranslate"><span class="pre">register_table</span></code> procedure</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="catalog-session-properties">
<h3 id="catalog-session-properties">Catalog session properties<a class="headerlink" href="#catalog-session-properties" title="Permalink to this heading">#</a></h3>
<p>The following table describes <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">catalog session properties</span></a> supported by the Delta Lake connector to
configure processing of Parquet files.</p>
<table id="id2">
<caption><span class="caption-text">Parquet catalog session properties</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 33%"/>
<col style="width: 50%"/>
<col style="width: 17%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">parquet_optimized_reader_enabled</span></code></p></td>
<td><p>Whether batched column readers are used when reading Parquet files
for improved performance.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">parquet_max_read_block_size</span></code></p></td>
<td><p>The maximum block size used when reading Parquet files.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">16MB</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">parquet_writer_block_size</span></code></p></td>
<td><p>The maximum block size created by the Parquet writer.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">128MB</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">parquet_writer_page_size</span></code></p></td>
<td><p>The maximum page size created by the Parquet writer.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1MB</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">parquet_writer_batch_size</span></code></p></td>
<td><p>Maximum number of rows processed by the parquet writer in a batch.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10000</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="type-mapping">
<span id="delta-lake-type-mapping"></span><h2 id="type-mapping">Type mapping<a class="headerlink" href="#type-mapping" title="Permalink to this heading">#</a></h2>
<p>Because Trino and Delta Lake each support types that the other does not, this
connector <a class="reference internal" href="../language/types.html#type-mapping-overview"><span class="std std-ref">modifies some types</span></a> when reading or
writing data. Data types may not map the same way in both directions between
Trino and the data source. Refer to the following sections for type mapping in
each direction.</p>
<p>See the <a class="reference external" href="https://github.com/delta-io/delta/blob/master/PROTOCOL.md#primitive-types">Delta Transaction Log specification</a>
for more information about supported data types in the Delta Lake table format
specification.</p>
<section id="delta-lake-to-trino-type-mapping">
<h3 id="delta-lake-to-trino-type-mapping">Delta Lake to Trino type mapping<a class="headerlink" href="#delta-lake-to-trino-type-mapping" title="Permalink to this heading">#</a></h3>
<p>The connector maps Delta Lake types to the corresponding Trino types following
this table:</p>
<table id="id3">
<caption><span class="caption-text">Delta Lake to Trino type mapping</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 40%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Delta Lake type</p></th>
<th class="head"><p>Trino type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SHORT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">LONG</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(p,s)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(p,s)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">STRING</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BINARY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(3)</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MAP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MAP</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">STRUCT(...)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ROW(...)</span></code></p></td>
</tr>
</tbody>
</table>
<p>No other types are supported.</p>
</section>
<section id="trino-to-delta-lake-type-mapping">
<h3 id="trino-to-delta-lake-type-mapping">Trino to Delta Lake type mapping<a class="headerlink" href="#trino-to-delta-lake-type-mapping" title="Permalink to this heading">#</a></h3>
<p>The connector maps Trino types to the corresponding Delta Lake types following
this table:</p>
<table id="id4">
<caption><span class="caption-text">Trino to Delta Lake type mapping</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 60%"/>
<col style="width: 40%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Trino type</p></th>
<th class="head"><p>Delta Lake type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BYTE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SHORT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LONG</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(p,s)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL(p,s)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">STRING</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BINARY</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP(3)</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MAP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MAP</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ROW(...)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">STRUCT(...)</span></code></p></td>
</tr>
</tbody>
</table>
<p>No other types are supported.</p>
</section>
</section>
<section id="security">
<h2 id="security">Security<a class="headerlink" href="#security" title="Permalink to this heading">#</a></h2>
<p>The Delta Lake connector allows you to choose one of several means of providing
autorization at the catalog level. You can select a different type of
authorization check in different Delta Lake catalog files.</p>
<section id="authorization-checks">
<span id="delta-lake-authorization"></span><h3 id="authorization-checks">Authorization checks<a class="headerlink" href="#authorization-checks" title="Permalink to this heading">#</a></h3>
<p>You can enable authorization checks for the connector by setting
the <code class="docutils literal notranslate"><span class="pre">delta.security</span></code> property in the catalog properties file. This
property must be one of the following values:</p>
<table id="id5">
<caption><span class="caption-text">Delta Lake security values</span><a class="headerlink" href="#id5" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 33%"/>
<col style="width: 67%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ALLOW_ALL</span></code> (default value)</p></td>
<td><p>No authorization checks are enforced.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SYSTEM</span></code></p></td>
<td><p>The connector relies on system-level access control.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">READ_ONLY</span></code></p></td>
<td><p>Operations that read data or metadata, such as <a class="reference internal" href="../sql/select.html"><span class="doc">SELECT</span></a> are
permitted. No operations that write data or metadata, such as
<a class="reference internal" href="../sql/create-table.html"><span class="doc">CREATE TABLE</span></a>, <a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT</span></a>, or <a class="reference internal" href="../sql/delete.html"><span class="doc">DELETE</span></a> are
allowed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">FILE</span></code></p></td>
<td><p>Authorization checks are enforced using a catalog-level access control
configuration file whose path is specified in the <code class="docutils literal notranslate"><span class="pre">security.config-file</span></code>
catalog configuration property. See
<a class="reference internal" href="../security/file-system-access-control.html#catalog-file-based-access-control"><span class="std std-ref">Catalog-level access control files</span></a> for information on the
authorization configuration file.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="sql-support">
<span id="delta-lake-sql-support"></span><h2 id="sql-support">SQL support<a class="headerlink" href="#sql-support" title="Permalink to this heading">#</a></h2>
<p>The connector provides read and write access to data and metadata in
Delta Lake. In addition to the <a class="reference internal" href="../language/sql-support.html#sql-globally-available"><span class="std std-ref">globally available</span></a> and <a class="reference internal" href="../language/sql-support.html#sql-read-operations"><span class="std std-ref">read operation</span></a>
statements, the connector supports the following features:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../language/sql-support.html#sql-data-management"><span class="std std-ref">Data management</span></a>, see also <a class="reference internal" href="#delta-lake-data-management"><span class="std std-ref">Data management</span></a></p></li>
<li><p><a class="reference internal" href="../language/sql-support.html#sql-view-management"><span class="std std-ref">View management</span></a></p></li>
<li><p><a class="reference internal" href="../sql/create-schema.html"><span class="doc">CREATE SCHEMA</span></a>, see also <a class="reference internal" href="#delta-lake-sql-basic-usage"><span class="std std-ref">Basic usage examples</span></a></p></li>
<li><p><a class="reference internal" href="../sql/create-table.html"><span class="doc">CREATE TABLE</span></a>, see also <a class="reference internal" href="#delta-lake-sql-basic-usage"><span class="std std-ref">Basic usage examples</span></a></p></li>
<li><p><a class="reference internal" href="../sql/create-table-as.html"><span class="doc">CREATE TABLE AS</span></a></p></li>
<li><p><a class="reference internal" href="../sql/drop-table.html"><span class="doc">DROP TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/alter-table.html"><span class="doc">ALTER TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/drop-schema.html"><span class="doc">DROP SCHEMA</span></a></p></li>
<li><p><a class="reference internal" href="../sql/show-create-schema.html"><span class="doc">SHOW CREATE SCHEMA</span></a></p></li>
<li><p><a class="reference internal" href="../sql/show-create-table.html"><span class="doc">SHOW CREATE TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/comment.html"><span class="doc">COMMENT</span></a></p></li>
</ul>
<section id="basic-usage-examples">
<span id="delta-lake-sql-basic-usage"></span><h3 id="basic-usage-examples">Basic usage examples<a class="headerlink" href="#basic-usage-examples" title="Permalink to this heading">#</a></h3>
<p>The connector supports creating schemas. You can create a schema with or without
a specified location.</p>
<p>You can create a schema with the <a class="reference internal" href="../sql/create-schema.html"><span class="doc">CREATE SCHEMA</span></a> statement and the
<code class="docutils literal notranslate"><span class="pre">location</span></code> schema property. Tables in this schema are located in a
subdirectory under the schema location. Data files for tables in this schema
using the default location are cleaned up if the table is dropped:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">SCHEMA</span> <span class="n">example</span><span class="p">.</span><span class="n">example_schema</span>
<span class="k">WITH</span> <span class="p">(</span><span class="k">location</span> <span class="o">=</span> <span class="s1">'s3://my-bucket/a/path'</span><span class="p">);</span>
</pre></div>
</div>
<p>Optionally, the location can be omitted. Tables in this schema must have a
location included when you create them. The data files for these tables are not
removed if the table is dropped:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">SCHEMA</span> <span class="n">example</span><span class="p">.</span><span class="n">example_schema</span><span class="p">;</span>
</pre></div>
</div>
<p>When Delta tables exist in storage, but not in the metastore, Trino can be used
to register them:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">example</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">example_table</span> <span class="p">(</span>
  <span class="n">dummy</span> <span class="nb">bigint</span>
<span class="p">)</span>
<span class="k">WITH</span> <span class="p">(</span>
  <span class="k">location</span> <span class="o">=</span> <span class="s1">'...'</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Columns listed in the DDL, such as <code class="docutils literal notranslate"><span class="pre">dummy</span></code> in the preceeding example, are
ignored. The table schema is read from the transaction log, instead. If the
schema is changed by an external system, Trino automatically uses the new
schema.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> with an existing table content is deprecated, instead use the
<code class="docutils literal notranslate"><span class="pre">system.register_table</span></code> procedure. The <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">...</span> <span class="pre">WITH</span> <span class="pre">(location=...)</span></code>
syntax can be temporarily re-enabled using the <code class="docutils literal notranslate"><span class="pre">delta.legacy-create-table-with-existing-location.enabled</span></code>
config property or <code class="docutils literal notranslate"><span class="pre">legacy_create_table_with_existing_location_enabled</span></code> session property.</p>
</div>
<p>If the specified location does not already contain a Delta table, the connector
automatically writes the initial transaction log entries and registers the table
in the metastore. As a result, any Databricks engine can write to the table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">example</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">new_table</span> <span class="p">(</span><span class="n">id</span> <span class="nb">bigint</span><span class="p">,</span> <span class="n">address</span> <span class="nb">varchar</span><span class="p">);</span>
</pre></div>
</div>
<p>The Delta Lake connector also supports creating tables using the <a class="reference internal" href="../sql/create-table-as.html"><span class="doc">CREATE
TABLE AS</span></a> syntax.</p>
</section>
<section id="procedures">
<h3 id="procedures">Procedures<a class="headerlink" href="#procedures" title="Permalink to this heading">#</a></h3>
<p>Use the <a class="reference internal" href="../sql/call.html"><span class="doc">CALL</span></a> statement to perform data manipulation or
administrative tasks. Procedures are available in the system schema of each
catalog. The following code snippet displays how to call the
<code class="docutils literal notranslate"><span class="pre">example_procedure</span></code> in the <code class="docutils literal notranslate"><span class="pre">examplecatalog</span></code> catalog:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CALL</span> <span class="n">examplecatalog</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">example_procedure</span><span class="p">()</span>
</pre></div>
</div>
<section id="register-table">
<span id="delta-lake-register-table"></span><h4 id="register-table">Register table<a class="headerlink" href="#register-table" title="Permalink to this heading">#</a></h4>
<p>The connector can register table into the metastore with existing transaction logs and data files.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">system.register_table</span></code> procedure allows the caller to register an existing delta lake
table in the metastore, using its existing transaction logs and data files:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CALL</span> <span class="n">example</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">register_table</span><span class="p">(</span><span class="k">schema_name</span> <span class="o">=&gt;</span> <span class="s1">'testdb'</span><span class="p">,</span> <span class="k">table_name</span> <span class="o">=&gt;</span> <span class="s1">'customer_orders'</span><span class="p">,</span> <span class="n">table_location</span> <span class="o">=&gt;</span> <span class="s1">'s3://my-bucket/a/path'</span><span class="p">)</span>
</pre></div>
</div>
<p>To prevent unauthorized users from accessing data, this procedure is disabled by default.
The procedure is enabled only when <code class="docutils literal notranslate"><span class="pre">delta.register-table-procedure.enabled</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</section>
<section id="unregister-table">
<span id="delta-lake-unregister-table"></span><h4 id="unregister-table">Unregister table<a class="headerlink" href="#unregister-table" title="Permalink to this heading">#</a></h4>
<p>The connector can unregister existing Delta Lake tables from the metastore.</p>
<p>The procedure <code class="docutils literal notranslate"><span class="pre">system.unregister_table</span></code> allows the caller to unregister an
existing Delta Lake table from the metastores without deleting the data:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CALL</span> <span class="n">example</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">unregister_table</span><span class="p">(</span><span class="k">schema_name</span> <span class="o">=&gt;</span> <span class="s1">'testdb'</span><span class="p">,</span> <span class="k">table_name</span> <span class="o">=&gt;</span> <span class="s1">'customer_orders'</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="flush-metadata-cache">
<span id="delta-lake-flush-metadata-cache"></span><h4 id="flush-metadata-cache">Flush metadata cache<a class="headerlink" href="#flush-metadata-cache" title="Permalink to this heading">#</a></h4>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">system.flush_metadata_cache()</span></code></p>
<p>Flush all metadata caches.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">system.flush_metadata_cache(schema_name</span> <span class="pre">=&gt;</span> <span class="pre">...,</span> <span class="pre">table_name</span> <span class="pre">=&gt;</span> <span class="pre">...)</span></code></p>
<p>Flush metadata caches entries connected with selected table.
Procedure requires named parameters to be passed</p>
</li>
</ul>
</section>
<section id="updating-data">
<span id="delta-lake-write-support"></span><h4 id="updating-data">Updating data<a class="headerlink" href="#updating-data" title="Permalink to this heading">#</a></h4>
<p>You can use the connector to <a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT</span></a>, <a class="reference internal" href="../sql/delete.html"><span class="doc">DELETE</span></a>,
<a class="reference internal" href="../sql/update.html"><span class="doc">UPDATE</span></a>, and <a class="reference internal" href="../sql/merge.html"><span class="doc">MERGE</span></a> data in Delta Lake tables.</p>
<p>Write operations are supported for tables stored on the following systems:</p>
<ul>
<li><p>Azure ADLS Gen2, Google Cloud Storage</p>
<p>Writes to the Azure ADLS Gen2 and Google Cloud Storage are
enabled by default. Trino detects write collisions on these storage systems
when writing from multiple Trino clusters, or from other query engines.</p>
</li>
<li><p>S3 and S3-compatible storage</p>
<p>Writes to <a class="reference internal" href="hive-s3.html"><span class="doc">Amazon S3</span></a> and S3-compatible storage must be enabled
with the <code class="docutils literal notranslate"><span class="pre">delta.enable-non-concurrent-writes</span></code> property. Writes to S3 can
safely be made from multiple Trino clusters, however write collisions are not
detected when writing concurrently from other Delta Lake engines. You need to
make sure that no concurrent data modifications are run to avoid data
corruption.</p>
</li>
</ul>
</section>
<section id="vacuum">
<span id="delta-lake-vacuum"></span><h4 id="vacuum"><code class="docutils literal notranslate"><span class="pre">VACUUM</span></code><a class="headerlink" href="#vacuum" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">VACUUM</span></code> procedure removes all old files that are not in the transaction
log, as well as files that are not needed to read table snapshots newer than the
current time minus the retention period defined by the <code class="docutils literal notranslate"><span class="pre">retention</span> <span class="pre">period</span></code>
parameter.</p>
<p>Users with <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> and <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> permissions on a table can run <code class="docutils literal notranslate"><span class="pre">VACUUM</span></code>
as follows:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>CALL example.system.vacuum<span class="o">(</span><span class="s1">'exampleschemaname'</span>, <span class="s1">'exampletablename'</span>, <span class="s1">'7d'</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>All parameters are required, and must be presented in the following order:</p>
<ul class="simple">
<li><p>Schema name</p></li>
<li><p>Table name</p></li>
<li><p>Retention period</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">delta.vacuum.min-retention</span></code> config property provides a safety
measure to ensure that files are retained as expected.  The minimum value for
this property is <code class="docutils literal notranslate"><span class="pre">0s</span></code>. There is a minimum retention session property as well,
<code class="docutils literal notranslate"><span class="pre">vacuum_min_retention</span></code>.</p>
</section>
</section>
<section id="data-management">
<span id="delta-lake-data-management"></span><h3 id="data-management">Data management<a class="headerlink" href="#data-management" title="Permalink to this heading">#</a></h3>
<p>You can use the connector to <a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT</span></a>, <a class="reference internal" href="../sql/delete.html"><span class="doc">DELETE</span></a>,
<a class="reference internal" href="../sql/update.html"><span class="doc">UPDATE</span></a>, and <a class="reference internal" href="../sql/merge.html"><span class="doc">MERGE</span></a> data in Delta Lake tables.</p>
<p>Write operations are supported for tables stored on the following systems:</p>
<ul>
<li><p>Azure ADLS Gen2, Google Cloud Storage</p>
<p>Writes to the Azure ADLS Gen2 and Google Cloud Storage are
enabled by default. Trino detects write collisions on these storage systems
when writing from multiple Trino clusters, or from other query engines.</p>
</li>
<li><p>S3 and S3-compatible storage</p>
<p>Writes to <a class="reference internal" href="hive-s3.html"><span class="doc">Amazon S3</span></a> and S3-compatible storage must be enabled
with the <code class="docutils literal notranslate"><span class="pre">delta.enable-non-concurrent-writes</span></code> property. Writes to S3 can
safely be made from multiple Trino clusters, however write collisions are not
detected when writing concurrently from other Delta Lake engines. You must
make sure that no concurrent data modifications are run to avoid data
corruption.</p>
</li>
</ul>
</section>
<section id="schema-and-table-management">
<h3 id="schema-and-table-management">Schema and table management<a class="headerlink" href="#schema-and-table-management" title="Permalink to this heading">#</a></h3>
<p>The <a class="reference internal" href="../language/sql-support.html#sql-schema-table-management"><span class="std std-ref">Schema and table management</span></a> functionality includes support for:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../sql/create-schema.html"><span class="doc">CREATE SCHEMA</span></a></p></li>
<li><p><a class="reference internal" href="../sql/drop-schema.html"><span class="doc">DROP SCHEMA</span></a></p></li>
<li><p><a class="reference internal" href="../sql/alter-schema.html"><span class="doc">ALTER SCHEMA</span></a></p></li>
<li><p><a class="reference internal" href="../sql/create-table.html"><span class="doc">CREATE TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/create-table-as.html"><span class="doc">CREATE TABLE AS</span></a></p></li>
<li><p><a class="reference internal" href="../sql/drop-table.html"><span class="doc">DROP TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/alter-table.html"><span class="doc">ALTER TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/comment.html"><span class="doc">COMMENT</span></a></p></li>
</ul>
<section id="alter-table-execute">
<span id="delta-lake-alter-table-execute"></span><h4 id="alter-table-execute">ALTER TABLE EXECUTE<a class="headerlink" href="#alter-table-execute" title="Permalink to this heading">#</a></h4>
<p>The connector supports the following commands for use with
<a class="reference internal" href="../sql/alter-table.html#alter-table-execute"><span class="std std-ref">ALTER TABLE EXECUTE</span></a>.</p>
<section id="optimize">
<h5 id="optimize">optimize<a class="headerlink" href="#optimize" title="Permalink to this heading">#</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">optimize</span></code> command is used for rewriting the content
of the specified table so that it is merged into fewer but larger files.
In case that the table is partitioned, the data compaction
acts separately on each partition selected for optimization.
This operation improves read performance.</p>
<p>All files with a size below the optional <code class="docutils literal notranslate"><span class="pre">file_size_threshold</span></code>
parameter (default value for the threshold is <code class="docutils literal notranslate"><span class="pre">100MB</span></code>) are
merged:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">test_table</span> <span class="k">EXECUTE</span> <span class="n">optimize</span>
</pre></div>
</div>
<p>The following statement merges files in a table that are
under 10 megabytes in size:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">test_table</span> <span class="k">EXECUTE</span> <span class="n">optimize</span><span class="p">(</span><span class="n">file_size_threshold</span> <span class="o">=&gt;</span> <span class="s1">'10MB'</span><span class="p">)</span>
</pre></div>
</div>
<p>You can use a <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause with the columns used to partition the table,
to filter which partitions are optimized:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">test_partitioned_table</span> <span class="k">EXECUTE</span> <span class="n">optimize</span>
<span class="k">WHERE</span> <span class="n">partition_key</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="table-properties">
<h4 id="table-properties">Table properties<a class="headerlink" href="#table-properties" title="Permalink to this heading">#</a></h4>
<p>The following properties are available for use:</p>
<table id="id6">
<caption><span class="caption-text">Delta Lake table properties</span><a class="headerlink" href="#id6" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 40%"/>
<col style="width: 60%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">location</span></code></p></td>
<td><p>File system location URI for the table.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partitioned_by</span></code></p></td>
<td><p>Set partition columns.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">checkpoint_interval</span></code></p></td>
<td><p>Set the checkpoint interval in seconds.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">change_data_feed_enabled</span></code></p></td>
<td><p>Enables storing change data feed entries.</p></td>
</tr>
</tbody>
</table>
<p>The following example uses all available table properties:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">example</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">example_partitioned_table</span>
<span class="k">WITH</span> <span class="p">(</span>
  <span class="k">location</span> <span class="o">=</span> <span class="s1">'s3://my-bucket/a/path'</span><span class="p">,</span>
  <span class="n">partitioned_by</span> <span class="o">=</span> <span class="nb">ARRAY</span><span class="p">[</span><span class="s1">'regionkey'</span><span class="p">],</span>
  <span class="n">checkpoint_interval</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">change_data_feed_enabled</span> <span class="o">=</span> <span class="k">true</span>
<span class="p">)</span>
<span class="k">AS</span> <span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="k">comment</span><span class="p">,</span> <span class="n">regionkey</span> <span class="k">FROM</span> <span class="n">tpch</span><span class="p">.</span><span class="n">tiny</span><span class="p">.</span><span class="n">nation</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="metadata-tables">
<h4 id="metadata-tables">Metadata tables<a class="headerlink" href="#metadata-tables" title="Permalink to this heading">#</a></h4>
<p>The connector exposes several metadata tables for each Delta Lake table.
These metadata tables contain information about the internal structure
of the Delta Lake table. You can query each metadata table by appending the
metadata table name to the table name:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="ss">"test_table$data"</span>
</pre></div>
</div>
<section id="data-table">
<h5 id="data-table"><code class="docutils literal notranslate"><span class="pre">$data</span></code> table<a class="headerlink" href="#data-table" title="Permalink to this heading">#</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">$data</span></code> table is an alias for the Delta Lake table itself.</p>
<p>The statement:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="ss">"test_table$data"</span>
</pre></div>
</div>
<p>is equivalent to:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">test_table</span>
</pre></div>
</div>
</section>
<section id="history-table">
<h5 id="history-table"><code class="docutils literal notranslate"><span class="pre">$history</span></code> table<a class="headerlink" href="#history-table" title="Permalink to this heading">#</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">$history</span></code> table provides a log of the metadata changes performed on
the Delta Lake table.</p>
<p>You can retrieve the changelog of the Delta Lake table <code class="docutils literal notranslate"><span class="pre">test_table</span></code>
by using the following query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="ss">"test_table$history"</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> version |               timestamp               | user_id | user_name |  operation   |         operation_parameters          |                 cluster_id      | read_version |  isolation_level  | is_blind_append
---------+---------------------------------------+---------+-----------+--------------+---------------------------------------+---------------------------------+--------------+-------------------+----------------
       2 | 2023-01-19 07:40:54.684 Europe/Vienna | trino   | trino     | WRITE        | {queryId=20230119_064054_00008_4vq5t} | trino-406-trino-coordinator     |            2 | WriteSerializable | true
       1 | 2023-01-19 07:40:41.373 Europe/Vienna | trino   | trino     | ADD COLUMNS  | {queryId=20230119_064041_00007_4vq5t} | trino-406-trino-coordinator     |            0 | WriteSerializable | true
       0 | 2023-01-19 07:40:10.497 Europe/Vienna | trino   | trino     | CREATE TABLE | {queryId=20230119_064010_00005_4vq5t} | trino-406-trino-coordinator     |            0 | WriteSerializable | true
</pre></div>
</div>
<p>The output of the query has the following columns:</p>
<table id="id7">
<caption><span class="caption-text">History columns</span><a class="headerlink" href="#id7" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 30%"/>
<col style="width: 40%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">version</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bigint</span></code></p></td>
<td><p>The version of the table corresponding to the operation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">timestamp(3)</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></code></p></td>
<td><p>The time when the table version became active</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">user_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">varchar</span></code></p></td>
<td><p>The identifier for the user which performed the operation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">user_name</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">varchar</span></code></p></td>
<td><p>The username for the user which performed the operation</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">operation</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">varchar</span></code></p></td>
<td><p>The name of the operation performed on the table</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">operation_parameters</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">map(varchar,</span> <span class="pre">varchar)</span></code></p></td>
<td><p>Parameters of the operation</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cluster_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">varchar</span></code></p></td>
<td><p>The ID of the cluster which ran the operation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">read_version</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bigint</span></code></p></td>
<td><p>The version of the table which was read in order to perform the operation</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">isolation_level</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">varchar</span></code></p></td>
<td><p>The level of isolation used to perform the operation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_blind_append</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><p>Whether or not the operation appended data</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="metadata-columns">
<span id="delta-lake-special-columns"></span><h4 id="metadata-columns">Metadata columns<a class="headerlink" href="#metadata-columns" title="Permalink to this heading">#</a></h4>
<p>In addition to the defined columns, the Delta Lake connector automatically
exposes metadata in a number of hidden columns in each table. You can use these
columns in your SQL statements like any other column, e.g., they can be selected
directly or used in conditional statements.</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">$path</span></code></dt><dd><p>Full file system path name of the file for this row.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">$file_modified_time</span></code></dt><dd><p>Date and time of the last modification of the file for this row.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">$file_size</span></code></dt><dd><p>Size of the file for this row.</p>
</dd>
</dl>
</li>
</ul>
</section>
</section>
</section>
<section id="performance">
<h2 id="performance">Performance<a class="headerlink" href="#performance" title="Permalink to this heading">#</a></h2>
<p>The connector includes a number of performance improvements, detailed in the
following sections:</p>
<ul class="simple">
<li><p>Support for <a class="reference internal" href="../admin/properties-write-partitioning.html"><span class="doc">write partitioning</span></a>.</p></li>
</ul>
<section id="table-statistics">
<span id="delta-lake-table-statistics"></span><h3 id="table-statistics">Table statistics<a class="headerlink" href="#table-statistics" title="Permalink to this heading">#</a></h3>
<p>You can use <a class="reference internal" href="../sql/analyze.html"><span class="doc">ANALYZE</span></a> statements in Trino to populate the table
statistics in Delta Lake. Data size and number of distinct values (NDV)
statistics are supported, while Minimum value, maximum value, and null value
count statistics are not supported. The <a class="reference internal" href="../optimizer/cost-based-optimizations.html"><span class="doc">cost-based optimizer</span></a> then uses these statistics to improve
query performance.</p>
<p>Extended statistics enable a broader set of optimizations, including join
reordering. The controlling catalog property <code class="docutils literal notranslate"><span class="pre">delta.table-statistics-enabled</span></code>
is enabled by default. The equivalent <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">catalog session property</span></a> is <code class="docutils literal notranslate"><span class="pre">statistics_enabled</span></code>.</p>
<p>Each <code class="docutils literal notranslate"><span class="pre">ANALYZE</span></code> statement updates the table statistics incrementally, so only
the data changed since the last <code class="docutils literal notranslate"><span class="pre">ANALYZE</span></code> is counted. The table statistics are
not automatically updated by write operations such as <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>, <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>,
and <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>. You must manually run <code class="docutils literal notranslate"><span class="pre">ANALYZE</span></code> again to update the table
statistics.</p>
<p>To collect statistics for a table, execute the following statement:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ANALYZE</span> <span class="n">table_schema</span><span class="p">.</span><span class="k">table_name</span><span class="p">;</span>
</pre></div>
</div>
<p>To gain the most benefit from cost-based optimizations, run periodic <code class="docutils literal notranslate"><span class="pre">ANALYZE</span></code>
statements on every large table that is frequently queried.</p>
<section id="fine-tuning">
<h4 id="fine-tuning">Fine tuning<a class="headerlink" href="#fine-tuning" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">files_modified_after</span></code> property is useful if you want to run the
<code class="docutils literal notranslate"><span class="pre">ANALYZE</span></code> statement on a table that was previously analyzed. You can use it to
limit the amount of data used to generate the table statistics:</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">ANALYZE</span> <span class="n">example_table</span> <span class="k">WITH</span><span class="p">(</span><span class="n">files_modified_after</span> <span class="o">=</span> <span class="k">TIMESTAMP</span> <span class="s1">'2021-08-23</span>
<span class="s1">16:43:01.321 Z'</span><span class="p">)</span>
</pre></div>
</div>
<p>As a result, only files newer than the specified time stamp are used in the
analysis.</p>
<p>You can also specify a set or subset of columns to analyze using the <code class="docutils literal notranslate"><span class="pre">columns</span></code>
property:</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">ANALYZE</span> <span class="n">example_table</span> <span class="k">WITH</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="nb">ARRAY</span><span class="p">[</span><span class="s1">'nationkey'</span><span class="p">,</span> <span class="s1">'regionkey'</span><span class="p">])</span>
</pre></div>
</div>
<p>To run <code class="docutils literal notranslate"><span class="pre">ANALYZE</span></code> with <code class="docutils literal notranslate"><span class="pre">columns</span></code> more than once, the next <code class="docutils literal notranslate"><span class="pre">ANALYZE</span></code> must
run on the same set or a subset of the original columns used.</p>
<p>To broaden the set of <code class="docutils literal notranslate"><span class="pre">columns</span></code>, drop the statistics and reanalyze the table.</p>
</section>
<section id="disable-and-drop-extended-statistics">
<h4 id="disable-and-drop-extended-statistics">Disable and drop extended statistics<a class="headerlink" href="#disable-and-drop-extended-statistics" title="Permalink to this heading">#</a></h4>
<p>You can disable extended statistics with the catalog configuration property
<code class="docutils literal notranslate"><span class="pre">delta.extended-statistics.enabled</span></code> set to <code class="docutils literal notranslate"><span class="pre">false</span></code>. Alternatively, you can
disable it for a session, with the <a class="reference internal" href="../sql/set-session.html"><span class="doc">catalog session property</span></a> <code class="docutils literal notranslate"><span class="pre">extended_statistics_enabled</span></code> set to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>If a table is changed with many delete and update operation, calling <code class="docutils literal notranslate"><span class="pre">ANALYZE</span></code>
does not result in accurate statistics. To correct the statistics you have to
drop the extended stats and analyze table again.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">system.drop_extended_stats</span></code> procedure in the catalog to drop the
extended statistics for a specified table in a specified schema:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CALL</span> <span class="n">example</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">drop_extended_stats</span><span class="p">(</span><span class="s1">'example_schema'</span><span class="p">,</span> <span class="s1">'example_table'</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="memory-usage">
<h3 id="memory-usage">Memory usage<a class="headerlink" href="#memory-usage" title="Permalink to this heading">#</a></h3>
<p>The Delta Lake connector is memory intensive and the amount of required memory
grows with the size of Delta Lake transaction logs of any accessed tables. It is
important to take that into account when provisioning the coordinator.</p>
<p>You must decrease memory usage by keeping the number of active data files in
table low by running <code class="docutils literal notranslate"><span class="pre">OPTIMIZE</span></code> and <code class="docutils literal notranslate"><span class="pre">VACUUM</span></code> in Delta Lake regularly.</p>
<section id="memory-monitoring">
<h4 id="memory-monitoring">Memory monitoring<a class="headerlink" href="#memory-monitoring" title="Permalink to this heading">#</a></h4>
<p>When using the Delta Lake connector you must monitor memory usage on the
coordinator. Specifically monitor JVM heap utilization using standard tools as
part of routine operation of the cluster.</p>
<p>A good proxy for memory usage is the cache utilization of Delta Lake caches. It
is exposed by the connector with the
<code class="docutils literal notranslate"><span class="pre">plugin.deltalake.transactionlog:name=&lt;catalog-name&gt;,type=transactionlogaccess</span></code>
JMX bean.</p>
<p>You can access it with any standard monitoring software with JMX support, or use
the <a class="reference internal" href="jmx.html"><span class="doc">JMX connector</span></a> with the following query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">jmx</span><span class="p">.</span><span class="k">current</span><span class="p">.</span><span class="ss">"*.plugin.deltalake.transactionlog:name=&lt;catalog-name&gt;,type=transactionlogaccess"</span>
</pre></div>
</div>
<p>Following is an example result:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>datafilemetadatacachestats.hitrate      | 0.97
datafilemetadatacachestats.missrate     | 0.03
datafilemetadatacachestats.requestcount | 3232
metadatacachestats.hitrate              | 0.98
metadatacachestats.missrate             | 0.02
metadatacachestats.requestcount         | 6783
node                                    | trino-master
object_name                             | io.trino.plugin.deltalake.transactionlog:type=TransactionLogAccess,name=delta
</pre></div>
</div>
<p>In a healthy system both <code class="docutils literal notranslate"><span class="pre">datafilemetadatacachestats.hitrate</span></code> and
<code class="docutils literal notranslate"><span class="pre">metadatacachestats.hitrate</span></code> are close to <code class="docutils literal notranslate"><span class="pre">1.0</span></code>.</p>
</section>
</section>
<section id="table-redirection">
<span id="delta-lake-table-redirection"></span><h3 id="table-redirection">Table redirection<a class="headerlink" href="#table-redirection" title="Permalink to this heading">#</a></h3>
<p>Trino offers the possibility to transparently redirect operations on an existing
table to the appropriate catalog based on the format of the table and catalog configuration.</p>
<p>In the context of connectors which depend on a metastore service
(for example, <a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a>, <a class="reference internal" href="iceberg.html"><span class="doc">Iceberg connector</span></a> and <a class="reference internal" href="#"><span class="doc">Delta Lake connector</span></a>),
the metastore (Hive metastore service, <a class="reference external" href="https://aws.amazon.com/glue/">AWS Glue Data Catalog</a>)
can be used to accustom tables with different table formats.
Therefore, a metastore database can hold a variety of tables with different table formats.</p>
<p>As a concrete example, let’s use the following
simple scenario which makes use of table redirection:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">USE</span> <span class="n">example</span><span class="p">.</span><span class="n">example_schema</span><span class="p">;</span>

<span class="k">EXPLAIN</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">example_table</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>                               Query Plan
-------------------------------------------------------------------------
Fragment 0 [SOURCE]
     ...
     Output[columnNames = [...]]
     │   ...
     └─ TableScan[table = another_catalog:example_schema:example_table]
            ...
</pre></div>
</div>
<p>The output of the <code class="docutils literal notranslate"><span class="pre">EXPLAIN</span></code> statement points out the actual
catalog which is handling the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> query over the table <code class="docutils literal notranslate"><span class="pre">example_table</span></code>.</p>
<p>The table redirection functionality works also when using
fully qualified names for the tables:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">EXPLAIN</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">example</span><span class="p">.</span><span class="n">example_schema</span><span class="p">.</span><span class="n">example_table</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>                               Query Plan
-------------------------------------------------------------------------
Fragment 0 [SOURCE]
     ...
     Output[columnNames = [...]]
     │   ...
     └─ TableScan[table = another_catalog:example_schema:example_table]
            ...
</pre></div>
</div>
<p>Trino offers table redirection support for the following operations:</p>
<ul class="simple">
<li><p>Table read operations</p>
<ul>
<li><p><a class="reference internal" href="../sql/select.html"><span class="doc">SELECT</span></a></p></li>
<li><p><a class="reference internal" href="../sql/describe.html"><span class="doc">DESCRIBE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/show-stats.html"><span class="doc">SHOW STATS</span></a></p></li>
<li><p><a class="reference internal" href="../sql/show-create-table.html"><span class="doc">SHOW CREATE TABLE</span></a></p></li>
</ul>
</li>
<li><p>Table write operations</p>
<ul>
<li><p><a class="reference internal" href="../sql/insert.html"><span class="doc">INSERT</span></a></p></li>
<li><p><a class="reference internal" href="../sql/update.html"><span class="doc">UPDATE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/merge.html"><span class="doc">MERGE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/delete.html"><span class="doc">DELETE</span></a></p></li>
</ul>
</li>
<li><p>Table management operations</p>
<ul>
<li><p><a class="reference internal" href="../sql/alter-table.html"><span class="doc">ALTER TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/drop-table.html"><span class="doc">DROP TABLE</span></a></p></li>
<li><p><a class="reference internal" href="../sql/comment.html"><span class="doc">COMMENT</span></a></p></li>
</ul>
</li>
</ul>
<p>Trino does not offer view redirection support.</p>
<p>The connector supports redirection from Delta Lake tables to Hive tables
with the <code class="docutils literal notranslate"><span class="pre">delta.hive-catalog-name</span></code> catalog configuration property.</p>
</section>
<section id="performance-tuning-configuration-properties">
<h3 id="performance-tuning-configuration-properties">Performance tuning configuration properties<a class="headerlink" href="#performance-tuning-configuration-properties" title="Permalink to this heading">#</a></h3>
<p>The following table describes performance tuning catalog properties for the
connector.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Performance tuning configuration properties are considered expert-level
features. Altering these properties from their default values is likely to
cause instability and performance degradation. We strongly suggest that
you use them only to address non-trivial performance issues, and that you
keep a backup of the original values if you change them.</p>
</div>
<table id="id8">
<caption><span class="caption-text">Delta Lake performance tuning configuration properties</span><a class="headerlink" href="#id8" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 50%"/>
<col style="width: 20%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.domain-compaction-threshold</span></code></p></td>
<td><p>Minimum size of query predicates above which Trino compacts the predicates.
Pushing a large list of predicates down to the data source can
compromise performance. For optimization in that situation, Trino can
compact the large predicates. If necessary, adjust the threshold to
ensure a balance between performance and predicate pushdown.</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.max-outstanding-splits</span></code></p></td>
<td><p>The target number of buffered splits for each table scan in a query,
before the scheduler tries to pause.</p></td>
<td><p>1000</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.max-splits-per-second</span></code></p></td>
<td><p>Sets the maximum number of splits used per second to access underlying
storage. Reduce this number if your limit is routinely exceeded, based
on your filesystem limits. This is set to the absolute maximum value,
which results in Trino maximizing the parallelization of data access
by default. Attempting to set it higher results in Trino not being
able to start.</p></td>
<td><p>Integer.MAX_VALUE</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.max-initial-splits</span></code></p></td>
<td><p>For each query, the coordinator assigns file sections to read first
at the <code class="docutils literal notranslate"><span class="pre">initial-split-size</span></code> until the <code class="docutils literal notranslate"><span class="pre">max-initial-splits</span></code> is
reached. Then, it starts issuing reads of the <code class="docutils literal notranslate"><span class="pre">max-split-size</span></code> size.</p></td>
<td><p>200</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.max-initial-split-size</span></code></p></td>
<td><p>Sets the initial <a class="reference internal" href="../admin/properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for a single read section
assigned to a worker until <code class="docutils literal notranslate"><span class="pre">max-initial-splits</span></code> have been processed.
You can also use the corresponding catalog session property
<code class="docutils literal notranslate"><span class="pre">&lt;catalog-name&gt;.max_initial_split_size</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">32MB</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta.max-split-size</span></code></p></td>
<td><p>Sets the largest <a class="reference internal" href="../admin/properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for a single read section
assigned to a worker after max-initial-splits have been processed. You
can also use the corresponding catalog session property
<code class="docutils literal notranslate"><span class="pre">&lt;catalog-name&gt;.max_split_size</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">64MB</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta.minimum-assigned-split-weight</span></code></p></td>
<td><p>A decimal value in the range (0, 1] used as a minimum for weights assigned to each split. A low value may improve performance
on tables with small files. A higher value may improve performance for queries with highly skewed aggregations or joins.</p></td>
<td><p>0.05</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">parquet.max-read-block-row-count</span></code></p></td>
<td><p>Sets the maximum number of rows read in a batch.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">8192</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">parquet.optimized-reader.enabled</span></code></p></td>
<td><p>Whether batched column readers are used when reading Parquet files
for improved performance. Set this property to <code class="docutils literal notranslate"><span class="pre">false</span></code> to disable the
optimized parquet reader by default. The equivalent catalog session
property is <code class="docutils literal notranslate"><span class="pre">parquet_optimized_reader_enabled</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">parquet.optimized-nested-reader.enabled</span></code></p></td>
<td><p>Whether batched column readers are used when reading ARRAY, MAP
and ROW types from Parquet files for improved performance. Set this
property to <code class="docutils literal notranslate"><span class="pre">false</span></code> to disable the optimized parquet reader by default
for structural data types. The equivalent catalog session property is
<code class="docutils literal notranslate"><span class="pre">parquet_optimized_nested_reader_enabled</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="bigquery.html" title="BigQuery connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> BigQuery connector </span>
              </div>
            </a>
          
          
            <a href="starburst-hbase.html" title="Starburst HBase connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Starburst HBase connector </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/starburst_KO-T.png" height="26"
                  alt="Starburst Enterprise 413-e.6 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="https://docs.starburst.io/413-e/_static/algolia.js"></script>
<script src="https://docs.starburst.io/413-e/_static/searchbox.js" data-versions="{'Latest LTS (423-e)': '/423-e/', '413-e LTS': '/413-e/', '407-e LTS': '/407-e/', '402-e LTS': '/402-e/', 'Latest STS (426-e)': '/426-e/', '422-e STS': '/422-e/'}"></script>
<script src="https://docs.starburst.io/413-e/_static/searchresults.js" data-versions="{'Latest LTS (423-e)': '/423-e/', '413-e LTS': '/413-e/', '407-e LTS': '/407-e/', '402-e LTS': '/402-e/', 'Latest STS (426-e)': '/426-e/', '422-e STS': '/422-e/'}"></script>
  </body>
</html>