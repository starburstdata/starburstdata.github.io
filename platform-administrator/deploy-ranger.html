<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst | Deploy Ranger Kubernetes clusters</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst - Deploy Ranger Kubernetes clusters">
    <meta property="og:description" content="Your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/logo/starburst-reverse.png">

    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/style.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114610397-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114610397-1');
</script>

</head>
<body>


<div class="wrap">
  

<header style="padding-top:74px;">
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="navbar-left-container">
      <a class="navbar-brand" href="https://www.starburst.io/">
        <img src="/assets/img/logo/starburst-reverse.png" height="40" alt=" Starburst">
      </a>
      <span class="navbar-divider"></span>
      <a href="/" class="nav-item nav-link">DOCUMENTATION</a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
          <a id="get-started"
             class="nav-link dropdown-toggle" 
            aria-haspopup="true" aria-label="Get started" data-is-click="false"
            href="/get-started/index.html">GET STARTED</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/get-started/index.html">Overview</a>
            <a class="dropdown-item" href="/data-consumer/index.html">Data consumer</a>
            <a class="dropdown-item" href="/data-engineer/index.html">Data engineer</a>
            <a class="dropdown-item" href="/platform-administrator/index.html">Platform administrator</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a id="starburst-enterprise"
             class="nav-link dropdown-toggle" 
            aria-haspopup="true" aria-label="Get started" data-is-click="false"
            href="/starburst-enterprise/index.html">STARBURST ENTERPRISE</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/starburst-enterprise/index.html">Overview</a>
            <a class="dropdown-item" href="/starburst-enterprise/try/index.html">Try Starburst Enterprise</a>
            <a class="dropdown-item" href="/latest/index.html">Reference documentation</a>
            <a class="dropdown-item" href="/starburst-enterprise/starburst-admin/index.html">Starburst Admin</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a id="ecosystems"
             class="nav-link dropdown-toggle" 
            aria-haspopup="true" aria-label="Get started" data-is-click="false"
            href="/ecosystems/index.html">ECOSYSTEMS</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/ecosystems/index.html">Overview</a>
            <a class="dropdown-item" href="/ecosystems/amazon/index.html">Amazon AWS</a>
            <a class="dropdown-item" href="/ecosystems/google/index.html">Google Cloud</a>
            <a class="dropdown-item" href="/ecosystems/microsoft/index.html">Microsoft Azure</a>
            <a class="dropdown-item" href="/ecosystems/redhat/index.html">Red Hat OpenShift</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a id="starburst-galaxy"
             class="nav-link dropdown-toggle" 
            aria-haspopup="true" aria-label="Starburst Galaxy" data-is-click="false"
            href="/starburst-galaxy/index.html">STARBURST GALAXY</a>
          <div class="dropdown-menu dropdown-docs">
            <a class="dropdown-item" href="/starburst-galaxy/index.html">Overview</a>
            <a class="dropdown-item" href="/starburst-galaxy/worksheets/index.html">Worksheets</a>
            <a class="dropdown-item" href="/starburst-galaxy/catalogs/index.html">Catalogs</a>
            <a class="dropdown-item" href="/starburst-galaxy/warehouses/index.html">Warehouses</a>
            <a class="dropdown-item" href="/starburst-galaxy/admin/index.html">Admin</a>
            <a class="dropdown-item" href="/starburst-galaxy/security/index.html">Security</a>
          </div>
        </li>
        <li class="nav-item">
          <a id="support"
             class="nav-link" 
            href="/support.html">SUPPORT</a>
        </li>
        
        <li class="nav-item dropdown" id="site-search">
  <a id="dropdownSearch">
    <i class="fa fa-search" style="color: #ffffff; vertical-align: sub"></i>
  </a>
  <div id="dropdownSearchDisplay" class="dropdown-menu" aria-labelledby="dropdownSearch">
    <div id="algolia-search">
      <div id="searchbox"></div>
      <div id="refinement-list">
        <h6>Filter:</h6>
      </div>
      <div id="hits"></div>
      <div id="stats"></div>
    </div>
  </div>
</li>

        
      </ul>
    </div>
  </nav>
</header>

  
  <div class="content">
    <div class="row">
      <div class="col-md-3 side-navigation">
        <div class="spacer-60 toc-sticky left-nav">
          
          <div>
    <h6 class="overline product-nav-title">Platform administrator </h6>
</div>
<hr />

 
  
    
    
<li >
  <a href="/platform-administrator/index.html" >Platform administrator home</a>
</li>
  



 
  
    
    
<li >
  <a href="/platform-administrator/introduction.html" >Introduction</a>
</li>
  



 
  
    
    
<li >
  <a href="/platform-administrator/cluster.html" >Cluster basics</a>
</li>
  



 
  
    
    
<li >
  <a href="/platform-administrator/deploy-update.html" >Deploy and update SEP</a>
</li>
  



 
  
    
    
<li >
  <a href="/platform-administrator/security.html" >Secure your cluster</a>
</li>
  



 
  
    
    
<li >
  <a href="/platform-administrator/performance-tuning.html" >Tune your cluster</a>
</li>
  



 
  
    
    
<li >
  <a href="/platform-administrator/metastores.html" >Metastore options</a>
</li>
  



 
  
    
    
<li class="active">
  <a href="/platform-administrator/deploy-ranger.html" >Deploy Ranger in K8s clusters</a>
</li>
  



 
  
    
    
<li >
  <a href="/platform-administrator/autoscaling.html" >Autoscaling in SEP</a>
</li>
  



<div style="padding-top: 3em;">
  <h6 class="overline product-nav-title">Resources</h6>
</div>
<hr />

 
  
    
    
<li >
  <a href="/glossary.html" >Glossary</a>
</li>
  



 
  
    
    
<li >
  <a href="/videos/index.html" >Video library</a>
</li>
  



          
        </div>
      </div>
      <div class="col-md-9 col-lg-6 spacer-30 docs-content">
        



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/platform-administrator/"
        style="text-transform: uppercase"
      > platform administrator</a> >
    
  
    
      Deploy Ranger Kubernetes clusters
    
  </p>
</div>

        <h1 id="deploy-ranger-kubernetes-clusters">
        
        
          Deploy Ranger Kubernetes clusters <a href="#deploy-ranger-kubernetes-clusters" class="titleAnchor">#</a>
        
        
      </h1>
    

<p><a href="../../latest/security/global-ranger.html">Global access control</a> in
Starburst Enterprise platform (SEP) allows you to create, manage, and store access control
policies for objects that SEP has access to, including:</p>

<ul>
  <li>Catalogs</li>
  <li>Schemas</li>
  <li>Views</li>
  <li>Tables</li>
  <li>Columns</li>
  <li>Rows</li>
  <li>Procedures</li>
  <li>Session Properties</li>
</ul>

<p>Ranger access control policies can grant or revoke access to any of the above
mentioned objects, and are stored in a backing PostgreSQL database.</p>

<p>Ranger is deployed via a separate Kubernetes (K8s) Helm chart. The chart has
several key sections:</p>

<ul>
  <li>Registry credentials</li>
  <li>A required administration container</li>
  <li>The required backing database</li>
  <li>An optional usersync container</li>
</ul>

<p>You can configure multiple Starburst clusters to use the same Ranger
instance. Once deployed, Ranger is available within the cluster and can be
accessed internally using <code class="language-plaintext highlighter-rouge">http://ranger:6080</code>. External access is controlled
via the DNS configured for Ranger ingress.</p>

<p>This document assumes you are familiar with Ranger, as well as Helm charts and
K8s tools such as <code class="language-plaintext highlighter-rouge">kubectl</code>. We recommend that you review the following before
deploying Ranger:</p>

<ul>
  <li>SEP K8s <a href="https://docs.starburst.io/latest/k8s/overview.html#customization-best-practices">best practices</a></li>
  <li>SEP K8s <a href="https://docs.starburst.io/latest/k8s/requirements.html">requirements</a></li>
</ul>
      <h2 id="edit-the-helm-chart">
        
        
          Edit the Helm chart <a href="#edit-the-helm-chart" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Our <a href="https://docs.starburst.io/latest/k8s/ranger-configuration.html">reference
documentation</a>
provides details about the content of the Ranger Helm chart, including yaml
sections not discussed here.</p>
      <h3 id="provide-your-registry-credentials">
        
        
          Provide your registry credentials <a href="#provide-your-registry-credentials" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>We recommend that you use a separate <code class="language-plaintext highlighter-rouge">registry-access.yaml</code> file across all Helm
charts as described in our SEP <a href="../../../latest/k8s/installation.html#create-this-one-file-before-you-begin">K8s installation
instructions</a>.
Alternatively, you can edit the <code class="language-plaintext highlighter-rouge">registryCredentials:</code> node of the Ranger Helm
chart to include them.</p>
      <h3 id="configure-the-ranger-server">
        
        
          Configure the Ranger server <a href="#configure-the-ranger-server" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The following values must be defined in the <code class="language-plaintext highlighter-rouge">admin:</code> node of the Ranger Helm chart:</p>

<ul>
  <li>CPU resources for requests and limits - The defaults are sufficient for most
environments; however, they must work with the instance type you are using.</li>
  <li>Memory resources for requests and limits - The defaults are sufficient for
most environments; however, they must work with the instance type you are
using.</li>
  <li>Passwords - You must supply all passwords in the <code class="language-plaintext highlighter-rouge">passwords:</code> node.</li>
</ul>

<p>You can read more about the <code class="language-plaintext highlighter-rouge">admin:</code> top-level node in our <a href="../../../latest/k8s/ranger-configuration.html#ranger-server">reference
documentation</a>.</p>
      <h3 id="configure-usersync">
        
        
          Configure Usersync <a href="#configure-usersync" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>Usersync automates the process of adding users to Ranger for policy enforcement
by allowing the synchronization of users and groups from LDAP and Active
Directories.</p>

<p>At a minimum, the <code class="language-plaintext highlighter-rouge">env:</code> properties in the top-level <code class="language-plaintext highlighter-rouge">usersync:</code> node must be
defined correctly for your environment. For all Ranger Helm chart usersync
properties, see our <a href="../../../latest/k8s/ranger-configuration.html#ldap-user-synchronization-server">reference
documentation</a>.</p>
      <h3 id="configure-the-postgresql-backing-database">
        
        
          Configure the PostgreSQL backing database <a href="#configure-the-postgresql-backing-database" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The configuration properties for the PostgreSQL database which stores policy
information are found in the <code class="language-plaintext highlighter-rouge">database:</code> top-level node. As a minimal
customization, you must ensure that the following are set correctly for your
environment:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">database</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">internal"</span>
  <span class="na">internal</span><span class="pi">:</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">5432</span>
    <span class="na">databaseName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ranger"</span>
    <span class="na">databaseUser</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ranger"</span>
    <span class="na">databasePassword</span><span class="pi">:</span> <span class="s2">"</span><span class="s">RangerPass123"</span>
    <span class="na">databaseRootUser</span><span class="pi">:</span> <span class="s2">"</span><span class="s">rangeradmin"</span>
    <span class="na">databaseRootPassword</span><span class="pi">:</span> <span class="s2">"</span><span class="s">RangerAdminPass123"</span>
</code></pre></div></div>

<p>You may also configure <code class="language-plaintext highlighter-rouge">volume:</code> persistence and resources, as well as the
<code class="language-plaintext highlighter-rouge">resources:</code> for the backing database itself in the <code class="language-plaintext highlighter-rouge">database:</code> node. For a
complete list of available backing database properties, see our <a href="../../../latest/k8s/ranger-configuration.html#internal-backing-database-server">reference
documentation</a>.</p>
      <h3 id="configure-tls-optional">
        
        
          Configure TLS (optional) <a href="#configure-tls-optional" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>If your organization uses TLS, you must enable and configure Ranger to work with
it. The most straightforward way to handle TLS is to terminate TLS at the load
balancer or ingress, using a signed certificate. This method requires no
additional configuration for Ranger.
<a href="https://cwiki.apache.org/confluence/display/RANGER/Index">Ranger</a> can also be
configured to listen on HTTPS directly.</p>

<p>If you choose not handle TLS using those methods, you can instead configure it
in the
<a href="../../../latest/k8s/ranger-configuration.html#ldap-user-synchronization-server"><code class="language-plaintext highlighter-rouge">usersync:</code></a>
and <a href="../../../latest/k8s/ranger-configuration.html#exposing-the-cluster-to-outside-network"><code class="language-plaintext highlighter-rouge">expose:</code></a> top-level nodes of the Ranger Helm chart.</p>

<div class="alert alert-info" role="alert">
  <i class="fa fa-info-circle"></i>
  <b>Note: </b>
  This is separate from configuring TLS on SEP
itself.</div>
      <h2 id="deploy-ranger">
        
        
          Deploy Ranger <a href="#deploy-ranger" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>When Ranger is configured as desired for your organization, run the following command to deploy it:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">$ helm upgrade -i ranger starburst/starburst-ranger -f ranger-values.yaml</span>
</code></pre></div></div>

        <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
    <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

      </div>
      <div class="col-lg-3 toc-styles d-none d-lg-block">
        <div class="spacer-60 toc-sticky">
          <ul><li><a href="#deploy-ranger-kubernetes-clusters">Deploy Ranger Kubernetes clusters</a><ul><li><a href="#edit-the-helm-chart">Edit the Helm chart</a><ul><li><a href="#provide-your-registry-credentials">Provide your registry credentials</a></li><li><a href="#configure-the-ranger-server">Configure the Ranger server</a></li><li><a href="#configure-usersync">Configure Usersync</a></li><li><a href="#configure-the-postgresql-backing-database">Configure the PostgreSQL backing database</a></li><li><a href="#configure-tls-optional">Configure TLS (optional)</a></li></ul></li><li><a href="#deploy-ranger">Deploy Ranger</a></li></ul></li></ul>

        </div>
      </div>
  </div>
  
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#download" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <a href="https://www.starburst.io/" target="_blank"><img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst" style="margin-bottom:20px;"></a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright Â© 2017-2021<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>

  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
  <script type="text/javascript" src="/assets/js/custom.js"></script>
  <script type="text/javascript" src="/assets/js/algolia.js"></script>
  <script type="text/javascript" src="/assets/js/search-box.js"></script>
  <script type="text/javascript" src="/assets/js/search-results.js"></script>
</body>
</html>

