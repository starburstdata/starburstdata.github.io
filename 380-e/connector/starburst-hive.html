

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Starburst Hive connector &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IBM Cloud Object Storage support for the Hive connector" href="starburst-hive-ibm-cos.html" />
    <link rel="prev" title="Starburst Greenplum connector" href="starburst-greenplum.html" />

  
   



<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/connector/starburst-hive.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#connector/starburst-hive" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 380-e.6 LTS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 380-e.6 LTS</span>
          <span class="md-header-nav__topic"> Starburst Hive connector </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (393-e)" href="/393-e/">Latest LTS (393-e)</a>
      
          <a title="380-e LTS" href="/380-e/">380-e LTS</a>
      
          <a title="370-e LTS" href="/370-e/">370-e LTS</a>
      
          <a title="364-e LTS" href="/364-e/">364-e LTS</a>
      
          <a title="Latest STS (397-e)" href="/397-e/">Latest STS (397-e)</a>
      
          <a title="396-e STS" href="/396-e/">396-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../connector.html" class="md-tabs__link">Connectors</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 380-e.6 LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="starburst-connectors.html" class="md-nav__link">Starburst connectors overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-bigquery.html" class="md-nav__link">Starburst BigQuery connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-db2.html" class="md-nav__link">Starburst IBM DB2 connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-dynamodb.html" class="md-nav__link">Starburst DynamoDB connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-delta-lake.html" class="md-nav__link">Starburst Delta Lake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-generic-jdbc.html" class="md-nav__link">Starburst Generic JDBC connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-greenplum.html" class="md-nav__link">Starburst Greenplum connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Starburst Hive connector </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Starburst Hive connector</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-starburst-hive--page-root" class="md-nav__link">Starburst Hive connector</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#extensions" class="md-nav__link">Extensions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#amazon-glue-support" class="md-nav__link">Amazon Glue support</a>
        </li>
        <li class="md-nav__item"><a href="#cloudera-support" class="md-nav__link">Cloudera support</a>
        </li>
        <li class="md-nav__item"><a href="#ibm-cloud-object-storage-support" class="md-nav__link">IBM Cloud Object Storage support</a>
        </li>
        <li class="md-nav__item"><a href="#minio-support" class="md-nav__link">MinIO support</a>
        </li>
        <li class="md-nav__item"><a href="#mapr-hive-support" class="md-nav__link">MapR Hive support</a>
        </li>
        <li class="md-nav__item"><a href="#openx-json-format-support" class="md-nav__link">OpenX JSON format support</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration" class="md-nav__link">Configuration</a>
        </li>
        <li class="md-nav__item"><a href="#sql-support" class="md-nav__link">SQL support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#materialized-views" class="md-nav__link">Materialized views</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#sb-hive-mv-catalog-config" class="md-nav__link">Configuration</a>
        </li>
        <li class="md-nav__item"><a href="#troubleshooting" class="md-nav__link">Troubleshooting</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#automated-materialized-view-management" class="md-nav__link">Automated materialized view management</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id2" class="md-nav__link">Troubleshooting</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#performance" class="md-nav__link">Performance</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#dynamic-row-filtering" class="md-nav__link">Dynamic row filtering</a>
        </li>
        <li class="md-nav__item"><a href="#storage-caching" class="md-nav__link">Storage caching</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#auth-to-local-user-mapping" class="md-nav__link">Auth-to-local user mapping</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#sb-cached-views" class="md-nav__link">Starburst Cached Views</a>
        </li>
        <li class="md-nav__item"><a href="#accelerated-parquet-reader" class="md-nav__link">Accelerated Parquet reader</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#security" class="md-nav__link">Security</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#azure-ad-credential-pass-through" class="md-nav__link">Azure AD credential pass-through</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#limitations" class="md-nav__link">Limitations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#authorization-options" class="md-nav__link">Authorization options</a>
        </li>
        <li class="md-nav__item"><a href="#hdfs-permissions" class="md-nav__link">HDFS permissions</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id3" class="md-nav__link">Limitations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-3-related-limitations" class="md-nav__link">Hive 3 related limitations</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-ibm-cos.html" class="md-nav__link">- IBM Cloud Object Storage support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-mapr.html" class="md-nav__link">- MapR Hive support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-cdp.html" class="md-nav__link">- Cloudera Data Platform support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-minio.html" class="md-nav__link">- MinIO storage support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-iceberg.html" class="md-nav__link">Starburst Iceberg connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-kafka.html" class="md-nav__link">Starburst Kafka connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-mysql.html" class="md-nav__link">Starburst MySQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-netezza.html" class="md-nav__link">Starburst Netezza connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-oracle.html" class="md-nav__link">Starburst Oracle connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-postgresql.html" class="md-nav__link">Starburst PostgreSQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-redshift.html" class="md-nav__link">Starburst Redshift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-sap-hana.html" class="md-nav__link">Starburst SAP HANA connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-salesforce.html" class="md-nav__link">Starburst Salesforce connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-memsql.html" class="md-nav__link">Starburst SingleStore (MemSQL) connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-snowflake.html" class="md-nav__link">Starburst Snowflake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-splunk.html" class="md-nav__link">Starburst Splunk connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-sqlserver.html" class="md-nav__link">Starburst SQL Server connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-stargate.html" class="md-nav__link">Starburst Stargate</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-synapse.html" class="md-nav__link">Starburst Synapse connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-teradata.html" class="md-nav__link">Starburst Teradata connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-vertica.html" class="md-nav__link">Starburst Vertica connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="accumulo.html" class="md-nav__link">Accumulo connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="atop.html" class="md-nav__link">Atop connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="blackhole.html" class="md-nav__link">Black Hole connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cassandra.html" class="md-nav__link">Cassandra connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="clickhouse.html" class="md-nav__link">ClickHouse connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="delta-lake.html" class="md-nav__link">Delta Lake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="druid.html" class="md-nav__link">Druid connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="elasticsearch.html" class="md-nav__link">Elasticsearch connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="googlesheets.html" class="md-nav__link">Google Sheets connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jmx.html" class="md-nav__link">JMX connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kinesis.html" class="md-nav__link">Kinesis connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kudu.html" class="md-nav__link">Kudu connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="localfile.html" class="md-nav__link">Local file connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mariadb.html" class="md-nav__link">MariaDB connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="memory.html" class="md-nav__link">Memory connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mongodb.html" class="md-nav__link">MongoDB connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="phoenix.html" class="md-nav__link">Phoenix connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="pinot.html" class="md-nav__link">Pinot connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="prometheus.html" class="md-nav__link">Prometheus connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="redis.html" class="md-nav__link">Redis connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="system.html" class="md-nav__link">System connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="thrift.html" class="md-nav__link">Thrift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tpcds.html" class="md-nav__link">TPCDS connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tpch.html" class="md-nav__link">TPCH connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="bigquery.html" class="md-nav__link">BigQuery connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive.html" class="md-nav__link">Hive connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="iceberg.html" class="md-nav__link">Iceberg connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kafka.html" class="md-nav__link">Kafka connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mysql.html" class="md-nav__link">MySQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="oracle.html" class="md-nav__link">Oracle connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="postgresql.html" class="md-nav__link">PostgreSQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="redshift.html" class="md-nav__link">Redshift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="memsql.html" class="md-nav__link">SingleStore (MemSQL) connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sqlserver.html" class="md-nav__link">SQL Server connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hbase.html" class="md-nav__link"> </a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">380-e.6 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-starburst-hive--page-root" class="md-nav__link">Starburst Hive connector</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a>
        </li>
        <li class="md-nav__item"><a href="#extensions" class="md-nav__link">Extensions</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#amazon-glue-support" class="md-nav__link">Amazon Glue support</a>
        </li>
        <li class="md-nav__item"><a href="#cloudera-support" class="md-nav__link">Cloudera support</a>
        </li>
        <li class="md-nav__item"><a href="#ibm-cloud-object-storage-support" class="md-nav__link">IBM Cloud Object Storage support</a>
        </li>
        <li class="md-nav__item"><a href="#minio-support" class="md-nav__link">MinIO support</a>
        </li>
        <li class="md-nav__item"><a href="#mapr-hive-support" class="md-nav__link">MapR Hive support</a>
        </li>
        <li class="md-nav__item"><a href="#openx-json-format-support" class="md-nav__link">OpenX JSON format support</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#configuration" class="md-nav__link">Configuration</a>
        </li>
        <li class="md-nav__item"><a href="#sql-support" class="md-nav__link">SQL support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#materialized-views" class="md-nav__link">Materialized views</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#sb-hive-mv-catalog-config" class="md-nav__link">Configuration</a>
        </li>
        <li class="md-nav__item"><a href="#troubleshooting" class="md-nav__link">Troubleshooting</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#automated-materialized-view-management" class="md-nav__link">Automated materialized view management</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#id2" class="md-nav__link">Troubleshooting</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#performance" class="md-nav__link">Performance</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#dynamic-row-filtering" class="md-nav__link">Dynamic row filtering</a>
        </li>
        <li class="md-nav__item"><a href="#storage-caching" class="md-nav__link">Storage caching</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#auth-to-local-user-mapping" class="md-nav__link">Auth-to-local user mapping</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#sb-cached-views" class="md-nav__link">Starburst Cached Views</a>
        </li>
        <li class="md-nav__item"><a href="#accelerated-parquet-reader" class="md-nav__link">Accelerated Parquet reader</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#security" class="md-nav__link">Security</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#azure-ad-credential-pass-through" class="md-nav__link">Azure AD credential pass-through</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#limitations" class="md-nav__link">Limitations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#authorization-options" class="md-nav__link">Authorization options</a>
        </li>
        <li class="md-nav__item"><a href="#hdfs-permissions" class="md-nav__link">HDFS permissions</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#id3" class="md-nav__link">Limitations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-3-related-limitations" class="md-nav__link">Hive 3 related limitations</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="connector-starburst-hive--page-root">Starburst Hive connector<a class="headerlink" href="#connector-starburst-hive--page-root" title="Permalink to this headline">#</a></h1>
<img class="connector-logo" src="../_static/img/logos/hive.png"/><p>The Starburst Hive connector is an extended version of the
<a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a> with configuration and usage identical.</p>
<p>Additional information:</p>
<ul class="simple">
<li><p><a class="reference internal" href="hive-s3.html"><span class="doc">Hive connector with Amazon S3</span></a></p></li>
<li><p><a class="reference internal" href="hive-azure.html"><span class="doc">Hive connector with Azure Storage</span></a></p></li>
<li><p><a class="reference internal" href="hive-gcs-tutorial.html"><span class="doc">Hive connector GCS tutorial</span></a></p></li>
<li><p><a class="reference internal" href="hive-caching.html"><span class="doc">Hive connector storage caching</span></a></p></li>
<li><p><a class="reference internal" href="hive-security.html"><span class="doc">Hive connector security configuration</span></a></p></li>
</ul>

<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Fulfill the <a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a> requirements.</p></li>
<li><p>Additional features of the connector require a valid
<a class="reference internal" href="../installation/license-requirements.html"><span class="doc">Starburst Enterprise license</span></a>, unless otherwise noted.</p></li>
</ul>


<h2 id="extensions">Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">#</a></h2>
<p>The Starburst Hive connector supports improvements detailed in the <a class="reference internal" href="#sb-hive-security"><span class="std std-ref">security</span></a> and <a class="reference internal" href="#sb-hive-performance"><span class="std std-ref">performance</span></a> sections, and
includes following additional extensions:</p>

<h3 id="amazon-glue-support">Amazon Glue support<a class="headerlink" href="#amazon-glue-support" title="Permalink to this headline">#</a></h3>
<p>Statistics collection is supported for Hive Metastore and Amazon Glue.</p>
<p>Configuring and using SEP with AWS Glue is described in the <a class="reference external" href="../../ecosystems/amazon/data-sources/glue.html">AWS Glue</a> documentation section.</p>


<h3 id="cloudera-support">Cloudera support<a class="headerlink" href="#cloudera-support" title="Permalink to this headline">#</a></h3>
<p>The connector <a class="reference internal" href="starburst-hive-cdp.html"><span class="doc">supports the Cloudera Data Platform (CDP) and the
predecessor Cloudera Distributed Hadoop (CDH) platform</span></a>.</p>


<h3 id="ibm-cloud-object-storage-support">IBM Cloud Object Storage support<a class="headerlink" href="#ibm-cloud-object-storage-support" title="Permalink to this headline">#</a></h3>
<p>The connector supports querying data on
<a class="reference internal" href="starburst-hive-ibm-cos.html"><span class="doc">IBM Cloud Object Storage</span></a>.</p>


<h3 id="minio-support">MinIO support<a class="headerlink" href="#minio-support" title="Permalink to this headline">#</a></h3>
<p>The connector supports querying data on
<a class="reference internal" href="starburst-minio.html"><span class="doc">MinIO storage</span></a>.</p>


<h3 id="mapr-hive-support">MapR Hive support<a class="headerlink" href="#mapr-hive-support" title="Permalink to this headline">#</a></h3>
<p>The connector includes support <a class="reference internal" href="starburst-hive-mapr.html"><span class="doc">for a MapR-based Hive metastore as well as
the MapR filesystem</span></a>.</p>


<span id="sb-hive-openx-json-serde"></span><h3 id="openx-json-format-support">OpenX JSON format support<a class="headerlink" href="#openx-json-format-support" title="Permalink to this headline">#</a></h3>
<p>The connector supports reading and writing data to tables as JSON files, and use
the OpenX JSON serialization and deserialization (serde) from the Java class
<code class="docutils literal notranslate"><span class="pre">org.openx.data.jsonserde.JsonSerDe</span></code>.</p>
<p>Existing tables using that serde  and all the associated serde properties are
handled automatically.</p>
<p>The actual serde implementation is a fork of the original OpenX serde. It is
updated to be compatible with the Hive 3 APIs used in SEP. The binary package
of the forked serde implementation is available from Starburst Support. You can install
the package in your systems reading and writing to your Hive-managed storage
with Hive 3 for optimal compatibility.</p>



<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h2>
<p>The connector configuration is similar to the configuration for the base
<a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a>, with these additional properties:</p>
<table id="id4">
<caption><span class="caption-text">Starburst Hive connector properties</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 70%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.accelerated-parquet-reader.enabled</span></code></p></td>
<td><p>Use the <a class="reference internal" href="#sb-hive-parquet-reader"><span class="std std-ref">accelerated Parquet reader</span></a>.
Defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.azure.abfs.oauth2.passthrough</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to reuse the <a class="reference internal" href="../security/oauth2-providers.html#azure-active-directory"><span class="std std-ref">Azure Active Directory (AD)</span></a> token for access to the Azure Blob
Storage. For more information, see <a class="reference internal" href="#sb-hive-azure-ad-passthro"><span class="std std-ref">Azure AD credential
pass-through</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.delta-lake-catalog-name</span></code></p></td>
<td><p>Specifies the catalog name that <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> queries are redirected to when
a Delta Lake table is detected.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.delta-catalog-name</span></code></p></td>
<td><p>Deprecated. Use <code class="docutils literal notranslate"><span class="pre">hive.delta-lake-catalog-name</span></code> instead.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.auth-to-local.config-file</span></code></p></td>
<td><p>Path to configuration file for mapping usage with
<a class="reference internal" href="#sb-hive-caching"><span class="std std-ref">storage caching</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.auth-to-local.refresh-period</span></code></p></td>
<td><p>Refresh period for mapping file with <a class="reference internal" href="#sb-hive-caching"><span class="std std-ref">storage caching</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">materialized-views.*</span></code></p></td>
<td><p>Various properties for <a class="reference internal" href="#sb-hive-materialized-views"><span class="std std-ref">materialized view usage and configuration</span></a>.</p></td>
</tr>
</tbody>
</table>


<span id="sb-hive-sql-support"></span><h2 id="sql-support">SQL support<a class="headerlink" href="#sql-support" title="Permalink to this headline">#</a></h2>
<p>The connector supports all of the SQL statements listed in the <a class="reference internal" href="hive.html#hive-sql-support"><span class="std std-ref">Hive
connector documentation</span></a>.</p>
<p>The following section describes additional SQL operations that are supported by
SEP enhancements to the Trino connector.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../language/sql-support.html#sql-materialized-view-management"><span class="std std-ref">Materialized view management</span></a>, see also
<a class="reference internal" href="#sb-hive-materialized-views"><span class="std std-ref">Materialized views</span></a> and <a class="reference internal" href="#sb-hive-mv-automatic-refresh"><span class="std std-ref">Automated materialized view management</span></a></p></li>
</ul>

<span id="sb-hive-materialized-views"></span><h3 id="materialized-views">Materialized views<a class="headerlink" href="#materialized-views" title="Permalink to this headline">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are a data consumer, read our
<a class="reference external" href="../../../data-consumer/materialized-views.html">getting started page</a>
for a concise introduction to using materialized views.</p>
</div>
<p>The connector supports <a class="reference internal" href="../language/sql-support.html#sql-materialized-view-management"><span class="std std-ref">Materialized view management</span></a>, with the
following requirements:</p>
<ul class="simple">
<li><p>The cache service must be <a class="reference internal" href="../admin/cache-service.html"><span class="doc">configured and running</span></a></p></li>
<li><p>Catalogs must be configured to allow materialized views.</p></li>
</ul>
<p>In the underlying system, each materialized view consists of a view definition
and a storage table. The storage table name is stored as a materialized view
property. The materialized data is stored in that storage table.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are a data engineer or platform administrator, read our <a class="reference external" href="../../../data-engineer/cache-service.html">cache
service introduction</a> for an
overview of setting up the cache service and using materialized views.</p>
</div>
<p>The <a class="reference internal" href="../sql/create-materialized-view.html"><span class="doc">CREATE MATERIALIZED VIEW</span></a> statement specifies the query to define
the data for the materialized view, the refresh schedule, and other parameters
used by the cache service. The query can access any available catalog and
schema. Storage configuration for the materialized view must be supplied with
<a class="reference internal" href="hive.html#hive-procedures"><span class="std std-ref">table properties</span></a> in the <code class="docutils literal notranslate"><span class="pre">WITH</span></code> statement. The
optional <a class="reference internal" href="#sb-hive-mv-automatic-refresh"><span class="std std-ref">automatic refresh is also configured with properties set in the
WITH clause</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">format</span></code> table property is not supported for materialized views created
with the Hive connector. These materialized views use the default file format
configured in the optional <code class="docutils literal notranslate"><span class="pre">hive.storage-format</span></code> catalog configuration
property, which defaults to <code class="docutils literal notranslate"><span class="pre">ORC</span></code>.</p>
</div>
<p>Once the storage tables are populated, the materialized view is created, and
you can access it like a table using the name of the materialized view.</p>
<p>Materialized views are populated with data and refreshed manually with the
<a class="reference internal" href="../sql/refresh-materialized-view.html"><span class="doc">REFRESH MATERIALIZED VIEW</span></a> command, or by the
<a class="reference internal" href="#sb-hive-mv-automatic-refresh"><span class="std std-ref">Automated materialized view management</span></a>.</p>
<p>Use the  <a class="reference internal" href="../sql/show-create-materialized-view.html"><span class="doc">SHOW CREATE MATERIALIZED VIEW</span></a> statement to view the
complete <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">MATERIALIZED</span> <span class="pre">VIEW</span></code> statement for a materialized view,
including the properties in the <code class="docutils literal notranslate"><span class="pre">WITH</span></code> clause.</p>
<p>Dropping a materialized view with <a class="reference internal" href="../sql/drop-materialized-view.html"><span class="doc">DROP MATERIALIZED VIEW</span></a> removes
the definition and the storage table.</p>

<span id="id1"></span><h4 id="sb-hive-mv-catalog-config">Configuration<a class="headerlink" href="#sb-hive-mv-catalog-config" title="Permalink to this headline">#</a></h4>
<p>To enable materialized views you must:</p>
<ul class="simple">
<li><p>Create a storage schema to contain the storage tables for materialized views.</p></li>
<li><p>Specify the required configuration properties in the catalog properties file
for each desired catalog to enable materialized view creation and usage in
that catalog.</p></li>
</ul>
<p>Both are discussed in this section.</p>
<p>The following are the required catalog configuration properties for a deployment
that connects to the cache service using HTTPS on the default port:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">materialized-views.enabled</span><span class="o">=</span><span class="s">true</span>
<span class="na">materialized-views.namespace</span><span class="o">=</span><span class="s">&lt;your_namespace&gt;</span>
<span class="na">materialized-views.storage-schema</span><span class="o">=</span><span class="s">&lt;your_storage_schema&gt;</span>
<span class="na">cache-service.uri</span><span class="o">=</span><span class="s">https://&lt;cache-service-hostname&gt;:8543</span>
<span class="na">cache-service.user</span><span class="o">=</span><span class="s">&lt;starburst-user&gt;</span>
<span class="na">cache-service.password</span><span class="o">=</span><span class="s">&lt;starburst-password&gt;</span>
</pre></div>
</div>
<p>The following are the required catalog configuration properties for a deployment
that connects to the cache service using an insecure HTTP connection on the
default port:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">materialized-views.enabled</span><span class="o">=</span><span class="s">true</span>
<span class="na">materialized-views.namespace</span><span class="o">=</span><span class="s">&lt;your_namespace&gt;</span>
<span class="na">materialized-views.storage-schema</span><span class="o">=</span><span class="s">&lt;your_storage_schema&gt;</span>
<span class="na">cache-service.uri</span><span class="o">=</span><span class="s">http://&lt;cache-service-hostname&gt;:8180</span>
</pre></div>
</div>
<p>The following table lists all available catalog configuration properties related
to materialized views. Instructions for creating the required storage schema
follow this table.</p>
<table id="id5">
<caption><span class="caption-text">Catalog configuration properties for materialized views</span><a class="headerlink" href="#id5" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 35%"/>
<col style="width: 55%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">materialized-views.enabled</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to enable materialized views.</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">materialized-views.storage-catalog</span></code></p></td>
<td><p>Specifies the catalog that contains the schema used to store the storage
tables for the materialized views. Defaults to the catalog used for the
materialized view itself.</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">materialized-views.storage-schema</span></code></p></td>
<td><p>Specifies the schema used to store the storage tables for the materialized
views. Ensure that the proper access control exists on that schema to
prevent users from directly accessing the storage tables.</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">materialized-views.namespace</span></code></p></td>
<td><p>Used by the cache service to create a fully-qualified name for the
materialized views, and to identify which catalog is used to run the
scheduled refresh queries.</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">materialized-views.allow-run-as-invoker</span></code></p></td>
<td><p>Directs SEP to run as the user submitting the query when present in a
catalog and set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. If not present or set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, it
attempts to run as the viewâ€™s owner. Equivalent catalog session property
is <code class="docutils literal notranslate"><span class="pre">materialized_views_allow_run_as_invoker</span></code>. This is required to be
set to <code class="docutils literal notranslate"><span class="pre">true</span></code> for creating materialized views that include <code class="docutils literal notranslate"><span class="pre">WITH</span>
<span class="pre">(run_as_invoker</span> <span class="pre">=</span> <span class="pre">true)</span></code>.</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">materialized-views.run-as-invoker-default-value</span></code></p></td>
<td><p>Specifies default value for the <a class="reference internal" href="#sb-hive-mv-automatic-refresh"><span class="std std-ref">run-as-invoker property</span></a>.</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cache-service.uri</span></code></p></td>
<td><p>The URI of the SEP cache service.</p></td>
<td><p>true</p></td>
</tr>
</tbody>
</table>
<p>The storage schema must be defined in the catalog properties file.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">materialized-views.storage-schema</span><span class="o">=</span><span class="s">views_cache_storage</span>
</pre></div>
</div>
<p>If it does not exist yet, you must create it with a defined location:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">SCHEMA</span> <span class="n">myhive</span><span class="p">.</span><span class="n">views_cache_storage</span> <span class="k">WITH</span> <span class="p">(</span><span class="k">location</span> <span class="o">=</span> <span class="s1">'s3a://&lt;s3-bucket-name&gt;/hivepostgres_views/views_cache_storage/'</span><span class="p">);</span>
</pre></div>
</div>
<p>In addition, the schema for the materialized view itself must exist. If it does
not exist, you must create it:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">SCHEMA</span> <span class="n">myhive</span><span class="p">.</span><span class="n">views_schema</span> <span class="k">WITH</span> <span class="p">(</span><span class="k">location</span> <span class="o">=</span> <span class="s1">'s3a://&lt;s3-bucket-name&gt;/hivepostgres_views/views_schemas'</span><span class="p">);</span>
</pre></div>
</div>
<p>With the cache service running, the catalog configured and the schemas defined,
you can proceed to create a materialized view. In this example, a materialized
view named <code class="docutils literal notranslate"><span class="pre">myhive.myschema.my_materialized_view</span></code> is created:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="n">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">myhive</span><span class="p">.</span><span class="n">myschema</span><span class="p">.</span><span class="n">my_materialized_view</span>
<span class="k">WITH</span> <span class="p">(</span>
  <span class="n">grace_period</span> <span class="o">=</span> <span class="s1">'15m'</span><span class="p">,</span>
  <span class="n">max_import_duration</span> <span class="o">=</span> <span class="s1">'1m'</span>
<span class="p">)</span> <span class="k">AS</span>
  <span class="k">SELECT</span> <span class="o">*</span>
  <span class="k">FROM</span> <span class="n">mycatalog</span><span class="p">.</span><span class="k">public</span><span class="p">.</span><span class="n">my_table</span>
  <span class="k">WHERE</span> <span class="n">my_field</span> <span class="k">IN</span> <span class="p">(</span> <span class="s1">'myvalue1'</span><span class="p">,</span> <span class="s1">'myvalue2'</span> <span class="p">)</span>
  <span class="p">;</span>
</pre></div>
</div>
<p>The query, specified after <code class="docutils literal notranslate"><span class="pre">AS</span></code>, can be any valid query, including queries
accessing one or multiple other catalogs.</p>
<p>The properties for the view are stored in the cache service database, and the
data in the storage schema, <code class="docutils literal notranslate"><span class="pre">myhive.mymvstorage</span></code>.</p>
<p>Once the materialized view has been created, you can query the data. If the data
is not yet cached, the query runs against the source data instead. You can force
the materialized view to cache at any time by running a <code class="docutils literal notranslate"><span class="pre">REFRESH</span></code> statement:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">REFRESH</span> <span class="n">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">myhive</span><span class="p">.</span><span class="n">myschema</span><span class="p">.</span><span class="n">my_materialized_view</span><span class="p">;</span>
</pre></div>
</div>
<p>To query data in the materialized view, use a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement
as you would for any other table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">myhive</span><span class="p">.</span><span class="n">myschema</span><span class="p">.</span><span class="n">my_materialized_view</span><span class="p">;</span>
</pre></div>
</div>
<p>You can also use the materialized view in more complex queries, just like any
other table.</p>
<p>Access to a materialized view is much faster, since the data is readily
available in the storage table and no computation is necessary. The data however
does use storage in addition to the source data. Use the following query to
determine the catalog, schema, and name of the storage table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">metadata</span><span class="p">.</span><span class="n">materialized_views</span> <span class="k">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'viewname'</span><span class="p">;</span>
</pre></div>
</div>
<p>Then use the hidden properties of the storage table to compute an estimate for
the used storage:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="k">size</span><span class="p">)</span> <span class="n">table_size</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="n">num_files</span>
<span class="k">FROM</span> <span class="p">(</span>
  <span class="k">SELECT</span>
    <span class="ss">"$path"</span> <span class="k">AS</span> <span class="n">file</span><span class="p">,</span>
    <span class="ss">"$file_size"</span> <span class="k">AS</span> <span class="k">size</span>
  <span class="k">FROM</span> <span class="o">&lt;</span><span class="n">storage_catalog</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">storage_schema</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">storage_table</span><span class="o">&gt;</span>
<span class="p">)</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">file</span><span class="p">,</span> <span class="k">size</span><span class="p">;</span>
</pre></div>
</div>


<h4 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">#</a></h4>
<p>Whether your materialized views are refreshed manually or by the cache service
using <code class="docutils literal notranslate"><span class="pre">WITH</span></code> clause parameters, refreshes may fail if columns are added or
renamed at the source. If this happens, drop the materialized view, and create
it again.</p>



<span id="sb-hive-mv-automatic-refresh"></span><h3 id="automated-materialized-view-management">Automated materialized view management<a class="headerlink" href="#automated-materialized-view-management" title="Permalink to this headline">#</a></h3>
<p>The connector uses the <a class="reference internal" href="../admin/cache-service.html#cache-service-config-properties"><span class="std std-ref">cache service</span></a> to
manage metadata and maintenance of materialized views, related storage
tables, and other aspects.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">MATERIALIZED</span> <span class="pre">VIEW</span></code> statement runs initially, the cache
services picks up processing asynchronously after its <a class="reference internal" href="../admin/cache-service.html#cache-service-config-properties"><span class="std std-ref">configured
refresh-interval and delay</span></a>, which defaults to
two minutes. The defined query is then run and used to populate the storage
tables. The processing time depends on the complexity of the query, the cluster
performance, and the performance of the storage.</p>
<p>Configuration properties are specified in the <code class="docutils literal notranslate"><span class="pre">WITH</span></code> clause when creating a
materialized view:</p>
<table id="id6">
<caption><span class="caption-text">Properties for materialized view refresh automation</span><a class="headerlink" href="#id6" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 20%"/>
<col style="width: 60%"/>
<col style="width: 20%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">refresh_interval</span></code></p></td>
<td><p>Minimum duration between refreshes of the materialized
view, for example <code class="docutils literal notranslate"><span class="pre">refresh_interval</span> <span class="pre">=</span> <span class="pre">'1d'</span></code> for one day. Refresh
interval must be greater than or equal to five minutes, and is defined as
a <a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration</span></a>. The cache service refreshes the
materialized view after this interval, on the serviceâ€™s next refresh as
defined by its <a class="reference internal" href="../admin/cache-service.html#cache-service-config-properties"><span class="std std-ref">refresh-interval and delay configuration properties</span></a>. Cannot be used with <code class="docutils literal notranslate"><span class="pre">cron</span></code>.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cron</span></code></p></td>
<td><p>Unix cron expression specifying a schedule for regular refresh of the
materialized view, for example <code class="docutils literal notranslate"><span class="pre">30</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">*</span></code>. The cache service refreshes
the materialized view according to this schedule, on the serviceâ€™s next
refresh as defined by its <a class="reference internal" href="../admin/cache-service.html#cache-service-config-properties"><span class="std std-ref">refresh-interval and delay configuration
properties</span></a>. Cannot be used with
<code class="docutils literal notranslate"><span class="pre">refresh_interval</span></code>.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_import_duration</span></code></p></td>
<td><p>Maximum allowed execution time for the refresh of the materialized view to
complete. Measured from the scheduled time to the completion of the query
execution. If a refresh fails for exceeding the maximum duration, the
cache service attempts a refresh at the next scheduled time.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">30m</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">grace_period</span></code></p></td>
<td><p>After a viewâ€™s TTL (Time to Live, calculated as
<code class="docutils literal notranslate"><span class="pre">refresh_interval</span> <span class="pre">+</span> <span class="pre">max_import_duration</span></code>) has expired, the cache service
waits the specified <code class="docutils literal notranslate"><span class="pre">grace_period</span></code> before queries running against it are
terminated. If no <code class="docutils literal notranslate"><span class="pre">grace_period</span></code> is defined, the cache
service <code class="docutils literal notranslate"><span class="pre">defaultGracePeriod</span></code> is used. <strong>NOTE:</strong> If you use this field,
you must specify a value greater than the <code class="docutils literal notranslate"><span class="pre">defaultGracePeriod</span></code> defined
in the cache service. Specifying a value less than the default results in
error.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10m</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">incremental_column</span></code></p></td>
<td><p>Column used during incremental refresh by the service to apply an
<code class="docutils literal notranslate"><span class="pre">incremental_column</span> <span class="pre">&gt;</span> <span class="pre">max(incremental_column)</span></code> filter when loading data
incrementally from the source table. This facilitates loading only newer
data from the source table instead of the entire table in each refresh
iteration. If no column is specified, the cache service execute a
full refresh. The columns need to be monotonically increasing with each
new record. Typically types are dates or increasing integer values used
as identifiers.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">namespace</span></code></p></td>
<td><p>Namespace used by the cache service to create a fully qualified name for
materialized views in a catalog.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">run_as_invoker</span></code></p></td>
<td><p>Validate access to tables and data referenced by materialized view as
invoker. If you want to set this to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the catalog property
<code class="docutils literal notranslate"><span class="pre">materialized-views.allow-run-as-invoker</span></code> needs to be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>
as well.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
</tbody>
</table>
<p>In the following example, a materialized view named <code class="docutils literal notranslate"><span class="pre">customer_total_return</span></code> in
<code class="docutils literal notranslate"><span class="pre">myhive.myschema</span></code> is created to automatically refresh daily at 2:30AM:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="n">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">myhive</span><span class="p">.</span><span class="n">myschema</span><span class="p">.</span><span class="n">customer_total_return</span>
<span class="k">WITH</span> <span class="p">(</span>
  <span class="n">grace_period</span> <span class="o">=</span> <span class="s1">'5m'</span><span class="p">,</span>
  <span class="n">max_import_duration</span> <span class="o">=</span> <span class="s1">'30m'</span><span class="p">,</span>
  <span class="n">cron</span> <span class="o">=</span> <span class="s1">'30 2 * * *'</span>
<span class="p">)</span> <span class="k">AS</span>
    <span class="k">SELECT</span>
      <span class="n">sr_customer_sk</span> <span class="n">ctr_customer_sk</span><span class="p">,</span>
      <span class="n">sr_store_sk</span> <span class="n">ctr_store_sk</span><span class="p">,</span>
      <span class="k">sum</span><span class="p">(</span><span class="n">sr_return_amt</span><span class="p">)</span> <span class="n">ctr_total_return</span>
    <span class="k">FROM</span>
    <span class="n">tpcds</span><span class="p">.</span><span class="n">sf1</span><span class="p">.</span><span class="n">store_returns</span><span class="p">,</span>
    <span class="n">tpcds</span><span class="p">.</span><span class="n">sf1</span><span class="p">.</span><span class="n">date_dim</span>
    <span class="k">WHERE</span> <span class="p">(</span> <span class="p">(</span><span class="n">sr_returned_date_sk</span> <span class="o">=</span> <span class="n">d_date_sk</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">d_year</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">)</span> <span class="p">)</span>
    <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">sr_customer_sk</span><span class="p">,</span> <span class="n">sr_store_sk</span>
<span class="p">;</span>
</pre></div>
</div>
<p>After a materialized view is refreshed, at the end of the effective grace
period, any new query requests that arrive after the new refresh is complete are
run against the new contents. Query requests created before a refresh is
complete are run against the previously existing contents until the effective
grace period for that table is over.</p>

<h4 id="id2">Troubleshooting<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h4>
<p>When you first create a materialized view, it is helpful to be able to determine
the state of a refresh, particularly when a refresh has failed or the view data
appears to be stale. This can happen when the refresh takes longer than the
combined <code class="docutils literal notranslate"><span class="pre">max_import_duration</span></code> and effective grace period. Materialized views
have their own metadata tables located in the default schema of the <a class="reference internal" href="../admin/cache-service.html#cache-service-external-rdbms"><span class="std std-ref">cache
service database</span></a> that contain current state and
other information. Metadata tables are named as the materialized view name with
<code class="docutils literal notranslate"><span class="pre">$imports</span></code> added to the end. For example, given a materialized view,
<code class="docutils literal notranslate"><span class="pre">myhive.myschema.customer_total_return</span></code>, run the following query to refresh
and view the metadata for your materialized view:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">myhive</span><span class="p">.</span><span class="n">myschema</span><span class="p">.</span><span class="ss">"customer_total_return$imports"</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must enclose <code class="docutils literal notranslate"><span class="pre">&lt;your_table_name&gt;$imports</span></code> in quotes so that the query
parser handles the dollar sign correctly.</p>
</div>
<p>The resulting metadata table contains the following fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">status</span></code> - Scheduled, Running, Finished, Failed, Timeout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_import_duration</span></code> - The value originally set in the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">AS</span></code>
statement</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_time</span></code> - As computed from the <code class="docutils literal notranslate"><span class="pre">cron</span></code> or <code class="docutils literal notranslate"><span class="pre">refresh_interval</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">finish_time</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_count</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error</span></code></p></li>
</ul>
<p>The metadata for a refresh is maintained until the effective grace period
passes.</p>




<span id="sb-hive-performance"></span><h2 id="performance">Performance<a class="headerlink" href="#performance" title="Permalink to this headline">#</a></h2>
<p>The connector includes a number of performance improvements, detailed in the
following sections.</p>

<h3 id="dynamic-row-filtering">Dynamic row filtering<a class="headerlink" href="#dynamic-row-filtering" title="Permalink to this headline">#</a></h3>
<p><a class="reference internal" href="../admin/dynamic-filtering.html"><span class="doc">Dynamic filtering</span></a>, and specifically also
dynamic row filtering, is enabled by default. Row filtering improves the
effectiveness of dynamic filtering for a connector by using dynamic filters to
remove unnecessary rows during a table scan. It is especially powerful for
selective filters on columns that are not used for partitioning, bucketing, or
when the values do not appear in any clustered order naturally.</p>
<p>As a result the amount of data read from storage and transferred across the
network is further reduced. You get access to higher query performance and a
reduced cost.</p>
<p>You can use the following properties to configure dynamic row filtering:</p>
<table id="id7">
<caption><span class="caption-text">Dynamic row filtering properties</span><a class="headerlink" href="#id7" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic-row-filtering.enabled</span></code></p></td>
<td><p>Toggle dynamic row filtering. Defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Catalog session
property name is <code class="docutils literal notranslate"><span class="pre">dynamic_row_filtering_enabled</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic-row-filtering.selectivity-threshold</span></code></p></td>
<td><p>Control the threshold for the fraction of the selected rows from the
overall table above which dynamic row filters are not used. Defaults to
0.7. Catalog session property name is
<code class="docutils literal notranslate"><span class="pre">dynamic_row_filtering_selectivity_threshold</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic-row-filtering.wait-timeout</span></code></p></td>
<td><p>Duration to wait for completion of dynamic row filtering. Defaults to 0.
The default causes query processing to proceed without waiting for the
dynamic row filter, it is collected asynchronously and used as soon as
it becomes available. Catalog session property name is
<code class="docutils literal notranslate"><span class="pre">dynamic_row_filtering_wait_timeout</span></code>.</p></td>
</tr>
</tbody>
</table>


<span id="sb-hive-caching"></span><h3 id="storage-caching">Storage caching<a class="headerlink" href="#storage-caching" title="Permalink to this headline">#</a></h3>
<p>The connector supports the default <a class="reference internal" href="hive-caching.html"><span class="doc">storage caching</span></a>. In addition, if HDFS Kerberos authentication is
enabled in your catalog properties file with the following setting, caching
takes the relevant permissions into account and operates accordingly:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">hive.hdfs.authentication.type</span><span class="o">=</span><span class="s">KERBEROS</span>
</pre></div>
</div>
<p><a class="reference internal" href="hive-security.html"><span class="doc">Additional configuration for Kerberos</span></a> is
required.</p>
<p>If HDFS Kerberos authentication is enabled, you can also enable user
impersonation using:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">hive.hdfs.impersonation.enabled</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>The service user assigned to SEP needs to be able to access data files in
underlying storage. Access permissions are  checked against impersonated user,
yet with caching in place, some read operations happen in context of system
user.</p>
<p>Any access control defined with the <a class="reference internal" href="../security/ranger-overview.html"><span class="doc">integration of Apache Ranger or the
Privacera platform</span></a> is also enforced by the storage
caching.</p>

<h4 id="auth-to-local-user-mapping">Auth-to-local user mapping<a class="headerlink" href="#auth-to-local-user-mapping" title="Permalink to this headline">#</a></h4>
<p>The connector supports auth-to-local mapping of the impersonated username during
HDFS access. This requires enabling HDFS impersonation and setting the
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.auth-to-local.config-file</span></code> property to a path containing a mapping
file in the format described in <a class="reference internal" href="../security/impersonation.html#user-to-local-translation"><span class="std std-ref">auth-to-local translations file</span></a>. You can configure regular refresh of the
configuration file with <code class="docutils literal notranslate"><span class="pre">hive.hdfs.auth-to-local.refresh-period</span></code>.</p>



<h3 id="sb-cached-views">Starburst Cached Views<a class="headerlink" href="#sb-cached-views" title="Permalink to this headline">#</a></h3>
<p>The connector supports <a class="reference internal" href="../admin/starburst-cached-views.html"><span class="doc">Starburst Cached Views</span></a> and can therefore be
configured for <a class="reference internal" href="../admin/table-scan-redirection.html"><span class="doc">table scan redirection</span></a> and
<a class="reference internal" href="#sb-hive-materialized-views"><span class="std std-ref">materialized views</span></a> to improve performance.</p>


<span id="sb-hive-parquet-reader"></span><h3 id="accelerated-parquet-reader">Accelerated Parquet reader<a class="headerlink" href="#accelerated-parquet-reader" title="Permalink to this headline">#</a></h3>
<p>The connector includes a Parquet reader with numerous performance improvements
for reading data files using the Parquet format. The reader is enabled by
default.</p>
<p>You can disable it, and therefore use the default reader from Trino, in your
catalog properties file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">hive.accelerated-parquet-reader.enabled</span><span class="o">=</span><span class="s">false</span>
</pre></div>
</div>
<p>Alternatively you can disable it for a specific user session with the
<a class="reference internal" href="../sql/set-session.html"><span class="doc">catalog session property</span></a>
<code class="docutils literal notranslate"><span class="pre">accelerated_parquet_reader_enabled</span></code>.</p>



<span id="sb-hive-security"></span><h2 id="security">Security<a class="headerlink" href="#security" title="Permalink to this headline">#</a></h2>
<p>The connector includes a number of security-related features, detailed in the
following sections.</p>

<span id="sb-hive-azure-ad-passthro"></span><h3 id="azure-ad-credential-pass-through">Azure AD credential pass-through<a class="headerlink" href="#azure-ad-credential-pass-through" title="Permalink to this headline">#</a></h3>
<p>Credential pass-through is available for read operations and <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code>
statements with Azure AD. To use <a class="reference internal" href="../security/oauth2-providers.html#azure-active-directory"><span class="std std-ref">Azure Active Directory (AD)</span></a> with <a class="reference internal" href="../security/oauth2-passthrough.html"><span class="doc">credential pass-through</span></a>, you must include the following configuration in
<a class="reference internal" href="../installation/deployment.html#config-properties"><span class="std std-ref">the config.properties file</span></a>:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">http-server.authentication.oauth2.scopes</span><span class="o">=</span><span class="s">https://storage.azure.com/user_impersonation,openid</span>
<span class="na">http-server.authentication.oauth2.additional-audiences</span><span class="o">=</span><span class="s">https://storage.azure.com</span>
</pre></div>
</div>
<p>If you use the Azure AD as the identity provider when you integrate with Azure
Storage, you can reuse the AD token to access Azure Storage blobs.</p>
<p>To reuse the AD token, set the following access properties in the catalog
properties file:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">hive.azure.abfs.oauth2.passthrough</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>Enable the OAuth 2.0 token pass-through <a class="reference internal" href="../security/authentication-types.html"><span class="doc">authentication type</span></a> with the following configuration in
<a class="reference internal" href="../installation/deployment.html#config-properties"><span class="std std-ref">Config properties</span></a>:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">http-server.authentication.type</span><span class="o">=</span><span class="s">DELEGATED-OAUTH2</span>
</pre></div>
</div>
<p>You must grant the Azure application <code class="docutils literal notranslate"><span class="pre">user_impersonation</span></code> API permissions for
Azure Storage. You can further read about it in the <a class="reference external" href="https://docs.microsoft.com/azure/storage/common/storage-auth-aad-app">Azure docs</a></p>
<p>To ensure blobs are accessible, read about Azure Storage
access configuration:
* <a class="reference external" href="https://docs.microsoft.com/azure/storage/blobs/assign-azure-role-data-access?tabs=portal">Roles for the Azure Storage</a>
* <a class="reference external" href="https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-access-control-model">Access control model in ADLS Gen2</a>
* <a class="reference external" href="https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-acl-azure-portal">Managing ACLs in ADLS Gen2</a></p>
<p>For more information about <code class="docutils literal notranslate"><span class="pre">DELEGATED-OAUTH2</span></code>, see
<a class="reference internal" href="../security/oauth2-passthrough.html"><span class="doc">OAuth 2.0 token pass-through</span></a>.</p>
<p>You can only set one type or group of access properties in a catalog properties
file. Setting more than one prevents SEP from running properly. The valid
access property combinations for the catalog properties file include the
following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hive.azure.abfs.oauth2.passthrough</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.azure.abfs-storage-account</span></code> and <code class="docutils literal notranslate"><span class="pre">hive.azure.abfs-access-key</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.azure.abfs.oauth.endpoint</span></code>, <code class="docutils literal notranslate"><span class="pre">hive.azure.abfs.oauth.client-id</span></code>, and
<code class="docutils literal notranslate"><span class="pre">hive.azure.abfs.oauth.secret</span></code>.</p></li>
</ul>

<h4 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>OAuth2 passthrough with Azure AD and Hive is supported for read operations and
<code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code> statements via the Trino CLI and the JDBC driver. It does not
work with the Starburst Enterprise web UI and the <a class="reference internal" href="../client/query-editor.html"><span class="doc">Query editor</span></a>. If passthrough
support is enabled and you try to access a table in the catalog configured for
passthrough via the Starburst Enterprise web UI or the Trino web UI, you get an <code class="docutils literal notranslate"><span class="pre">Unable</span> <span class="pre">to</span> <span class="pre">find</span>
<span class="pre">Azure</span> <span class="pre">AD</span> <span class="pre">authentication</span> <span class="pre">token</span></code> error.</p></li>
<li><p>Passthrough support is read-only at the object storage level. For example,
you cannot create a schema or table using passthrough. As a result you have to
create objects with a non-passthrough authentication mode in a separate
catalog or outside of SEP.</p></li>
</ul>



<h3 id="authorization-options">Authorization options<a class="headerlink" href="#authorization-options" title="Permalink to this headline">#</a></h3>
<p>SEP includes provides several authorization options for use with the Hive
connector:</p>
<ul class="simple">
<li><p>Apache Ranger is the recommended choice to provide <a class="reference internal" href="../security/ranger-overview.html"><span class="doc">global,
system-level security</span></a>, which can optionally be
used with other connectors</p></li>
<li><p>Apache Sentry is <a class="reference internal" href="../security/hive-sentry.html"><span class="doc">supported with known limitations</span></a></p></li>
</ul>


<h3 id="hdfs-permissions">HDFS permissions<a class="headerlink" href="#hdfs-permissions" title="Permalink to this headline">#</a></h3>
<p>Before running any <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> or <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">...</span> <span class="pre">AS</span></code> statements for
Hive tables in SEP, you need to check that the operating system user running
the SEP server has access to the Hive warehouse directory on HDFS.</p>
<p>The Hive warehouse directory is specified by the configuration variable
<code class="docutils literal notranslate"><span class="pre">hive.metastore.warehouse.dir</span></code> in <code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code>, and the default value is
<code class="docutils literal notranslate"><span class="pre">/user/hive/warehouse</span></code>. If that is not the case, either add the following to
<code class="docutils literal notranslate"><span class="pre">jvm.config</span></code> on all of the nodes: <code class="docutils literal notranslate"><span class="pre">-DHADOOP_USER_NAME=USER</span></code>, where <code class="docutils literal notranslate"><span class="pre">USER</span></code>
is an operating system user that has proper permissions for the Hive warehouse
directory, or start the SEP server as a user with similar permissions. The
<code class="docutils literal notranslate"><span class="pre">hive</span></code> user generally works as <code class="docutils literal notranslate"><span class="pre">USER</span></code>, since Hive is often started with the
<code class="docutils literal notranslate"><span class="pre">hive</span></code> user. If you run into HDFS permissions problems on <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">...</span>
<span class="pre">AS</span></code>, remove <code class="docutils literal notranslate"><span class="pre">/tmp/presto-*</span></code> on HDFS, fix the user as described above, then
restart all of the SEP servers.</p>



<h2 id="id3">Limitations<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h2>
<p>The following limitation apply in addition to the limitations of the
<a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a>.</p>
<ul class="simple">
<li><p>Reading ORC ACID tables created with Hive Streaming ingest is not supported.</p></li>
<li><p>Redirections are supported for Hive tables but not Hive views.</p></li>
</ul>

<h3 id="hive-3-related-limitations">Hive 3 related limitations<a class="headerlink" href="#hive-3-related-limitations" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>For security reasons, <code class="docutils literal notranslate"><span class="pre">sys</span></code> system catalog is not accessible in SEP.</p></li>
<li><p>Hiveâ€™s <code class="docutils literal notranslate"><span class="pre">timestamp</span> <span class="pre">with</span> <span class="pre">local</span> <span class="pre">zone</span></code> data type is not supported in SEP.
It is possible to read from a table having a column of this type, but the
column itself will not be accessible. Writing to such a table is not
supported.</p></li>
<li><p>SEP does not correctly read <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> values from Parquet, RCFile with
binary serde and Avro file formats created by Hive 3.1 or later due to Hive
issues <a class="reference external" href="https://issues.apache.org/jira/browse/HIVE-21002">HIVE-21002</a>,
<a class="reference external" href="https://issues.apache.org/jira/browse/HIVE-22167">HIVE-22167</a>. When
reading from these file formats, SEP returns different results.</p></li>
</ul>





          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="starburst-greenplum.html" title="Starburst Greenplum connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Starburst Greenplum connector </span>
              </div>
            </a>
          
          
            <a href="starburst-hive-ibm-cos.html" title="IBM Cloud Object Storage support for the Hive connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> IBM Cloud Object Storage support for the Hive connector </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 380-e.6 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright Â© 2017-2022<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>