

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Hive connector security configuration &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Hive connector with Amazon S3" href="hive-s3.html" />
    <link rel="prev" title="Hive connector" href="hive.html" />

  
   



<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/connector/hive-security.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#connector/hive-security" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 380-e LTS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 380-e LTS</span>
          <span class="md-header-nav__topic"> Hive connector security configuration </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (380-e)" href="/380-e/">Latest LTS (380-e)</a>
      
          <a title="370-e LTS" href="/370-e/">370-e LTS</a>
      
          <a title="364-e LTS" href="/364-e/">364-e LTS</a>
      
          <a title="360-e LTS" href="/360-e/">360-e LTS</a>
      
          <a title="Latest STS (379-e)" href="/379-e/">Latest STS (379-e)</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../connector.html" class="md-tabs__link">Connectors</a></li>
          <li class="md-tabs__item"><a href="hive.html" class="md-tabs__link">Hive connector</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 380-e LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="starburst-connectors.html" class="md-nav__link">Starburst connectors overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-bigquery.html" class="md-nav__link">Starburst BigQuery connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-db2.html" class="md-nav__link">Starburst IBM DB2 connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-dynamodb.html" class="md-nav__link">Starburst DynamoDB connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-delta-lake.html" class="md-nav__link">Starburst Delta Lake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-generic-jdbc.html" class="md-nav__link">Starburst Generic JDBC connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-greenplum.html" class="md-nav__link">Starburst Greenplum connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive.html" class="md-nav__link">Starburst Hive connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-ibm-cos.html" class="md-nav__link">- IBM Cloud Object Storage support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-mapr.html" class="md-nav__link">- MapR Hive support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hive-cdp.html" class="md-nav__link">- Cloudera Data Platform support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-minio.html" class="md-nav__link">- MinIO storage support</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-iceberg.html" class="md-nav__link">Starburst Iceberg connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-kafka.html" class="md-nav__link">Starburst Kafka connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-mysql.html" class="md-nav__link">Starburst MySQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-netezza.html" class="md-nav__link">Starburst Netezza connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-oracle.html" class="md-nav__link">Starburst Oracle connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-postgresql.html" class="md-nav__link">Starburst PostgreSQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-redshift.html" class="md-nav__link">Starburst Redshift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-sap-hana.html" class="md-nav__link">Starburst SAP HANA connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-salesforce.html" class="md-nav__link">Starburst Salesforce connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-memsql.html" class="md-nav__link">Starburst SingleStore (MemSQL) connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-snowflake.html" class="md-nav__link">Starburst Snowflake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-splunk.html" class="md-nav__link">Starburst Splunk connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-sqlserver.html" class="md-nav__link">Starburst SQL Server connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-stargate.html" class="md-nav__link">Starburst Stargate</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-synapse.html" class="md-nav__link">Starburst Synapse connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-teradata.html" class="md-nav__link">Starburst Teradata connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-vertica.html" class="md-nav__link">Starburst Vertica connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="accumulo.html" class="md-nav__link">Accumulo connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="atop.html" class="md-nav__link">Atop connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="blackhole.html" class="md-nav__link">Black Hole connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cassandra.html" class="md-nav__link">Cassandra connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="clickhouse.html" class="md-nav__link">ClickHouse connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="delta-lake.html" class="md-nav__link">Delta Lake connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="druid.html" class="md-nav__link">Druid connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="elasticsearch.html" class="md-nav__link">Elasticsearch connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="googlesheets.html" class="md-nav__link">Google Sheets connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="jmx.html" class="md-nav__link">JMX connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kinesis.html" class="md-nav__link">Kinesis connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kudu.html" class="md-nav__link">Kudu connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="localfile.html" class="md-nav__link">Local file connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mariadb.html" class="md-nav__link">MariaDB connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="memory.html" class="md-nav__link">Memory connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mongodb.html" class="md-nav__link">MongoDB connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="phoenix.html" class="md-nav__link">Phoenix connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="pinot.html" class="md-nav__link">Pinot connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="prometheus.html" class="md-nav__link">Prometheus connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="redis.html" class="md-nav__link">Redis connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="system.html" class="md-nav__link">System connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="thrift.html" class="md-nav__link">Thrift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tpcds.html" class="md-nav__link">TPCDS connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="tpch.html" class="md-nav__link">TPCH connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="bigquery.html" class="md-nav__link">BigQuery connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive.html" class="md-nav__link">Hive connector</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Security </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Security</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-hive-security--page-root" class="md-nav__link">Hive connector security configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#authorization" class="md-nav__link">Authorization</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#sql-standard-based-authorization" class="md-nav__link">SQL standard based authorization</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#authentication" class="md-nav__link">Authentication</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-support" class="md-nav__link">Kerberos support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-metastore-thrift-service-authentication" class="md-nav__link">Hive metastore Thrift service authentication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-metastore-authentication-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.authentication.type</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-metastore-thrift-impersonation-enabled" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.thrift.impersonation.enabled</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-metastore-service-principal" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-metastore-client-principal" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-metastore-client-keytab" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#example-configuration-with-none-authentication" class="md-nav__link">Example configuration with <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication</a>
        </li>
        <li class="md-nav__item"><a href="#example-configuration-with-kerberos-authentication" class="md-nav__link">Example configuration with <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#hdfs-authentication" class="md-nav__link">HDFS authentication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-hdfs-authentication-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.authentication.type</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-hdfs-impersonation-enabled" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.impersonation.enabled</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-hdfs-trino-principal" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-hdfs-trino-keytab" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-hdfs-wire-encryption-enabled" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.wire-encryption.enabled</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-security-simple" class="md-nav__link">Example configuration with <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication</a>
        </li>
        <li class="md-nav__item"><a href="#hive-security-kerberos" class="md-nav__link">Example configuration with <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#end-user-impersonation" class="md-nav__link">End user impersonation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#impersonation-accessing-hdfs" class="md-nav__link">Impersonation accessing HDFS</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#none-authentication-with-hdfs-impersonation" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with HDFS impersonation</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-authentication-with-hdfs-impersonation" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with HDFS impersonation</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#impersonation-accessing-the-hive-metastore" class="md-nav__link">Impersonation accessing the Hive metastore</a>
        </li>
        <li class="md-nav__item"><a href="#impersonation-in-hadoop" class="md-nav__link">Impersonation in Hadoop</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#additional-information-about-keytab-files" class="md-nav__link">Additional information about Keytab files</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-s3.html" class="md-nav__link">Amazon S3</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-azure.html" class="md-nav__link">Azure Storage</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-gcs-tutorial.html" class="md-nav__link">GCS Tutorial</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-caching.html" class="md-nav__link">Storage Caching</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hive-alluxio.html" class="md-nav__link">Alluxio</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="iceberg.html" class="md-nav__link">Iceberg connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="kafka.html" class="md-nav__link">Kafka connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mysql.html" class="md-nav__link">MySQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="oracle.html" class="md-nav__link">Oracle connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="postgresql.html" class="md-nav__link">PostgreSQL connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="redshift.html" class="md-nav__link">Redshift connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="memsql.html" class="md-nav__link">SingleStore (MemSQL) connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sqlserver.html" class="md-nav__link">SQL Server connector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="starburst-hbase.html" class="md-nav__link"> </a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">380-e LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-hive-security--page-root" class="md-nav__link">Hive connector security configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#authorization" class="md-nav__link">Authorization</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#sql-standard-based-authorization" class="md-nav__link">SQL standard based authorization</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#authentication" class="md-nav__link">Authentication</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-support" class="md-nav__link">Kerberos support</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-metastore-thrift-service-authentication" class="md-nav__link">Hive metastore Thrift service authentication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-metastore-authentication-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.authentication.type</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-metastore-thrift-impersonation-enabled" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.thrift.impersonation.enabled</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-metastore-service-principal" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-metastore-client-principal" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-metastore-client-keytab" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#example-configuration-with-none-authentication" class="md-nav__link">Example configuration with <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication</a>
        </li>
        <li class="md-nav__item"><a href="#example-configuration-with-kerberos-authentication" class="md-nav__link">Example configuration with <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#hdfs-authentication" class="md-nav__link">HDFS authentication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hive-hdfs-authentication-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.authentication.type</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-hdfs-impersonation-enabled" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.impersonation.enabled</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-hdfs-trino-principal" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-hdfs-trino-keytab" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-hdfs-wire-encryption-enabled" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.wire-encryption.enabled</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#hive-security-simple" class="md-nav__link">Example configuration with <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication</a>
        </li>
        <li class="md-nav__item"><a href="#hive-security-kerberos" class="md-nav__link">Example configuration with <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#end-user-impersonation" class="md-nav__link">End user impersonation</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#impersonation-accessing-hdfs" class="md-nav__link">Impersonation accessing HDFS</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#none-authentication-with-hdfs-impersonation" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with HDFS impersonation</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-authentication-with-hdfs-impersonation" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with HDFS impersonation</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#impersonation-accessing-the-hive-metastore" class="md-nav__link">Impersonation accessing the Hive metastore</a>
        </li>
        <li class="md-nav__item"><a href="#impersonation-in-hadoop" class="md-nav__link">Impersonation in Hadoop</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#additional-information-about-keytab-files" class="md-nav__link">Additional information about Keytab files</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="connector-hive-security--page-root">Hive connector security configuration<a class="headerlink" href="#connector-hive-security--page-root" title="Permalink to this headline">#</a></h1>

<h2 id="authorization">Authorization<a class="headerlink" href="#authorization" title="Permalink to this headline">#</a></h2>
<p>You can enable authorization checks for the <a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a> by setting
the <code class="docutils literal notranslate"><span class="pre">hive.security</span></code> property in the Hive catalog properties file. This
property must be one of the following values:</p>
<table>
<colgroup>
<col style="width: 44%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">legacy</span></code> (default value)</p></td>
<td><p>Few authorization checks are enforced, thus allowing most
operations. The config properties <code class="docutils literal notranslate"><span class="pre">hive.allow-drop-table</span></code>,
<code class="docutils literal notranslate"><span class="pre">hive.allow-rename-table</span></code>, <code class="docutils literal notranslate"><span class="pre">hive.allow-add-column</span></code>,
<code class="docutils literal notranslate"><span class="pre">hive.allow-drop-column</span></code> and
<code class="docutils literal notranslate"><span class="pre">hive.allow-rename-column</span></code> are used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">read-only</span></code></p></td>
<td><p>Operations that read data or metadata, such as <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>,
are permitted, but none of the operations that write data or
metadata, such as <code class="docutils literal notranslate"><span class="pre">CREATE</span></code>, <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> or <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, are
allowed.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">file</span></code></p></td>
<td><p>Authorization checks are enforced using a catalog-level access
control configuration file whose path is specified
in the <code class="docutils literal notranslate"><span class="pre">security.config-file</span></code> catalog configuration property.
See <a class="reference internal" href="../security/file-system-access-control.html#catalog-file-based-access-control"><span class="std std-ref">Catalog-level access control files</span></a> for details.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sql-standard</span></code></p></td>
<td><p>Users are permitted to perform the operations as long as
they have the required privileges as per the SQL standard.
In this mode, Trino enforces the authorization checks for
queries based on the privileges defined in Hive metastore.
To alter these privileges, use the <a class="reference internal" href="../sql/grant.html"><span class="doc">GRANT</span></a> and
<a class="reference internal" href="../sql/revoke.html"><span class="doc">REVOKE</span></a> commands.
See <a class="reference internal" href="#hive-sql-standard-based-authorization"><span class="std std-ref">SQL standard based authorization</span></a> for details.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">allow-all</span></code></p></td>
<td><p>No authorization checks are enforced.</p></td>
</tr>
</tbody>
</table>

<span id="hive-sql-standard-based-authorization"></span><h3 id="sql-standard-based-authorization">SQL standard based authorization<a class="headerlink" href="#sql-standard-based-authorization" title="Permalink to this headline">#</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">sql-standard</span></code> security is enabled, Trino enforces the same SQL
standard based authorization as Hive does.</p>
<p>Since Trino’s <code class="docutils literal notranslate"><span class="pre">ROLE</span></code> syntax support matches the SQL standard, and
Hive does not exactly follow the SQL standard, there are the following
limitations and differences:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">ROLE</span> <span class="pre">role</span> <span class="pre">WITH</span> <span class="pre">ADMIN</span></code> is not supported.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">admin</span></code> role must be enabled to execute <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">ROLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">ROLE</span></code> or <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">SCHEMA</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">role</span> <span class="pre">TO</span> <span class="pre">user</span> <span class="pre">GRANTED</span> <span class="pre">BY</span> <span class="pre">someone</span></code> is not supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REVOKE</span> <span class="pre">role</span> <span class="pre">FROM</span> <span class="pre">user</span> <span class="pre">GRANTED</span> <span class="pre">BY</span> <span class="pre">someone</span></code> is not supported.</p></li>
<li><p>By default, all a user’s roles, except <code class="docutils literal notranslate"><span class="pre">admin</span></code>, are enabled in a new user session.</p></li>
<li><p>One particular role can be selected by executing <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">role</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">ALL</span></code> enables all of a user’s roles except <code class="docutils literal notranslate"><span class="pre">admin</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">admin</span></code> role must be enabled explicitly by executing <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">ROLE</span> <span class="pre">admin</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">privilege</span> <span class="pre">ON</span> <span class="pre">SCHEMA</span> <span class="pre">schema</span></code> is not supported. Schema ownership can be changed with <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">SCHEMA</span> <span class="pre">schema</span> <span class="pre">SET</span> <span class="pre">AUTHORIZATION</span> <span class="pre">user</span></code></p></li>
</ul>



<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">#</a></h2>
<p>The default security configuration of the <a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a> does not use
authentication when connecting to a Hadoop cluster. All queries are executed as
the user who runs the Trino process, regardless of which user submits the
query.</p>
<p>The Hive connector provides additional security options to support Hadoop
clusters that have been configured to use <a class="reference internal" href="#hive-security-kerberos-support"><span class="std std-ref">Kerberos</span></a>.</p>
<p>When accessing <abbr title="Hadoop Distributed File System">HDFS</abbr>, Trino can
<a class="reference internal" href="#hive-security-impersonation"><span class="std std-ref">impersonate</span></a> the end user who is running the
query. This can be used with HDFS permissions and <abbr title="Access Control Lists">ACLs</abbr> to provide additional security for data.</p>
<div class="admonition warning" id="hive-security-kerberos-support">
<p class="admonition-title">Warning</p>
<p>Access to the Trino coordinator should be secured e.g., using Kerberos or password
authentication, when using Kerberos authentication to Hadoop services.
Failure to secure access to the Trino coordinator could result in unauthorized
access to sensitive data on the Hadoop cluster. Refer to <a class="reference internal" href="../security.html"><span class="doc">Security</span></a> for
further information.</p>
<p>See <a class="reference internal" href="../security/kerberos.html"><span class="doc">Kerberos authentication</span></a> for information on setting up Kerberos authentication.</p>
</div>


<h2 id="kerberos-support">Kerberos support<a class="headerlink" href="#kerberos-support" title="Permalink to this headline">#</a></h2>
<p>In order to use the Hive connector with a Hadoop cluster that uses <code class="docutils literal notranslate"><span class="pre">kerberos</span></code>
authentication, you need to configure the connector to work with two
services on the Hadoop cluster:</p>
<ul class="simple">
<li><p>The Hive metastore Thrift service</p></li>
<li><p>The Hadoop Distributed File System (HDFS)</p></li>
</ul>
<p>Access to these services by the Hive connector is configured in the properties
file that contains the general Hive connector configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your <code class="docutils literal notranslate"><span class="pre">krb5.conf</span></code> location is different from <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> you
must set it explicitly using the <code class="docutils literal notranslate"><span class="pre">java.security.krb5.conf</span></code> JVM property
in <code class="docutils literal notranslate"><span class="pre">jvm.config</span></code> file.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">-Djava.security.krb5.conf=/example/path/krb5.conf</span></code>.</p>
</div>

<h3 id="hive-metastore-thrift-service-authentication">Hive metastore Thrift service authentication<a class="headerlink" href="#hive-metastore-thrift-service-authentication" title="Permalink to this headline">#</a></h3>
<p>In a Kerberized Hadoop cluster, Trino connects to the Hive metastore Thrift
service using <abbr title="Simple Authentication and Security Layer">SASL</abbr> and
authenticates using Kerberos. Kerberos authentication for the metastore is
configured in the connector’s properties file using the following properties:</p>
<table>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.authentication.type</span></code></p></td>
<td><p>Hive metastore authentication type.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.thrift.impersonation.enabled</span></code></p></td>
<td><p>Enable Hive metastore end user impersonation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code></p></td>
<td><p>The Kerberos principal of the Hive metastore service.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code></p></td>
<td><p>The Kerberos principal that Trino uses when connecting
to the Hive metastore service.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code></p></td>
<td><p>Hive metastore client keytab location.</p></td>
</tr>
</tbody>
</table>

<h4 id="hive-metastore-authentication-type"><code class="docutils literal notranslate"><span class="pre">hive.metastore.authentication.type</span></code><a class="headerlink" href="#hive-metastore-authentication-type" title="Permalink to this headline">#</a></h4>
<p>One of <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>. When using the default value of <code class="docutils literal notranslate"><span class="pre">NONE</span></code>,
Kerberos authentication is disabled, and no other properties need to be
configured.</p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> the Hive connector connects to the Hive metastore
Thrift service using SASL and authenticate using Kerberos.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>


<h4 id="hive-metastore-thrift-impersonation-enabled"><code class="docutils literal notranslate"><span class="pre">hive.metastore.thrift.impersonation.enabled</span></code><a class="headerlink" href="#hive-metastore-thrift-impersonation-enabled" title="Permalink to this headline">#</a></h4>
<p>Enable end-user Hive metastore impersonation.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.
See <a class="reference internal" href="#hive-security-metastore-impersonation"><span class="std std-ref">Impersonation accessing the Hive metastore</span></a> for more information.</p>


<h4 id="hive-metastore-service-principal"><code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code><a class="headerlink" href="#hive-metastore-service-principal" title="Permalink to this headline">#</a></h4>
<p>The Kerberos principal of the Hive metastore service. The Trino coordinator
uses this to authenticate the Hive metastore.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_HOST</span></code> placeholder can be used in this property value. When connecting
to the Hive metastore, the Hive connector substitutes in the hostname of
the <strong>metastore</strong> server it is connecting to. This is useful if the metastore
runs on multiple hosts.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">hive/hive-server-host@EXAMPLE.COM</span></code> or <code class="docutils literal notranslate"><span class="pre">hive/_HOST@EXAMPLE.COM</span></code>.</p>
<p>This property is optional; no default value.</p>


<h4 id="hive-metastore-client-principal"><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code><a class="headerlink" href="#hive-metastore-client-principal" title="Permalink to this headline">#</a></h4>
<p>The Kerberos principal that Trino uses when connecting to the Hive
metastore.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_HOST</span></code> placeholder can be used in this property value. When connecting
to the Hive metastore, the Hive connector substitutes in the hostname of
the <strong>worker</strong> node Trino is running on. This is useful if each worker node
has its own Kerberos principal.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">trino/trino-server-node@EXAMPLE.COM</span></code> or
<code class="docutils literal notranslate"><span class="pre">trino/_HOST@EXAMPLE.COM</span></code>.</p>
<p>This property is optional; no default value.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unless <a class="reference internal" href="#hive-security-metastore-impersonation"><span class="std std-ref">Impersonation accessing the Hive metastore</span></a> is enabled,
the principal specified by <code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code> must have
sufficient privileges to remove files and directories within the
<code class="docutils literal notranslate"><span class="pre">hive/warehouse</span></code> directory. If the principal does not, only the metadata
is removed, and the data continues to consume disk space.</p>
<p>This occurs because the Hive metastore is responsible for deleting the
internal table data. When the metastore is configured to use Kerberos
authentication, all of the HDFS operations performed by the metastore are
impersonated. Errors deleting data are silently ignored.</p>
</div>


<h4 id="hive-metastore-client-keytab"><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code><a class="headerlink" href="#hive-metastore-client-keytab" title="Permalink to this headline">#</a></h4>
<p>The path to the keytab file that contains a key for the principal specified by
<code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code>. This file must be readable by the
operating system user running Trino.</p>
<p>This property is optional; no default value.</p>


<h4 id="example-configuration-with-none-authentication">Example configuration with <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication<a class="headerlink" href="#example-configuration-with-none-authentication" title="Permalink to this headline">#</a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.metastore.authentication.type=NONE
</pre></div>
</div>
<p>The default authentication type for the Hive metastore is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>. When the
authentication type is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, Trino connects to an unsecured Hive
metastore. Kerberos is not used.</p>


<h4 id="example-configuration-with-kerberos-authentication">Example configuration with <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication<a class="headerlink" href="#example-configuration-with-kerberos-authentication" title="Permalink to this headline">#</a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.metastore.authentication.type=KERBEROS
hive.metastore.thrift.impersonation.enabled=true
hive.metastore.service.principal=hive/hive-metastore-host.example.com@EXAMPLE.COM
hive.metastore.client.principal=trino@EXAMPLE.COM
hive.metastore.client.keytab=/etc/trino/hive.keytab
</pre></div>
</div>
<p>When the authentication type for the Hive metastore Thrift service is
<code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, Trino connects as the Kerberos principal specified by the
property <code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code>. Trino authenticates this
principal using the keytab specified by the <code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code>
property, and verifies that the identity of the metastore matches
<code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code>.</p>
<p>Keytab files must be distributed to every node in the cluster that runs Trino.</p>
<p><a class="reference internal" href="#hive-security-additional-keytab"><span class="std std-ref">Additional Information About Keytab Files.</span></a></p>



<h3 id="hdfs-authentication">HDFS authentication<a class="headerlink" href="#hdfs-authentication" title="Permalink to this headline">#</a></h3>
<p>In a Kerberized Hadoop cluster, Trino authenticates to HDFS using Kerberos.
Kerberos authentication for HDFS is configured in the connector’s properties
file using the following properties:</p>
<table>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.authentication.type</span></code></p></td>
<td><p>HDFS authentication type.
Possible values are <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.impersonation.enabled</span></code></p></td>
<td><p>Enable HDFS end-user impersonation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code></p></td>
<td><p>The Kerberos principal that Trino uses when connecting
to HDFS.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code></p></td>
<td><p>HDFS client keytab location.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.wire-encryption.enabled</span></code></p></td>
<td><p>Enable HDFS wire encryption.</p></td>
</tr>
</tbody>
</table>

<h4 id="hive-hdfs-authentication-type"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.authentication.type</span></code><a class="headerlink" href="#hive-hdfs-authentication-type" title="Permalink to this headline">#</a></h4>
<p>One of <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>. When using the default value of <code class="docutils literal notranslate"><span class="pre">NONE</span></code>,
Kerberos authentication is disabled, and no other properties need to be
configured.</p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, the Hive connector authenticates to HDFS using
Kerberos.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>


<h4 id="hive-hdfs-impersonation-enabled"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.impersonation.enabled</span></code><a class="headerlink" href="#hive-hdfs-impersonation-enabled" title="Permalink to this headline">#</a></h4>
<p>Enable end-user HDFS impersonation.</p>
<p>The section <a class="reference internal" href="#hive-security-impersonation"><span class="std std-ref">End User Impersonation</span></a> gives an
in-depth explanation of HDFS impersonation.</p>
<p>This property is optional; the default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>


<h4 id="hive-hdfs-trino-principal"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code><a class="headerlink" href="#hive-hdfs-trino-principal" title="Permalink to this headline">#</a></h4>
<p>The Kerberos principal Trino uses when connecting to HDFS.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_HOST</span></code> placeholder can be used in this property value. When connecting
to HDFS, the Hive connector substitutes in the hostname of the <strong>worker</strong>
node Trino is running on. This is useful if each worker node has its own
Kerberos principal.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">trino-hdfs-superuser/trino-server-node@EXAMPLE.COM</span></code> or
<code class="docutils literal notranslate"><span class="pre">trino-hdfs-superuser/_HOST@EXAMPLE.COM</span></code>.</p>
<p>This property is optional; no default value.</p>


<h4 id="hive-hdfs-trino-keytab"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code><a class="headerlink" href="#hive-hdfs-trino-keytab" title="Permalink to this headline">#</a></h4>
<p>The path to the keytab file that contains a key for the principal specified by
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code>. This file must be readable by the operating
system user running Trino.</p>
<p>This property is optional; no default value.</p>


<h4 id="hive-hdfs-wire-encryption-enabled"><code class="docutils literal notranslate"><span class="pre">hive.hdfs.wire-encryption.enabled</span></code><a class="headerlink" href="#hive-hdfs-wire-encryption-enabled" title="Permalink to this headline">#</a></h4>
<p>In a Kerberized Hadoop cluster that uses HDFS wire encryption, this should be
set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to enable Trino to access HDFS. Note that using wire encryption
may impact query execution performance.</p>


<span id="id1"></span><h4 id="hive-security-simple">Example configuration with <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication<a class="headerlink" href="#hive-security-simple" title="Permalink to this headline">#</a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=NONE
</pre></div>
</div>
<p>The default authentication type for HDFS is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>. When the authentication
type is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, Trino connects to HDFS using Hadoop’s simple authentication
mechanism. Kerberos is not used.</p>


<span id="id2"></span><h4 id="hive-security-kerberos">Example configuration with <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication<a class="headerlink" href="#hive-security-kerberos" title="Permalink to this headline">#</a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=KERBEROS
hive.hdfs.trino.principal=hdfs@EXAMPLE.COM
hive.hdfs.trino.keytab=/etc/trino/hdfs.keytab
</pre></div>
</div>
<p>When the authentication type is <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, Trino accesses HDFS as the
principal specified by the <code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code> property. Trino
authenticates this principal using the keytab specified by the
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code> keytab.</p>
<p>Keytab files must be distributed to every node in the cluster that runs Trino.</p>
<p><a class="reference internal" href="#hive-security-additional-keytab"><span class="std std-ref">Additional Information About Keytab Files.</span></a></p>




<span id="hive-security-impersonation"></span><h2 id="end-user-impersonation">End user impersonation<a class="headerlink" href="#end-user-impersonation" title="Permalink to this headline">#</a></h2>

<h3 id="impersonation-accessing-hdfs">Impersonation accessing HDFS<a class="headerlink" href="#impersonation-accessing-hdfs" title="Permalink to this headline">#</a></h3>
<p>Trino can impersonate the end user who is running a query. In the case of a
user running a query from the command line interface, the end user is the
username associated with the Trino CLI process or argument to the optional
<code class="docutils literal notranslate"><span class="pre">--user</span></code> option. Impersonating the end user can provide additional security
when accessing HDFS if HDFS permissions or ACLs are used.</p>
<p>HDFS Permissions and ACLs are explained in the <a class="reference external" href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html">HDFS Permissions Guide</a>.</p>

<span id="hive-security-simple-impersonation"></span><h4 id="none-authentication-with-hdfs-impersonation"><code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with HDFS impersonation<a class="headerlink" href="#none-authentication-with-hdfs-impersonation" title="Permalink to this headline">#</a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=NONE
hive.hdfs.impersonation.enabled=true
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with impersonation, Trino impersonates
the user who is running the query when accessing HDFS. The user Trino is
running as must be allowed to impersonate this user, as discussed in the
section <a class="reference internal" href="#configuring-hadoop-impersonation"><span class="std std-ref">Impersonation in Hadoop</span></a>. Kerberos is not used.</p>


<span id="hive-security-kerberos-impersonation"></span><h4 id="kerberos-authentication-with-hdfs-impersonation"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with HDFS impersonation<a class="headerlink" href="#kerberos-authentication-with-hdfs-impersonation" title="Permalink to this headline">#</a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=KERBEROS
hive.hdfs.impersonation.enabled=true
hive.hdfs.trino.principal=trino@EXAMPLE.COM
hive.hdfs.trino.keytab=/etc/trino/hdfs.keytab
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with impersonation, Trino impersonates
the user who is running the query when accessing HDFS. The principal
specified by the <code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code> property must be allowed to
impersonate the current Trino user, as discussed in the section
<a class="reference internal" href="#configuring-hadoop-impersonation"><span class="std std-ref">Impersonation in Hadoop</span></a>. Trino authenticates
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code> using the keytab specified by
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code>.</p>
<p>Keytab files must be distributed to every node in the cluster that runs Trino.</p>
<p><a class="reference internal" href="#hive-security-additional-keytab"><span class="std std-ref">Additional Information About Keytab Files.</span></a></p>



<span id="hive-security-metastore-impersonation"></span><h3 id="impersonation-accessing-the-hive-metastore">Impersonation accessing the Hive metastore<a class="headerlink" href="#impersonation-accessing-the-hive-metastore" title="Permalink to this headline">#</a></h3>
<p>Trino supports impersonating the end user when accessing the Hive metastore.
Metastore impersonation can be enabled with</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.metastore.thrift.impersonation.enabled=true
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> Metastore authentication with impersonation, the principal
specified by the <code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code> property must be allowed to
impersonate the current Trino user, as discussed in the section
<a class="reference internal" href="#configuring-hadoop-impersonation"><span class="std std-ref">Impersonation in Hadoop</span></a>.</p>
<p>The impersonation is applied when:</p>
<ul class="simple">
<li><p>modifying (creating or deleting) a database (schema),</p></li>
<li><p>getting information about a single table,</p></li>
<li><p>creating or modifying a table.</p></li>
</ul>
<p>Impersonation is not applied when for the following operations. In case of the following operations,
Trino is fully responsible for doing all relevant security checks.</p>
<ul class="simple">
<li><p>listing databases (schemas),</p></li>
<li><p>listing tables,</p></li>
<li><p>listing roles, grants,</p></li>
<li><p>changing roles, grants.</p></li>
</ul>


<span id="configuring-hadoop-impersonation"></span><h3 id="impersonation-in-hadoop">Impersonation in Hadoop<a class="headerlink" href="#impersonation-in-hadoop" title="Permalink to this headline">#</a></h3>
<p>In order to use impersonation, the Hadoop cluster must be
configured to allow the user or principal that Trino is running as to
impersonate the users who log in to Trino. Impersonation in Hadoop is
configured in the file <code class="file docutils literal notranslate"><span class="pre">core-site.xml</span></code>. A complete description of the
configuration options can be found in the <a class="reference external" href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/Superusers.html#Configurations">Hadoop documentation</a>.</p>



<span id="hive-security-additional-keytab"></span><h2 id="additional-information-about-keytab-files">Additional information about Keytab files<a class="headerlink" href="#additional-information-about-keytab-files" title="Permalink to this headline">#</a></h2>
<p>Keytab files contain encryption keys that are used to authenticate principals
to the Kerberos <abbr title="Key Distribution Center">KDC</abbr>. These encryption keys
must be stored securely; you need to take the same precautions to protect them
that you take to protect ssh private keys.</p>
<p>In particular, access to keytab files should be limited to the accounts that
actually need to use them to authenticate. In practice, this is the user that
the Trino process runs as. The ownership and permissions on keytab files
need to be set to prevent other users from reading or modifying the files.</p>
<p>Keytab files need to be distributed to every node running Trino. Under common
deployment situations, the Hive connector configuration is the same on all
nodes. This means that the keytab needs to be in the same location on every
node.</p>
<p>You should ensure that the keytab files have the correct permissions on every
node after distributing them.</p>




          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="hive.html" title="Hive connector"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Hive connector </span>
              </div>
            </a>
          
          
            <a href="hive-s3.html" title="Hive connector with Amazon S3"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Hive connector with Amazon S3 </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 380-e LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2022<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>