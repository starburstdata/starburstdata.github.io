

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Configuring the Hive Metastore Service in Kubernetes &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuring Starburst Enterprise with Ranger in Kubernetes" href="ranger-configuration.html" />
    <link rel="prev" title="Kubernetes configuration examples" href="sep-config-examples.html" />

  
   



<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/k8s/hms-configuration.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#k8s/hms-configuration" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 380-e.17 LTS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 380-e.17 LTS</span>
          <span class="md-header-nav__topic"> Configuring the Hive Metastore Service in Kubernetes </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (407-e)" href="/407-e/">Latest LTS (407-e)</a>
      
          <a title="402-e LTS" href="/402-e/">402-e LTS</a>
      
          <a title="393-e LTS" href="/393-e/">393-e LTS</a>
      
          <a title="380-e LTS" href="/380-e/">380-e LTS</a>
      
          <a title="Latest STS (411-e)" href="/411-e/">Latest STS (411-e)</a>
      
          <a title="410-e STS" href="/410-e/">410-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../k8s.html" class="md-tabs__link">Deploying with Kubernetes</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 380-e.17 LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="requirements.html" class="md-nav__link">Starburst Enterprise with Kubernetes requirements</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="installation.html" class="md-nav__link">Installing Starburst Enterprise in a Kubernetes cluster</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sep-configuration.html" class="md-nav__link">Configuring Starburst Enterprise in Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sep-config-examples.html" class="md-nav__link">Kubernetes configuration examples</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Configuring the Hive Metastore Service in Kubernetes </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Configuring the Hive Metastore Service in Kubernetes</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-hms-configuration--page-root" class="md-nav__link">Configuring the Hive Metastore Service in Kubernetes</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#using-the-hms" class="md-nav__link">Using the HMS</a>
        </li>
        <li class="md-nav__item"><a href="#docker-image-and-registry" class="md-nav__link">Docker image and registry</a>
        </li>
        <li class="md-nav__item"><a href="#exposing-the-pod-to-outside-network" class="md-nav__link">Exposing the pod to outside network</a>
        </li>
        <li class="md-nav__item"><a href="#internal-database-backend-for-hms" class="md-nav__link">Internal database backend for HMS</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#examples" class="md-nav__link">Examples</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#external-backend-database-for-hms" class="md-nav__link">External backend database for HMS</a>
        </li>
        <li class="md-nav__item"><a href="#server-start-up-configuration" class="md-nav__link">Server start up configuration</a>
        </li>
        <li class="md-nav__item"><a href="#additional-volumes" class="md-nav__link">Additional volumes</a>
        </li>
        <li class="md-nav__item"><a href="#storage" class="md-nav__link">Storage</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#metastore-configuration-for-avro" class="md-nav__link">Metastore configuration for Avro</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#server-configuration" class="md-nav__link">Server configuration</a>
        </li>
        <li class="md-nav__item"><a href="#node-assignment" class="md-nav__link">Node assignment</a>
        </li>
        <li class="md-nav__item"><a href="#annotations" class="md-nav__link">Annotations</a>
        </li>
        <li class="md-nav__item"><a href="#security-context" class="md-nav__link">Security context</a>
        </li>
        <li class="md-nav__item"><a href="#service-account" class="md-nav__link">Service account</a>
        </li>
        <li class="md-nav__item"><a href="#environment-variables" class="md-nav__link">Environment variables</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ranger-configuration.html" class="md-nav__link">Configuring Starburst Enterprise with Ranger in Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cache-service-configuration.html" class="md-nav__link">Configure the cache service in Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="release-notes.html" class="md-nav__link">Helm chart release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sep-config-teradata-direct.html" class="md-nav__link">Teradata Direct connector in Kubernetes</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">380-e.17 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-hms-configuration--page-root" class="md-nav__link">Configuring the Hive Metastore Service in Kubernetes</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#using-the-hms" class="md-nav__link">Using the HMS</a>
        </li>
        <li class="md-nav__item"><a href="#docker-image-and-registry" class="md-nav__link">Docker image and registry</a>
        </li>
        <li class="md-nav__item"><a href="#exposing-the-pod-to-outside-network" class="md-nav__link">Exposing the pod to outside network</a>
        </li>
        <li class="md-nav__item"><a href="#internal-database-backend-for-hms" class="md-nav__link">Internal database backend for HMS</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#examples" class="md-nav__link">Examples</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#external-backend-database-for-hms" class="md-nav__link">External backend database for HMS</a>
        </li>
        <li class="md-nav__item"><a href="#server-start-up-configuration" class="md-nav__link">Server start up configuration</a>
        </li>
        <li class="md-nav__item"><a href="#additional-volumes" class="md-nav__link">Additional volumes</a>
        </li>
        <li class="md-nav__item"><a href="#storage" class="md-nav__link">Storage</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#metastore-configuration-for-avro" class="md-nav__link">Metastore configuration for Avro</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#server-configuration" class="md-nav__link">Server configuration</a>
        </li>
        <li class="md-nav__item"><a href="#node-assignment" class="md-nav__link">Node assignment</a>
        </li>
        <li class="md-nav__item"><a href="#annotations" class="md-nav__link">Annotations</a>
        </li>
        <li class="md-nav__item"><a href="#security-context" class="md-nav__link">Security context</a>
        </li>
        <li class="md-nav__item"><a href="#service-account" class="md-nav__link">Service account</a>
        </li>
        <li class="md-nav__item"><a href="#environment-variables" class="md-nav__link">Environment variables</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="k8s-hms-configuration--page-root">Configuring the Hive Metastore Service in Kubernetes<a class="headerlink" href="#k8s-hms-configuration--page-root" title="Permalink to this headline">#</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">starburst-hive</span></code> Helm chart configures a Hive Metastore Service (HMS), the
Hive metastore, and optionally the backing database in the cluster detailed in
the following sections. The following Starburst Enterprise platform (SEP) <a class="reference internal" href="../connector/starburst-connectors.html"><span class="doc">connectors</span></a> and features require a HMS:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../connector/starburst-hive.html"><span class="doc">Starburst Hive connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/starburst-delta-lake.html"><span class="doc">Starburst Delta Lake connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/starburst-hive-mapr.html"><span class="doc">MapR Hive support</span></a></p></li>
<li><p><a class="reference internal" href="../connector/iceberg.html"><span class="doc">Iceberg connector</span></a></p></li>
<li><p>and others</p></li>
</ul>
<p>Use your <a class="reference internal" href="installation.html#minimal-values-yaml-file"><span class="std std-ref">registry credentials</span></a>, and follow
<a class="reference external" href="../../starburst-enterprise/k8s/index.html">best practices</a> by
creating an override file for changes to default values as desired.</p>
<p>In addition to the configuration properties described in this document, you can
also use the base Hive connector’s <a class="reference external" href="../connector/hive.html#metastore-configuration-properties">metastore configuration properties</a>,
<a class="reference external" href="../connector/hive.html#thrift-metastore-configuration-properties">Thrift metastore configuration properties</a>
and <a class="reference external" href="../connector/hive.html#aws-glue-catalog-configuration-properties">AWS Glue metastore configuration properties</a>
as needed, depending on your environment.</p>

<span id="helm-hms-using"></span><h2 id="using-the-hms">Using the HMS<a class="headerlink" href="#using-the-hms" title="Permalink to this headline">#</a></h2>
<p>The expose section configures the DNS availability of the HMS in the cluster. By
default the HMS is available at the hostname <code class="docutils literal notranslate"><span class="pre">hive</span></code> and port <code class="docutils literal notranslate"><span class="pre">9083</span></code>. As a
result the Thrift URL within the cluster is <code class="docutils literal notranslate"><span class="pre">thrift://hive:9083</span></code>.</p>
<p>You can use the URL for <a class="reference internal" href="sep-configuration.html#helm-sep-catalogs"><span class="std std-ref">any catalog</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">catalog</span><span class="p">:</span>
  <span class="nt">datalake</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=hive</span>
    <span class="no">hive.metastore.uri=thrift://hive:9083</span>
</pre></div>
</div>


<span id="helm-hms-image"></span><h2 id="docker-image-and-registry">Docker image and registry<a class="headerlink" href="#docker-image-and-registry" title="Permalink to this headline">#</a></h2>
<p>Same as <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Docker image and registry section for the Helm chart</span></a> for SEP.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">image</span><span class="p">:</span>
  <span class="nt">repository</span><span class="p">:</span> <span class="s">"harbor.starburstdata.net/starburstdata/hive"</span>
  <span class="nt">tag</span><span class="p">:</span> <span class="s">"3.1.3-e.2"</span>
  <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>

<span class="nt">registryCredentials</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">registry</span><span class="p">:</span>
  <span class="nt">username</span><span class="p">:</span>
  <span class="nt">password</span><span class="p">:</span>

<span class="nt">imagePullSecrets</span><span class="p">:</span>
 <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span>
</pre></div>
</div>


<span id="helm-hms-expose"></span><h2 id="exposing-the-pod-to-outside-network">Exposing the pod to outside network<a class="headerlink" href="#exposing-the-pod-to-outside-network" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">expose</span></code> section for the HMS works identical to the SEP server
<a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">expose section</span></a>. Differences are isolated to the
configured default values. Additionally, <code class="docutils literal notranslate"><span class="pre">ingress</span></code> is not supported since the
HMS service uses the TCP protocol and not HTTP. The default type is
<code class="docutils literal notranslate"><span class="pre">clusterIp</span></code>. Ensure to adapt your configured catalogs to use the correct
Thrift URL S, when changing this configuration. The defaults are hostname
<code class="docutils literal notranslate"><span class="pre">hive</span></code> and port 9083.</p>
<p>Default <code class="docutils literal notranslate"><span class="pre">clusterIp</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"clusterIp"</span>
  <span class="nt">clusterIp</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"hive"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9083</span>
</pre></div>
</div>
<p>Alternative with <code class="docutils literal notranslate"><span class="pre">nodePort</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"nodePort"</span>
  <span class="nt">nodePort</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"hive"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9083</span>
        <span class="nt">nodePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30083</span>
</pre></div>
</div>
<p>Alternative with <code class="docutils literal notranslate"><span class="pre">loadBalancer</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"loadBalancer"</span>
  <span class="nt">loadBalancer</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="s">"hive"</span>
  <span class="nt">IP</span><span class="p">:</span> <span class="s">""</span>
  <span class="nt">ports</span><span class="p">:</span>
    <span class="nt">http</span><span class="p">:</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9083</span>
  <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">sourceRanges</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>


<span id="helm-hms-database"></span><h2 id="internal-database-backend-for-hms">Internal database backend for HMS<a class="headerlink" href="#internal-database-backend-for-hms" title="Permalink to this headline">#</a></h2>
<p>The database backend for HMS is a PostgreSQL database internal to the
cluster by default.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alternatively, you can use an <a class="reference internal" href="#hms-external-backend-db"><span class="std std-ref">external backend database</span></a> for production usage that you must manage
yourself.</p>
</div>
<p>The following snippet shows the default configuration for the internal HMS
backend database:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">internal</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span>
      <span class="nt">repository</span><span class="p">:</span> <span class="s">"library/postgres"</span>
      <span class="nt">tag</span><span class="p">:</span> <span class="s">"10.6"</span>
      <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="c1"># use one of:</span>
      <span class="c1"># - existingVolumeClaim to specify existing PVC</span>
      <span class="c1"># - persistentVolumeClaim to specify spec for new PVC</span>
      <span class="c1"># - other volume type inline configuration, e.g. emptyDir</span>
      <span class="c1"># Examples:</span>
      <span class="c1"># existingVolumeClaim: "my_claim"</span>
      <span class="c1"># persistentVolumeClaim:</span>
      <span class="c1">#  storageClassName:</span>
      <span class="c1">#  accessModes:</span>
      <span class="c1">#    - ReadWriteOnce</span>
      <span class="c1">#  resources:</span>
      <span class="c1">#    requests:</span>
      <span class="c1">#      storage: "2Gi"</span>
      <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
    <span class="nt">resources</span><span class="p">:</span>
      <span class="nt">requests</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
      <span class="nt">limits</span><span class="p">:</span>
        <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
        <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">driver</span><span class="p">:</span> <span class="s">"org.postgresql.Driver"</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5432</span>
    <span class="nt">databaseName</span><span class="p">:</span> <span class="s">"hive"</span>
    <span class="nt">databaseUser</span><span class="p">:</span> <span class="s">"hive"</span>
    <span class="nt">databasePassword</span><span class="p">:</span> <span class="s">"HivePass1234"</span>
    <span class="nt">envFrom</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
    <span class="nt">env</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>
<table id="id2">
<caption><span class="caption-text">Internal HMS backend database configuration</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Node name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.type</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">internal</span></code> to use a database in the k8s cluster, managed by the
chart</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.image</span></code></p></td>
<td><p>Docker container images used for the PostgreSQL server</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.volume</span></code></p></td>
<td><p>Storage volume to persist the database. The default configuration requests
a new persistent volume (PV).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.volume.persistentVolumeClaim</span></code></p></td>
<td><p>The default configuration, which requests a new persistent volume (PV).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.volume.existingVolumeClaim</span></code></p></td>
<td><p>Alternative volume configuration, which use existing volume claim by
referencing the name as the value in quotes, e.g., <code class="docutils literal notranslate"><span class="pre">"my_claim"</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.volume.emptyDir</span></code></p></td>
<td><p>Alternative volume configuration, which configures an empty directory on
the pod, keeping in mind that a pod replacement loses the database
content.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.resources</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.databaseName</span></code></p></td>
<td><p>Name of the internal database</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.databaseUser</span></code></p></td>
<td><p>User to connect to the internal database</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.databasePassword</span></code></p></td>
<td><p>Password to connect to internal database</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.envFrom</span></code></p></td>
<td><p>YAML sequence of mappings <a class="reference external" href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#envfromsource-v1-core">to define Secret or Configmap</a>
as a source of <a class="reference internal" href="#helms-hms-environment-variables"><span class="std std-ref">environment variables</span></a>
for the PostgreSQL container.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.internal.env</span></code></p></td>
<td><p>YAML sequence of mappings <a class="reference external" href="https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/">to define two keys</a>
environment variables for the PostgreSQL container.</p></td>
</tr>
</tbody>
</table>

<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h3>
<p>OpenShift deployments often do not have access to pull from the default Docker
registry <code class="docutils literal notranslate"><span class="pre">library/postgres</span></code>. You can replace it with an image from the Red Hat
registry, which requires additional <a class="reference internal" href="#helms-hms-environment-variables"><span class="std std-ref">environment variables</span></a> set with the parameter
<code class="docutils literal notranslate"><span class="pre">database.internal.env</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">internal</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span>
       <span class="nt">repository</span><span class="p">:</span> <span class="s">"registry.redhat.io/rhscl/postgresql-96-rhel7"</span>
       <span class="nt">tag</span><span class="p">:</span> <span class="s">"latest"</span>
    <span class="nt">env</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">POSTGRESQL_DATABASE</span>
        <span class="nt">value</span><span class="p">:</span> <span class="s">"hive"</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">POSTGRESQL_USER</span>
        <span class="nt">value</span><span class="p">:</span> <span class="s">"hive"</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">POSTGRESQL_PASSWORD</span>
        <span class="nt">value</span><span class="p">:</span> <span class="s">"HivePass1234"</span>
</pre></div>
</div>
<p>Another option is to create a Secret (ex. <code class="docutils literal notranslate"><span class="pre">postgresql-secret</span></code>) containing
variables needed by <code class="docutils literal notranslate"><span class="pre">postgresql</span></code> which are mentioned in previous code block,
and pass it to the container with <code class="docutils literal notranslate"><span class="pre">envFrom</span></code> parameter:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">internal</span>
  <span class="nt">internal</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span>
       <span class="nt">repository</span><span class="p">:</span> <span class="s">"registry.redhat.io/rhscl/postgresql-96-rhel7"</span>
       <span class="nt">tag</span><span class="p">:</span> <span class="s">"latest"</span>
    <span class="nt">envFrom</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">secretRef</span><span class="p">:</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgresql-secret</span>
</pre></div>
</div>



<span id="hms-external-backend-db"></span><h2 id="external-backend-database-for-hms">External backend database for HMS<a class="headerlink" href="#external-backend-database-for-hms" title="Permalink to this headline">#</a></h2>
<p>This section shows the setup for using of an external PostgreSQL or MySQL
database. You must provide the necessary details for the external server, and
ensure that it can be reached from the k8s cluster pod. Set the
<code class="docutils literal notranslate"><span class="pre">database.type</span></code> to <code class="docutils literal notranslate"><span class="pre">external</span></code> and configure the connection properties:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external</span>
  <span class="nt">external</span><span class="p">:</span>
    <span class="nt">jdbcUrl</span><span class="p">:</span>
    <span class="nt">driver</span><span class="p">:</span>
    <span class="nt">user</span><span class="p">:</span>
    <span class="nt">password</span><span class="p">:</span>
</pre></div>
</div>
<table id="id3">
<caption><span class="caption-text">External HMS backend database configuration</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Node name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.type</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">external</span></code> to use an existing PostgreSQL or MySQL database
outside the cluster</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.external.jdbcUrl</span></code></p></td>
<td><p>JDBC URL to connect to the external database as required by the database
and used driver, including hostname and port. Ensure you use a valid JDBC
URL as required by the PostgreSQL or MySQL driver. Typically the syntax
requires the host, port and database name
<code class="docutils literal notranslate"><span class="pre">jdbc:postgresql://host:port/database</span></code> or <code class="docutils literal notranslate"><span class="pre">jdbc:mysql://host:port/database</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.external.driver</span></code></p></td>
<td><p>Valid values are <code class="docutils literal notranslate"><span class="pre">com.mysql.jdbc.Driver</span></code> for an external MySQL or
compatible database or <code class="docutils literal notranslate"><span class="pre">org.postgresql.Driver</span></code> for a PostgreSQL database.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database.external.user</span></code></p></td>
<td><p>Database user name to access the external database using JDBC.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database.external.password</span></code></p></td>
<td><p>Password for the user configured to access the
external database using JDBC.</p></td>
</tr>
</tbody>
</table>


<span id="helm-hms-startup"></span><h2 id="server-start-up-configuration">Server start up configuration<a class="headerlink" href="#server-start-up-configuration" title="Permalink to this headline">#</a></h2>
<p>You can create a startup shell script to customize how HMS is started,
and pass additional arguments to it.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span>
<span class="nt">extraArguments</span><span class="p">:</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">initFile</span></code></p>
<p>A shell script to run before HMS is launched. The content of the file has to be
an inline string in the YAML file. The original startup command is passed as the
first argument. The script needs to invoke it at the end as <code class="docutils literal notranslate"><span class="pre">exec</span> <span class="pre">"$@"</span></code>. Use
<code class="docutils literal notranslate"><span class="pre">exec</span> <span class="pre">"$1"</span></code> if passing any extra arguments.</p>
<p><code class="docutils literal notranslate"><span class="pre">extraArguments</span></code></p>
<p>List of extra arguments to pass to the <code class="docutils literal notranslate"><span class="pre">initFile</span></code> script.</p>
<p>The following example shows how you can use <code class="docutils literal notranslate"><span class="pre">initFile</span></code> to run a custom start
up script. The init script must end with <code class="docutils literal notranslate"><span class="pre">exec</span> <span class="pre">"$@"</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">#!/bin/bash</span>
  <span class="no">echo "Custom init for $2"</span>
  <span class="no">exec "$@"</span>
<span class="nt">extraArguments</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TEST_ARG</span>
</pre></div>
</div>


<span id="helm-hms-volumes"></span><h2 id="additional-volumes">Additional volumes<a class="headerlink" href="#additional-volumes" title="Permalink to this headline">#</a></h2>
<p>Additional volumes can be necessary for persisting files. These can be defined
in the <code class="docutils literal notranslate"><span class="pre">additionalVolumes</span></code> section. None are defined by default:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">additionalVolumes</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>
<p>You can add one or more <a class="reference external" href="https://kubernetes.io/docs/concepts/storage/volumes/#types-of-volumes">volumes supported by k8s</a>, to
all nodes in the cluster.</p>
<p>If you specify <code class="docutils literal notranslate"><span class="pre">path</span></code> only, a directory named in <code class="docutils literal notranslate"><span class="pre">path</span></code> is created. When
mounting ConfigMap or Secret, files are created in this directory for each key.</p>
<p>This also supports an optional <code class="docutils literal notranslate"><span class="pre">subPath</span></code> parameter which takes in an optional
key in the ConfigMap or Secret volume you create. If you specify <code class="docutils literal notranslate"><span class="pre">subPath</span></code>, a
specific key named <code class="docutils literal notranslate"><span class="pre">subPath</span></code> from ConfigMap or Secret is mounted as a file
with the  name provided by <code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">additionalVolumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/mnt/InContainer</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/hive/conf/test_config.txt</span>
    <span class="nt">subPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test_config.txt</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">configMap</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="s">"configmap-in-volume"</span>
</pre></div>
</div>


<span id="helm-hms-storage"></span><h2 id="storage">Storage<a class="headerlink" href="#storage" title="Permalink to this headline">#</a></h2>
<p>You can configure the credentials and other details for access to the Hive
metastore, the HDFS storage and other supported object storage. The credentials
enable the HMS to access to storage for metadata information including
statistics gathering.</p>
<p>In addition you have to <a class="reference internal" href="sep-configuration.html#helm-sep-catalogs"><span class="std std-ref">configure the catalog</span></a> with
sufficient, corresponding credentials.</p>
<p>The default configuration is empty:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">hiveMetastoreWarehouseDir</span><span class="p">:</span>
<span class="nt">hdfs</span><span class="p">:</span>
  <span class="nt">hadoopUserName</span><span class="p">:</span>
<span class="nt">objectStorage</span><span class="p">:</span>
  <span class="nt">awsS3</span><span class="p">:</span>
    <span class="nt">region</span><span class="p">:</span>
    <span class="nt">endpoint</span><span class="p">:</span>
    <span class="nt">accessKey</span><span class="p">:</span>
    <span class="nt">secretKey</span><span class="p">:</span>
    <span class="nt">pathStyleAccess</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">gs</span><span class="p">:</span>
    <span class="nt">cloudKeyFileSecret</span><span class="p">:</span>
  <span class="nt">azure</span><span class="p">:</span>
    <span class="nt">abfs</span><span class="p">:</span>
      <span class="nt">authType</span><span class="p">:</span> <span class="s">"accessKey"</span>
      <span class="nt">accessKey</span><span class="p">:</span>
        <span class="nt">storageAccount</span><span class="p">:</span>
        <span class="nt">accessKey</span><span class="p">:</span>
      <span class="nt">oauth</span><span class="p">:</span>
        <span class="nt">clientId</span><span class="p">:</span>
        <span class="nt">secret</span><span class="p">:</span>
        <span class="nt">endpoint</span><span class="p">:</span>
    <span class="nt">wasb</span><span class="p">:</span>
      <span class="nt">storageAccount</span><span class="p">:</span>
      <span class="nt">accessKey</span><span class="p">:</span>
  <span class="nt">adl</span><span class="p">:</span>
    <span class="nt">oauth2</span><span class="p">:</span>
      <span class="nt">clientId</span><span class="p">:</span>
      <span class="nt">credential</span><span class="p">:</span>
      <span class="nt">refreshUrl</span><span class="p">:</span>
</pre></div>
</div>
<p>The following table describes the  properties for storage access configuration:</p>
<table id="id4">
<caption><span class="caption-text">HMS storage-related configuration</span><a class="headerlink" href="#id4" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Node name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hiveMetastoreWarehouseDir</span></code></p></td>
<td><p>Set the property <code class="docutils literal notranslate"><span class="pre">hive.metastore.warehouse.dir</span></code> in the <code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code>
configuration file for the HMS. For example <code class="docutils literal notranslate"><span class="pre">s3://example/hive-default-warehouse/</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hdfs.hadoopUserName</span></code></p></td>
<td><p>User name for Hadoop HDFS access</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.*</span></code></p></td>
<td><p>Configuration for AWS S3 access</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.region</span></code></p></td>
<td><p>AWS region name</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.endpoint</span></code></p></td>
<td><p>AWS S3 endpoint, for example
<code class="docutils literal notranslate"><span class="pre">http[s]://&lt;bucket&gt;.s3-&lt;AWS-region&gt;.amazonaws.com</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.accessKey</span></code></p></td>
<td><p>Name of the access key for AWS S3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.secretKey</span></code></p></td>
<td><p>Name of the secret key for AWS S3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.awsS3.pathStyleAccess</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.gs.*</span></code></p></td>
<td><p>Configuration for Google Storage access</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.gs.cloudKeyFileSecret</span></code></p></td>
<td><p>Name of the secret with the file containing the access key to the cloud
storage. The key of the secret must be named <code class="docutils literal notranslate"><span class="pre">key.json</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.*</span></code>:</p></td>
<td><p>Configuration for Microsoft Azure storage systems</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.*</span></code></p></td>
<td><p>Configuration for Azure Blob Filesystem (ABFS)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.authType</span></code></p></td>
<td><p>Authentication to access ABFS, Valid values are``accessKey`` or <code class="docutils literal notranslate"><span class="pre">oauth</span></code>,
configuration in the following properties</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.accessKey.*</span></code></p></td>
<td><p>Configuration for access key authentication to ABFS</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.accessKey.storageAccount</span></code></p></td>
<td><p>Name of the ABFS account to access</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.accessKey.accessKey</span></code></p></td>
<td><p>Actual access key to use for ABFS  access</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.oauth.*</span></code></p></td>
<td><p>Configuration for OAuth authentication to ABFS</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.oauth.clientId</span></code></p></td>
<td><p>Client identifier for OAuth authentication</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.oauth.secret</span></code></p></td>
<td><p>Secret for OAuth</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.abfs.oauth.endpoint</span></code></p></td>
<td><p>Endpoint URL for OAuth</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.wasb.*</span></code></p></td>
<td><p>Configuration for Windows Azure Storage Blob (WASB)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.wasb.storageAccount</span></code></p></td>
<td><p>Name of the storage account to use for WASB</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.wasb.accessKey</span></code></p></td>
<td><p>Key to access WASB</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl</span></code></p></td>
<td><p>Configuration for Azure Data Lake (ADL)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl.oauth2.*</span></code></p></td>
<td><p>Configuration for OAuth authentication to ADL</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl.oauth2.clientId</span></code></p></td>
<td><p>Client identifier for OAuth access to ADL</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl.oauth2.credential</span></code></p></td>
<td><p>Credential for OAuth access to ADL</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">objectStorage.azure.adl.oauth2.refreshUrl</span></code>:</p></td>
<td><p>Refresh URL for the OAuth access to ADL</p></td>
</tr>
</tbody>
</table>
<p>More information about the configuration options is available in the following
resources:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../connector/starburst-hive.html"><span class="doc">Starburst Hive connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/hive.html"><span class="doc">Hive connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/hive-azure.html"><span class="doc">Hive connector with Azure Storage</span></a></p></li>
<li><p><a class="reference internal" href="../connector/hive-s3.html"><span class="doc">Hive connector with Amazon S3</span></a></p></li>
<li><p><a class="reference internal" href="../connector/starburst-hive-ibm-cos.html"><span class="doc">IBM Cloud Object Storage support for the Hive connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/starburst-hive-cdp.html"><span class="doc">Cloudera Data Platform support</span></a></p></li>
<li><p><a class="reference internal" href="../connector/starburst-hive-mapr.html"><span class="doc">MapR Hive support</span></a></p></li>
<li><p><a class="reference internal" href="../connector/hive-security.html"><span class="doc">Hive connector security configuration</span></a></p></li>
</ul>

<span id="helm-hms-avro"></span><h3 id="metastore-configuration-for-avro">Metastore configuration for Avro<a class="headerlink" href="#metastore-configuration-for-avro" title="Permalink to this headline">#</a></h3>
<p>In order to enable <a class="reference external" href="../connector/hive.html#avro-schema-evolution">Avro tables</a>
when using Hive 3.x, you need to add the following property definition to the
Hive metastore configuration file <code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;property&gt;</span>
     <span class="c">&lt;!-- https://community.hortonworks.com/content/supportkb/247055/errorjavalangunsupportedoperationexception-storage.html --&gt;</span>
     <span class="nt">&lt;name&gt;</span>metastore.storage.schema.reader.impl<span class="nt">&lt;/name&gt;</span>
     <span class="nt">&lt;value&gt;</span>org.apache.hadoop.hive.metastore.SerDeStorageSchemaReader<span class="nt">&lt;/value&gt;</span>
 <span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
<p>For more information about additional files, see <a class="reference internal" href="sep-configuration.html#helm-sep-adding-files"><span class="std std-ref">Adding files</span></a>.</p>



<span id="helm-hms-server"></span><h2 id="server-configuration">Server configuration<a class="headerlink" href="#server-configuration" title="Permalink to this headline">#</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">heapSizePercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">85</span>

<span class="nt">resources</span><span class="p">:</span>
  <span class="nt">requests</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="nt">limits</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="s">"1Gi"</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>


<h2 id="node-assignment">Node assignment<a class="headerlink" href="#node-assignment" title="Permalink to this headline">#</a></h2>
<p>You can configure your cluster to determine the node and pod to use for the
HMS:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">nodeSelector</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">tolerations</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">affinity</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>
<p>Our <a class="reference internal" href="sep-configuration.html#helm-node-assignment"><span class="std std-ref">SEP configuration documentation</span></a> contains
examples and resources to help you configure these YAML nodes.</p>


<h2 id="annotations">Annotations<a class="headerlink" href="#annotations" title="Permalink to this headline">#</a></h2>
<p>You can add configuration to annotate the deployment and pod:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">deploymentAnnotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">podAnnotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<span id="helm-hms-securitycontext"></span><h2 id="security-context">Security context<a class="headerlink" href="#security-context" title="Permalink to this headline">#</a></h2>
<p>You can optionally configure <a class="reference external" href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-the-security-context-for-a-pod">security contexts</a>
to define privilege and access control settings for the HMS pods.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">securityContext</span><span class="p">:</span>
</pre></div>
</div>
<p>If you do not want to set the serviceContext for the <code class="docutils literal notranslate"><span class="pre">default</span></code>
service account, you can restrict it by configuring the <a class="reference internal" href="#helm-hms-serviceaccount"><span class="std std-ref">service account</span></a> for the HMS pod.</p>


<span id="helm-hms-serviceaccount"></span><h2 id="service-account">Service account<a class="headerlink" href="#service-account" title="Permalink to this headline">#</a></h2>
<p>You can configure a <a class="reference external" href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/">service account</a>
for the HMS pod using:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">serviceAccountName</span><span class="p">:</span>
</pre></div>
</div>


<span id="helms-hms-environment-variables"></span><h2 id="environment-variables">Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">#</a></h2>
<p>You can pass environment variables to the HMS container using the same mechanism
used for the internal database:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">envFrom</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">env</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>
<p>Both are specified as a mapping sequences for example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">envFrom</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">secretRef</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-secret-with-vars</span>
<span class="nt">env</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MY_VARIABLE</span>
    <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">some-value</span>
</pre></div>
</div>




          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="sep-config-examples.html" title="Kubernetes configuration examples"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Kubernetes configuration examples </span>
              </div>
            </a>
          
          
            <a href="ranger-configuration.html" title="Configuring Starburst Enterprise with Ranger in Kubernetes"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Configuring Starburst Enterprise with Ranger in Kubernetes </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 380-e.17 LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2022<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>