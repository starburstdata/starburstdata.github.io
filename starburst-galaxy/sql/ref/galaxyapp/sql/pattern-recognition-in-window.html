

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Row pattern recognition in window structures &#8212; Starburst Galaxy SQL reference</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/app.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../_static/galaxy/app.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/galaxy/app.js"></script>
    <script src="../_static/galaxy/searchbox.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PREPARE" href="prepare.html" />
    <link rel="prev" title="MERGE" href="merge.html" />

  
   



<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">




<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/sql/pattern-recognition-in-window.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#sql/pattern-recognition-in-window" tabindex="1" class="md-skip"> Skip to content </a>
  


<!-- Empty space for rendering header in parent window -->
<header class="md-header"></header>
<div id="searchbox-wrapper" class="md-content">
  <div class="md-content__inner md-typeset">
    <div id="searchbox"></div>
  </div>
</div>
<div id="searchhits-wrapper" class="md-container">
  <main class="md-main">
    <div class="md-main__inner md-grid" data-md-component="container">
      <div class="md-content">
        <div class="md-content__inner md-typeset" role="main">
          <div id="searchhits"></div>
        </div>
      </div>
    </div>
  </main>
</div>



  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../sql.html" class="md-tabs__link">SQL statement syntax</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Galaxy SQL reference" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Galaxy SQL reference">Starburst Galaxy SQL reference</a>
  </label>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
  <ul class="md-nav__list" data-md-scrollfix="">
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="sql-pattern-recognition-in-window--page-root">Row pattern recognition in window structures<a class="headerlink" href="#sql-pattern-recognition-in-window--page-root" title="Permalink to this heading">#</a></h1>
<p>A window structure can be defined in the <code class="docutils literal notranslate"><span class="pre">WINDOW</span></code> clause or in the <code class="docutils literal notranslate"><span class="pre">OVER</span></code>
clause of a window operation. In both cases, the window specification can
include row pattern recognition clauses. They are part of the window frame. The
syntax and semantics of row pattern recognition in window are similar to those
of the <a class="reference internal" href="match-recognize.html"><span class="doc">MATCH_RECOGNIZE</span></a> clause.</p>
<p>This section explains the details of row pattern recognition in window
structures, and highlights the similarities and the differences between both
pattern recognition mechanisms.</p>

<h2 id="window-with-row-pattern-recognition">Window with row pattern recognition<a class="headerlink" href="#window-with-row-pattern-recognition" title="Permalink to this heading">#</a></h2>
<p><strong>Window specification:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(
[ existing_window_name ]
[ PARTITION BY column [, ...] ]
[ ORDER BY column [, ...] ]
[ window_frame ]
)
</pre></div>
</div>
<p><strong>Window frame:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[ MEASURES measure_definition [, ...] ]
frame_extent
[ AFTER MATCH skip_to ]
[ INITIAL | SEEK ]
[ PATTERN ( row_pattern ) ]
[ SUBSET subset_definition [, ...] ]
[ DEFINE variable_definition [, ...] ]
</pre></div>
</div>
<p>Generally, a window frame specifies the <code class="docutils literal notranslate"><span class="pre">frame_extent</span></code>, which defines the
“sliding window” of rows to be processed by a window function. It can be
defined in terms of <code class="docutils literal notranslate"><span class="pre">ROWS</span></code>, <code class="docutils literal notranslate"><span class="pre">RANGE</span></code> or <code class="docutils literal notranslate"><span class="pre">GROUPS</span></code>.</p>
<p>A window frame with row pattern recognition involves many other syntactical
components, mandatory or optional, and enforces certain limitations on the
<code class="docutils literal notranslate"><span class="pre">frame_extent</span></code>.</p>
<p><strong>Window frame with row pattern recognition:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[ MEASURES measure_definition [, ...] ]
ROWS BETWEEN CURRENT ROW AND frame_end
[ AFTER MATCH skip_to ]
[ INITIAL | SEEK ]
PATTERN ( row_pattern )
[ SUBSET subset_definition [, ...] ]
DEFINE variable_definition [, ...]
</pre></div>
</div>


<h2 id="description-of-the-pattern-recognition-clauses">Description of the pattern recognition clauses<a class="headerlink" href="#description-of-the-pattern-recognition-clauses" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">frame_extent</span></code> with row pattern recognition must be defined in terms of
<code class="docutils literal notranslate"><span class="pre">ROWS</span></code>. The frame start must be at the <code class="docutils literal notranslate"><span class="pre">CURRENT</span> <span class="pre">ROW</span></code>, which limits the
allowed frame extent values to the following:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="k">CURRENT</span> <span class="k">ROW</span> <span class="k">AND</span> <span class="k">CURRENT</span> <span class="k">ROW</span>

<span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="k">CURRENT</span> <span class="k">ROW</span> <span class="k">AND</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span> <span class="n">FOLLOWING</span>

<span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="k">CURRENT</span> <span class="k">ROW</span> <span class="k">AND</span> <span class="n">UNBOUNDED</span> <span class="n">FOLLOWING</span>
</pre></div>
</div>
<p>For every input row processed by the window, the portion of rows enclosed by
the <code class="docutils literal notranslate"><span class="pre">frame_extent</span></code> limits the search area for row pattern recognition. Unlike
in <code class="docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code>, where the pattern search can explore all rows until the
partition end, and all rows of the partition are available for computations, in
window structures the pattern matching can neither match rows nor retrieve
input values outside the frame.</p>
<p>Besides the <code class="docutils literal notranslate"><span class="pre">frame_extent</span></code>, pattern matching requires the <code class="docutils literal notranslate"><span class="pre">PATTERN</span></code> and
<code class="docutils literal notranslate"><span class="pre">DEFINE</span></code> clauses.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">PATTERN</span></code> clause specifies a row pattern, which is a form of a regular
expression with some syntactical extensions. The row pattern syntax is similar
to the <a class="reference internal" href="match-recognize.html#row-pattern-syntax"><span class="std std-ref">row pattern syntax in MATCH_RECOGNIZE</span></a>.
However, the anchor patterns <code class="docutils literal notranslate"><span class="pre">^</span></code> and <code class="docutils literal notranslate"><span class="pre">$</span></code> are not allowed in a window
specification.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">DEFINE</span></code> clause defines the row pattern primary variables in terms of
boolean conditions that must be satisfied. It is similar to the
<a class="reference internal" href="match-recognize.html#row-pattern-variable-definitions"><span class="std std-ref">DEFINE clause of MATCH_RECOGNIZE</span></a>.
The only difference is that the window syntax does not support the
<code class="docutils literal notranslate"><span class="pre">MATCH_NUMBER</span></code> function.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">MEASURES</span></code> clause is syntactically similar to the
<a class="reference internal" href="match-recognize.html#row-pattern-measures"><span class="std std-ref">MEASURES clause of MATCH_RECOGNIZE</span></a>. The only
limitation is that the <code class="docutils literal notranslate"><span class="pre">MATCH_NUMBER</span></code> function is not allowed. However, the
semantics of this clause differs between <code class="docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> and window.
While in <code class="docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code> every measure produces an output column, the
measures in window should be considered as <strong>definitions</strong> associated with the
window structure. They can be called over the window, in the same manner as
regular window functions:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">cust_key</span><span class="p">,</span> <span class="n">value</span> <span class="n">OVER</span> <span class="n">w</span><span class="p">,</span> <span class="n">label</span> <span class="n">OVER</span> <span class="n">w</span>
    <span class="k">FROM</span> <span class="n">orders</span>
    <span class="n">WINDOW</span> <span class="n">w</span> <span class="k">AS</span> <span class="p">(</span>
                 <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">cust_key</span>
                 <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">order_date</span>
                 <span class="n">MEASURES</span>
                        <span class="n">RUNNING</span> <span class="k">LAST</span><span class="p">(</span><span class="n">total_price</span><span class="p">)</span> <span class="k">AS</span> <span class="n">value</span><span class="p">,</span>
                        <span class="n">CLASSIFIER</span><span class="p">()</span> <span class="k">AS</span> <span class="n">label</span>
                 <span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="k">CURRENT</span> <span class="k">ROW</span> <span class="k">AND</span> <span class="n">UNBOUNDED</span> <span class="n">FOLLOWING</span>
                 <span class="n">PATTERN</span> <span class="p">(</span><span class="n">A</span> <span class="n">B</span><span class="o">+</span> <span class="k">C</span><span class="o">+</span><span class="p">)</span>
                 <span class="n">DEFINE</span>
                        <span class="n">B</span> <span class="k">AS</span> <span class="n">B</span><span class="p">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">PREV</span> <span class="p">(</span><span class="n">B</span><span class="p">.</span><span class="n">value</span><span class="p">),</span>
                        <span class="k">C</span> <span class="k">AS</span> <span class="k">C</span><span class="p">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">PREV</span> <span class="p">(</span><span class="k">C</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="p">)</span>
</pre></div>
</div>
<p>Measures defined in a window can be referenced in the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> clause and in
the <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause of the enclosing query.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">RUNNING</span></code> and <code class="docutils literal notranslate"><span class="pre">FINAL</span></code> keywords are allowed in the <code class="docutils literal notranslate"><span class="pre">MEASURES</span></code> clause.
They can precede a logical navigation function <code class="docutils literal notranslate"><span class="pre">FIRST</span></code> or <code class="docutils literal notranslate"><span class="pre">LAST</span></code>, or an
aggregate function. However, they have no effect. Every computation is
performed from the position of the final row of the match, so the semantics is
effectively <code class="docutils literal notranslate"><span class="pre">FINAL</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AFTER</span> <span class="pre">MATCH</span> <span class="pre">SKIP</span></code> clause has the same syntax as the
<a class="reference internal" href="match-recognize.html#after-match-skip"><span class="std std-ref">AFTER MATCH SKIP clause of MATCH_RECOGNIZE</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">INITIAL</span></code> or <code class="docutils literal notranslate"><span class="pre">SEEK</span></code> modifier is specific to row pattern recognition in
window. With <code class="docutils literal notranslate"><span class="pre">INITIAL</span></code>, which is the default, the pattern match for an input
row can only be found starting from that row. With <code class="docutils literal notranslate"><span class="pre">SEEK</span></code>, if there is no
match starting from the current row, the engine tries to find a match starting
from subsequent rows within the frame. As a result, it is possible to associate
an input row with a match which is detached from that row.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> clause is used to define <a class="reference internal" href="match-recognize.html#row-pattern-union-variables"><span class="std std-ref">union variables</span></a> as sets of primary pattern variables. You can
use union variables to refer to a set of rows matched to any primary pattern
variable from the subset:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">SUBSET</span> <span class="n">U</span> <span class="o">=</span> <span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</pre></div>
</div>
<p>The following expression returns the <code class="docutils literal notranslate"><span class="pre">total_price</span></code> value from the last row
matched to either <code class="docutils literal notranslate"><span class="pre">A</span></code> or <code class="docutils literal notranslate"><span class="pre">B</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">LAST</span><span class="p">(</span><span class="n">U</span><span class="p">.</span><span class="n">total_price</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to refer to all rows of the match, there is no need to define a
<code class="docutils literal notranslate"><span class="pre">SUBSET</span></code> containing all pattern variables. There is an implicit <em>universal
pattern variable</em> applied to any non prefixed column name and any
<code class="docutils literal notranslate"><span class="pre">CLASSIFIER</span></code> call without an argument. The following expression returns the
<code class="docutils literal notranslate"><span class="pre">total_price</span></code> value from the last matched row:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">LAST</span><span class="p">(</span><span class="n">total_price</span><span class="p">)</span>
</pre></div>
</div>
<p>The following call returns the primary pattern variable of the first matched
row:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">FIRST</span><span class="p">(</span><span class="n">CLASSIFIER</span><span class="p">())</span>
</pre></div>
</div>
<p>In window, unlike in <code class="docutils literal notranslate"><span class="pre">MATCH_RECOGNIZE</span></code>, you cannot specify <code class="docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> or <code class="docutils literal notranslate"><span class="pre">ALL</span> <span class="pre">ROWS</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code>. This is because all calls over window,
whether they are regular window functions or measures, must comply with the
window semantics. A call over window is supposed to produce exactly one output
row for every input row. And so, the output mode of pattern recognition in
window is a combination of <code class="docutils literal notranslate"><span class="pre">ONE</span> <span class="pre">ROW</span> <span class="pre">PER</span> <span class="pre">MATCH</span></code> and <code class="docutils literal notranslate"><span class="pre">WITH</span> <span class="pre">UNMATCHED</span> <span class="pre">ROWS</span></code>.</p>


<h2 id="processing-input-with-row-pattern-recognition">Processing input with row pattern recognition<a class="headerlink" href="#processing-input-with-row-pattern-recognition" title="Permalink to this heading">#</a></h2>
<p>Pattern recognition in window processes input rows in two different cases:</p>
<ul>
<li><p class="first">upon a row pattern measure call over the window:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">some_measure</span> <span class="n">OVER</span> <span class="n">w</span>
</pre></div>
</div>
</li>
<li><p class="first">upon a window function call over the window:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">sum</span><span class="p">(</span><span class="n">total_price</span><span class="p">)</span> <span class="n">OVER</span> <span class="n">w</span>
</pre></div>
</div>
</li>
</ul>
<p>The output row produced for each input row, consists of:</p>
<ul class="simple">
<li>all values from the input row</li>
<li>the value of the called measure or window function, computed with respect to
the pattern match associated with the row</li>
</ul>
<p>Processing the input can be described as the following sequence of steps:</p>
<ul>
<li><p class="first">Partition the input data accordingly to <code class="docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code></p>
</li>
<li><p class="first">Order each partition by the <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> expressions</p>
</li>
<li><dl class="simple myst first docutils">
<dt>For every row of the ordered partition:</dt><dd><dl class="simple myst docutils">
<dt>If the row is ‘skipped’ by a match of some previous row:</dt><dd><ul class="simple">
<li>For a measure, produce a one-row output as for an unmatched row</li>
<li>For a window function, evaluate the function over an empty frame
and produce a one-row output</li>
</ul>
</dd>
<dt>Otherwise:</dt><dd><ul class="simple">
<li>Determine the frame extent</li>
<li>Try match the row pattern starting from the current row within
the frame extent</li>
<li>If no match is found, and <code class="docutils literal notranslate"><span class="pre">SEEK</span></code> is specified, try to find a match
starting from subsequent rows within the frame extent</li>
</ul>
<dl class="simple myst docutils">
<dt>If no match is found:</dt><dd><ul class="simple">
<li>For a measure, produce a one-row output for an unmatched row</li>
<li>For a window function, evaluate the function over an empty
frame and produce a one-row output</li>
</ul>
</dd>
<dt>Otherwise:</dt><dd><ul class="simple">
<li>For a measure, produce a one-row output for the match</li>
<li>For a window function, evaluate the function over a frame
limited to the matched rows sequence and produce a one-row
output</li>
<li>Evaluate the <code class="docutils literal notranslate"><span class="pre">AFTER</span> <span class="pre">MATCH</span> <span class="pre">SKIP</span></code> clause, and mark the ‘skipped’
rows</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>


<h2 id="empty-matches-and-unmatched-rows">Empty matches and unmatched rows<a class="headerlink" href="#empty-matches-and-unmatched-rows" title="Permalink to this heading">#</a></h2>
<p>If no match can be associated with a particular input row, the row is
<em>unmatched</em>. This happens when no match can be found for the row. This also
happens when no match is attempted for the row, because it is skipped by the
<code class="docutils literal notranslate"><span class="pre">AFTER</span> <span class="pre">MATCH</span> <span class="pre">SKIP</span></code> clause of some preceding row. For an unmatched row,
every row pattern measure is <code class="docutils literal notranslate"><span class="pre">null</span></code>. Every window function is evaluated over
an empty frame.</p>
<p>An <em>empty match</em> is a successful match which does not involve any pattern
variables. In other words, an empty match does not contain any rows. If an
empty match is associated with an input row, every row pattern measure for that
row is evaluated over an empty sequence of rows. All navigation operations and
the <code class="docutils literal notranslate"><span class="pre">CLASSIFIER</span></code> function return <code class="docutils literal notranslate"><span class="pre">null</span></code>. Every window function is evaluated
over an empty frame.</p>
<p>In most cases, the results for empty matches and unmatched rows are the same.
A constant measure can be helpful to distinguish between them:</p>
<p>The following call returns <code class="docutils literal notranslate"><span class="pre">'matched'</span></code> for every matched row, including empty
matches, and <code class="docutils literal notranslate"><span class="pre">null</span></code> for every unmatched row:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">matched</span> <span class="n">OVER</span> <span class="p">(</span>
              <span class="p">...</span>
              <span class="n">MEASURES</span> <span class="s1">'matched'</span> <span class="k">AS</span> <span class="n">matched</span>
              <span class="p">...</span>
             <span class="p">)</span>
</pre></div>
</div>




          </article>
        </div>
      </div>
    </main>
  </div>


  </body>
</html>