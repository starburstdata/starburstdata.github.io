<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst | Delta Lake table format</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst - Delta Lake table format">
    <meta property="og:description" content="Your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/starburst-og-image.png">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded">
    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/fonts.css">
    <link rel="stylesheet" href="/assets/css/style.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114610397-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114610397-1');
</script>

<script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
    heap.load("588835629");
</script>
<script>
  var ALGOLIA_INSIGHTS_SRC = "https://cdn.jsdelivr.net/npm/search-insights@2.2.1";

  !function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){
  (e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],
  i.async=1,i.src=n,c.parentNode.insertBefore(i,c)
  }(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");
</script>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Delta Lake table format | Starburst</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Delta Lake table format" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Your hub to all knowledge about Starburst products." />
<meta property="og:description" content="Your hub to all knowledge about Starburst products." />
<link rel="canonical" href="https://docs.starburst.io/starburst-galaxy/sql/gl-deltalake.html" />
<meta property="og:url" content="https://docs.starburst.io/starburst-galaxy/sql/gl-deltalake.html" />
<meta property="og:site_name" content="Starburst" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Delta Lake table format" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Your hub to all knowledge about Starburst products.","headline":"Delta Lake table format","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.starburst.io/assets/img/logo/starburst-reverse.png"}},"url":"https://docs.starburst.io/starburst-galaxy/sql/gl-deltalake.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>


<div class="wrap">
  

<header class="main-header navbar-expand-sm">
  <div class="navbar fixed-top navbar-dark">
    <div class="navbar-left-container">
      <a class="navbar-brand" href="https://www.starburst.io/">
        <img src="/assets/img/logo/starburst_KO-T.png" height="32" alt="Starburst">
      </a>
      <span class="navbar-divider"></span>
      <a href="/" class="header-text">Documentation</a>
    </div>
    
    <div class="nav-item dropdown" id="site-search">
  <div id="dropdownSearchDisplay" aria-labelledby="dropdownSearch">
    <div id="algolia-search">
      <div id="searchbox"></div>
      <div
        class="refinement-list"
        id="versionsRefinementList"
        style="display: none"
      ></div>
      <div class="refinement-list" id="product-list">
        <h6>Product:</h6>
      </div>
      <div id="hits"></div>
      <div id="stats"></div>
    </div>
  </div>
</div>

    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
    <nav class="primary-nav">
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-layout navbar-nav mr-auto">
          <li class="nav-item dropdown">
            <a id="introduction"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Introduction" data-is-click="false"
              href="/introduction/index.html">Introduction</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/introduction/concepts.html">Concepts</a>
              <a class="dropdown-item" href="/introduction/architecture.html">Architecture</a>
              <a class="dropdown-item" href="/introduction/choose-your-starburst-product.html">Choose your Starburst product</a>
              <a class="dropdown-item" href="/introduction/data-sources-catalogs.html">Data sources and catalogs</a>
              <a class="dropdown-item" href="/introduction/data-lake.html">Data lakes</a>
              <a class="dropdown-item" href="/introduction/object-storage.html">Using object storage systems</a>
              <a class="dropdown-item" href="/introduction/metastores.html">Metastore options</a>
              <a class="dropdown-item" href="/introduction/security.html">Security</a>
              <a class="dropdown-item" href="/introduction/querying-data.html">Querying data with Starburst products</a>
              <a class="dropdown-item" href="/introduction/starburst-sql.html">Using SQL</a>
              <a class="dropdown-item" href="/introduction/migration.html">Migrating queries to Starburst</a>
              <a class="dropdown-item" href="/introduction/query-performance.html">Query performance</a>
              <a class="dropdown-item" href="/introduction/performance-features.html">Performance features</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="clients"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Clients" data-is-click="false"
              href="/clients/index.html">Clients</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/clients/index.html">Overview</a>
              <a class="dropdown-item" href="/clients/gather-connection-information.html">Gather connection information</a>
              <a class="dropdown-item" href="/clients/cli.html">CLI</a>
              <a class="dropdown-item" href="/clients/jdbc.html">JDBC driver</a>
              <a class="dropdown-item" href="/clients/odbc.html">ODBC driver</a>
              <a class="dropdown-item" href="/clients/airbyte.html">Airbyte</a>
              <a class="dropdown-item" href="/clients/alation.html">Alation</a>
              <a class="dropdown-item" href="/clients/datagrip.html">Datagrip</a>
              <a class="dropdown-item" href="/clients/dbeaver.html">dBeaver</a>
              <a class="dropdown-item" href="/clients/dbt.html">dbt</a>
              <a class="dropdown-item" href="/clients/looker.html">Looker</a>
              <a class="dropdown-item" href="/clients/metabase.html">Metabase</a>
              <a class="dropdown-item" href="/clients/microstrategy.html">Microstrategy</a>
              <a class="dropdown-item" href="/clients/powerbi.html">Power BI</a>
              <a class="dropdown-item" href="/clients/python/index.html">Python</a>
              <a class="dropdown-item" href="/clients/querybook.html">Querybook</a>
              <a class="dropdown-item" href="/clients/squirrel-sql.html">SQuirreL SQL</a>
              <a class="dropdown-item" href="/clients/superset.html">Superset</a>
              <a class="dropdown-item" href="/clients/tableau/index.html">Tableau</a>
              <a class="dropdown-item" href="/clients/thoughtspot.html">Thoughtspot</a>
              <a class="dropdown-item" href="/clients/zingdata.html">Zing Data</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="starburst-galaxy"
               class="nav-link dropdown-toggle active"
              
              aria-haspopup="true" aria-label="Starburst Galaxy" data-is-click="false"
              href="/starburst-galaxy/index.html">Starburst Galaxy</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/starburst-galaxy/get-started/index.html">Get started</a>
              <a class="dropdown-item" href="/starburst-galaxy/global/get-support.html">Help center</a>
              <a class="dropdown-item" href="/starburst-galaxy/query/index.html">Query</a>
              <a class="dropdown-item" href="/starburst-galaxy/catalogs/index.html">Catalogs</a>
              <a class="dropdown-item" href="/starburst-galaxy/catalog-explorer/index.html">Catalog explorer</a>
              <a class="dropdown-item" href="/starburst-galaxy/clusters/index.html">Clusters</a>
              <a class="dropdown-item" href="/starburst-galaxy/data-products/index.html">Data products</a>
              <a class="dropdown-item" href="/starburst-galaxy/partner-connect.html">Partner connect</a>
              <a class="dropdown-item" href="/starburst-galaxy/admin/index.html">Admin</a>
              <a class="dropdown-item" href="/starburst-galaxy/access-control/index.html">Access control</a>
              <a class="dropdown-item" href="/starburst-galaxy/cloud-settings/index.html">Cloud settings</a>
              <a class="dropdown-item" href="/starburst-galaxy/security/index.html">Security</a>
              <a class="dropdown-item" href="/starburst-galaxy/sso/index.html">Single sign-on</a>
              <a class="dropdown-item" href="/starburst-galaxy/troubleshooting/index.html">Troubleshooting</a>
              <a class="dropdown-item" href="/starburst-galaxy/python/index.html">Python</a>
              <a class="dropdown-item" href="/starburst-galaxy/api.html">API</a>
              <a class="dropdown-item" href="/starburst-galaxy/sql/index.html">SQL</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="starburst-enterprise"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Get started" data-is-click="false"
              href="/starburst-enterprise/index.html">Starburst Enterprise</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/starburst-enterprise/try/index.html">Try Starburst Enterprise</a>
              <a class="dropdown-item" href="/starburst-enterprise/web-ui/index.html">Web UI</a>
              <a class="dropdown-item" href="/starburst-enterprise/sql.html">SQL</a>
              <a class="dropdown-item" href="/starburst-enterprise/admin-topics/index.html">Administration</a>
              <a class="dropdown-item" href="/starburst-enterprise/k8s/index.html">Kubernetes deployments</a>
              <a class="dropdown-item" href="/starburst-enterprise/starburst-admin/index.html">Starburst Admin</a>
              <a class="dropdown-item" href="/latest/index.html">Reference documentation</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="resources"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="resources" data-is-click="false"
              href="/resources.html">Resources</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/support.html">Support</a>
              <a class="dropdown-item" href="https://www.starburst.io/community/forum/">Community forum</a>              
              <a class="dropdown-item" href="https://www.starburst.io/blog/technical">Technical blog</a>
              <a class="dropdown-item" href="/security/index.html">Security</a>
              <a class="dropdown-item" href="https://academy.starburst.io/">Starburst Academy</a>
              <a class="dropdown-item" href="/videos/index.html">Video library</a>
              <a class="dropdown-item" href="/glossary.html">Glossary</a>
              <a class="dropdown-item" href="/conventions.html">Conventions</a>
              <a class="dropdown-item" href="/iconography.html">Iconography</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
</header>

  
  <div class="content">
    <div class="row">
      <div class="col-md-3 side-navigation">
        <div class="spacer-60 toc-sticky left-nav">
          
          <div>
    <h6 class="overline product-nav-title">Starburst Galaxy</h6>
</div>
<hr />

 
  
    
    
<li >
  <a href="/starburst-galaxy/index.html" >Starburst Galaxy Home</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('sg-get-started');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Get started
  </a>
</li>

<ul id="sg-get-started" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/get-started/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/get-started/sign-up.html" >Sign up for Starburst Galaxy</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/get-started/try-your-first-query.html" >Try your first query</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/get-started/create-object-storage-catalog.html" >Create an object storage catalog</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/get-started/create-rdbms-catalog.html" >Create a relational database catalog</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/get-started/tableau-and-galaxy.html" >Use Galaxy with Tableau</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('global');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Global features
  </a>
</li>

<ul id="global" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/global/global-search.html" >Universal search</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/global/notifications.html" >Notifications</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/global/personalize.html" >Profile and settings</a>
  </li>
  
  
</ul>



 
  
    
    
<li >
  <a href="/starburst-galaxy/global/get-support.html" >Help center</a>
</li>
  



 
  
    
    
<li >
  <a href="/starburst-galaxy/release-notes.html" >Release notes</a>
</li>
  



 
  
    
    
<li >
  <a href="/starburst-galaxy/feature-release-types.html" >Feature release types</a>
</li>
  



<hr />

 
  
    
    
<li >
  <a href="/starburst-galaxy/sg-nav-section-ui.html" >Starburst Galaxy UI</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('query');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Query
  </a>
</li>

<ul id="query" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/query/index.html" >Query overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/query/query-editor.html" >Query editor</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/query/saved-queries.html" >Saved queries</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/query/query-history.html" >Query history</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/query/query-details.html" >Query details</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/query/clients.html" >Clients</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('catalogs');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Catalogs
  </a>
</li>

<ul id="catalogs" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/s3.html" >Amazon S3</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/redshift.html" >Amazon Redshift</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/druid.html" >Apache Druid</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/pinot.html" >Apache Pinot</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/adls.html" >Azure Data Lake Storage</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/synapse.html" >Azure Synapse</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/elasticsearch.html" >Elasticsearch</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/galaxy_telemetry.html" >Galaxy Telemetry</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/bigquery.html" >Google BiqQuery</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/gcs.html" >Google Cloud Storage</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/google-sheets.html" >Google Sheets</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/mariadb.html" >MariaDB</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/mongodb.html" >MongoDB</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/mysql.html" >MySQL</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/oracle.html" >Oracle</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/postgresql.html" >PostgreSQL</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/salesforce.html" >Salesforce</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/snowflake.html" >Snowflake</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/sqlserver.html" >SQL Server</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/stargate.html" >Stargate</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/tabular.html" >Tabular</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/covid-19.html" >COVID-19 data lake</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/sample.html" >Sample dataset</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/tpch.html" >TPC-H dataset</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalogs/tpcds.html" >TPC-DS dataset</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('catalog-explorer');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Catalog explorer
  </a>
</li>

<ul id="catalog-explorer" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalog-explorer/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalog-explorer/catalog-level.html" >Catalog level</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalog-explorer/schema-level.html" >Schema level</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalog-explorer/table-level.html" >Table or view level</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalog-explorer/schema-discovery.html" >Schema discovery</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/catalog-explorer/data-lineage.html" >Data lineage</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('data-products');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Data products
  </a>
</li>

<ul id="data-products" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/data-products/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/data-products/markdown.html" >Markdown</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('clusters');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Clusters
  </a>
</li>

<ul id="clusters" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/clusters/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/clusters/cluster-utilization.html" >Cluster utilization</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/clusters/cross-region-support.html" >Cross-region support</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/clusters/fault-tolerant-execution.html" >Fault-tolerant execution</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/clusters/warp-speed.html" >Starburst Warp Speed</a>
  </li>
  
  
</ul>



 
  
    
    
<li >
  <a href="/starburst-galaxy/partner-connect.html" >Partner connect</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('admin');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Admin
  </a>
</li>

<ul id="admin" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/admin/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/admin/audit-log.html" >Audit log</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/admin/cluster-config.html" >Cluster configurations</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/admin/cluster-scheduling.html" >Cluster configurations - Cluster scheduling</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/admin/usage-billing.html" >Usage and billing</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/admin/notification-settings.html" >Notification settings</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('access-control');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Access control
  </a>
</li>

<ul id="access-control" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/users.html" >Users</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/roles-privileges.html" >Roles and privileges</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/groups.html" >Groups</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/sso-intro.html" >Single sign-on</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/api-auth-token.html" >API auth token</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/service-accounts.html" >Service accounts</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/tags.html" >Tags</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/row-filters.html" >Row filters</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/column-masks.html" >Column masks</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/access-control/oauth-clients.html" >OAuth clients</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('cloud-settings');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Cloud settings
  </a>
</li>

<ul id="cloud-settings" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/cloud-settings/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/cloud-settings/aws.html" >AWS</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/cloud-settings/azure.html" >Azure</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/cloud-settings/google-cloud.html" >Google Cloud</a>
  </li>
  
  
</ul>



<hr />

 
  
    
    
<li >
  <a href="/starburst-galaxy/sg-nav-section-admin.html" >Administration</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('security');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Security
  </a>
</li>

<ul id="security" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/access-control.html" >Access control</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/roles.html" >Roles</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/entities.html" >Entities</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/privileges.html" >Privileges</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/policies.html" >Policies</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/external-aws.html" >External security in AWS</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/external-azure.html" >External security in Azure</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/ip-allowlist.html" >IP allowlist</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/ssh-tunnels.html" >SSH tunnels</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/ssh-bastion-aws.html" >Example bastion host on AWS</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/security/privatelink.html" >AWS PrivateLink</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('sso');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Single sign-on
  </a>
</li>

<ul id="sso" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/okta-saml-setup.html" >Okta SAML setup</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/okta-scim-setup.html" >Okta SCIM setup</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/azure-saml-setup.html" >Azure SAML setup</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/azure-scim-setup.html" >Azure SCIM setup</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/google-saml-setup.html" >Google Workspace SAML setup</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/generic-idp.html" >Generic IdP setup</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/sso-delete.html" >Delete an SSO provider</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sso/sso-client-access.html" >SSO client access</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('troubleshooting');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Troubleshooting
  </a>
</li>

<ul id="troubleshooting" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/troubleshooting/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/troubleshooting/catalogs.html" >Catalogs</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/troubleshooting/clusters.html" >Clusters</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/troubleshooting/query-processing.html" >Query processing</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/troubleshooting/sql.html" >SQL</a>
  </li>
  
  
</ul>



 
  
    
    
<li >
  <a href="https://status.galaxy.starburst.io/" >Galaxy status</a>
</li>
  



<hr />

 
  
    
    
<li >
  <a href="/starburst-galaxy/sg-nav-section-reference.html" >Reference</a>
</li>
  



 





<li 
    onclick="toggle_navigation_visibility('python');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Python
  </a>
</li>

<ul id="python" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/python/index.html" >Python support</a>
  </li>
  
  
</ul>



 
  
    
    
<li >
  <a href="/starburst-galaxy/api.html" >API</a>
</li>
  



 





<li  class="active" 
    onclick="toggle_navigation_visibility('sql');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    SQL
  </a>
</li>

<ul id="sql" class="doc-subnav ">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sql/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sql/great-lakes.html" >Great Lakes connectivity</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sql/gl-iceberg.html" >Iceberg table format</a>
  </li>
  
  
  
    
    
    
  <li class="active"
      
    >
    <a href="/starburst-galaxy/sql/gl-deltalake.html" >Delta Lake table format</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sql/gl-hive.html" >Hive table format</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/sql/gl-hudi.html" >Hudi table format</a>
  </li>
  
  
</ul>



 





<li 
    onclick="toggle_navigation_visibility('tutorials');">
  <a style="box-sizing: border-box;padding-right: 10px;">
    <i class="fa-solid fa-angle-right nav-icon"></i>&nbsp;
    Tutorials
  </a>
</li>

<ul id="tutorials" class="doc-subnav hidden">
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/tutorials/index.html" >Overview</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/tutorials/query-data-lake.html" >Query the COVID-19 data lake</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/tutorials/query-federation.html" >Federate multiple data sources</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/tutorials/learn-basics.html" >Learn SQL basics</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/tutorials/learn-decision-logic.html" >Learn SQL decision logic</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/tutorials/learn-window-functions.html" >Learn SQL window functions</a>
  </li>
  
  
  
    
    
    
  <li 
      
    >
    <a href="/starburst-galaxy/tutorials/learn-complex-grouping.html" >Learn complex grouping with SQL</a>
  </li>
  
  
</ul>




          
        </div>
      </div>
      <div class="col-md-9 col-lg-6 spacer-30 docs-content">
        



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/starburst-galaxy/"
        style="text-transform: uppercase"
      > starburst galaxy</a> >
    
  
    
      <a href="/starburst-galaxy/sql/"
        style="text-transform: uppercase"
      > sql</a> >
    
  
    
      Delta Lake table format
    
  </p>
</div>

        <h1 id="delta-lake-table-format">
        
        
          Delta Lake table format <a href="#delta-lake-table-format" class="titleAnchor">#</a>
        
        
      </h1>
    

<p><a href="./great-lakes.html">Great Lakes connectivity</a> abstracts the details of using
different table formats and file types when using <a href="../catalogs/index.html#object-storage">object
storage</a> catalogs.</p>

<p>This page describes the features specific to the Delta Lake table format when
used with Great Lakes connectivity.</p>
      <h2 id="specify-delta-lake-format">
        
        
          Specify Delta Lake format <a href="#specify-delta-lake-format" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Delta Lake connectivity allows querying data stored in Delta Lake tables,
including Databricks Delta Lake. Delta Lake tables are automatically detected
and read based on information in the storage environmentâ€™s associated metadata.</p>

<p>For an object storage catalog that specifies Delta Lake as its <a href="../sql/great-lakes.html#specify-default-table-format">default table
format</a>, no special syntax
is required. A simple <code class="language-plaintext highlighter-rouge">CREATE TABLE</code> statement creates a Delta Lake format
table.</p>

<p>There is no <code class="language-plaintext highlighter-rouge">format</code> parameter for Delta Lake. To create a Delta Lake table when
the default format is not Delta Lake, add <code class="language-plaintext highlighter-rouge">type='delta'</code> as a table property in
your <code class="language-plaintext highlighter-rouge">CREATE</code> statement. For example:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">galaxy_delta</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">my_partitioned_table</span>
<span class="k">WITH</span> <span class="p">(</span>
  <span class="k">type</span> <span class="o">=</span> <span class="s1">'delta'</span><span class="p">,</span>
  <span class="k">location</span> <span class="o">=</span> <span class="s1">'s3://my-bucket/at/this/path'</span><span class="p">,</span>
  <span class="n">partitioned_by</span> <span class="o">=</span> <span class="n">ARRAY</span><span class="p">[</span><span class="s1">'regionkey'</span><span class="p">],</span>
  <span class="n">checkpoint_interval</span> <span class="o">=</span> <span class="mi">5</span>
<span class="p">)</span>
<span class="k">AS</span>
  <span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="k">comment</span><span class="p">,</span> <span class="n">regionkey</span>
  <span class="k">FROM</span> <span class="n">tpch</span><span class="p">.</span><span class="n">tiny</span><span class="p">.</span><span class="n">nation</span><span class="p">;</span>
</code></pre></div></div>
      <h3 id="table-properties">
        
        
          Table properties <a href="#table-properties" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>As part of a <code class="language-plaintext highlighter-rouge">CREATE TABLE</code> statement, append further comma-separated table
properties as needed.</p>

<table>
  <thead>
    <tr>
      <th>Table property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>partitioned_by</code></td>
      <td>Specifies table partitioning. If a table is partitioned by
        column <code>regionkey</code>, this property is set with
        <code>partitioned_by=ARRAY['regionkey']</code>.</td>
    </tr>
    <tr>
      <td><code>location</code></td>
      <td>Specifies the file system location URI for the table.</td>
    </tr>
    <tr>
      <td><code>checkpoint_interval</code></td>
      <td>Specifies the checkpoint interval in seconds.</td>
    </tr>
    <tr>
      <td><code>change_data_feed_enabled</code></td>
      <td>Enables storing change data feed entries.</td>
    </tr>
  </tbody>
</table>
      <h2 id="delta-lake-metadata-table">
        
        
          Delta Lake metadata table <a href="#delta-lake-metadata-table" class="titleAnchor">#</a>
        
        
      </h2>
    

<p><a href="./great-lakes.html">Great Lakes connectivity</a> exposes several metadata tables
for the Delta Lake table format. These metadata tables contain information about
the internal structure of the Delta Lake table. Query each metadata table by
appending the metadata table name to the <code class="language-plaintext highlighter-rouge">table_name</code>:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="nv">"table_name$history"</span><span class="p">;</span>
</code></pre></div></div>
      <h3 id="history">
        
        
          $history <a href="#history" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The <code class="language-plaintext highlighter-rouge">$history</code> table provides a log of the metadata changes made on the table.</p>

<p>Retrieve the changelog of the Delta Lake table <code class="language-plaintext highlighter-rouge">table_name</code> by using the
following query statement:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="nv">"table_name$history"</span><span class="p">;</span>
</code></pre></div></div>

<p>The following table describes the table columns of the <code class="language-plaintext highlighter-rouge">$history</code> table query
output:</p>

<table>
  <caption class="caption text-center">$history columns</caption>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>version</code></td>
      <td>BIGINT</td>
      <td>The version of the table corresponding to the operation.</td>
    </tr>
    <tr>
      <td><code>timestamp</code></td>
      <td>TIMESTAMP(3) WITH TIME ZONE</td>
      <td>The time when the table version became active.</td>
    </tr>
    <tr>
      <td><code>user_id</code></td>
      <td>VARCHAR</td>
      <td>The identifier for the user that performed the operation.</td>
    </tr>
    <tr>
      <td><code>user_name</code></td>
      <td>VARCHAR</td>
      <td>The username for the user that performed the operation.</td>
    </tr>
    <tr>
      <td><code>operation</code></td>
      <td>VARCHAR</td>
      <td>The name of the operation performed on the table.</td>
    </tr>
    <tr>
      <td><code>operation_parameters</code></td>
      <td>map(VARCHAR, VARCHAR)</td>
      <td>Parameters of the operation.</td>
    </tr>
    <tr>
      <td><code>cluster_id</code></td>
      <td>VARCHAR</td>
      <td>The ID of the cluster that ran the operation.</td>
    </tr>
    <tr>
      <td><code>read_version</code></td>
      <td>BIGINT</td>
      <td>The version of the table which was read in order to perform the
          operation.</td>
    </tr>
    <tr>
      <td><code>isolation_level</code></td>
      <td>VARCHAR</td>
      <td>The level of isolation used to perform the operation.</td>
    </tr>
    <tr>
      <td><code>is_blind_append</code></td>
      <td>BOOLEAN</td>
      <td>Whether or not the operation appended data.</td>
    </tr>
  </tbody>
</table>
      <h2 id="table-procedures">
        
        
          Table procedures <a href="#table-procedures" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Use the <code class="language-plaintext highlighter-rouge">CALL</code> statement to perform data manipulation or administrative tasks.
Procedures must include a qualified catalog name. For example, for a catalog
named <code class="language-plaintext highlighter-rouge">galaxy_delta</code>:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CALL</span> <span class="n">galaxy_delta</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">example_procedure</span><span class="p">();</span>
</code></pre></div></div>

<p>The following <strong>Delta Lake</strong> table procedures are available:</p>
      <h3 id="drop_extended_stats">
        
        
          drop_extended_stats <a href="#drop_extended_stats" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">system</span><span class="p">.</span><span class="n">drop_extended_stats</span><span class="p">(</span><span class="s1">'schema_name'</span><span class="p">,</span> <span class="s1">'table_name'</span><span class="p">);</span>
</code></pre></div></div>
<p>Drops the extended statistics for a specified table in a specified schema.</p>
      <h3 id="register_table">
        
        
          register_table <a href="#register_table" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">system</span><span class="p">.</span><span class="n">register_table</span><span class="p">(</span><span class="s1">'schema_name'</span><span class="p">,</span> <span class="s1">'table_name'</span><span class="p">,</span> <span class="s1">'s3://bucket-name/lakehouse/data/table_name_location'</span><span class="p">);</span>
</code></pre></div></div>

<p>Allows the caller to register an existing Delta Lake table in the metastore,
using its existing transaction logs and data files.</p>
      <h3 id="unregister_table">
        
        
          unregister_table <a href="#unregister_table" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">system</span><span class="p">.</span><span class="n">unregister_table</span><span class="p">(</span><span class="s1">'schema_name'</span><span class="p">,</span> <span class="s1">'table_name'</span><span class="p">);</span>
</code></pre></div></div>

<p>Allows the caller to unregister an existing Delta Lake table from the metastore
without deleting the data.</p>
      <h3 id="vacuum">
        
        
          vacuum <a href="#vacuum" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">system</span><span class="p">.</span><span class="k">vacuum</span><span class="p">(</span><span class="s1">'schema_name'</span><span class="p">,</span> <span class="s1">'table_name'</span><span class="p">,</span> <span class="s1">'retention_period'</span><span class="p">);</span>
</code></pre></div></div>

<p>Specify <code class="language-plaintext highlighter-rouge">retention_period</code> with standard SQL time period values such as <code class="language-plaintext highlighter-rouge">'7d'</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">vacuum</code> procedure removes all old files that are not in the transaction
log. Additionally, it removes files that are not necessary for read table
snapshots newer than the current time minus the retention period defined by the
retention period parameter.</p>

<p>Users with <code class="language-plaintext highlighter-rouge">INSERT</code> and <code class="language-plaintext highlighter-rouge">DELETE</code> permissions on a table can run <code class="language-plaintext highlighter-rouge">vacuum</code> as
follows:</p>

<p>All parameters are required and must be presented in the following order:</p>

<ol>
  <li>Schema name</li>
  <li>Table name</li>
  <li>Retention period</li>
</ol>
      <h3 id="alter-table-execute">
        
        
          ALTER TABLE EXECUTE <a href="#alter-table-execute" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The <a href="./ref/sql/alter-table.html">ALTER TABLE EXECUTE</a> statement followed by a
command and parameters modifies the table according to the specified procedure
and parameters. For Delta Lake tables, <code class="language-plaintext highlighter-rouge">ALTER TABLE EXECUTE</code> supports the
<code class="language-plaintext highlighter-rouge">optimize</code> command.</p>

<p>Use the <code class="language-plaintext highlighter-rouge">=&gt;</code> operator for passing named parameter values. The left side is
the name of the parameter and the right side is the value being passed:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">galaxy_delta</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">optimize</span><span class="p">(</span><span class="n">file_size_threshold</span> <span class="o">=&gt;</span> <span class="s1">'10MB'</span><span class="p">);</span>
</code></pre></div></div>
      <h4 id="optimize">
        
        
          optimize <a href="#optimize" class="titleAnchor">#</a>
        
        
      </h4>
    

<p>The <code class="language-plaintext highlighter-rouge">optimize</code> procedure improves read performance by rewriting the content of a
specific table to reduce the number of files. This process increases file size.
If the table is partitioned, the data compaction acts separately on each
partition selected for optimization.</p>

<p>All files with a size below the optional <code class="language-plaintext highlighter-rouge">file_size_threshold</code> parameter are
merged. The default value is <code class="language-plaintext highlighter-rouge">100MB</code>.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">galaxy_delta</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">optimize</span><span class="p">;</span>
</code></pre></div></div>

<p>The following statement merges files in a table that are under the <code class="language-plaintext highlighter-rouge">10MB</code> file
size threshold:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">galaxy_delta</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">optimize</span><span class="p">(</span><span class="n">file_size_threshold</span> <span class="o">=&gt;</span> <span class="s1">'10MB'</span><span class="p">);</span>
</code></pre></div></div>

<p>Optimize specific partitions using a <code class="language-plaintext highlighter-rouge">WHERE</code> clause with the columns used as
<code class="language-plaintext highlighter-rouge">partition_key</code> value.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">galaxy_delta</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">optimize</span>
<span class="k">WHERE</span> <span class="n">partition_key</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div></div>
      <h2 id="table-functions">
        
        
          Table functions <a href="#table-functions" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Your <a href="../security/roles.html#active-role-set-">active role set</a> must have the
following privileges:</p>

<ul>
  <li>Create a table <a href="../security/privileges.html#schema-privileges-">for a schema</a>.</li>
  <li>Execute the <code class="language-plaintext highlighter-rouge">table_changes</code> <a href="../security/privileges.html#function-privileges-">table
function</a>.</li>
</ul>

<p>In the navigation menu, assign the following privileges:</p>

<p>Create table privileges:</p>

<p>If some of the following steps are not possible after you select the role to
change, that role may already have the <strong>Create table</strong> privilege.</p>

<ol>
  <li>Click <strong>Access control &gt; Roles and privileges</strong>.</li>
  <li>Click the name of the role you want to change.</li>
  <li>Click <strong>Privileges &gt; Add privilege &gt; Table</strong>.</li>
  <li>Click <strong>Schema</strong>.</li>
  <li>From the drop-down menu, select the catalog of interest.</li>
  <li>In the next section, either select <strong>All schemas</strong> or from the drop-down
menu, select the name of the schema of interest.</li>
  <li>Select <strong>Allow</strong>.</li>
  <li>In <em>What can they do</em>, select <strong>Create table</strong>.</li>
  <li>Click <strong>Add privilege</strong>.</li>
</ol>

<p><img src="../../assets/img/galaxy/privilege-create-table.png" alt="Select create table privilege" class="img-fluid img-screenshot" description="" width="463px" style="" /></p>

<p><code class="language-plaintext highlighter-rouge">table_changes</code> function privilege:</p>

<ol>
  <li>Click <strong>Access control &gt; Roles and privileges</strong>.</li>
  <li>Click the name of the role you want to change.</li>
  <li>Click <strong>Privileges &gt; Add privilege &gt; Function</strong>.</li>
  <li>From the drop-down menu, select the catalog of interest.</li>
  <li>Select <strong>Execute table_changes table function</strong>.</li>
  <li>Click <strong>Add privilege</strong>.</li>
</ol>

<p><img src="../../assets/img/galaxy/privilege-table-changes.png" alt="Select create table privilege" class="img-fluid img-screenshot" description="" width="463px" style="" /></p>

<p>For more details, read about <a href="../security/privileges.html">assigning privileges to
roles</a>.</p>
      <h3 id="table_changes">
        
        
          table_changes <a href="#table_changes" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The <code class="language-plaintext highlighter-rouge">table_changes</code> function allows reading Change Data Feed (CDF) entries to
expose row-level changes between two versions of a Delta Lake table.</p>

<p>When the <code class="language-plaintext highlighter-rouge">change_data_feed_enabled</code> table property is set to <code class="language-plaintext highlighter-rouge">true</code> on a
specific Delta Lake table, Great Lakes connectivity records change
events for all data changes made on the table after <code class="language-plaintext highlighter-rouge">change_data_feed_enabled</code>
was enabled. This includes the row data and metadata, which indicates whether
the specified row was inserted, deleted, or updated.</p>

<p>The following example displays the changes made on the table:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">table_changes</span><span class="p">(</span> <span class="s1">'schema_name'</span><span class="p">,</span><span class="s1">'table_name'</span><span class="p">,</span> <span class="n">since_version</span> <span class="o">=&gt;</span> <span class="mi">0</span> <span class="p">));</span>
</code></pre></div></div>

<p>The optional <code class="language-plaintext highlighter-rouge">since_version</code> value is the version from which changes are shown.
If a value is not provided, the function produces change events starting from
when the table was created. The default value is <code class="language-plaintext highlighter-rouge">0</code>.</p>

<p>In addition to returning the columns present in the table, the
<code class="language-plaintext highlighter-rouge">table_changes</code>function returns the following values for each change event:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>_change_type</code></td>
      <td>Gives the type of change that occurred. Possible values are
          <code>insert</code>, <code>delete</code>, <code>update_preimage</code>
          , and <code>update_postimage</code>.</td>
    </tr>
    <tr>
      <td><code>_commit_version</code></td>
      <td>Shows the table version for which the change occurred.</td>
    </tr>
    <tr>
      <td><code>_commit_timestamp</code></td>
      <td>Represents the timestamp for the commit in which the specified change
          happened.</td>
    </tr>
  </tbody>
</table>

<p>The commit versions can also be retrieved from the <code class="language-plaintext highlighter-rouge">$history</code> metadata table.</p>

<p>The following SQL statements are examples of using the <code class="language-plaintext highlighter-rouge">table_change</code> function:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- CREATE TABLE with type Delta and Change Data Feed enabled:</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="p">(</span><span class="n">page_url</span> <span class="nb">VARCHAR</span><span class="p">,</span> <span class="k">domain</span> <span class="nb">VARCHAR</span><span class="p">,</span> <span class="n">views</span> <span class="nb">INTEGER</span><span class="p">)</span>
  <span class="k">WITH</span> <span class="p">(</span><span class="k">type</span><span class="o">=</span><span class="s1">'delta'</span><span class="p">,</span> <span class="n">change_data_feed_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">);</span>

<span class="c1">-- INSERT data:</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span>
  <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'url1'</span><span class="p">,</span> <span class="s1">'domain1'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">'url2'</span><span class="p">,</span> <span class="s1">'domain2'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">'url3'</span><span class="p">,</span> <span class="s1">'domain1'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span>
  <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'url4'</span><span class="p">,</span> <span class="s1">'domain1'</span><span class="p">,</span> <span class="mi">400</span><span class="p">),</span> <span class="p">(</span><span class="s1">'url5'</span><span class="p">,</span> <span class="s1">'domain2'</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span> <span class="p">(</span><span class="s1">'url6'</span><span class="p">,</span> <span class="s1">'domain3'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="c1">-- UPDATE and modify data:</span>
<span class="k">UPDATE</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">SET</span> <span class="k">domain</span> <span class="o">=</span> <span class="s1">'domain4'</span>
  <span class="k">WHERE</span> <span class="n">views</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="c1">-- SELECT and view table changes:</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span> <span class="k">system</span><span class="p">.</span><span class="n">table_changes</span><span class="p">(</span><span class="s1">'test_schema'</span><span class="p">,</span> <span class="s1">'pages'</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">_commit_version</span> <span class="k">ASC</span><span class="p">;</span>
</code></pre></div></div>

<p>The following output from the previous SQL statements shows what changes
happened in which version:</p>

<table>
  <thead>
    <tr>
      <th>page_url</th>
      <th>domain</th>
      <th>views</th>
      <th>_commit_type</th>
      <th>_commit_version</th>
      <th>_commit_timestamp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>url4</td>
      <td>domain1</td>
      <td>400</td>
      <td>insert</td>
      <td>2</td>
      <td>2023-03-10T21:22:23.000+0000</td>
    </tr>
    <tr>
      <td>url5</td>
      <td>domain2</td>
      <td>500</td>
      <td>insert</td>
      <td>2</td>
      <td>2023-03-10T21:22:23.000+0000</td>
    </tr>
    <tr>
      <td>url6</td>
      <td>domain3</td>
      <td>2</td>
      <td>insert</td>
      <td>2</td>
      <td>2023-03-10T21:22:23.000+0000</td>
    </tr>
    <tr>
      <td>url2</td>
      <td>domain2</td>
      <td>2</td>
      <td>update_preimage</td>
      <td>3</td>
      <td>2023-03-10T22:23:24.000+0000</td>
    </tr>
    <tr>
      <td>url2</td>
      <td>domain4</td>
      <td>2</td>
      <td>update_postimage</td>
      <td>3</td>
      <td>2023-03-10T22:23:24.000+0000</td>
    </tr>
    <tr>
      <td>url6</td>
      <td>domain3</td>
      <td>2</td>
      <td>update_preimage</td>
      <td>3</td>
      <td>2023-03-10T22:23:24.000+0000</td>
    </tr>
    <tr>
      <td>url6</td>
      <td>domain4</td>
      <td>2</td>
      <td>update_postimage</td>
      <td>3</td>
      <td>2023-03-10T22:23:24.000+0000</td>
    </tr>
  </tbody>
</table>
      <h2 id="session-properties">
        
        
          Session properties <a href="#session-properties" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>A <a href="./ref/sql/set-session.html">session property</a> temporarily modifies an
internal Starburst Galaxy setting for the duration of the current connection
session to the cluster. Use the <code class="language-plaintext highlighter-rouge">SET SESSION</code> statement followed by the property
name, then a value such as <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> to modify the property:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">session_property</span> <span class="o">=</span> <span class="n">expression</span><span class="p">;</span>
</code></pre></div></div>

<p>Use the <a href="./ref/sql/show-session.html">SHOW SESSION</a> statement to view all
current session properties. For additional information, read about the <a href="./ref/sql/set-session.html">SET
SESSION</a>, and <a href="./ref/sql/reset-session.html">RESET
SESSION</a> SQL statements.</p>

<p><strong>Catalog session properties</strong> are internal session properties that can
be set on a per-catalog basis. These properties must be set separately for each
catalog by including the catalog name before the property name, for example,
<code class="language-plaintext highlighter-rouge">catalog_name.property_name</code>.</p>

<p>Session properties are linked to the current session, which lets you have
multiple connections to a cluster that each have different values for the same
session properties. Once a session ends, either by disconnecting or creating a
new session, any changes made to session properties during the previous session
are lost.</p>

<p>The following sections describe the session properties supported by <strong>Delta
Lake</strong> table type:</p>
      <h3 id="compression_codec">
        
        
          compression_codec <a href="#compression_codec" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">compression_codec</span> <span class="o">=</span> <span class="s1">'SNAPPY'</span><span class="p">;</span>
</code></pre></div></div>

<p>The compression codec is used when writing new data files. The possible values
are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">NONE</code></li>
  <li><code class="language-plaintext highlighter-rouge">SNAPPY</code></li>
  <li><code class="language-plaintext highlighter-rouge">ZSTD</code></li>
  <li><code class="language-plaintext highlighter-rouge">GZIP</code></li>
</ul>

<p>The default value is <code class="language-plaintext highlighter-rouge">SNAPPY</code>.</p>
      <h3 id="dynamic_filtering_wait_timeout">
        
        
          dynamic_filtering_wait_timeout <a href="#dynamic_filtering_wait_timeout" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">dynamic_filtering_wait_timeout</span> <span class="o">=</span> <span class="s1">'10s'</span><span class="p">;</span>
</code></pre></div></div>

<p>The duration to wait for completion of dynamic filtering during split
generation. Dynamic filtering optimizations significantly improve the
performance of queries with selective joins by avoiding reading of data that
would be filtered by the join conditions. In the previous example, the
<code class="language-plaintext highlighter-rouge">dynamic_filtering_wait_timeout</code> is set to <code class="language-plaintext highlighter-rouge">10</code> seconds.</p>
      <h3 id="extended_statistics_enabled">
        
        
          extended_statistics_enabled <a href="#extended_statistics_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">extended_statistics_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Enables statistics collection with the <a href="./ref/sql/analyze.html">ANALYZE</a>
statement and the use of extended statistics. The default value is <code class="language-plaintext highlighter-rouge">true</code>. The
<a href="#statistics_enabled">statistics_enabled</a> session property must be set to
<code class="language-plaintext highlighter-rouge">true</code>. Otherwise, the collection of any statistics is disabled.</p>

<p>Use the <code class="language-plaintext highlighter-rouge">ANALYZE</code> statement to populate data size and number of distinct values
(NDV) extended table statistics in Delta Lake. The minimum value, maximum value,
value count, and null value count statistics are computed on the fly out of the
transaction log of the Delta Lake table.</p>
      <h3 id="extended_statistics_collect_on_write">
        
        
          extended_statistics_collect_on_write <a href="#extended_statistics_collect_on_write" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">extended_statistics_collect_on_write</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Enable collection of extended statistics for write operations. The default value
is <code class="language-plaintext highlighter-rouge">true</code>. The <a href="#statistics_enabled">statistics_enabled</a> session property must
be set to <code class="language-plaintext highlighter-rouge">true</code>. Otherwise, the collection of any statistics is disabled.</p>
      <h3 id="legacy_create_table_with_existing_location_enabled">
        
        
          legacy_create_table_with_existing_location_enabled <a href="#legacy_create_table_with_existing_location_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">legacy_create_table_with_existing_location_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Enable using the <a href="./ref/sql/create-table.html">CREATE TABLE</a> statement to
register an existing table. The default value is <code class="language-plaintext highlighter-rouge">true</code>.</p>
      <h3 id="max_initial_split_size">
        
        
          max_initial_split_size <a href="#max_initial_split_size" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">max_initial_split_size</span> <span class="o">=</span> <span class="s1">'32MB'</span><span class="p">;</span>
</code></pre></div></div>

<p>Sets the initial data size for a single read section assigned to a worker. The
default value is <code class="language-plaintext highlighter-rouge">32MB</code>.</p>
      <h3 id="max_split_size">
        
        
          max_split_size <a href="#max_split_size" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">max_split_size</span> <span class="o">=</span> <span class="s1">'64MB'</span><span class="p">;</span>
</code></pre></div></div>

<p>Sets the largest data size for a single read section assigned to a worker. The
default value is <code class="language-plaintext highlighter-rouge">64MB</code>.</p>
      <h3 id="parquet_max_read_block_size">
        
        
          parquet_max_read_block_size <a href="#parquet_max_read_block_size" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_max_read_block_size</span> <span class="o">=</span> <span class="s1">'16MB'</span><span class="p">;</span>
</code></pre></div></div>

<p>The maximum block size used when reading Parquet files. The default value is
<code class="language-plaintext highlighter-rouge">16MB</code>.</p>
      <h3 id="parquet_max_read_block_row_count">
        
        
          parquet_max_read_block_row_count <a href="#parquet_max_read_block_row_count" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_max_read_block_row_count</span> <span class="o">=</span> <span class="mi">8192</span><span class="p">;</span>
</code></pre></div></div>

<p>Sets the maximum number of rows read in a batch. The default value is <code class="language-plaintext highlighter-rouge">8192</code>.</p>
      <h3 id="parquet_native_snappy_decompressor_enabled">
        
        
          parquet_native_snappy_decompressor_enabled <a href="#parquet_native_snappy_decompressor_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_native_snappy_decompressor_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Enable using native <code class="language-plaintext highlighter-rouge">SNAPPY</code> library for faster decompression of Parquet files.
The default value is <code class="language-plaintext highlighter-rouge">true</code>.</p>
      <h3 id="parquet_native_zstd_decompressor_enabled">
        
        
          parquet_native_zstd_decompressor_enabled <a href="#parquet_native_zstd_decompressor_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_native_zstd_decompressor_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Enable using native <code class="language-plaintext highlighter-rouge">ZSTD</code> library for faster decompression of Parquet files.
The default value is <code class="language-plaintext highlighter-rouge">true</code>.</p>
      <h3 id="parquet_optimized_nested_reader_enabled">
        
        
          parquet_optimized_nested_reader_enabled <a href="#parquet_optimized_nested_reader_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_optimized_nested_reader_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Specifies whether batched column readers are used when reading <code class="language-plaintext highlighter-rouge">ARRAY</code>, <code class="language-plaintext highlighter-rouge">MAP</code>,
and <code class="language-plaintext highlighter-rouge">ROW</code> types from Parquet files for improved performance. Set this property
to <code class="language-plaintext highlighter-rouge">false</code> to disable the optimized Parquet reader for structural data types.
The default value is <code class="language-plaintext highlighter-rouge">true</code>.</p>
      <h3 id="parquet_optimized_reader_enabled">
        
        
          parquet_optimized_reader_enabled <a href="#parquet_optimized_reader_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_optimized_reader_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Specifies whether batched column readers are used when reading Parquet files for
improved performance. The default value is <code class="language-plaintext highlighter-rouge">true</code>.</p>
      <h3 id="parquet_use_column_index">
        
        
          parquet_use_column_index <a href="#parquet_use_column_index" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_use_column_index</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Skip reading Parquet pages by using Parquet column indices. The default value is
<code class="language-plaintext highlighter-rouge">true</code>.</p>
      <h3 id="parquet_vectorized_decoding_enabled">
        
        
          parquet_vectorized_decoding_enabled <a href="#parquet_vectorized_decoding_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_use_column_names</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Enable the use of the Java Vector API for faster decoding of Parquet files. The
default value is <code class="language-plaintext highlighter-rouge">true</code>.</p>
      <h3 id="parquet_writer_block_size">
        
        
          parquet_writer_block_size <a href="#parquet_writer_block_size" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_writer_block_size</span> <span class="o">=</span> <span class="s1">'128MB'</span><span class="p">;</span>
</code></pre></div></div>

<p>The maximum block size created by the Parquet writer. The default value is
<code class="language-plaintext highlighter-rouge">128MB</code>.</p>
      <h3 id="parquet_writer_page_size">
        
        
          parquet_writer_page_size <a href="#parquet_writer_page_size" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_writer_page_size</span> <span class="o">=</span> <span class="s1">'1MB'</span><span class="p">;</span>
</code></pre></div></div>

<p>The maximum page size created by the Parquet writer. The default value is <code class="language-plaintext highlighter-rouge">1MB</code>.</p>
      <h3 id="parquet_writer_batch_size">
        
        
          parquet_writer_batch_size <a href="#parquet_writer_batch_size" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">parquet_writer_batch_size</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">;</span>
</code></pre></div></div>

<p>Maximum number of rows processed by the Parquet writer in a batch. The default
value is <code class="language-plaintext highlighter-rouge">10000</code>.</p>
      <h3 id="projection_pushdown_enabled">
        
        
          projection_pushdown_enabled <a href="#projection_pushdown_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">projection_pushdown_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Read only projected fields, from row columns while performing <code class="language-plaintext highlighter-rouge">SELECT</code> queries.
The default value is <code class="language-plaintext highlighter-rouge">true</code>.</p>
      <h3 id="statistics_enabled">
        
        
          statistics_enabled <a href="#statistics_enabled" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">statistics_enabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Enables table statistics for performance improvements. The default value is
<code class="language-plaintext highlighter-rouge">true</code>. If the value is set to <code class="language-plaintext highlighter-rouge">false</code> the following session properties are
disabled:</p>

<ul>
  <li><a href="#extended_statistics_enabled">extended_statistics_enabled</a></li>
  <li><a href="#extended_statistics_collect_on_write">extended_statistics_collect_on_write</a></li>
</ul>
      <h3 id="target_max_file_size">
        
        
          target_max_file_size <a href="#target_max_file_size" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">target_max_file_size</span> <span class="o">=</span> <span class="s1">'1GB'</span><span class="p">;</span>
</code></pre></div></div>

<p>Target maximum size of written files. The default value is <code class="language-plaintext highlighter-rouge">1GB</code>.</p>
      <h3 id="timestamp_precision">
        
        
          timestamp_precision <a href="#timestamp_precision" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">timestamp_precision</span> <span class="o">=</span> <span class="s1">'MILLISECONDS'</span><span class="p">;</span>
</code></pre></div></div>

<p>Specifies the precision for the timestamp columns in Hive tables. The possible
values are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">MILLISECONDS</code></li>
  <li><code class="language-plaintext highlighter-rouge">MICROSECONDS</code></li>
  <li><code class="language-plaintext highlighter-rouge">NANOSECONDS</code></li>
</ul>

<p>The default value is <code class="language-plaintext highlighter-rouge">MILLISECONDS</code>.</p>
      <h3 id="vacuum_min_retention">
        
        
          vacuum_min_retention <a href="#vacuum_min_retention" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">SESSION</span> <span class="k">catalog_name</span><span class="p">.</span><span class="n">vacuum_min_retention</span> <span class="o">=</span> <span class="s1">'7d'</span><span class="p">;</span>
</code></pre></div></div>

<p>The minimum retention threshold for the files taken into account for removal by
the <a href="#vacuum">vacuum</a> procedure. The default value is <code class="language-plaintext highlighter-rouge">7d</code>.</p>
      <h2 id="delta-lake-sql-support">
        
        
          Delta Lake SQL support <a href="#delta-lake-sql-support" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>When using the Delta Lake table format with Great Lakes connectivity, the
<a href="./great-lakes.html#great-lakes-sql-support">general SQL support details</a> apply.</p>

        <div class="d-lg-none">
          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

        </div>
      </div>
      <div class="col-lg-3 toc-styles d-none d-lg-block">
        <div class="spacer-60 toc-sticky">
          <ul><li><a href="#delta-lake-table-format">Delta Lake table format</a><ul><li><a href="#specify-delta-lake-format">Specify Delta Lake format</a><ul><li><a href="#table-properties">Table properties</a></li></ul></li><li><a href="#delta-lake-metadata-table">Delta Lake metadata table</a><ul><li><a href="#history">$history</a></li></ul></li><li><a href="#table-procedures">Table procedures</a><ul><li><a href="#drop_extended_stats">drop_extended_stats</a></li><li><a href="#register_table">register_table</a></li><li><a href="#unregister_table">unregister_table</a></li><li><a href="#vacuum">vacuum</a></li><li><a href="#alter-table-execute">ALTER TABLE EXECUTE</a><ul><li><a href="#optimize">optimize</a></li></ul></li></ul></li><li><a href="#table-functions">Table functions</a><ul><li><a href="#table_changes">table_changes</a></li></ul></li><li><a href="#session-properties">Session properties</a><ul><li><a href="#compression_codec">compression_codec</a></li><li><a href="#dynamic_filtering_wait_timeout">dynamic_filtering_wait_timeout</a></li><li><a href="#extended_statistics_enabled">extended_statistics_enabled</a></li><li><a href="#extended_statistics_collect_on_write">extended_statistics_collect_on_write</a></li><li><a href="#legacy_create_table_with_existing_location_enabled">legacy_create_table_with_existing_location_enabled</a></li><li><a href="#max_initial_split_size">max_initial_split_size</a></li><li><a href="#max_split_size">max_split_size</a></li><li><a href="#parquet_max_read_block_size">parquet_max_read_block_size</a></li><li><a href="#parquet_max_read_block_row_count">parquet_max_read_block_row_count</a></li><li><a href="#parquet_native_snappy_decompressor_enabled">parquet_native_snappy_decompressor_enabled</a></li><li><a href="#parquet_native_zstd_decompressor_enabled">parquet_native_zstd_decompressor_enabled</a></li><li><a href="#parquet_optimized_nested_reader_enabled">parquet_optimized_nested_reader_enabled</a></li><li><a href="#parquet_optimized_reader_enabled">parquet_optimized_reader_enabled</a></li><li><a href="#parquet_use_column_index">parquet_use_column_index</a></li><li><a href="#parquet_vectorized_decoding_enabled">parquet_vectorized_decoding_enabled</a></li><li><a href="#parquet_writer_block_size">parquet_writer_block_size</a></li><li><a href="#parquet_writer_page_size">parquet_writer_page_size</a></li><li><a href="#parquet_writer_batch_size">parquet_writer_batch_size</a></li><li><a href="#projection_pushdown_enabled">projection_pushdown_enabled</a></li><li><a href="#statistics_enabled">statistics_enabled</a></li><li><a href="#target_max_file_size">target_max_file_size</a></li><li><a href="#timestamp_precision">timestamp_precision</a></li><li><a href="#vacuum_min_retention">vacuum_min_retention</a></li></ul></li><li><a href="#delta-lake-sql-support">Delta Lake SQL support</a></li></ul></li></ul>

          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

          <button type="button" class="btn btn-primary waves-effect waves-light print-button" onclick="window.print()">Print this page</button>
        </div>
      </div>
  </div>
  
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/community/forum/" target="_blank">Starburst forum</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#download" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <a href="https://www.starburst.io/" target="_blank"><img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst" style="margin-bottom:20px;"></a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright Â© 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>

  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
  <script type="text/javascript" src="/assets/js/custom.js"></script>
  <script type="text/javascript" src="/assets/js/algolia.js"></script>
  <script type="text/javascript" src="/assets/js/search-box.js"></script>
  <script type="text/javascript" src="/assets/js/search-results.js"></script>
</body>
</html>

