<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Starburst | Iceberg table format</title>
    <meta name="viewport" content="width=device-width">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Starburst - Iceberg table format">
    <meta property="og:description" content="Your hub to all knowledge about Starburst products.">
    <meta property="og:image" content="/assets/img/starburst-og-image.png">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded">
    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/mdb.min.css">
    <link rel="stylesheet" href="/assets/css/highlight.css">
    <link rel="stylesheet" href="/assets/css/fonts.css">
    <link rel="stylesheet" href="/assets/css/style.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114610397-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114610397-1');
</script>

<script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
    heap.load("588835629");
</script>
<script>
  var ALGOLIA_INSIGHTS_SRC = "https://cdn.jsdelivr.net/npm/search-insights@2.2.1";

  !function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){
  (e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],
  i.async=1,i.src=n,c.parentNode.insertBefore(i,c)
  }(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");
</script>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Iceberg table format | Starburst</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Iceberg table format" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Your hub to all knowledge about Starburst products." />
<meta property="og:description" content="Your hub to all knowledge about Starburst products." />
<link rel="canonical" href="https://docs.starburst.io/starburst-galaxy/sql/gl-iceberg.html" />
<meta property="og:url" content="https://docs.starburst.io/starburst-galaxy/sql/gl-iceberg.html" />
<meta property="og:site_name" content="Starburst" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Iceberg table format" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Your hub to all knowledge about Starburst products.","headline":"Iceberg table format","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.starburst.io/assets/img/logo/starburst-reverse.png"}},"url":"https://docs.starburst.io/starburst-galaxy/sql/gl-iceberg.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>


<div class="wrap">
  

<header class="main-header navbar-expand-sm">
  <div class="navbar fixed-top navbar-dark">
    <div class="navbar-left-container">
      <a class="navbar-brand" href="https://www.starburst.io/">
        <img src="/assets/img/logo/starburst_KO-T.png" height="32" alt="Starburst">
      </a>
      <span class="navbar-divider"></span>
      <a href="/" class="header-text">Documentation</a>
    </div>
    
    <div class="nav-item dropdown" id="site-search">
  <div id="dropdownSearchDisplay" aria-labelledby="dropdownSearch">
    <div id="algolia-search">
      <div id="searchbox"></div>
      <div
        class="refinement-list"
        id="versionsRefinementList"
        style="display: none"
      ></div>
      <div class="refinement-list" id="product-list">
        <h6>Product:</h6>
      </div>
      <div id="hits"></div>
      <div id="stats"></div>
    </div>
  </div>
</div>

    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
    <nav class="primary-nav">
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-layout navbar-nav mr-auto">
          <li class="nav-item dropdown">
            <a id="introduction"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Introduction" data-is-click="false"
              href="/introduction/index.html">Introduction</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/introduction/concepts.html">Concepts</a>
              <a class="dropdown-item" href="/introduction/architecture.html">Architecture</a>
              <a class="dropdown-item" href="/introduction/choose-your-starburst-product.html">Choose your Starburst product</a>
              <a class="dropdown-item" href="/introduction/data-sources-catalogs.html">Data sources and catalogs</a>
              <a class="dropdown-item" href="/introduction/data-lake.html">Data lakes</a>
              <a class="dropdown-item" href="/introduction/object-storage.html">Using object storage systems</a>
              <a class="dropdown-item" href="/introduction/metastores.html">Metastore options</a>
              <a class="dropdown-item" href="/introduction/security.html">Security</a>
              <a class="dropdown-item" href="/introduction/querying-data.html">Querying data with Starburst products</a>
              <a class="dropdown-item" href="/introduction/starburst-sql.html">Using SQL</a>
              <a class="dropdown-item" href="/introduction/migration.html">Migrating queries to Starburst</a>
              <a class="dropdown-item" href="/introduction/query-performance.html">Query performance</a>
              <a class="dropdown-item" href="/introduction/performance-features.html">Performance features</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="clients"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Clients" data-is-click="false"
              href="/clients/index.html">Clients</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/clients/index.html">Overview</a>
              <a class="dropdown-item" href="/clients/gather-connection-information.html">Gather connection information</a>
              <a class="dropdown-item" href="/clients/cli.html">CLI</a>
              <a class="dropdown-item" href="/clients/jdbc.html">JDBC driver</a>
              <a class="dropdown-item" href="/clients/odbc.html">ODBC driver</a>
              <a class="dropdown-item" href="/clients/airbyte.html">Airbyte</a>
              <a class="dropdown-item" href="/clients/alation.html">Alation</a>
              <a class="dropdown-item" href="/clients/datagrip.html">Datagrip</a>
              <a class="dropdown-item" href="/clients/dbeaver.html">dBeaver</a>
              <a class="dropdown-item" href="/clients/dbt.html">dbt</a>
              <a class="dropdown-item" href="/clients/looker.html">Looker</a>
              <a class="dropdown-item" href="/clients/metabase.html">Metabase</a>
              <a class="dropdown-item" href="/clients/microstrategy.html">Microstrategy</a>
              <a class="dropdown-item" href="/clients/powerbi.html">Power BI</a>
              <a class="dropdown-item" href="/clients/python/index.html">Python</a>
              <a class="dropdown-item" href="/clients/querybook.html">Querybook</a>
              <a class="dropdown-item" href="/clients/quicksight.html">QuickSight</a>
              <a class="dropdown-item" href="/clients/squirrel-sql.html">SQuirreL SQL</a>
              <a class="dropdown-item" href="/clients/superset.html">Superset</a>
              <a class="dropdown-item" href="/clients/tableau/index.html">Tableau</a>
              <a class="dropdown-item" href="/clients/thoughtspot.html">Thoughtspot</a>
              <a class="dropdown-item" href="/clients/zingdata.html">Zing Data</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="starburst-galaxy"
               class="nav-link dropdown-toggle active"
              
              aria-haspopup="true" aria-label="Starburst Galaxy" data-is-click="false"
              href="/starburst-galaxy/index.html">Starburst Galaxy</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/starburst-galaxy/get-started/index.html">Get started</a>
              <a class="dropdown-item" href="/starburst-galaxy/global/get-support.html">Help center</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/index.html">Working with data</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/query-data/index.html"> Query data</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/explore-data/index.html"> Explore data</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/create-catalogs/index.html">Create
             and manage catalogs</a>
              <a class="dropdown-item" href="/starburst-galaxy/clusters/index.html">Clusters</a>
              <a class="dropdown-item" href="/starburst-galaxy/working-with-data/explore-data/browse-data-products.html">Data products</a>
              <a class="dropdown-item" href="/starburst-galaxy/admin/index.html">Admin</a>
              <a class="dropdown-item" href="/starburst-galaxy/access-control/index.html">Access control</a>
              <a class="dropdown-item" href="/starburst-galaxy/cloud-settings/index.html">Cloud settings</a>
              <a class="dropdown-item" href="/starburst-galaxy/security/index.html">Security</a>
              <a class="dropdown-item" href="/starburst-galaxy/sso/index.html">Single sign-on</a>
              <a class="dropdown-item" href="/starburst-galaxy/troubleshooting/index.html">Troubleshooting</a>
              <a class="dropdown-item" href="/starburst-galaxy/python/index.html">Python</a>
              <a class="dropdown-item" href="/starburst-galaxy/sql/index.html">SQL</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="starburst-enterprise"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="Get started" data-is-click="false"
              href="/starburst-enterprise/index.html">Starburst Enterprise</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/latest/index.html">Documentation</a>
              <a class="dropdown-item" href="/latest/try-sep.html">Try Starburst Enterprise</a>
              <a class="dropdown-item" href="/latest/language.html">SQL reference</a>
              <a class="dropdown-item" href="/latest/connector.html">Connect to data sources</a>
              <a class="dropdown-item" href="/latest/admin-topics.html">Administration topics</a>
              <a class="dropdown-item" href="/latest/security.html">Security</a>
              <a class="dropdown-item" href="/latest/versions.html">Version information</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a id="resources"
               class="nav-link dropdown-toggle" 
              aria-haspopup="true" aria-label="resources" data-is-click="false"
              href="/resources.html">Resources</a>
            <div class="dropdown-menu dropdown-docs">
              <a class="dropdown-item" href="/support.html">Support</a>
              <a class="dropdown-item" href="https://www.starburst.io/community/forum/">Community forum</a>              
              <a class="dropdown-item" href="https://www.starburst.io/blog/technical">Technical blog</a>
              <a class="dropdown-item" href="/security/index.html">Security</a>
              <a class="dropdown-item" href="https://academy.starburst.io/">Starburst Academy</a>
              <a class="dropdown-item" href="/videos/index.html">Video library</a>
              <a class="dropdown-item" href="/glossary.html">Glossary</a>
              <a class="dropdown-item" href="/conventions.html">Conventions</a>
              <a class="dropdown-item" href="/iconography.html">Iconography</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
</header>

  
  <div class="content">
    <div class="row">
      <div class="col-md-3 side-navigation">
        <div class="spacer-60 toc-sticky left-nav">
          
          <div>
    <h6 class="overline product-nav-title">Starburst Galaxy</h6>
</div>
<hr />

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('get-started');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Get started</a>
      <ul id="get-started" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/get-started/index.html" >Overview</a>
      </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('learn-galaxy');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Learn Galaxy</a>
      <ul id="learn-galaxy" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/get-started/learn/sign-up.html" >Sign up for Starburst Galaxy</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/learn/try-your-first-query.html" >Try your first query</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/learn/create-object-storage-catalog.html" >Create an object storage catalog</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/learn/create-rdbms-catalog.html" >Create a relational database catalog</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/learn/tableau-and-galaxy.html" >Use Galaxy with Tableau</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('tutorials');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Tutorials</a>
      <ul id="tutorials" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/get-started/tutorials/index.html" >Tutorials overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/tutorials/query-data-lake.html" >Query the COVID-19 data lake</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/tutorials/query-federation.html" >Federate multiple data sources</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/tutorials/learn-basics.html" >Learn SQL basics</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/tutorials/learn-decision-logic.html" >Learn SQL decision logic</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/tutorials/learn-window-functions.html" >Learn SQL window functions</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/tutorials/learn-complex-grouping.html" >Learn complex grouping with SQL</a>
      </li>
  


      </ul>
    </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/release-notes.html" >Release notes</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/feature-release-types.html" >Feature release types</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/get-support.html" >Help center</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/get-started/partner-connect.html" >Partner connect</a>
      </li>
  


      </ul>
    </li>
  


<hr />

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('working-with-data');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Working with data</a>
      <ul id="working-with-data" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/index.html" >Overview</a>
      </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('query-data');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Query data</a>
      <ul id="query-data" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-data/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-data/federating-queries-from-different-sources.html" >Federating queries</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-data/run-queries.html" >Run queries</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-data/save-and-reuse-queries.html" >Save and reuse queries</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-data/query-results.html" >Use query results</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-data/query-history.html" >Review query history</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-data/connect-clients.html" >Connect clients</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-data/use-session-properties.html" >Use session properties</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('explore-data');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Explore data</a>
      <ul id="explore-data" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/explore-data/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/explore-data/global-search.html" >Universal search</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/explore-data/schema-discovery.html" >Discover object storage</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/explore-data/browse-data-products.html" >Browse data products</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/explore-data/explore-clusters.html" >Explore clusters</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/explore-data/catalog-level.html" >Explore catalogs</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/explore-data/schema-level.html" >Explore schemas</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/explore-data/table-level.html" >Explore tables and views</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('share-data');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Share data</a>
      <ul id="share-data" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/share-data/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/share-data/share-queries.html" >Share queries</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/share-data/create-a-data-product.html" >Create a data product</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/share-data/edit-a-data-product.html" >Edit a data product</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('create-catalogs');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Create and manage catalogs</a>
      <ul id="create-catalogs" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/index.html" >Overview</a>
      </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('object-storage');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Object storage</a>
      <ul id="object-storage" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/object-storage/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/object-storage/s3.html" >Amazon S3</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/object-storage/adls.html" >Azure Data Lake</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/object-storage/gcs.html" >Google Cloud Storage</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/object-storage/tabular.html" >Tabular</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('non-object-storage');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Non-object storage</a>
      <ul id="non-object-storage" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/dynamodb.html" >Amazon DynamoDB</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/redshift.html" >Amazon Redshift</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/cassandra.html" >Apache Cassandra</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/druid.html" >Apache Druid</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/pinot.html" >Apache Pinot</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/synapse.html" >Azure Synapse</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/clickhouse.html" >ClickHouse</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/elasticsearch.html" >Elasticsearch</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/galaxy_telemetry.html" >Galaxy Telemetry</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/bigquery.html" >Google BigQuery</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/google-sheets.html" >Google Sheets</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/mariadb.html" >MariaDB</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/sqlserver.html" >Microsoft SQL Server</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/mongodb.html" >MongoDB</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/mysql.html" >MySQL</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/oracle.html" >Oracle</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/postgresql.html" >PostgreSQL</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/salesforce.html" >Salesforce</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/snowflake.html" >Snowflake</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/non-object-storage/stargate.html" >Stargate</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('sample-data-sets');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Sample data sets</a>
      <ul id="sample-data-sets" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/sample-data-sets/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/sample-data-sets/covid-19.html" >COVID-19 data lake</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/sample-data-sets/sample.html" >Sample dataset</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/sample-data-sets/tpcds.html" >TPC-DS dataset</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/sample-data-sets/tpch.html" >TPC-H dataset</a>
      </li>
  


      </ul>
    </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/create-catalogs/manage-catalogs.html" >Manage catalogs</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('query-performance');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Query performance</a>
      <ul id="query-performance" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-performance-and-monitoring/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-performance-and-monitoring/view-query-details.html" >View query details</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-performance-and-monitoring/query-reports.html" >View query reports</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-performance-and-monitoring/understanding-query-planning.html" >Query planning</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-performance-and-monitoring/locate-failed-queries.html" >Locate failed queries</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-performance-and-monitoring/optimize-queries.html" >Optimize queries</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/query-performance-and-monitoring/session-properties-performance.html" >Session properties</a>
      </li>
  


      </ul>
    </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/migrating-queries.html" >Migrating queries</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/working-with-data/sql-reference.html" >SQL reference</a>
      </li>
  


      </ul>
    </li>
  


<hr />

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('developer-tools');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Developer tools</a>
      <ul id="developer-tools" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/developer-tools/python/index.html" >Python</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/developer-tools/api/index.html" >API</a>
      </li>
  


      </ul>
    </li>
  


<hr />


<hr />

  
  
      <li >
        <a href="/starburst-galaxy/sg-nav-section-admin.html" >Administration</a>
      </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('security');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Security</a>
      <ul id="security" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/security/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/access-control.html" >Access control</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/roles.html" >Roles</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/entities.html" >Entities</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/privileges.html" >Privileges</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/policies.html" >Policies</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/external-aws.html" >External security in AWS</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/external-azure.html" >External security in Azure</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/ip-allowlist.html" >IP allowlist</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/ssh-tunnels.html" >SSH tunnels</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/ssh-bastion-aws.html" >Example bastion host on AWS</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/security/privatelink.html" >AWS PrivateLink</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('sso');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Single sign-on</a>
      <ul id="sso" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/sso/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sso/okta-saml-setup.html" >Okta SAML setup</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sso/okta-scim-setup.html" >Okta SCIM setup</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sso/azure-saml-setup.html" >Azure SAML setup</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sso/azure-scim-setup.html" >Azure SCIM setup</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sso/google-saml-setup.html" >Google Workspace SAML setup</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sso/generic-idp.html" >Generic IdP setup</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sso/sso-delete.html" >Delete an SSO provider</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sso/sso-client-access.html" >SSO client access</a>
      </li>
  


      </ul>
    </li>
  


<hr />

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('troubleshooting');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Troubleshooting</a>
      <ul id="troubleshooting" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/troubleshooting/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/troubleshooting/catalogs.html" >Catalogs</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/troubleshooting/clusters.html" >Clusters</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/troubleshooting/query-processing.html" >Query processing</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/troubleshooting/sql.html" >SQL</a>
      </li>
  


      </ul>
    </li>
  


<hr />

  
  
      <li >
        <a href="https://status.galaxy.starburst.io/" >Galaxy status <i class="fa-duotone fa-arrow-up-right-from-square"></i></a>
      </li>
  


<hr />

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('reference');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Reference</a>
      <ul id="reference" class="doc-subnav hidden">
        
  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('sql');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" style="transform: rotate(90deg);">
        </i>&nbsp;SQL</a>
      <ul id="sql" class="doc-subnav ">
        
  
  
      <li >
        <a href="/starburst-galaxy/sql/index.html" >Overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sql/great-lakes.html" >Great Lakes connectivity</a>
      </li>
  

  
  
      <li class="active">
        <a href="/starburst-galaxy/sql/gl-iceberg.html" >Iceberg table format</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sql/gl-deltalake.html" >Delta Lake table format</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sql/gl-hive.html" >Hive table format</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sql/gl-hudi.html" >Hudi table format</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/sql/gl-shared-session-properties.html" >Shared session properties</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('expressions');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;Expressions</a>
      <ul id="expressions" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/reference/expressions/data-quality-expressions.html" >Data quality expressions</a>
      </li>
  


      </ul>
    </li>
  

  
  
    <li >
      <a 
        onclick="toggle_navigation_visibility('ui');"
        style="padding-left: 2px;">
        <i class="fa-solid fa-angle-right nav-icon" >
        </i>&nbsp;User interface</a>
      <ul id="ui" class="doc-subnav hidden">
        
  
  
      <li >
        <a href="/starburst-galaxy/reference/ui/index.html" >UI overview</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/reference/ui/notifications.html" >Notifications</a>
      </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/reference/ui/personalize.html" >Profile and settings</a>
      </li>
  


      </ul>
    </li>
  

  
  
      <li >
        <a href="/starburst-galaxy/reference/data-product-markdown.html" >Data product markdown</a>
      </li>
  


      </ul>
    </li>
  



          
        </div>
      </div>
      <div class="col-md-9 col-lg-6 spacer-30 docs-content">
        



<div class="breadcrumbs">
  <p>
  
  
    
      <a href="/starburst-galaxy/"
        style="text-transform: uppercase"
      > starburst galaxy</a> >
    
  
    
      <a href="/starburst-galaxy/sql/"
        style="text-transform: uppercase"
      > sql</a> >
    
  
    
      Iceberg table format
    
  </p>
</div>

        <h1 id="iceberg-table-format">
        
        
          Iceberg table format <a href="#iceberg-table-format" class="titleAnchor">#</a>
        
        
      </h1>
    

<p><a href="./great-lakes.html">Great Lakes connectivity</a> abstracts the details of using
different table formats and file types when using <a href="../catalogs/index.html#object-storage">object
storage</a> catalogs.</p>

<p>This page describes the features specific to the Iceberg table format when used
with Great Lakes connectivity.</p>
      <h2 id="specify-iceberg-format">
        
        
          Specify Iceberg format <a href="#specify-iceberg-format" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Apache Iceberg is an open table format for huge analytic datasets.
Starburst Galaxy allows querying data stored in files written in the Iceberg
format, as defined in the <a href="https://iceberg.apache.org/spec/">Iceberg Table
Spec</a>. Iceberg tables are automatically
detected and read based on information in the storage environmentâ€™s associated
metadata.</p>

<p>For an object storage catalog that specifies Iceberg as its <a href="../sql/great-lakes.html#specify-default-table-format">default table
format</a>, no special syntax
is required. A simple <code class="language-plaintext highlighter-rouge">CREATE TABLE</code> statement creates an Iceberg format table.</p>

<p>To create an Iceberg table when the default format is not Iceberg, add
<code class="language-plaintext highlighter-rouge">type='iceberg'</code> as a table property in your <code class="language-plaintext highlighter-rouge">CREATE</code> statement. For example:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">customer</span> <span class="p">(</span>
    <span class="n">name</span> <span class="nb">varchar</span><span class="p">,</span>
    <span class="n">address</span> <span class="nb">varchar</span><span class="p">)</span>
<span class="k">WITH</span> <span class="p">(</span><span class="k">type</span><span class="o">=</span><span class="s1">'iceberg'</span><span class="p">);</span>
</code></pre></div></div>

<p>Specify the file format of table data files with an additional <code class="language-plaintext highlighter-rouge">format</code> property
with value either <code class="language-plaintext highlighter-rouge">parquet</code> or <code class="language-plaintext highlighter-rouge">orc</code>, defaulting to <code class="language-plaintext highlighter-rouge">orc</code>:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span> <span class="p">(</span><span class="k">type</span><span class="o">=</span><span class="s1">'iceberg'</span><span class="p">,</span>
      <span class="n">format</span><span class="o">=</span><span class="s1">'parquet'</span><span class="p">);</span>
</code></pre></div></div>
      <h2 id="iceberg-table-properties">
        
        
          Iceberg table properties <a href="#iceberg-table-properties" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>In your <code class="language-plaintext highlighter-rouge">CREATE TABLE</code> statements, append further comma-separated table
properties as needed:</p>

<table>
  <thead>
    <tr>
      <th>Table property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>format</code></td>
      <td>Specifies the format of table data files: either <code>PARQUET</code>,
      <code>ORC</code>, or <code>AVRO</code>. Defaults to <code>ORC</code>.</td>
    </tr>
    <tr>
      <td><code>partitioning</code></td>
      <td>Specifies table partitioning. If a table is partitioned by
      columns <code>c1</code> and <code>c2</code>, this property setting is
      <code>partitioning=ARRAY['c1', 'c2']</code>.</td>
    </tr>
    <tr>
      <td><code>location</code></td>
      <td>Specifies the file system location URI for the table.</td>
    </tr>
    <tr>
      <td><code>format_version</code></td>
      <td>Specifies the format version of the Iceberg specification,
      either <code>1</code> or <code>2</code>. For example
      <code>format_version=1</code>.</td>
    </tr>
    <tr>
      <td><code>orc_bloom_filter_columns</code></td>
      <td>Comma-separated list of columns to use for ORC bloom filter. Improves
      the performance of queries using equality and IN predicates when reading
      ORC files. Requires ORC format. Defaults to <code>[]</code>.</td>
    </tr>
    <tr>
      <td><code>orc_bloom_filter_fpp</code></td>
      <td>The ORC bloom filters false positive probability. Requires ORC format.
      Defaults to <code>0.05</code>.</td>
    </tr>
  </tbody>
</table>
      <h2 id="iceberg-metadata-tables">
        
        
          Iceberg metadata tables <a href="#iceberg-metadata-tables" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Metadata tables reveal information about the internal structure of an Iceberg
table. Each Iceberg table has the following metadata tables:</p>

<table>
  <thead>
    <tr>
      <th>Metadata table</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>$properties</code></td>
      <td>Provides general configuration information including key-value tags.</td>
    </tr>
    <tr>
      <td><code>$history</code></td>
      <td>Provides a log of the metadata changes made to the table.</td>
    </tr>
    <tr>
      <td><code>$snapshots</code></td>
      <td>Provides a detailed view of snapshots of the table.</td>
    </tr>
    <tr>
      <td><code>$manifests</code></td>
      <td>Provides a detailed view of the manifests corresponding to the
      snapshots of the table.</td>
    </tr>
    <tr>
      <td><code>$partitions</code></td>
      <td>Provides a detailed view of the partitions of the table.</td>
    </tr>
    <tr>
      <td><code>$files</code></td>
      <td>Provides a detailed view of the data files in current snapshot of
      the table.</td>
    </tr>
    <tr>
      <td><code>$refs</code></td>
      <td>Provides information about the references of a table, including
      branches and tags.</td>
    </tr>
  </tbody>
</table>

<p>Query a metadata table by appending the metadata table name to a table
name with a <code class="language-plaintext highlighter-rouge">$</code> separator:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="nv">"customer$history"</span><span class="p">;</span>
</code></pre></div></div>
      <h2 id="table-procedures">
        
        
          Table procedures <a href="#table-procedures" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Use the <code class="language-plaintext highlighter-rouge">CALL</code> statement to perform data manipulation or administrative tasks.
Procedures must include a qualified catalog name. For example, for a catalog
named <code class="language-plaintext highlighter-rouge">examplecatalog</code>:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CALL</span> <span class="n">examplecatalog</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">example_procedure</span><span class="p">();</span>
</code></pre></div></div>

<p>The following <strong>Iceberg</strong> table procedures are available:</p>
      <h3 id="register_table">
        
        
          register_table <a href="#register_table" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">system</span><span class="p">.</span><span class="n">register_table</span><span class="p">(</span><span class="s1">'schema_name'</span><span class="p">,</span> <span class="s1">'table_name'</span><span class="p">,</span><span class="s1">'s3://bucket-name/lakehouse/data/table_name_location'</span><span class="p">);</span>
</code></pre></div></div>

<p>Allows the caller to register an existing Iceberg table in the metastore, using
its existing metadata and data files.</p>

<p>The <code class="language-plaintext highlighter-rouge">table_location</code> must be a complete URI, as the previous example shows.</p>

<p>Provide a file name to register a table with specific metadata. In addition,
this procedure can be used to register the table with a specific table state, or
may be necessary if Starburst Galaxy cannot automatically determine which
metadata version to use:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">system</span><span class="p">.</span><span class="n">register_table</span><span class="p">(</span><span class="s1">'schema_name'</span><span class="p">,</span> <span class="s1">'table_name'</span><span class="p">,</span> <span class="s1">'s3://bucket-name/lakehouse/data/table_name_location'</span><span class="p">,</span> <span class="s1">'00003-409702ba-4735-4645-8f14-09537cc0b2c8.metadata.json'</span><span class="p">);</span>
</code></pre></div></div>
      <h3 id="unregister_table">
        
        
          unregister_table <a href="#unregister_table" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">system</span><span class="p">.</span><span class="n">unregister_table</span><span class="p">(</span><span class="s1">'schema_name'</span><span class="p">,</span> <span class="s1">'table_name'</span><span class="p">);</span>
</code></pre></div></div>

<p>Allows the caller to unregister an existing Iceberg table from the metastores
without deleting the data.</p>
      <h3 id="rollback_to_snapshot">
        
        
          rollback_to_snapshot <a href="#rollback_to_snapshot" class="titleAnchor">#</a>
        
        
      </h3>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">system</span><span class="p">.</span><span class="n">rollback_to_snapshot</span><span class="p">(</span><span class="s1">'schema_name'</span><span class="p">,</span> <span class="s1">'table_name'</span><span class="p">,</span> <span class="mi">8954597067493422955</span><span class="p">)</span>
</code></pre></div></div>
<p>Allows the caller to roll back the state of the table to a previous snapshot ID.</p>
      <h3 id="alter-table-execute">
        
        
          ALTER TABLE EXECUTE <a href="#alter-table-execute" class="titleAnchor">#</a>
        
        
      </h3>
    

<p>The <a href="./ref/sql/alter-table.html">ALTER TABLE EXECUTE</a> statement followed by a
command and parameters modifies the table according to the specified procedure
and parameters. For Iceberg tables, <code class="language-plaintext highlighter-rouge">ALTER TABLE EXECUTE</code> supports the
following commands:</p>

<ul>
  <li><a href="#optimize">optimize</a></li>
  <li><a href="#drop_extended_stats">drop_extended_stats</a></li>
  <li><a href="#expire_snapshots">expire_snapshots</a></li>
  <li><a href="#remove_orphan_files">remove_orphan_files</a></li>
</ul>

<p>Use the <code class="language-plaintext highlighter-rouge">=&gt;</code> operator for passing named parameter values. The left side is
the name of the parameter and the right side is the value being passed:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">optimize</span><span class="p">(</span><span class="n">file_size_threshold</span> <span class="o">=&gt;</span> <span class="s1">'10MB'</span><span class="p">);</span>
</code></pre></div></div>
      <h4 id="optimize">
        
        
          optimize <a href="#optimize" class="titleAnchor">#</a>
        
        
      </h4>
    

<p>The <code class="language-plaintext highlighter-rouge">optimize</code> procedure improves read performance by rewriting the content of a
specific table to reduce the number of files. This process increases file size.
If the table is partitioned, the data compaction acts separately on each
partition selected for optimization.</p>

<p>All files with a size below the optional <code class="language-plaintext highlighter-rouge">file_size_threshold</code> parameter are
merged. The default value is <code class="language-plaintext highlighter-rouge">100MB</code>.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">optimize</span><span class="p">;</span>
</code></pre></div></div>

<p>The following statement merges files in a table that are under the <code class="language-plaintext highlighter-rouge">10MB</code> file
size threshold:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">optimize</span><span class="p">(</span><span class="n">file_size_threshold</span> <span class="o">=&gt;</span> <span class="s1">'10MB'</span><span class="p">);</span>
</code></pre></div></div>

<p>Optimize specific partitions using a <code class="language-plaintext highlighter-rouge">WHERE</code> clause with the columns used as
<code class="language-plaintext highlighter-rouge">partition_key</code> value.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">partitioned_table_name</span> <span class="k">EXECUTE</span> <span class="n">optimize</span>
<span class="k">WHERE</span> <span class="n">partition_key</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div></div>
      <h4 id="drop_extended_stats">
        
        
          drop_extended_stats <a href="#drop_extended_stats" class="titleAnchor">#</a>
        
        
      </h4>
    

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">drop_extended_stats</span><span class="p">;</span>
</code></pre></div></div>

<p>Removes all extended statistics information from the table.</p>
      <h4 id="expire_snapshots">
        
        
          expire_snapshots <a href="#expire_snapshots" class="titleAnchor">#</a>
        
        
      </h4>
    

<p>The <code class="language-plaintext highlighter-rouge">expire_snapshots</code> procedure removes all snapshots and all related metadata
and data files. Regularly expiring snapshots is recommended to delete data files
that are no longer needed, and to keep the size of table metadata small. The
procedure affects all snapshots that are older than the time period configured
with the <code class="language-plaintext highlighter-rouge">retention_threshold</code> parameter. The following example changes the
threshold to a value of nine days:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">expire_snapshots</span><span class="p">(</span><span class="n">retention_threshold</span> <span class="o">=&gt;</span> <span class="s1">'9d'</span><span class="p">);</span>
</code></pre></div></div>

<p>The value for <code class="language-plaintext highlighter-rouge">retention_threshold</code> must be higher than or equal to the default
value of <code class="language-plaintext highlighter-rouge">7d</code>. Otherwise, the procedure fails with a message similar to:</p>

<blockquote>
  <p>Retention specified (1d) is shorter than the minimum retention configured in
  the system (7d). The default value is <code class="language-plaintext highlighter-rouge">7d</code>.</p>
</blockquote>
      <h4 id="remove_orphan_files">
        
        
          remove_orphan_files <a href="#remove_orphan_files" class="titleAnchor">#</a>
        
        
      </h4>
    

<p>The <code class="language-plaintext highlighter-rouge">remove_orphan_files</code> procedure removes all files from a tableâ€™s data
directory that are not associated with metadata files. It also removes files
that are older than the value of the <code class="language-plaintext highlighter-rouge">retention_threshold</code> parameter. Deleting
orphaned files periodically is recommended to keep the size of a tableâ€™s data
directory under control. The following example changes the <code class="language-plaintext highlighter-rouge">retention_threshold</code>
to nine days:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="k">table_name</span> <span class="k">EXECUTE</span> <span class="n">remove_orphan_files</span><span class="p">(</span><span class="n">retention_threshold</span> <span class="o">=&gt;</span> <span class="s1">'9d'</span><span class="p">);</span>
</code></pre></div></div>

<p>The value for <code class="language-plaintext highlighter-rouge">retention_threshold</code> must be higher than or equal to the default
value of <code class="language-plaintext highlighter-rouge">7d</code>. Otherwise, the procedure fails with a message similar to:</p>

<blockquote>
  <p>Retention specified (1d) is shorter than the minimum retention configured in
  the system (7d). The default value is <code class="language-plaintext highlighter-rouge">7d</code>.</p>
</blockquote>
      <h2 id="migrate-hive-to-iceberg">
        
        
          Migrate Hive to Iceberg <a href="#migrate-hive-to-iceberg" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>Migration from <a href="./gl-hive.html">Hive</a> to <a href="./gl-iceberg.html">Iceberg</a> table
format is supported.</p>

<p>The migration process uses the <code class="language-plaintext highlighter-rouge">ALTER TABLE SET PROPERTIES</code> syntax. See more
information on the <a href="./gl-hive.html#migrate-to-iceberg">Hive table format</a> page.</p>
      <h2 id="session-properties">
        
        
          Session properties <a href="#session-properties" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>See <a href="./great-lakes.html#session-properties">session properties</a> on the <a href="./great-lakes.html">Great
Lakes connectivity</a> page to understand how these properties
are used.</p>

<p>The following table describes the session properties supported by the
<strong>Iceberg</strong> table type.</p>

<table>
  <thead>
    <tr>
      <th>Session property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>collect_extended_statistics_ on_write</code></td>
      <td>Collect extended statistics while writing files. The default value is
          <code>true</code>.</td>
    </tr>
    <tr>
      <td><code>compression_codec</code></td>
      <td>The compression codec is used when writing new data files. The
          possible values are:
          <ul>
          <li><code>NONE</code></li>
          <li><code>DEFAULT</code></li>
          <li><code>SNAPPY</code></li>
          <li><code>LZ4</code></li>
          <li><code>ZSTD</code></li>
          <li><code>GZIP</code></li>
          </ul>
          The default value is <code>DEFAULT</code>.</td>
    </tr>
    <tr>
      <td><code>expire_snapshots_min_retention</code></td>
      <td>The minimum retention period for the <code>expire_snapshot</code>
          procedure. The default value is <code>7d</code>.</td>
    </tr>
    <tr>
      <td><code>extended_statistics_enabled</code></td>
      <td>Enables statistics collection with the <code>ANALYZE</code>
          SQL statement and the use of extended statistics. The default value is
          <code>true</code>. The <code>statistics_enabled</code> session
          property must be set to <code>true</code>. Otherwise, the collection
          of any statistics is disabled.<br /><br />Use the <code>ANALYZE</code>
          statement to populate data size and number of distinct values (NDV)
          extended table statistics in Iceberg. The minimum value, maximum
          value, value count, and null value count statistics are computed on
          the fly out of the transaction log of the Iceberg table.</td>
    </tr>
    <tr>
      <td><code>merge_manifests_on_write</code></td>
      <td>Compact the manifest files when performing write operations. The
          default value is <code>true</code>.</td>
    </tr>
    <tr>
      <td><code>minimum_assigned_split_weight</code></td>
      <td>The minimum assigned split weight when size based split weighting is
          enabled. The default value is <code>0.05</code>.</td>
    </tr>
    <tr>
      <td><code>orc_writer_max_dictionary_emory</code></td>
      <td>The maximum dictionary memory. The default value is
          <code>16MB</code>.</td>
    </tr>
    <tr>
      <td><code>orc_writer_max_stripe_rows</code></td>
      <td>The maximum stripe row count. The default value is
          <code>10000000</code>.</td>
    </tr>
    <tr>
      <td><code>orc_writer_max_stripe_size</code></td>
      <td>The maximum stripe size. The default is <code>64B</code>.</td>
    </tr>
    <tr>
      <td><code>orc_writer_min_stripe_size</code></td>
      <td>The minimum stripe size. The default value is <code>32MB</code>.</td>
    </tr>
    <tr>
      <td><code>orc_writer_validate_mode</code></td>
      <td>The level of detail in <code>ORC</code> validation. The possible
          values are:
          <ul>
           <li><code>HASHED</code></li>
           <li><code>DETAILED</code></li>
           <li><code>BOTH</code></li>
           </ul>
           The default value is <code>BOTH</code>.</td>
    </tr>
    <tr>
      <td><code>orc_writer_validate_percentage</code></td>
      <td>The percentage of written files to validate by rereading them. The
          default value is <code>0</code>.</td>
    </tr>
    <tr>
      <td><code>parquet_native_zstd_ decompressor_enabled</code></td>
      <td>Enable using native <code>ZSTD</code>  library for faster
          decompression of Parquet files. The default value is
          <code>true</code>.</td>
    </tr>
    <tr>
      <td><code>remove_orphan_files_min_retention</code></td>
      <td>The minimum retention for the files taken into account for removal by
          the <code>remove_orphan</code> procedure. The default value is
          <code>7d</code>.</td>
    </tr>
    <tr>
      <td><code>use_file_size_from_metadata</code></td>
      <td>Use the file size stored in Iceberg metadata. The default value is
          <code>true</code>.</td>
    </tr>
  </tbody>
</table>
      <h2 id="iceberg-sql-support">
        
        
          Iceberg SQL support <a href="#iceberg-sql-support" class="titleAnchor">#</a>
        
        
      </h2>
    

<p>When using the Iceberg table format with Great Lakes connectivity, the
<a href="./great-lakes.html#great-lakes-sql-support">general SQL support details</a> apply.</p>

        <div class="d-lg-none">
          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

        </div>
      </div>
      <div class="col-lg-3 toc-styles d-none d-lg-block">
        <div class="spacer-60 toc-sticky">
          <ul><li><a href="#iceberg-table-format">Iceberg table format</a><ul><li><a href="#specify-iceberg-format">Specify Iceberg format</a></li><li><a href="#iceberg-table-properties">Iceberg table properties</a></li><li><a href="#iceberg-metadata-tables">Iceberg metadata tables</a></li><li><a href="#table-procedures">Table procedures</a><ul><li><a href="#register_table">register_table</a></li><li><a href="#unregister_table">unregister_table</a></li><li><a href="#rollback_to_snapshot">rollback_to_snapshot</a></li><li><a href="#alter-table-execute">ALTER TABLE EXECUTE</a><ul><li><a href="#optimize">optimize</a></li><li><a href="#drop_extended_stats">drop_extended_stats</a></li><li><a href="#expire_snapshots">expire_snapshots</a></li><li><a href="#remove_orphan_files">remove_orphan_files</a></li></ul></li></ul></li><li><a href="#migrate-hive-to-iceberg">Migrate Hive to Iceberg</a></li><li><a href="#session-properties">Session properties</a></li><li><a href="#iceberg-sql-support">Iceberg SQL support</a></li></ul></li></ul>

          <div class="feedback-container">
  <div class="feedback-thumbs">
    <p>Is the information on this page helpful?</p>
    <div class="thumb-wrapper">
      <p class="feedback-option" title="yes"><i class="fa fa-thumbs-up"></i>Yes</p>
      <p class="feedback-option" title="no"><i class="fa fa-thumbs-down"></i>No</p>
    </div>
  </div>
  <div class="feedback-message">
    <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
    <button type="button" onclick="sendMessage()" class="btn btn-sm btn-primary">Submit</button>
    <a onclick="skip()" class="feedback-skip">Skip</a>
  </div>
</div>

<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

          <button type="button" class="btn btn-primary waves-effect waves-light print-button" onclick="window.print()">Print this page</button>
        </div>
      </div>
  </div>
  
</div>
<footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <p style="font-weight:900">Resources</b></p>
        <ul>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/community/forum/" target="_blank">Starburst forum</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#download" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">
        <a href="https://www.starburst.io/" target="_blank"><img src="/assets/img/logo/starburst-reverse.png" height="60" alt=" Starburst" style="margin-bottom:20px;"></a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright Â© 2017-2023<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 center spacer-30">
          <a href="https://twitter.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.youtube.com/channel/UCXjkuWSO9CV_cSI3Mvo4a4w" target="_blank" class="footer-icon"><i class="fab fa-youtube"></i></a>
          <a href="https://github.com/starburstdata" target="_blank" class="footer-icon"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>

  <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/popper.min.js"></script>
  <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/assets/js/mdb.min.js"></script>
  <script type="text/javascript" src="/assets/js/custom.js"></script>
  <script type="text/javascript" src="/assets/js/algolia.js"></script>
  <script type="text/javascript" src="/assets/js/search-box.js"></script>
  <script type="text/javascript" src="/assets/js/search-results.js"></script>
</body>
</html>

