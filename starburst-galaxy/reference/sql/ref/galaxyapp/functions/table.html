

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Table functions &#8212; Starburst Galaxy SQL reference</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <link rel="stylesheet" type="text/css" href="../_static/galaxyapp.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/galaxyapp.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Teradata functions" href="teradata.html" />
    <link rel="prev" title="System information" href="system.html" />

  
   



<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">




<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/functions/table.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#functions/table" tabindex="1" class="md-skip"> Skip to content </a>
  


<!-- Empty space for rendering header in parent window -->
<header class="md-header"></header>



  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../functions.html" class="md-tabs__link">Functions and operators</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Galaxy SQL reference" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Galaxy SQL reference">Starburst Galaxy SQL reference</a>
  </label>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
  <ul class="md-nav__list" data-md-scrollfix="">
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="functions-table--page-root">Table functions<a class="headerlink" href="#functions-table--page-root" title="Permalink to this heading">#</a></h1>
<p>A table function is a function returning a table. It can be invoked inside the
<code class="docutils literal notranslate"><span class="pre">FROM</span></code> clause of a query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">my_function</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p>The row type of the returned table can depend on the arguments passed with
invocation of the function. If different row types can be returned, the
function is a <strong>polymorphic table function</strong>.</p>
<p>Polymorphic table functions allow you to dynamically invoke custom logic from
within the SQL query. They can be used for working with external systems as
well as for enhancing Trino with capabilities going beyond the SQL standard.</p>

<span id="id1"></span><h2 id="built-in-table-functions">Built-in table functions<a class="headerlink" href="#built-in-table-functions" title="Permalink to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="exclude_columns">
<code class="sig-name descname"><span class="pre">exclude_columns</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">input</span> <span class="pre">=&gt;</span> <span class="pre">table</span></span></em>, <em><span class="n"><span class="pre">columns</span> <span class="pre">=&gt;</span> <span class="pre">descriptor</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">â†’</span> <span class="sig-return-typehint"><span class="pre">table</span></span></span><a class="headerlink" href="#exclude_columns" title="Permalink to this definition">#</a></dt>
<dd><p>Excludes from <code class="docutils literal notranslate"><span class="pre">table</span></code> all columns listed in <code class="docutils literal notranslate"><span class="pre">descriptor</span></code>::</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SELECT *
FROM TABLE(exclude_columns(
                        input =&gt; TABLE(orders),
                        columns =&gt; DESCRIPTOR(clerk, comment)))
</pre></div>
</div>
<p>The argument <code class="docutils literal notranslate"><span class="pre">input</span></code> is a table or a query.
The argument <code class="docutils literal notranslate"><span class="pre">columns</span></code> is a descriptor without types.</p>
</dd></dl>
<span class="target" id="sequence-table-function"></span><dl class="py function">
<dt class="sig sig-object py">
<code class="sig-name descname"><span class="pre">sequence</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">start</span> <span class="pre">=&gt;</span> <span class="pre">bigint</span></span></em>, <em><span class="n"><span class="pre">stop</span> <span class="pre">=&gt;</span> <span class="pre">bigint</span></span></em>, <em><span class="n"><span class="pre">step</span> <span class="pre">=&gt;</span> <span class="pre">bigint)</span> <span class="pre">-&gt;</span> <span class="pre">table(sequential_number</span> <span class="pre">bigint</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns a single column <code class="docutils literal notranslate"><span class="pre">sequential_number</span></code> containing a sequence of
bigint::</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SELECT *
FROM TABLE(sequence(
                start =&gt; 1000000,
                stop =&gt; -2000000,
                step =&gt; -3))
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">start</span></code> is the first element in te sequence. The default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">stop</span></code> is the end of the range, inclusive. The last element in the
sequence is equal to <code class="docutils literal notranslate"><span class="pre">stop</span></code>, or it is the last value within range,
reachable by steps.</p>
<p><code class="docutils literal notranslate"><span class="pre">step</span></code> is the difference between subsequent values. The default value is
<code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</dd></dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The result of the <code class="docutils literal notranslate"><span class="pre">sequence</span></code> table function might not be ordered.</p>
</div>


<h2 id="table-function-invocation">Table function invocation<a class="headerlink" href="#table-function-invocation" title="Permalink to this heading">#</a></h2>
<p>You invoke a table function in the <code class="docutils literal notranslate"><span class="pre">FROM</span></code> clause of a query. Table function
invocation syntax is similar to a scalar function call.</p>

<h3 id="function-resolution">Function resolution<a class="headerlink" href="#function-resolution" title="Permalink to this heading">#</a></h3>
<p>Every table function is provided by a catalog, and it belongs to a schema in
the catalog. You can qualify the function name with a schema name, or with
catalog and schema names:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span><span class="k">schema_name</span><span class="p">.</span><span class="n">my_function</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span><span class="k">catalog_name</span><span class="p">.</span><span class="k">schema_name</span><span class="p">.</span><span class="n">my_function</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p>Otherwise, the standard Trino name resolution is applied. The connection
between the function and the catalog must be identified, because the function
is executed by the corresponding connector. If the function is not registered
by the specified catalog, the query fails.</p>
<p>The table function name is resolved case-insensitive, analogically to scalar
function and table resolution in Trino.</p>


<h3 id="arguments">Arguments<a class="headerlink" href="#arguments" title="Permalink to this heading">#</a></h3>
<p>There are three types of arguments.</p>
<ol class="arabic simple">
<li>Scalar arguments</li>
</ol>
<p>They must be constant expressions, and they can be of any SQL type, which is
compatible with the declared argument type:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">factor</span> <span class="o">=&gt;</span> <span class="mi">42</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Descriptor arguments</li>
</ol>
<p>Descriptors consist of fields with names and optional data types:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">schema</span> <span class="o">=&gt;</span> <span class="k">DESCRIPTOR</span><span class="p">(</span><span class="n">id</span> <span class="nb">BIGINT</span><span class="p">,</span> <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">)</span>
<span class="n">columns</span> <span class="o">=&gt;</span> <span class="k">DESCRIPTOR</span><span class="p">(</span><span class="nb">date</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="k">comment</span><span class="p">)</span>
</pre></div>
</div>
<p>To pass <code class="docutils literal notranslate"><span class="pre">null</span></code> for a descriptor, use:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">schema</span> <span class="o">=&gt;</span> <span class="k">CAST</span><span class="p">(</span><span class="k">null</span> <span class="k">AS</span> <span class="k">DESCRIPTOR</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Table arguments</li>
</ol>
<p>You can pass a table name, or a query. Use the keyword <code class="docutils literal notranslate"><span class="pre">TABLE</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">input</span> <span class="o">=&gt;</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
<span class="k">data</span> <span class="o">=&gt;</span> <span class="k">TABLE</span><span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">region</span><span class="p">,</span> <span class="n">nation</span> <span class="k">WHERE</span> <span class="n">region</span><span class="p">.</span><span class="n">regionkey</span> <span class="o">=</span> <span class="n">nation</span><span class="p">.</span><span class="n">regionkey</span><span class="p">)</span>
</pre></div>
</div>
<p>If the table argument is declared as set semantics,
you can specify partitioning and ordering. Each partition is processed
independently by the table function. If you do not specify partitioning, the
argument is processed as a single partition. You can also specify
<code class="docutils literal notranslate"><span class="pre">PRUNE</span> <span class="pre">WHEN</span> <span class="pre">EMPTY</span></code> or <code class="docutils literal notranslate"><span class="pre">KEEP</span> <span class="pre">WHEN</span> <span class="pre">EMPTY</span></code>. With <code class="docutils literal notranslate"><span class="pre">PRUNE</span> <span class="pre">WHEN</span> <span class="pre">EMPTY</span></code> you
declare that you are not interested in the function result if the argument is
empty. This information is used by the Trino engine to optimize the query. The
<code class="docutils literal notranslate"><span class="pre">KEEP</span> <span class="pre">WHEN</span> <span class="pre">EMPTY</span></code> option indicates that the function should be executed even
if the table argument is empty. Note that by specifying <code class="docutils literal notranslate"><span class="pre">KEEP</span> <span class="pre">WHEN</span> <span class="pre">EMPTY</span></code> or
<code class="docutils literal notranslate"><span class="pre">PRUNE</span> <span class="pre">WHEN</span> <span class="pre">EMPTY</span></code>, you override the property set for the argument by the
function author.</p>
<p>The following example shows how the table argument properties should be ordered:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">input</span> <span class="o">=&gt;</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
                    <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">orderstatus</span>
                    <span class="n">KEEP</span> <span class="k">WHEN</span> <span class="n">EMPTY</span>
                    <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">orderdate</span>
</pre></div>
</div>


<h3 id="argument-passing-conventions">Argument passing conventions<a class="headerlink" href="#argument-passing-conventions" title="Permalink to this heading">#</a></h3>
<p>There are two conventions of passing arguments to a table function:</p>
<ul>
<li><p class="first"><strong>Arguments passed by name</strong>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">my_function</span><span class="p">(</span><span class="k">row_count</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span> <span class="n">column_count</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</li>
</ul>
<p>In this convention, you can pass the arguments in arbitrary order. Arguments
declared with default values can be skipped. Argument names are resolved
case-sensitive, and with automatic uppercasing of unquoted names.</p>
<ul>
<li><p class="first"><strong>Arguments passed positionally</strong>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">my_function</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</li>
</ul>
<p>In this convention, you must follow the order in which the arguments are
declared. You can skip a suffix of the argument list, provided that all the
skipped arguments are declared with default values.</p>
<p>You cannot mix the argument conventions in one invocation.</p>
<p>You can also use parameters in arguments:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">PREPARE</span> <span class="n">stmt</span> <span class="k">FROM</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">my_function</span><span class="p">(</span><span class="k">row_count</span> <span class="o">=&gt;</span> <span class="o">?</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">column_count</span> <span class="o">=&gt;</span> <span class="o">?</span><span class="p">));</span>

<span class="k">EXECUTE</span> <span class="n">stmt</span> <span class="k">USING</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>





          </article>
        </div>
      </div>
    </main>
  </div>


  </body>
</html>