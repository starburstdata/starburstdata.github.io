

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Installing Starburst Enterprise in AWS &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuring Starburst Enterprise with CFT" href="configuration.html" />
    <link rel="prev" title="Starburst Enterprise with CFT requirements" href="requirements.html" />

  
   



<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/aws/installation.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#aws/installation" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 360-e LTS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 360-e LTS</span>
          <span class="md-header-nav__topic"> Installing Starburst Enterprise in AWS </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (364-e)" href="/364-e/">Latest LTS (364-e)</a>
      
          <a title="360-e LTS" href="/360-e/">360-e LTS</a>
      
          <a title="356-e LTS" href="/356-e/">356-e LTS</a>
      
          <a title="350-e LTS" href="/350-e/">350-e LTS</a>
      
          <a title="Latest STS (368-e)" href="/368-e/">Latest STS (368-e)</a>
      
          <a title="367-e STS" href="/367-e/">367-e STS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../aws.html" class="md-tabs__link">Deploying with CFT on AWS</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 360-e LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="requirements.html" class="md-nav__link">Starburst Enterprise with CFT requirements</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Installing Starburst Enterprise in AWS </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Installing Starburst Enterprise in AWS</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#aws-installation--page-root" class="md-nav__link">Installing Starburst Enterprise in AWS</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#deploy-a-cluster-with-the-ec2-console" class="md-nav__link">Deploy a cluster with the EC2 console</a>
        </li>
        <li class="md-nav__item"><a href="#deploying-a-cluster-with-the-aws-cli" class="md-nav__link">Deploying a cluster with the AWS CLI</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#example-cft-creation-script" class="md-nav__link">Example CFT creation script</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#write-a-bootstrap-script" class="md-nav__link">Write a bootstrap script</a>
        </li>
        <li class="md-nav__item"><a href="#expose-secrets-to-sep" class="md-nav__link">Expose secrets to SEP</a>
        </li>
        <li class="md-nav__item"><a href="#uninstalling-sep" class="md-nav__link">Uninstalling SEP</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#deleting-a-cluster-on-the-aws-cloudformation-console" class="md-nav__link">Deleting a cluster on the AWS CloudFormation console</a>
        </li>
        <li class="md-nav__item"><a href="#deleting-a-cluster-in-the-aws-cli" class="md-nav__link">Deleting a cluster in the AWS CLI</a>
        </li>
        <li class="md-nav__item"><a href="#safeguarding-your-cluster" class="md-nav__link">Safeguarding your cluster</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html" class="md-nav__link">Configuring Starburst Enterprise with CFT</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="metastore.html" class="md-nav__link">Configuring the Hive Metastore Service with CFT</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="operation.html" class="md-nav__link">Operating Starburst Enterprise with CFT</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cloudwatch.html" class="md-nav__link">Configuring Starburst Enterprise with CloudWatch in CFT</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="release-notes.html" class="md-nav__link">AWS AMI/CFT release notes</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Starburst Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">360-e.8 LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#aws-installation--page-root" class="md-nav__link">Installing Starburst Enterprise in AWS</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#deploy-a-cluster-with-the-ec2-console" class="md-nav__link">Deploy a cluster with the EC2 console</a>
        </li>
        <li class="md-nav__item"><a href="#deploying-a-cluster-with-the-aws-cli" class="md-nav__link">Deploying a cluster with the AWS CLI</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#example-cft-creation-script" class="md-nav__link">Example CFT creation script</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#write-a-bootstrap-script" class="md-nav__link">Write a bootstrap script</a>
        </li>
        <li class="md-nav__item"><a href="#expose-secrets-to-sep" class="md-nav__link">Expose secrets to SEP</a>
        </li>
        <li class="md-nav__item"><a href="#uninstalling-sep" class="md-nav__link">Uninstalling SEP</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#deleting-a-cluster-on-the-aws-cloudformation-console" class="md-nav__link">Deleting a cluster on the AWS CloudFormation console</a>
        </li>
        <li class="md-nav__item"><a href="#deleting-a-cluster-in-the-aws-cli" class="md-nav__link">Deleting a cluster in the AWS CLI</a>
        </li>
        <li class="md-nav__item"><a href="#safeguarding-your-cluster" class="md-nav__link">Safeguarding your cluster</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="aws-installation--page-root">Installing Starburst Enterprise in AWS<a class="headerlink" href="#aws-installation--page-root" title="Permalink to this headline">#</a></h1>
<p>Now that you’ve satisfied the <a class="reference internal" href="requirements.html"><span class="doc">all the requirements</span></a> you
are ready to proceed with installing Starburst Enterprise platform (SEP) in AWS.</p>

<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p>SEP is available as an Amazon Machine Image (AMI), which in turn is used
in the CloudFormation template (CFT). You can get the resources
directly from Starburst, or from the <a class="reference external" href="https://aws.amazon.com/marketplace/pp/B07DKV5659/ref=_ptnr_starburst_docs">AWS Marketplace</a></p>
<p>You can use the <a class="reference internal" href="#cft-ec2-console"><span class="std std-ref">EC2 console</span></a> or
<a class="reference internal" href="#cft-aws-cli"><span class="std std-ref">AWS CLI</span></a> to deploy a SEP cluster as a CFT.</p>

<span id="cft-ec2-console"></span><h3 id="deploy-a-cluster-with-the-ec2-console">Deploy a cluster with the EC2 console<a class="headerlink" href="#deploy-a-cluster-with-the-ec2-console" title="Permalink to this headline">#</a></h3>
<p><strong>1.  Select template</strong></p>
<p>After you subscribe to the SEP offering on AWS Marketplace, or receive
the URL to the CFT, you are able to begin configuring and launching your
cluster.</p>
<a class="reference internal image-reference" href="../_images/trino_cft_launch.png"><img alt="../_images/trino_cft_launch.png" src="../_images/trino_cft_launch.png" style="width: 376.2px; height: 120.0px;"/></a>
<p>This directs you to the <strong>Select Template</strong> step for creating a CloudFormation
stack. Find the pre-populated field under <strong>Amazon S3 template URL</strong>.
This is the location of Starburst’s SEP CloudFormation template. Click
<strong>Next</strong>.</p>
<p>Optionally you can choose <strong>Copy to Service Catalog</strong> for when using with the
<a class="reference external" href="https://aws.amazon.com/servicecatalog/">AWS Service Catalog</a>.</p>
<a class="reference internal image-reference" href="../_images/trino_cft_select.png"><img alt="../_images/trino_cft_select.png" src="../_images/trino_cft_select.png" style="width: 624.0px; height: 417.0px;"/></a>
<p><strong>2.  Specify details</strong></p>
<p>Specify the details of your cluster defined by the
<a class="reference internal" href="configuration.html#cft-configuration"><span class="std std-ref">CFT configuration parameters</span></a>. This step includes network, EC2 and SEP and other
configuration options.</p>
<table id="id1">
<caption><span class="caption-text">SEP cluster details</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 45%"/>
<col style="width: 55%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Preliminary details</strong></p></td>
<td><p>Provide a name for your stack that allows
you to distinguish it from other stacks running in your AWS account. For
example, “sepcluster”.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Network configuration</strong></p></td>
<td><p>Specify the <a class="reference internal" href="configuration.html#cft-network-configuration"><span class="std std-ref">network configuration parameters</span></a>. They are typically preconfigured. See the
<a class="reference internal" href="requirements.html#aws-vpc"><span class="std std-ref">VPC and VPC subnets</span></a> and <a class="reference internal" href="requirements.html#aws-security-groups"><span class="std std-ref">Security groups</span></a> sections for more detail.</p></td>
</tr>
<tr class="row-even"><td><p><strong>EC2 configuration</strong></p></td>
<td><p>Specify the <a class="reference internal" href="configuration.html#cft-ec2-configuration"><span class="std std-ref">EC2 configuration parameters</span></a>.
Note that you need to ensure a volume is mounted and configured on each
worker, with the <code class="docutils literal notranslate"><span class="pre">WorkerMountVolume</span></code> and <a class="reference internal" href="configuration.html#cft-ec2-configuration"><span class="std std-ref">related parameters</span></a> if you are using <a class="reference internal" href="../connector/hive-caching.html"><span class="doc">caching for distributed
storage</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>SEP configuration</strong></p></td>
<td><p>Specify the SEP <a class="reference internal" href="configuration.html#cft-ec2-configuration"><span class="std std-ref">configuration parameters</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Hive connector options</strong></p></td>
<td><p>Specify the <a class="reference internal" href="configuration.html#cft-hive-connector-options"><span class="std std-ref">relevant Hive connector options</span></a> if you plan to query data in HDFS or S3.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Ranger options and Ranger LDAP user synchronization</strong></p></td>
<td><p>These options allow you to configure Apache Ranger for the <a class="reference internal" href="../security/ranger-overview.html"><span class="doc">system
level security with Apache Ranger</span></a> and the
related synchronization with an LDAP backend for user and group
information. More information is available in the <a class="reference internal" href="configuration.html#cft-ranger-configuration"><span class="std std-ref">table of
parameters</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Advanced AWS S3 configuration</strong></p></td>
<td><p>Optionally configure the <a class="reference internal" href="configuration.html#cft-adv-s3-configuration"><span class="std std-ref">parameters to access custom S3 or
S3-compatible systems</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Monitoring</strong></p></td>
<td><p>Indicate if you want to <a class="reference internal" href="configuration.html#cft-monitoring"><span class="std std-ref">enable integration with CloudWatch metrics</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>IAM Instance</strong></p></td>
<td><p>Optionally specify the <a class="reference internal" href="configuration.html#cft-iam-instance"><span class="std std-ref">IAM InstanceProfile</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Other</strong></p></td>
<td><p>Indicate whether you are deploying and using Apache Superset and
<a class="reference internal" href="configuration.html#cft-other-configuration"><span class="std std-ref">other configuration</span></a>.</p></td>
</tr>
</tbody>
</table>
<p><strong>3. Options</strong></p>
<p>Enter any additional stack specifications as shown on the Options page. These
options include adding tags to resources within your cluster, choosing IAM
roles, and specifying monitoring time for rollback triggers, among other
advanced specifications. More information can be found in the <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html">AWS
CloudFormation documentation</a>.</p>
<p><strong>4. Review</strong></p>
<p>Finally, review the details of your SEP cluster. When content, proceed by
pressing create to conclude the creation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just above the final “Create stack” button there is a blueish box informing
you that <em>The following resource(s) require capabilities: [AWS::IAM::Role]</em>.
In order to create the Stack you need to mark the checkbox next to <em>I
acknowledge that AWS CloudFormation might create IAM resources.</em></p>
</div>


<span id="cft-aws-cli"></span><h3 id="deploying-a-cluster-with-the-aws-cli">Deploying a cluster with the AWS CLI<a class="headerlink" href="#deploying-a-cluster-with-the-aws-cli" title="Permalink to this headline">#</a></h3>
<p>You can  deploy an SEP cluster using the
<a class="reference external" href="https://aws.amazon.com/cli/">AWS CLI</a> instead of the AWS Web
Console. Ensure that the AWS CLI is installed and configured before you proceed.</p>
<p><strong>1. Edit script file</strong></p>
<p>Open a terminal window and create a script file. This file will contain a
long list of properties for the CFT, so separate each segment with a
backslash to make the script easier to read and write. Refer to the
<a class="reference internal" href="#cft-cli-example"><span class="std std-ref">example script below</span></a> for sample formatting.</p>
<p><strong>2. Create stack</strong></p>
<p>Add a first line to the command that uses the AWS CLI to create a
CloudFormation stack.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>aws cloudformation create-stack \
</pre></div>
</div>
<p><strong>3. Name stack</strong></p>
<p>Specify the name that is to be associated with the cluster. The name must be
unique in the region in which you are creating the cluster.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--stack-name exampleclustername \
</pre></div>
</div>
<p><strong>4. Specify template</strong></p>
<p>Add the CFT template URL you received. The URL must point to a
template that is located in an Amazon S3 bucket.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--template-url https://s3.amazonaws.com/example-context/TrinoCFT.template \
</pre></div>
</div>
<p><strong>5. Specify parameters</strong></p>
<p>Define a list of parameter structures that specify input parameters for the
cluster. Refer to the complete list of parameters in the <a class="reference internal" href="configuration.html#cft-configuration"><span class="std std-ref">configuration
section</span></a> Parameter values need to be provided on the
command line in special form. Refer to the example below for guidance.</p>
<p><strong>6. Configure rollback options</strong></p>
<p>Configure the rollback ability as desired to disable rollback of the cluster
if stack creation fails, with one of the following options:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--disable-rollback \
--no-disable-rollback \
</pre></div>
</div>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">RollbackTriggers</span><span class="o">=</span><span class="s">[{Arn=string,Type=string},{Arn=string,Type=string}],MonitoringTimeInMinutes=integer</span>
</pre></div>
</div>
<p><strong>7. IAM capabilities acknowledgement</strong></p>
<p>Analogous to how you mark the <em>I acknowledge that AWS CloudFormation might
create IAM resources.</em> checkbox, when deploying SEP via the AWS console,
you need to denote that you accept this capability when deploying with the
CLI. This is done by adding a <code class="docutils literal notranslate"><span class="pre">--capabilities</span></code> parameter to the AWS CLI
<code class="docutils literal notranslate"><span class="pre">create-stack</span></code> command.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>--capabilities CAPABILITY_IAM \
</pre></div>
</div>
<p><strong>8. Review</strong></p>
<p>Finally, review the details of your cluster and your command. When ready, save
and run the script file to create your cluster.</p>

<span id="cft-cli-example"></span><h4 id="example-cft-creation-script">Example CFT creation script<a class="headerlink" href="#example-cft-creation-script" title="Permalink to this headline">#</a></h4>
<p>The following example shows a full command to create a cluster with the AWS CLI:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>aws cloudformation create-stack \
--stack-name "SEP-cluster" \
--template-url "https://s3.amazonaws.com/awsmp-fulfillment-cf-templates-prod/StarburstCFT.template" \
--parameters \
"ParameterKey=VPC,ParameterValue=vpc-4bd6ca11" \
"ParameterKey=Subnet,ParameterValue=subnet-123abc2b" \
"ParameterKey=SecurityGroups,ParameterValue=sg-12e34aeb" \
"ParameterKey=CoordinatorInstanceType,ParameterValue=r4.xlarge" \
"ParameterKey=WorkersInstanceType,ParameterValue=r4.xlarge" \
"ParameterKey=KeyName,ParameterValue=john.smith" \
"ParameterKey=IamInstanceProfile,ParameterValue=my-ec2-instance-profile" \
"ParameterKey=WorkersCount,ParameterValue=2" \
"ParameterKey=LaunchSuperset,ParameterValue=yes" \
"ParameterKey=MetastoreType,ParameterValue='External MySQL RDBS'" \
"ParameterKey=ExternalMetastoreHost,ParameterValue=172.31.6.18"  \
"ParameterKey=ExternalMetastorePort,ParameterValue=3306"  \
"ParameterKey=ExternalRdbmsMetastoreUserName,ParameterValue=hive"  \
"ParameterKey=ExternalRdbmsMetastorePassword,ParameterValue='q@55vv0r|&gt;'"  \
"ParameterKey=ExternalRdbmsMetastoreDatabaseName,ParameterValue=hive_metastore"  \
"ParameterKey=AdditionalCoordinatorConfigurationURI,ParameterValue=s3://my_bucket/starburst-additional-coordinator-configuration-1.0.zip" \
"ParameterKey=AdditionalWorkersConfigurationURI,ParameterValue=s3://my_bucket/starburst-additional-workers-configuration-1.0.zip" \
"ParameterKey=BootstrapScriptURI,ParameterValue=s3://my_bucket/starburst-bootstrap-1.0.sh" \
"ParameterKey=LicenseURI,ParameterValue=s3://my_bucket/starburstdata.license" \
"ParameterKey=S3Endpoint,ParameterValue=https://mybucket.s3-us-west-2.amazonaws.com" \
"ParameterKey=S3AccessKey,ParameterValue=AKIAIOSFODNN7EXAMPLE" \
"ParameterKey=S3SecretKey,ParameterValue=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" \
--capabilities CAPABILITY_IAM
</pre></div>
</div>
<p>The above commands yields output like the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  "StackId":"arn:aws:cloudformation:us-east-1:123456789012:stack/myteststack/466df9e0-0dff-08e3-8e2f-5088487c4896"
}
</pre></div>
</div>




<span id="cft-bootstrap-script"></span><h2 id="write-a-bootstrap-script">Write a bootstrap script<a class="headerlink" href="#write-a-bootstrap-script" title="Permalink to this headline">#</a></h2>
<p>Bootstrap scripts are a powerful tool that can streamline cluster provisioning
and maintenance. Commonly, these scripts are used to:</p>
<ul class="simple">
<li><p>Download and place plugin resources such as additional connectors or UDFs</p></li>
<li><p>Modify the node’s filesystem with additional directories</p></li>
<li><p>Place SEP configuration files that are not handled via the
<code class="docutils literal notranslate"><span class="pre">AdditionalCoordinatorConfigurationURI</span></code> and
<code class="docutils literal notranslate"><span class="pre">AdditionalWorkersConfigurationURI</span></code> CFT parameters</p></li>
</ul>
<p>The following example demonstrates a coordinator node check followed by a
coordinator-specific modification. Then, the script downloads a plugin resource
and creates a directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"coordinator"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">"io.trino.security=DEBUG"</span> &gt;&gt; /usr/lib/starburst/etc/log.properties
<span class="k">fi</span>

sudo aws s3 cp s3://mybucket/starburst/config/json-serde-jar-with-dependencies.jar /usr/lib/starburst/plugin/hive/

sudo mkdir -p /var/log/starburst/dev/
</pre></div>
</div>
<p>The following steps are necessary to use a script:</p>
<ul class="simple">
<li><p>Write the script as desired</p></li>
<li><p>Place the script file in an S3 bucket</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">BootstrapScriptURI</span></code> parameter to the correct S3 path of the file</p></li>
</ul>
<p>The bootstrap script is executed on all nodes after instance provisioning, but
before starting SEP.</p>
<p>A best practice is to update the name of the file with a version, an enumerator
or a date value with each change.</p>


<h2 id="expose-secrets-to-sep">Expose secrets to SEP<a class="headerlink" href="#expose-secrets-to-sep" title="Permalink to this headline">#</a></h2>
<p>You can expose secrets such as usernames and password to SEP by <a class="reference internal" href="../security/secrets.html"><span class="doc">using
environment variables</span></a>.</p>
<p>The <a class="reference external" href="https://aws.amazon.com/secrets-manager/">AWS secrets manager (ASM)</a>
stores and manages secrets.</p>
<p>Create a secrets document in ASM using the following format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">"secrets"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"secretName0"</span><span class="p">,</span>
      <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"secretValue0"</span><span class="p">,</span>
      <span class="nt">"description"</span><span class="p">:</span> <span class="s2">"secretDescription0"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"secretName1"</span><span class="p">,</span>
      <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"secretValue1"</span><span class="p">,</span>
      <span class="nt">"description"</span><span class="p">:</span> <span class="s2">"secretDescription1"</span>
    <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Write a small script to retrieve the file from ASM, extract the secrets and
expose them as environment variables.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="c1"># A simple script utilizing the AWS CLI v2 and ASM</span>
<span class="c1">#</span>
<span class="c1"># $1 = id of the secret in ASM, which is a JSON document</span>
<span class="c1">#</span>

aws secretsmanager get-secret-value <span class="se">\</span>
--secret-id <span class="si">${</span><span class="nv">1</span><span class="si">}</span> <span class="se">\</span>
--query SecretString --output text <span class="p">|</span> <span class="se">\</span>
jq -r <span class="s1">'.secrets[] | "export " + .name + "=\"" + .value + "\""'</span>
</pre></div>
</div>
<p>The script produces the following output with the above secrets file.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>export secretName0=secretValue0
export secretName1=secretValue1
</pre></div>
</div>
<p>Embed the commands from the script into <a class="reference internal" href="configuration.html#cft-sep-configuration"><span class="std std-ref">a bootstrap script</span></a>. Ensure that your EC2 machines are granted access to
ASM and run it within the same region.</p>
<p>As a result, your secrets are exposed as environment variables and can therefore
be used in catalog files and wherever else you want to use secrets.</p>
<p>You can also use the script manually for testing. Call the script, named
<code class="docutils literal notranslate"><span class="pre">$HOME/bin/secrets-as-envars</span></code> in this example, directly or from a shell
startup script, such as <code class="docutils literal notranslate"><span class="pre">$HOME/.bashrc</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">eval</span> <span class="k">$(</span><span class="nv">$HOME</span>/bin/secrets-as-envars<span class="k">)</span>
</pre></div>
</div>


<h2 id="uninstalling-sep">Uninstalling SEP<a class="headerlink" href="#uninstalling-sep" title="Permalink to this headline">#</a></h2>

<h3 id="deleting-a-cluster-on-the-aws-cloudformation-console">Deleting a cluster on the AWS CloudFormation console<a class="headerlink" href="#deleting-a-cluster-on-the-aws-cloudformation-console" title="Permalink to this headline">#</a></h3>
<dl class="simple">
<dt><strong>1. Select the stack</strong></dt><dd><p>From the list of clusters (CloudFormation stacks) within the AWS
CloudFormation Console, select the cluster you intend to uninstall. Note that
the cluster must currently be running in order to delete it.</p>
</dd>
<dt><strong>2. Actions menu</strong></dt><dd><p>Navigate to the Actions drop down menu and click <strong>Delete stack</strong>.</p>
</dd>
<dt><strong>3. Confirm the delete action</strong></dt><dd><p>When prompted with the option to confirm or cancel the delete request, click
<strong>Yes, Delete</strong> to proceed with the uninstallation of your SEP cluster.</p>
</dd>
</dl>
<p>Once stack deletion has begun, you cannot terminate the process. The cluster
proceeds to the <code class="docutils literal notranslate"><span class="pre">DELETE_IN_PROGRESS</span></code> state. After the cluster deletion is
complete, the cluster is in the <code class="docutils literal notranslate"><span class="pre">DELETE_COMPLETE</span></code> state. Clusters in the
<code class="docutils literal notranslate"><span class="pre">DELETE_COMPLETE</span></code> state are not displayed in the AWS CloudFormation console by
default. To display deleted clusters, you must change the stack view setting. If
the deletion fails, the cluster is in the <code class="docutils literal notranslate"><span class="pre">DELETE_FAILED</span></code> state.</p>
<p>For information on how to fix failed delete actions on the AWS CloudFormation
Console, navigate to the <strong>DELETE STACK FAILS</strong> section within the <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html#troubleshooting-errors-delete-stack-fails">AWS
CloudFormation troubleshooting documentation</a>.</p>


<h3 id="deleting-a-cluster-in-the-aws-cli">Deleting a cluster in the AWS CLI<a class="headerlink" href="#deleting-a-cluster-in-the-aws-cli" title="Permalink to this headline">#</a></h3>
<p>To delete a cluster within the AWS CLI, you must run the AWS CloudFormation
<code class="docutils literal notranslate"><span class="pre">delete-stack</span></code> command. This process requires you to identify the name of
the stack you intend to delete.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you delete an SEP cluster, you delete the entire cluster and all of its
resources. Moreover, you can not delete a cluster in which termination
protection is enabled.</p>
</div>
<p>Reference the following example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>aws cloudformation delete-stack --stack-name mystarburststack
</pre></div>
</div>


<h3 id="safeguarding-your-cluster">Safeguarding your cluster<a class="headerlink" href="#safeguarding-your-cluster" title="Permalink to this headline">#</a></h3>
<p>You can prevent your cluster from being accidentally deleted by enabling
termination protection. See <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-protect-stacks.html">safeguarding your stacks</a>.</p>





          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="requirements.html" title="Starburst Enterprise with CFT requirements"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Starburst Enterprise with CFT requirements </span>
              </div>
            </a>
          
          
            <a href="configuration.html" title="Configuring Starburst Enterprise with CFT"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Configuring Starburst Enterprise with CFT </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 360-e LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2021<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>