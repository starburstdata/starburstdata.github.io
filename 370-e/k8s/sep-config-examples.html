

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="000A2C">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Kubernetes configuration examples &#8212; Starburst Enterprise</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/starburst.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuring the Hive Metastore Service in Kubernetes" href="hms-configuration.html" />
    <link rel="prev" title="Configuring Starburst Enterprise in Kubernetes" href="sep-configuration.html" />

  
   



<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/k8s/sep-config-examples.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#k8s/sep-config-examples" tabindex="1" class="md-skip"> Skip to content </a>
  
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.starburst.io" title="Starburst Enterprise"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                   alt="Starburst Enterprise 370-e LTS logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Starburst Enterprise 370-e LTS</span>
          <span class="md-header-nav__topic"> Kubernetes configuration examples </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div id="algolia-search">
  <div id="searchbox"></div>
  <div id="refinement-list">
    <h6 class="filter-label">Filter:</h6>
  </div>
  <div id="hits"></div>
  <div id="stats"></div>
</div>
      </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose another version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (370-e)" href="/370-e/">Latest LTS (370-e)</a>
      
          <a title="364-e LTS" href="/364-e/">364-e LTS</a>
      
          <a title="360-e LTS" href="/360-e/">360-e LTS</a>
      
          <a title="356-e LTS" href="/356-e/">356-e LTS</a>
      
          <a title="Latest STS (369-e)" href="/369-e/">Latest STS (369-e)</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Reference documentation</a></li>
            
            <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">User guides</a></li>
          <li class="md-tabs__item"><a href="../k8s.html" class="md-tabs__link">Deploying with Kubernetes</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Starburst Enterprise" class="md-nav__button md-logo">
      
        <img src="../_static/Starburst_Logo_NoTag_White.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Starburst Enterprise">Starburst Enterprise 370-e LTS</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Manual installation and license</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../k8s.html" class="md-nav__link">Deploying with Kubernetes</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="requirements.html" class="md-nav__link">Starburst Enterprise with Kubernetes requirements</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="installation.html" class="md-nav__link">Installing Starburst Enterprise in a Kubernetes cluster</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sep-configuration.html" class="md-nav__link">Configuring Starburst Enterprise in Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Kubernetes configuration examples </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Kubernetes configuration examples</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-sep-config-examples--page-root" class="md-nav__link">Kubernetes configuration examples</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#adding-the-license-file" class="md-nav__link">Adding the license file</a>
        </li>
        <li class="md-nav__item"><a href="#images-and-repository-registry-credentials-examples" class="md-nav__link">Images and repository registry credentials examples</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#defaults" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#controlling-sep-releases" class="md-nav__link">Controlling SEP releases</a>
        </li>
        <li class="md-nav__item"><a href="#using-private-registries" class="md-nav__link">Using private registries</a>
        </li>
        <li class="md-nav__item"><a href="#using-imagepullsecrets" class="md-nav__link">Using <code class="docutils literal notranslate"><span class="pre">imagePullSecrets</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#internal-communications-configuration" class="md-nav__link">Internal communications configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-internal-comms" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#using-tls-for-internal-communication" class="md-nav__link">Using TLS for internal communication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#configuring-automatic-internal-tls" class="md-nav__link">Configuring automatic internal TLS</a>
        </li>
        <li class="md-nav__item"><a href="#manual-tls-configuration" class="md-nav__link">Manual TLS configuration</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#non-standard-https-port-numbers" class="md-nav__link">Non-standard HTTPS port numbers</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#external-communications-configuration" class="md-nav__link">External communications configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-external-comms" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#clusterip-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">clusterIp</span></code> type</a>
        </li>
        <li class="md-nav__item"><a href="#nodeport-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">nodePort</span></code> type</a>
        </li>
        <li class="md-nav__item"><a href="#loadbalancer-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">loadBalancer</span></code> type</a>
        </li>
        <li class="md-nav__item"><a href="#basic-ingress-type" class="md-nav__link">Basic <code class="docutils literal notranslate"><span class="pre">ingress</span></code> type</a>
        </li>
        <li class="md-nav__item"><a href="#ingress-with-nginx-and-cert-manager" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">ingress</span></code> with nginx and cert-manager</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#coordinator-configuration" class="md-nav__link">Coordinator configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-coordinator" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#jvm-configuration" class="md-nav__link">JVM configuration</a>
        </li>
        <li class="md-nav__item"><a href="#adding-other-files-in-etc" class="md-nav__link">Adding other files in <code class="docutils literal notranslate"><span class="pre">etc</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#cpu-and-memory-allocation" class="md-nav__link">CPU and memory allocation</a>
        </li>
        <li class="md-nav__item"><a href="#adding-properties-to-config-properties" class="md-nav__link">Adding properties to <code class="docutils literal notranslate"><span class="pre">config.properties</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#using-environment-variables-for-secrets" class="md-nav__link">Using environment variables for secrets</a>
        </li>
        <li class="md-nav__item"><a href="#enabling-starburst-insights" class="md-nav__link">Enabling Starburst Insights</a>
        </li>
        <li class="md-nav__item"><a href="#enabling-access-control" class="md-nav__link">Enabling access control</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#worker-configuration" class="md-nav__link">Worker configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-worker" class="md-nav__link">Defaults</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#startup-script" class="md-nav__link">Startup script</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-initfile" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#using-initfile" class="md-nav__link">Using initFile</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#security-considerations" class="md-nav__link">Security considerations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-security-considerations" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#external-secret-reference" class="md-nav__link">External secret reference</a>
        </li>
        <li class="md-nav__item"><a href="#defining-external-secrets" class="md-nav__link">Defining external secrets</a>
        </li>
        <li class="md-nav__item"><a href="#file-based-authentication" class="md-nav__link">File-based authentication</a>
        </li>
        <li class="md-nav__item"><a href="#rbac-enabled-clusters" class="md-nav__link">RBAC-enabled clusters</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#performance-considerations" class="md-nav__link">Performance considerations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#concurrent-query-defaults" class="md-nav__link">Concurrent query defaults</a>
        </li>
        <li class="md-nav__item"><a href="#concurrent-query-increase-example" class="md-nav__link">Concurrent query increase example</a>
        </li>
        <li class="md-nav__item"><a href="#spilling-defaults" class="md-nav__link">Spilling defaults</a>
        </li>
        <li class="md-nav__item"><a href="#spilling-example" class="md-nav__link">Spilling example</a>
        </li>
        <li class="md-nav__item"><a href="#hive-connector-storage-caching-defaults" class="md-nav__link">Hive connector storage caching defaults</a>
        </li>
        <li class="md-nav__item"><a href="#hive-connector-storage-caching-example" class="md-nav__link">Hive connector storage caching example</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#catalogs" class="md-nav__link">Catalogs</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#default" class="md-nav__link">Default</a>
        </li>
        <li class="md-nav__item"><a href="#catalog-examples" class="md-nav__link">Catalog examples</a>
        </li>
        <li class="md-nav__item"><a href="#teradata-direct-connector" class="md-nav__link">Teradata Direct connector</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#additional-volumes" class="md-nav__link">Additional volumes</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-additionalvolumes" class="md-nav__link">Default</a>
        </li>
        <li class="md-nav__item"><a href="#adding-volumes-examples" class="md-nav__link">Adding volumes examples</a>
        </li>
        <li class="md-nav__item"><a href="#adding-files-examples" class="md-nav__link">Adding files examples</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#prometheus" class="md-nav__link">Prometheus</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-prometheus" class="md-nav__link">Default</a>
        </li>
        <li class="md-nav__item"><a href="#kubernetes-management-and-monitoring" class="md-nav__link">Kubernetes management and monitoring</a>
        </li>
        <li class="md-nav__item"><a href="#k8s-defaults-k8s-monitoring" class="md-nav__link">Default</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hms-configuration.html" class="md-nav__link">Configuring the Hive Metastore Service in Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ranger-configuration.html" class="md-nav__link">Configuring Starburst Enterprise with Ranger in Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cache-service-configuration.html" class="md-nav__link">Configure the cache service in Kubernetes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="release-notes.html" class="md-nav__link">Helm chart release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sep-config-teradata-direct.html" class="md-nav__link">Teradata Direct connector in Kubernetes</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../aws.html" class="md-nav__link">Deploying with CFT on AWS</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../client.html" class="md-nav__link">Clients</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../security.html" class="md-nav__link">Security</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../admin.html" class="md-nav__link">Administration</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../data-products.html" class="md-nav__link">Data products</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../insights.html" class="md-nav__link">Insights</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../optimizer.html" class="md-nav__link">Query optimizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../connector.html" class="md-nav__link">Connectors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../functions.html" class="md-nav__link">Functions and operators</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language.html" class="md-nav__link">SQL language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../sql.html" class="md-nav__link">SQL statement syntax</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop.html" class="md-nav__link">Developer guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../appendix.html" class="md-nav__link">Appendix</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Version information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../versions.html" class="md-nav__link">370-e LTS and others</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release.html" class="md-nav__link">Release notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../404.html" class="md-nav__link">&nbsp;</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#k8s-sep-config-examples--page-root" class="md-nav__link">Kubernetes configuration examples</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#adding-the-license-file" class="md-nav__link">Adding the license file</a>
        </li>
        <li class="md-nav__item"><a href="#images-and-repository-registry-credentials-examples" class="md-nav__link">Images and repository registry credentials examples</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#defaults" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#controlling-sep-releases" class="md-nav__link">Controlling SEP releases</a>
        </li>
        <li class="md-nav__item"><a href="#using-private-registries" class="md-nav__link">Using private registries</a>
        </li>
        <li class="md-nav__item"><a href="#using-imagepullsecrets" class="md-nav__link">Using <code class="docutils literal notranslate"><span class="pre">imagePullSecrets</span></code></a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#internal-communications-configuration" class="md-nav__link">Internal communications configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-internal-comms" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#using-tls-for-internal-communication" class="md-nav__link">Using TLS for internal communication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#configuring-automatic-internal-tls" class="md-nav__link">Configuring automatic internal TLS</a>
        </li>
        <li class="md-nav__item"><a href="#manual-tls-configuration" class="md-nav__link">Manual TLS configuration</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#non-standard-https-port-numbers" class="md-nav__link">Non-standard HTTPS port numbers</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#external-communications-configuration" class="md-nav__link">External communications configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-external-comms" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#clusterip-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">clusterIp</span></code> type</a>
        </li>
        <li class="md-nav__item"><a href="#nodeport-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">nodePort</span></code> type</a>
        </li>
        <li class="md-nav__item"><a href="#loadbalancer-type" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">loadBalancer</span></code> type</a>
        </li>
        <li class="md-nav__item"><a href="#basic-ingress-type" class="md-nav__link">Basic <code class="docutils literal notranslate"><span class="pre">ingress</span></code> type</a>
        </li>
        <li class="md-nav__item"><a href="#ingress-with-nginx-and-cert-manager" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">ingress</span></code> with nginx and cert-manager</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#coordinator-configuration" class="md-nav__link">Coordinator configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-coordinator" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#jvm-configuration" class="md-nav__link">JVM configuration</a>
        </li>
        <li class="md-nav__item"><a href="#adding-other-files-in-etc" class="md-nav__link">Adding other files in <code class="docutils literal notranslate"><span class="pre">etc</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#cpu-and-memory-allocation" class="md-nav__link">CPU and memory allocation</a>
        </li>
        <li class="md-nav__item"><a href="#adding-properties-to-config-properties" class="md-nav__link">Adding properties to <code class="docutils literal notranslate"><span class="pre">config.properties</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#using-environment-variables-for-secrets" class="md-nav__link">Using environment variables for secrets</a>
        </li>
        <li class="md-nav__item"><a href="#enabling-starburst-insights" class="md-nav__link">Enabling Starburst Insights</a>
        </li>
        <li class="md-nav__item"><a href="#enabling-access-control" class="md-nav__link">Enabling access control</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#worker-configuration" class="md-nav__link">Worker configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-worker" class="md-nav__link">Defaults</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#startup-script" class="md-nav__link">Startup script</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-initfile" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#using-initfile" class="md-nav__link">Using initFile</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#security-considerations" class="md-nav__link">Security considerations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-security-considerations" class="md-nav__link">Defaults</a>
        </li>
        <li class="md-nav__item"><a href="#external-secret-reference" class="md-nav__link">External secret reference</a>
        </li>
        <li class="md-nav__item"><a href="#defining-external-secrets" class="md-nav__link">Defining external secrets</a>
        </li>
        <li class="md-nav__item"><a href="#file-based-authentication" class="md-nav__link">File-based authentication</a>
        </li>
        <li class="md-nav__item"><a href="#rbac-enabled-clusters" class="md-nav__link">RBAC-enabled clusters</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#performance-considerations" class="md-nav__link">Performance considerations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#concurrent-query-defaults" class="md-nav__link">Concurrent query defaults</a>
        </li>
        <li class="md-nav__item"><a href="#concurrent-query-increase-example" class="md-nav__link">Concurrent query increase example</a>
        </li>
        <li class="md-nav__item"><a href="#spilling-defaults" class="md-nav__link">Spilling defaults</a>
        </li>
        <li class="md-nav__item"><a href="#spilling-example" class="md-nav__link">Spilling example</a>
        </li>
        <li class="md-nav__item"><a href="#hive-connector-storage-caching-defaults" class="md-nav__link">Hive connector storage caching defaults</a>
        </li>
        <li class="md-nav__item"><a href="#hive-connector-storage-caching-example" class="md-nav__link">Hive connector storage caching example</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#catalogs" class="md-nav__link">Catalogs</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#default" class="md-nav__link">Default</a>
        </li>
        <li class="md-nav__item"><a href="#catalog-examples" class="md-nav__link">Catalog examples</a>
        </li>
        <li class="md-nav__item"><a href="#teradata-direct-connector" class="md-nav__link">Teradata Direct connector</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#additional-volumes" class="md-nav__link">Additional volumes</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-additionalvolumes" class="md-nav__link">Default</a>
        </li>
        <li class="md-nav__item"><a href="#adding-volumes-examples" class="md-nav__link">Adding volumes examples</a>
        </li>
        <li class="md-nav__item"><a href="#adding-files-examples" class="md-nav__link">Adding files examples</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#prometheus" class="md-nav__link">Prometheus</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#k8s-defaults-prometheus" class="md-nav__link">Default</a>
        </li>
        <li class="md-nav__item"><a href="#kubernetes-management-and-monitoring" class="md-nav__link">Kubernetes management and monitoring</a>
        </li>
        <li class="md-nav__item"><a href="#k8s-defaults-k8s-monitoring" class="md-nav__link">Default</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<h1 id="k8s-sep-config-examples--page-root">Kubernetes configuration examples<a class="headerlink" href="#k8s-sep-config-examples--page-root" title="Permalink to this headline">#</a></h1>
<p>You can find the default configuration and numerous practical examples for use
cases around <a class="reference internal" href="sep-configuration.html"><span class="doc">Configuring Starburst Enterprise in Kubernetes</span></a> in the following sections:</p>

<span id="helm-sep-license"></span><h2 id="adding-the-license-file">Adding the license file<a class="headerlink" href="#adding-the-license-file" title="Permalink to this headline">#</a></h2>
<p>Starburst provides customers a license file to unlock additional features of
SEP. The license file needs to be provided to SEP in the cluster:</p>
<ol class="arabic">
<li><p>Rename the file you received to <code class="docutils literal notranslate"><span class="pre">starburstdata.license</span></code>.</p></li>
<li><p>Create a k8s secret that contains the license file with a name of your
choice in the cluster.</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl create secret generic mylicense --from-file<span class="o">=</span>starburstdata.license
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Configure the secret name as the Starburst platform license.</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>starburstPlatformLicense: mylicense
</pre></div>
</div>
</div></blockquote>
</li>
</ol>


<span id="k8s-ex-images-and-registry-credentials"></span><h2 id="images-and-repository-registry-credentials-examples">Images and repository registry credentials examples<a class="headerlink" href="#images-and-repository-registry-credentials-examples" title="Permalink to this headline">#</a></h2>

<span id="k8s-defaults-images-and-registry-credentials"></span><h3 id="defaults">Defaults<a class="headerlink" href="#defaults" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>The following are the image- and registry-related defaults. Do not place
unchanged values in customization files. Instead, follow <a class="reference external" href="../../platform_administrator/deploy-update.html">best practices</a> for creating YAML files for
customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">image</span><span class="p">:</span>
  <span class="nt">repository</span><span class="p">:</span> <span class="s">"harbor.starburstdata.net/starburstdata/starburst-enterprise"</span>
  <span class="nt">tag</span><span class="p">:</span> <span class="s">"370-e"</span>
  <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>

<span class="nt">initImage</span><span class="p">:</span>
  <span class="nt">repository</span><span class="p">:</span> <span class="s">"harbor.starburstdata.net/starburstdata/starburst-enterprise-init"</span>
  <span class="nt">tag</span><span class="p">:</span> <span class="s">"370.0.0"</span>
  <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>

<span class="nt">registryCredentials</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="c1"># Replace this with Docker Registry that you use</span>
  <span class="nt">registry</span><span class="p">:</span>
  <span class="nt">username</span><span class="p">:</span>
  <span class="nt">password</span><span class="p">:</span>

<span class="nt">imagePullSecrets</span><span class="p">:</span>
</pre></div>
</div>


<span id="k8s-ex-registry-version-handling"></span><h3 id="controlling-sep-releases">Controlling SEP releases<a class="headerlink" href="#controlling-sep-releases" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>With normal usage you do not need to configure the image, since the chart
version updates automatically include the version update of the Docker images.
In rare cases, it can be useful to update the Docker image without changing the
overall chart version used. For example, you can choose to upgrade from
<code class="docutils literal notranslate"><span class="pre">3xx-e.1</span></code> to a newer  patch version <code class="docutils literal notranslate"><span class="pre">3xx-e.3</span></code> of SEP, which allows you to
keep the rest of the chart configuration unchanged:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">image</span><span class="p">:</span>
  <span class="nt">repository</span><span class="p">:</span> <span class="s">"harbor.starburstdata.net/starburstdata"</span>
  <span class="nt">tag</span><span class="p">:</span> <span class="s">"3xx-e.3"</span>
  <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>
</pre></div>
</div>


<span id="k8s-ex-private-registries"></span><h3 id="using-private-registries">Using private registries<a class="headerlink" href="#using-private-registries" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> Return to <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Docker images</span></a> or <a class="reference internal" href="sep-configuration.html#helm-sep-registry"><span class="std std-ref">Docker
registry access</span></a> section in k8s configuration
documentation.</p>
<p>In some organizations you need to <a class="reference internal" href="installation.html#k8s-private-registries"><span class="std std-ref">use private registries and repositories
instead of Starburst Harbor</span></a>. They are often hosted on
a private Harbor instance or in a repository manager. You can publish the Helm
charts and Docker containers to your private setup, or use a proxying setup.
Steps to set this up vary widely based on your tools, and require both Docker
and Helm expertise:</p>
<ul class="simple">
<li><p>Pull the Docker image from the Starburst Harbor registry with your credentials</p></li>
<li><p>Tag the image as desired for your internal registry</p></li>
<li><p>Push the image to your registry</p></li>
<li><p>Download the Helm charts</p></li>
<li><p>Publish the Helm charts to your Helm repository</p></li>
</ul>
<p>You can use your private setup with the following steps:</p>
<ul class="simple">
<li><p>Add your private Helm chart repository using <a class="reference internal" href="requirements.html#k8s-helm-repository"><span class="std std-ref">these same
steps</span></a> as for adding the Starburst repository, but
replacing the values with those of your private repository.</p></li>
<li><p>Update your <a class="reference internal" href="#k8s-ex-private-registries"><span class="std std-ref">registry credentials with
details for your private Docker registry</span></a>.</p></li>
</ul>
<p>The following example overrides Docker registry to use your private registry:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">image</span><span class="p">:</span>
  <span class="nt">repository</span><span class="p">:</span> <span class="s">"docker.example.com/thirdparty"</span>
  <span class="nt">tag</span><span class="p">:</span> <span class="s">"370-e"</span>
  <span class="nt">pullPolicy</span><span class="p">:</span> <span class="s">"IfNotPresent"</span>
</pre></div>
</div>
<p>You also need to update your registry access configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">registryCredentials</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">registry</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">docker.example.com</span>
  <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myusername</span>
  <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mypassword</span>
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">imagePullSecrets:</span></code> with private registries instead of
<code class="docutils literal notranslate"><span class="pre">registryCredentials</span></code>.</p>
<p>If you changed the Docker image organization, name, or version tags, you also
need to override these details in your YAML configuration files. For example,
update <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">image and initImage for SEP</span></a>. Similar steps are
necessary if you are using the HMS or Ranger charts.</p>


<span id="k8s-ex-imagepullsecrets"></span><h3 id="using-imagepullsecrets">Using <code class="docutils literal notranslate"><span class="pre">imagePullSecrets</span></code><a class="headerlink" href="#using-imagepullsecrets" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> Return to <a class="reference internal" href="sep-configuration.html#helm-sep-image"><span class="std std-ref">Docker images</span></a> or <a class="reference internal" href="sep-configuration.html#helm-sep-registry"><span class="std std-ref">Docker
registry access</span></a> section in k8s configuration
documentation.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">imagePullSecrets:</span></code> to authenticate with a Docker registry as an
alternative to using <code class="docutils literal notranslate"><span class="pre">registryCredentials:</span></code>. You can pass an array list of
Kubernetes secret names of type <code class="docutils literal notranslate"><span class="pre">kubernetes.io/dockerconfigjson</span></code> with the
following format:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">imagePullSecrets</span><span class="p">:</span>
 <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secret1</span>
 <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secret2</span>
</pre></div>
</div>
<p>Detailed instructions for using private registries with pull secrets can be
found in the <a class="reference external" href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">Kubernetes documentation</a>.</p>



<span id="k8s-ex-internal-comms"></span><h2 id="internal-communications-configuration">Internal communications configuration<a class="headerlink" href="#internal-communications-configuration" title="Permalink to this headline">#</a></h2>

<span id="id1"></span><h3 id="k8s-defaults-internal-comms">Defaults<a class="headerlink" href="#k8s-defaults-internal-comms" title="Permalink to this headline">#</a></h3>
<p>The following are the internal communications-related defaults in the
<code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file. Do not place unchanged values in customization files.
Instead, follow <a class="reference external" href="../../platform_administrator/deploy-update.html">best practices</a> for creating YAML files for
customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sharedSecret</span><span class="p">:</span>

<span class="nt">environment</span><span class="p">:</span>

<span class="nt">internalTls</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">internal</span><span class="p">:</span>
  <span class="nt">ports</span><span class="p">:</span>
    <span class="nt">http</span><span class="p">:</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">https</span><span class="p">:</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8443</span>
</pre></div>
</div>


<span id="k8s-ex-internal-tls"></span><h3 id="using-tls-for-internal-communication">Using TLS for internal communication<a class="headerlink" href="#using-tls-for-internal-communication" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-internal-communication"><span class="std std-ref">Return</span></a> to section in k8s
configuration documentation.</p>
<p>You can optionally enable TLS for <a class="reference internal" href="../security/internal-communication.html"><span class="doc">internal communication</span></a>, if the cluster is deemed insecure, or TLS
is otherwise required and the performance overhead is acceptable.</p>

<span id="k8s-automatic-internal-tls"></span><h4 id="configuring-automatic-internal-tls">Configuring automatic internal TLS<a class="headerlink" href="#configuring-automatic-internal-tls" title="Permalink to this headline">#</a></h4>
<p>Set <code class="docutils literal notranslate"><span class="pre">internalTls</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> to configure SEP to enable TLS for internal
communication. Certificates are automatically generated and used. You must
configure the <code class="docutils literal notranslate"><span class="pre">environment:</span></code> and <code class="docutils literal notranslate"><span class="pre">sharedSecret:</span></code> top level nodes, as well as
the <code class="docutils literal notranslate"><span class="pre">internal.ports.https.port:</span></code> to enable this feature.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">environment</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">production</span>
<span class="nt">sharedSecret</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AN0Qhhw9PsZmEgEXAMPLEkIj3AJZ5/Mnyy5iRANDOMceM+SSV+APSTiSTRING</span>
<span class="nt">internalTls</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">internal</span><span class="p">:</span>
  <span class="nt">ports</span><span class="p">:</span>
    <span class="nt">http</span><span class="p">:</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">https</span><span class="p">:</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8443</span>
</pre></div>
</div>


<h4 id="manual-tls-configuration">Manual TLS configuration<a class="headerlink" href="#manual-tls-configuration" title="Permalink to this headline">#</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We <strong>very strongly suggest</strong> that you use the <a class="reference internal" href="#k8s-automatic-internal-tls"><span class="std std-ref">automatic internal TLS</span></a> as described in the preceding section. Manual
TLS configuration is <strong>deprecated functionality</strong>. Using and configuring TLS
for internal communication is very complex, requiring you to implement a
certificate manager and managing certificates within the cluster.</p>
</div>
<p>All cluster nodes must have a fully qualified domain name (FQDN) that matches
the Kubernetes naming scheme. When <code class="docutils literal notranslate"><span class="pre">node.internal-address-source</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">FQDN</span></code> (in both the the <code class="docutils literal notranslate"><span class="pre">coordinator.additionalProperties:</span></code> and
<code class="docutils literal notranslate"><span class="pre">worker.additionalProperties:</span></code> nodes), the chart manages the
<code class="docutils literal notranslate"><span class="pre">node.internal-address</span></code> property automatically, and the SAN field in TLS certs
must match.</p>
<p>The TLS certificates used must have <code class="docutils literal notranslate"><span class="pre">starburst</span></code>,
<code class="docutils literal notranslate"><span class="pre">coordinator.&lt;namespace&gt;.svc</span></code> and <code class="docutils literal notranslate"><span class="pre">*.worker.&lt;namespace&gt;.svc</span></code> in the Subject
Alternative Name (SAN) field. Replace <code class="docutils literal notranslate"><span class="pre">&lt;namespace&gt;</span></code> with a real value.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">additionalProperties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">node.internal-address-source=FQDN</span>

<span class="nt">worker</span><span class="p">:</span>
  <span class="nt">additionalProperties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">node.internal-address-source=FQDN</span>
</pre></div>
</div>



<span id="k8s-ex-nonstd-https"></span><h3 id="non-standard-https-port-numbers">Non-standard HTTPS port numbers<a class="headerlink" href="#non-standard-https-port-numbers" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-internal-communication"><span class="std std-ref">Return</span></a> to section in k8s
configuration documentation.</p>
<p>If a non-standard port (other than 8443) is used for HTTPS, the same value must
be set for both <code class="docutils literal notranslate"><span class="pre">internal.ports.https.port</span></code> in the YAML file and the
<code class="docutils literal notranslate"><span class="pre">http-server.https.port</span></code> property in <code class="docutils literal notranslate"><span class="pre">config.properties</span></code>. This is best
achieved by adding the setting to the additionalProperties for coordinator and
workers as detailed in <a class="reference internal" href="#k8s-ex-internal-tls"><span class="std std-ref">Using TLS for internal communication</span></a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">internal</span><span class="p">:</span>
  <span class="nt">ports</span><span class="p">:</span>
    <span class="nt">https</span><span class="p">:</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8440</span>
<span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">additionalProperties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">http-server.https.port=8440</span>
<span class="nt">worker</span><span class="p">:</span>
  <span class="nt">additionalProperties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">http-server.https.port=8440</span>
</pre></div>
</div>



<span id="k8s-ex-external-comms"></span><h2 id="external-communications-configuration">External communications configuration<a class="headerlink" href="#external-communications-configuration" title="Permalink to this headline">#</a></h2>

<span id="id3"></span><h3 id="k8s-defaults-external-comms">Defaults<a class="headerlink" href="#k8s-defaults-external-comms" title="Permalink to this headline">#</a></h3>
<p>The following are the external communications-related defaults in the
<code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file. Do not place unchanged values in customization files.
Instead, follow best practices in our <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">deployment guide</a> for creating YAML files
for customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"clusterIp"</span>
  <span class="nt">clusterIp</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
  <span class="nt">nodePort</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
        <span class="nt">nodePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30080</span>
    <span class="nt">extraLabels</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">loadBalancer</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">IP</span><span class="p">:</span> <span class="s">""</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
    <span class="nt">sourceRanges</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
  <span class="nt">ingress</span><span class="p">:</span>
    <span class="nt">ingressName</span><span class="p">:</span> <span class="s">"coordinator-ingress"</span>
    <span class="nt">serviceName</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">servicePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">ingressClassName</span><span class="p">:</span>
    <span class="nt">tls</span><span class="p">:</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">secretName</span><span class="p">:</span>
    <span class="nt">host</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">"/"</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<span id="k8s-ex-expose-clusterip"></span><h3 id="clusterip-type"><code class="docutils literal notranslate"><span class="pre">clusterIp</span></code> type<a class="headerlink" href="#clusterip-type" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"clusterIp"</span>
  <span class="nt">clusterIp</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
</pre></div>
</div>


<span id="k8s-ex-expose-nodeport"></span><h3 id="nodeport-type"><code class="docutils literal notranslate"><span class="pre">nodePort</span></code> type<a class="headerlink" href="#nodeport-type" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"nodePort"</span>
  <span class="nt">nodePort</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
        <span class="nt">nodePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30080</span>
</pre></div>
</div>


<span id="k8s-ex-expose-lb"></span><h3 id="loadbalancer-type"><code class="docutils literal notranslate"><span class="pre">loadBalancer</span></code> type<a class="headerlink" href="#loadbalancer-type" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"loadBalancer"</span>
  <span class="nt">loadBalancer</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">IP</span><span class="p">:</span> <span class="s">""</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="nt">http</span><span class="p">:</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
    <span class="nt">sourceRanges</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>


<span id="k8s-ex-expose-ingress"></span><h3 id="basic-ingress-type">Basic <code class="docutils literal notranslate"><span class="pre">ingress</span></code> type<a class="headerlink" href="#basic-ingress-type" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"ingress"</span>
  <span class="nt">ingress</span><span class="p">:</span>
    <span class="nt">serviceName</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">servicePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">tls</span><span class="p">:</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">secretName</span><span class="p">:</span>
    <span class="nt">host</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">"/"</span>
    <span class="nt">annotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<span id="k8s-ex-expose-nginxcert"></span><h3 id="ingress-with-nginx-and-cert-manager"><code class="docutils literal notranslate"><span class="pre">ingress</span></code> with nginx and cert-manager<a class="headerlink" href="#ingress-with-nginx-and-cert-manager" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-expose"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p><a class="reference external" href="https://nginx.org/en/">nginx</a> is a powerful HTTP and proxy server, commonly
used as load balancer. You can combine using it with cert-manager backed by
<a class="reference external" href="https://letsencrypt.org/">Let’s Encrypt</a>.</p>
<p>As a first step you need to deploy an HTTPS ingress controller for your cluster.
You can follow a <a class="reference external" href="https://cert-manager.io/docs/tutorials/acme/nginx-ingress/">tutorial from the cert-manager documentation</a>.</p>
<p>With the setup done, and an A record in your DNS zone ready, you can expose the
Starburst Enterprise web UI:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"ingress"</span>
  <span class="nt">ingress</span><span class="p">:</span>
    <span class="nt">serviceName</span><span class="p">:</span> <span class="s">"starburst"</span>
    <span class="nt">servicePort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
    <span class="nt">tls</span><span class="p">:</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">secretName</span><span class="p">:</span> <span class="s">"tls-secret-starburst"</span>
    <span class="nt">host</span><span class="p">:</span> <span class="s">""</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">"/(.*)"</span>
    <span class="nt">annotations</span><span class="p">:</span>
      <span class="nt">kubernetes.io/ingress.class</span><span class="p">:</span> <span class="s">"nginx"</span>
      <span class="nt">cert-manager.io/issuer</span><span class="p">:</span> <span class="s">"letsencrypt-staging"</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">secretName</span></code> is used by the cert-manager to store the generated
certificate, and can be any value.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">annotations</span></code> section uses the <code class="docutils literal notranslate"><span class="pre">nginx</span></code> default value for the single
ingress controller installation. It assumes certificate issuer with the name
<code class="docutils literal notranslate"><span class="pre">letsencrypt-staging</span></code> is used, and needs to exist.</p>
<p>The Ranger user interface can be exposed in exactly the same way:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expose</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="s">"ingress"</span>
  <span class="nt">ingress</span><span class="p">:</span>
    <span class="nt">tls</span><span class="p">:</span>
      <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">secretName</span><span class="p">:</span> <span class="s">"tls-secret-ranger"</span>
    <span class="nt">host</span><span class="p">:</span> <span class="s">""</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">"/(.*)"</span>
    <span class="nt">annotations</span><span class="p">:</span>
      <span class="nt">kubernetes.io/ingress.class</span><span class="p">:</span> <span class="s">"nginx"</span>
      <span class="nt">cert-manager.io/issuer</span><span class="p">:</span> <span class="s">"letsencrypt-staging"</span>
</pre></div>
</div>



<span id="k8s-coordinator-yaml"></span><h2 id="coordinator-configuration">Coordinator configuration<a class="headerlink" href="#coordinator-configuration" title="Permalink to this headline">#</a></h2>

<span id="id4"></span><h3 id="k8s-defaults-coordinator">Defaults<a class="headerlink" href="#k8s-defaults-coordinator" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-coordinator"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>The following are the coordinator-related defaults in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file.
Instead, <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">follow best practices</a> for creating YAML files
for customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">etcFiles</span><span class="p">:</span>
    <span class="nt">jvm.config</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">-server</span>
      <span class="no">-XX:-UseBiasedLocking</span>
      <span class="no">-XX:+UseG1GC</span>
      <span class="no">-XX:G1HeapRegionSize=32M</span>
      <span class="no">-XX:+ExplicitGCInvokesConcurrent</span>
      <span class="no">-XX:+ExitOnOutOfMemoryError</span>
      <span class="no">-XX:+HeapDumpOnOutOfMemoryError</span>
      <span class="no">-XX:-OmitStackTraceInFastThrow</span>
      <span class="no">-XX:ReservedCodeCacheSize=512M</span>
      <span class="no">-XX:PerMethodRecompilationCutoff=10000</span>
      <span class="no">-XX:PerBytecodeRecompilationCutoff=10000</span>
      <span class="no">-Djdk.nio.maxCachedBufferSize=2000000</span>
      <span class="no">-Djdk.attach.allowAttachSelf=true</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">config.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">coordinator=true</span>
        <span class="no">node-scheduler.include-coordinator=false</span>
        <span class="no">http-server.http.port=8080</span>
        <span class="no">discovery-server.enabled=true</span>
        <span class="no">discovery.uri=http://localhost:8080</span>
      <span class="nt">node.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">node.environment={{ include "starburst.environment" . }}</span>
        <span class="no">node.data-dir=/data/starburst</span>
        <span class="no">plugin.dir=/usr/lib/starburst/plugin</span>
        <span class="no">node.server-log-file=/var/log/starburst/server.log</span>
        <span class="no">node.launcher-log-file=/var/log/starburst/launcher.log</span>
      <span class="nt">log.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no"># Enable verbose logging from Starburst Enterprise</span>
        <span class="no">#io.trino=DEBUG</span>
        <span class="no">#com.starburstdata.presto=DEBUG</span>
      <span class="nt">password-authenticator.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">password-authenticator.name=file</span>
        <span class="no">file.password-file=/usr/lib/starburst/etc/auth/password.db</span>
      <span class="nt">access-control.properties</span><span class="p">:</span>
    <span class="nt">other</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">resources</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="s">"60Gi"</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
  <span class="nt">nodeMemoryHeadroom</span><span class="p">:</span> <span class="s">"2Gi"</span>
  <span class="nt">heapSizePercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">90</span>
  <span class="nt">heapHeadroomPercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>
  <span class="nt">additionalProperties</span><span class="p">:</span> <span class="s">""</span>

  <span class="nt">envFrom</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
  <span class="nt">nodeSelector</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">affinity</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">tolerations</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
  <span class="nt">deploymentAnnotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">podAnnotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">priorityClassName</span><span class="p">:</span>
</pre></div>
</div>


<span id="k8s-ex-jvm-config"></span><h3 id="jvm-configuration">JVM configuration<a class="headerlink" href="#jvm-configuration" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#k8s-etcfiles"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>The JVM configuration is automatically included and includes the appropriate
memory settings based on the configured resources. In rare cases you might need
to add or modify some parameters. In this case you need to include the full
default JVM configuration and the modified values. The following example only
modified G1HeapRegionSize and ReservedCodeCacheSize, but all values are required
to be included.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">etcFiles</span><span class="p">:</span>
    <span class="nt">jvm.config</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">-server</span>
      <span class="no">-XX:-UseBiasedLocking</span>
      <span class="no">-XX:+UseG1GC</span>
      <span class="no">-XX:G1HeapRegionSize=64M</span>
      <span class="no">-XX:+ExplicitGCInvokesConcurrent</span>
      <span class="no">-XX:+ExitOnOutOfMemoryError</span>
      <span class="no">-XX:+HeapDumpOnOutOfMemoryError</span>
      <span class="no">-XX:-OmitStackTraceInFastThrow</span>
      <span class="no">-XX:ReservedCodeCacheSize=768M</span>
      <span class="no">-XX:PerMethodRecompilationCutoff=10000</span>
      <span class="no">-XX:PerBytecodeRecompilationCutoff=10000</span>
      <span class="no">-Djdk.nio.maxCachedBufferSize=2000000</span>
      <span class="no">-Djdk.attach.allowAttachSelf=true</span>
</pre></div>
</div>


<span id="k8s-ex-etcfiles-other"></span><h3 id="adding-other-files-in-etc">Adding other files in <code class="docutils literal notranslate"><span class="pre">etc</span></code><a class="headerlink" href="#adding-other-files-in-etc" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#k8s-etcfiles"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>You can add any random other required configuration file in the <code class="docutils literal notranslate"><span class="pre">etc</span></code> folder,
by adding a node with the desired filename in the <code class="docutils literal notranslate"><span class="pre">other</span></code> section, and using
YAML multi-line sections to define the content. The following example adds the
two files <code class="docutils literal notranslate"><span class="pre">etc/resource-groups.json</span></code> and <code class="docutils literal notranslate"><span class="pre">etc/kafka/tpch.customer.json</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">etcFiles</span><span class="p">:</span>
    <span class="nt">other</span><span class="p">:</span>
      <span class="nt">resource-groups.json</span><span class="p">:</span> <span class="p p-Indicator">|</span>
          <span class="no">{</span>
          <span class="no">&lt;&lt;json_here&gt;</span>
          <span class="no">}</span>
      <span class="nt">kafka/tpch.customer.json</span><span class="p">:</span> <span class="p p-Indicator">|</span>
          <span class="no">{</span>
          <span class="no">&lt;&lt;json_here&gt;</span>
          <span class="no">}</span>
</pre></div>
</div>


<span id="k8s-ex-coord-resources"></span><h3 id="cpu-and-memory-allocation">CPU and memory allocation<a class="headerlink" href="#cpu-and-memory-allocation" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-coordinator"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>You have to configure the desired CPU and memory allocation in the resource
node. The parameters affect the requested pod size, and are automatically used
to determine the memory settings for the JVM running SEP.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">resources</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="s">"256Gi"</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">32</span>
  <span class="nt">nodeMemoryHeadroom</span><span class="p">:</span> <span class="s">"4Gi"</span>
</pre></div>
</div>


<span id="k8s-ex-additional-properties"></span><h3 id="adding-properties-to-config-properties">Adding properties to <code class="docutils literal notranslate"><span class="pre">config.properties</span></code><a class="headerlink" href="#adding-properties-to-config-properties" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-coordinator"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>Additional properties to append to the <a class="reference internal" href="../installation/deployment.html#config-properties"><span class="std std-ref">default configuration file</span></a>. Default values are overridden. An example usage is to set
query time-out and memory values.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">additionalProperties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">query.client.timeout=5m</span>
  <span class="no">query.min-expire-age=30m</span>
  <span class="no">query.max-memory-per-node=1GB</span>
  <span class="no">query.max-total-memory-per-node=1GB</span>
</pre></div>
</div>


<span id="helm-sep-coordinator-envfrom"></span><h3 id="using-environment-variables-for-secrets">Using environment variables for secrets<a class="headerlink" href="#using-environment-variables-for-secrets" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-coordinator"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">envFrom</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">secretRef</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;&lt;secret_name&gt;&gt;</span>
</pre></div>
</div>
<p>To use secrets for sensitive credential information to use in a catalog
properties file:</p>
<p>1. Create a secret holding variables. You can statically create secrets using
<code class="docutils literal notranslate"><span class="pre">base64</span></code> encoded values of your configuration. Make sure your secret key,
which is used to define the environment variable name, follows this regex
pattern <code class="docutils literal notranslate"><span class="pre">[a-zA-Z][a-zA-Z0-9_]*</span></code> - only alphanumerics and underscore allowed.
Convention is to use all caps and underscores such as <code class="docutils literal notranslate"><span class="pre">PSQL_USERNAME</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">echo</span> -n user <span class="p">|</span> base64
$ <span class="nb">echo</span> -n pass <span class="p">|</span> base64
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variables-secret</span>
<span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">PSQL_USERNAME</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;base64_encoded_user&gt;</span>
  <span class="nt">PSQL_PASSWORD</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;base64_encoded_pass&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Add the secret reference in <code class="docutils literal notranslate"><span class="pre">envFrom</span></code> for both <code class="docutils literal notranslate"><span class="pre">coordinator</span></code> and
<code class="docutils literal notranslate"><span class="pre">worker</span></code> to make it accessible on all nodes:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">envFrom</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">secretRef</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variables-secret</span>
</pre></div>
</div>
<p>3. Reference variables in properties files using built-in placeholder pattern as
enabled by the <a class="reference internal" href="../security/secrets.html"><span class="doc">secrets support</span></a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">catalogs</span><span class="p">:</span>
  <span class="nt">postgresql</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=postgresql</span>
    <span class="no">connection-url=jdbc:postgresql://postgresql:5432/postgres</span>
    <span class="no">connection-password=${ENV:PSQL_PASSWORD}</span>
    <span class="no">connection-user=${ENV:PSQL_USERNAME}</span>
</pre></div>
</div>


<span id="k8s-ex-insights"></span><h3 id="enabling-starburst-insights">Enabling Starburst Insights<a class="headerlink" href="#enabling-starburst-insights" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-coordinator"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p><a class="reference internal" href="../insights/index.html"><span class="doc">Starburst Insights</span></a> provides a visual overview of
important metrics about your cluster as well as a query editor feature to write
and run SQL queries. We strongly suggest reading about the options and
capabilities of this tool.</p>
<p>You can enable and configure Insights by using the <code class="docutils literal notranslate"><span class="pre">additionalProperties</span></code>
section of the <code class="docutils literal notranslate"><span class="pre">coordinator</span></code> configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">additionalProperties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">insights.persistence-enabled=true</span>
    <span class="no">insights.metrics-persistence-enabled=true</span>
    <span class="no">insights.jdbc.url=jdbc:postgresql://&lt;database hostname&gt;:5432/starburstenterprise</span>
    <span class="no">insights.jdbc.user=&lt;user&gt;</span>
    <span class="no">insights.jdbc.password=&lt;password&gt;</span>
    <span class="no">insights.authorized-users=&lt;superuser&gt;</span>
</pre></div>
</div>
<p>This example activates persistence for the query history feature, and therefore
<a class="reference internal" href="../admin/query-logger.html#query-logger-requirements"><span class="std std-ref">requires an external query logger database</span></a>.</p>
<p>Our <a class="reference internal" href="../insights/index.html"><span class="doc">Insights documentation</span></a> contains a complete
description of all Insights configuration properties.</p>


<span id="k8s-ex-access-control"></span><h3 id="enabling-access-control">Enabling access control<a class="headerlink" href="#enabling-access-control" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-coordinator"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>SEP has several options for implementing <a class="reference internal" href="../security/access-control.html"><span class="doc">access control</span></a>. You can add any desired content of the properties
file inside the YAML file. For example, you can use the read-only
<a class="reference internal" href="../security/built-in-system-access-control.html"><span class="doc">System access control</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">etcFiles</span><span class="p">:</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">access-control.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">access-control.name=read-only</span>
</pre></div>
</div>
<p>To implement Ranger, use the <a class="reference internal" href="ranger-configuration.html"><span class="doc">Apache Ranger Helm chart</span></a>.</p>
<p>Other access control choices, such as <a class="reference internal" href="sep-configuration.html#helm-sep-user-db"><span class="std std-ref">file-based user access control</span></a> require configurations in one or more nodes in the SEP
Helm chart.</p>
<p>SEP also supports Privacera. Please refer to your <a class="reference external" href="https://docs2.privacera.com/articles/#!privacera-manager-user-guide/install-pm">Privacera user
documentation</a>
to learn how to connect that service to your k8s cluster.</p>
<p>Also see: file-based user authentication <a class="reference internal" href="#k8s-ex-sep-user-db"><span class="std std-ref">example</span></a>.</p>



<span id="k8s-worker-yaml"></span><h2 id="worker-configuration">Worker configuration<a class="headerlink" href="#worker-configuration" title="Permalink to this headline">#</a></h2>

<span id="id5"></span><h3 id="k8s-defaults-worker">Defaults<a class="headerlink" href="#k8s-defaults-worker" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-workers"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>The following are the worker-related defaults in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file.
Instead, <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">review and follow best practices</a> for creating
YAML files for customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">worker</span><span class="p">:</span>
  <span class="nt">etcFiles</span><span class="p">:</span>
    <span class="nt">jvm.config</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">-server</span>
      <span class="no">-XX:-UseBiasedLocking</span>
      <span class="no">-XX:+UseG1GC</span>
      <span class="no">-XX:G1HeapRegionSize=32M</span>
      <span class="no">-XX:+ExplicitGCInvokesConcurrent</span>
      <span class="no">-XX:+ExitOnOutOfMemoryError</span>
      <span class="no">-XX:+HeapDumpOnOutOfMemoryError</span>
      <span class="no">-XX:-OmitStackTraceInFastThrow</span>
      <span class="no">-XX:ReservedCodeCacheSize=512M</span>
      <span class="no">-XX:PerMethodRecompilationCutoff=10000</span>
      <span class="no">-XX:PerBytecodeRecompilationCutoff=10000</span>
      <span class="no">-Djdk.nio.maxCachedBufferSize=2000000</span>
      <span class="no">-Djdk.attach.allowAttachSelf=true</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">config.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">coordinator=false</span>
        <span class="no">http-server.http.port=8080</span>
        <span class="no">discovery.uri=http://{{ include "starburst.service.name" . }}:8080</span>
      <span class="nt">node.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">node.environment={{ include "starburst.environment" . }}</span>
        <span class="no">node.data-dir=/data/starburst</span>
        <span class="no">plugin.dir=/usr/lib/starburst/plugin</span>
        <span class="no">node.server-log-file=/var/log/starburst/server.log</span>
        <span class="no">node.launcher-log-file=/var/log/starburst/launcher.log</span>
      <span class="nt">log.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no"># Enable verbose logging from Starburst Enterprise</span>
        <span class="no">#io.trino=DEBUG</span>
        <span class="no">#com.starburstdata.presto=DEBUG</span>
    <span class="nt">other</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">replicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
  <span class="nt">autoscaling</span><span class="p">:</span>
    <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="nt">minReplicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">maxReplicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
    <span class="nt">targetCPUUtilizationPercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
  <span class="nt">deploymentTerminationGracePeriodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span> <span class="c1"># 5 minutes</span>
  <span class="nt">starburstWorkerShutdownGracePeriodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">120</span> <span class="c1"># 2 minutes</span>
  <span class="nt">resources</span><span class="p">:</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="s">"100Gi"</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
  <span class="nt">nodeMemoryHeadroom</span><span class="p">:</span> <span class="s">"2Gi"</span>
  <span class="nt">heapSizePercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">90</span>
  <span class="nt">heapHeadroomPercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>
  <span class="nt">additionalProperties</span><span class="p">:</span> <span class="s">""</span>
  <span class="nt">envFrom</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
  <span class="nt">nodeSelector</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">affinity</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">tolerations</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
  <span class="nt">deploymentAnnotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">podAnnotations</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="nt">priorityClassName</span><span class="p">:</span>
</pre></div>
</div>



<h2 id="startup-script">Startup script<a class="headerlink" href="#startup-script" title="Permalink to this headline">#</a></h2>

<span id="id6"></span><h3 id="k8s-defaults-initfile">Defaults<a class="headerlink" href="#k8s-defaults-initfile" title="Permalink to this headline">#</a></h3>
<p>The following are the startup script-related defaults in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code>
file. Do not place unchanged values in customization files. Instead, follow best
practices for <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">creating YAML files</a> for customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span> <span class="s">""</span>
<span class="nt">extraArguments</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>


<span id="k8s-ex-startup-script"></span><h3 id="using-initfile">Using initFile<a class="headerlink" href="#using-initfile" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-nodes"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span>
<span class="nt">extraArguments</span><span class="p">:</span>
<span class="nt">extraSecret</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span>
  <span class="nt">file</span><span class="p">:</span>
</pre></div>
</div>
<p>The following example shows how you can use <code class="docutils literal notranslate"><span class="pre">initFile</span></code> to run a custom init
script on the coordinator and workers:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">#!/bin/bash</span>
  <span class="no">echo "Custom init for $1 $2"</span>
  <span class="no">exec /usr/lib/starburst/bin/run-starburst</span>
<span class="nt">extraArguments</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TEST_ARG</span>
</pre></div>
</div>
<p>Output on the coordinator:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Custom init for coordinator TEST_ARG
&lt;&lt;starburst_logs&gt;&gt;
</pre></div>
</div>
<p>Output on a worker:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Custom init for worker TEST_ARG
&lt;&lt;starburst_logs&gt;&gt;
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">initFile:</span></code> to retrieve and load drivers and other large binaries with
<code class="docutils literal notranslate"><span class="pre">curl</span></code> at startup:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">initFile</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="no">#!/bin/bash</span>
  <span class="no">echo "Custom init for $1 $2"</span>
  <span class="no">curl https://gdaadmins.blob.core.windows.net/prestoteradatadriver/terajdbc4.jar -o /usr/lib/presto/plugin/teradata/terajdbc4.jar</span>
  <span class="no">exec /usr/lib/starburst/bin/run-starburst</span>
<span class="nt">extraArguments</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TEST_ARG</span>
</pre></div>
</div>



<span id="k8s-ex-security-considerations"></span><h2 id="security-considerations">Security considerations<a class="headerlink" href="#security-considerations" title="Permalink to this headline">#</a></h2>

<span id="id7"></span><h3 id="k8s-defaults-security-considerations">Defaults<a class="headerlink" href="#k8s-defaults-security-considerations" title="Permalink to this headline">#</a></h3>
<p>The following are the security-related defaults in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file. Do
not place unchanged values in customization files. Instead, <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">read and follow
best practices</a> for
creating YAML files for customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">externalSecrets</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">goDaddy</span>
  <span class="nt">secretPrefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external/</span>
  <span class="nt">goDaddy</span><span class="p">:</span>
    <span class="nt">backendType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secretsManager</span>

<span class="nt">userDatabase</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">users</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">thepassword</span>

<span class="nt">securityContext</span><span class="p">:</span> <span class="p p-Indicator">{}</span>

<span class="nt">extraSecret</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span>
  <span class="nt">file</span><span class="p">:</span>
</pre></div>
</div>


<span id="k8s-ex-secretref"></span><h3 id="external-secret-reference">External secret reference<a class="headerlink" href="#external-secret-reference" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-secretref"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>To configure SEP to work with LDAP as an external secret reference, first
create a k8s secret holding the file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ kubectl create secret generic ldap-ca --from-file<span class="o">=</span>ca.crt
</pre></div>
</div>
<p>When the file is created, you can configure the secret reference usage for the
above configuration as:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">etcFiles</span><span class="p">:</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">password-authenticator.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
        <span class="no">ldap.url=ldaps://ldap-server:636</span>
        <span class="no">ldap.user-bind-pattern=uid=${USER},OU=America,DC=corp,DC=example,DC=com</span>
        <span class="no">ldap.ssl-trust-certificate=secretRef:ldap-ca:ca.crt</span>
</pre></div>
</div>
<p>This mounts the secret named <code class="docutils literal notranslate"><span class="pre">ldap-ca</span></code> in the path <code class="docutils literal notranslate"><span class="pre">/mnt/secretsRef/ldap-ca</span></code>
and replaces <code class="docutils literal notranslate"><span class="pre">secretRef:ldap-ca</span></code> occurrences into the absolute path, resulting
in the following configuration property setting:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ldap.ssl-trust-certificate=/mnt/secretRef/ldap-ca/ca.crt
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Specific secret values, such as passwords, can be passed into properties files
<a class="reference internal" href="#helm-sep-coordinator-envfrom"><span class="std std-ref">using the envFrom parameters</span></a> available
for <code class="docutils literal notranslate"><span class="pre">coordinator</span></code> and <code class="docutils literal notranslate"><span class="pre">worker</span></code>.</p>
</div>


<span id="k8s-ex-external-secrets"></span><h3 id="defining-external-secrets">Defining external secrets<a class="headerlink" href="#defining-external-secrets" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#k8s-external-secrets"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>You can automatically mount external secrets, for example from the AWS Secrets
Manager, using the <code class="docutils literal notranslate"><span class="pre">secretRef</span></code> or <code class="docutils literal notranslate"><span class="pre">secretEnv</span></code> notation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">externalSecrets</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span> <span class="c1"># disabled by default</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">goDaddy</span>
  <span class="nt">secretPrefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;&lt;secret_name_prefix&gt;&gt;</span>
  <span class="nt">goDaddy</span><span class="p">:</span>
    <span class="nt">backendType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;&lt;string&gt;&gt;</span>
</pre></div>
</div>
<p>An example of this configuration:</p>
<ol class="arabic simple">
<li><p>Create AWS Secrets Manager secret:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ aws secretsmanager create-secret --name external.starburst-http-server-port --secret-string <span class="m">8888</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Reference it from your configuration section in <code class="docutils literal notranslate"><span class="pre">config.properties</span></code>:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">coordinator</span><span class="p">:</span>
  <span class="nt">etcFiles</span><span class="p">:</span>
      <span class="nt">config.properties</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="l l-Scalar l-Scalar-Plain">http-server.http.port=secretEnv:external/starburst-http-server-port</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Configure the external secrets:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">externalSecrets</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">goDaddy</span>
  <span class="nt">secretPrefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external/</span>
  <span class="nt">goDaddy</span><span class="p">:</span>
    <span class="nt">backendType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secretsManager</span>
</pre></div>
</div>
<p>This creates the following external secret manifest:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kubernetes-client.io/v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ExternalSecret</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external.starburst-http-server-port</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">backendType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secretsManager</span>
  <span class="nt">data</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external/starburst-http-server-port</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EXTERNAL_STARBURST_HTTP_SERVER_PORT</span>
</pre></div>
</div>
<p>Additionally, the external secrets provider fetches secrets from AWS and creates
a k8s secret:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external.starburst-http-server-port</span>
<span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">EXTERNAL_STARBURST_HTTP_SERVER_PORT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8888</span>
</pre></div>
</div>
<p>The k8s secret is now bound to the container as the
<code class="docutils literal notranslate"><span class="pre">EXTERNAL_STARBURST_HTTP_SERVER_PORT</span></code> environment variable. SEP
<code class="docutils literal notranslate"><span class="pre">config.properties</span></code> is resolved to:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>http-server.http.port<span class="o">=</span><span class="si">${</span><span class="nv">ENV</span><span class="p">:</span><span class="nv">EXTERNAL_STARBURST_HTTP_SERVER_PORT</span><span class="si">}</span>
</pre></div>
</div>
<p>If you have a secret with multiple values, such as a JSON-formatted secret, you
can reference the secret values independently.</p>
<p>For example, you may have a secret named <code class="docutils literal notranslate"><span class="pre">external-starburst-creds-mysql</span></code> that
is structured like this in the AWS Secrets Manager:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">"MYSQL_USER"</span>: <span class="s2">"user"</span>,
  <span class="s2">"MYSQL_PASSWORD"</span>: <span class="s2">"password"</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MYSQL_USER</span></code> and <code class="docutils literal notranslate"><span class="pre">MYSQL_PASSWORD</span></code> keys can be referenced in the
<code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">externalSecrets</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">goDaddy</span>
  <span class="nt">secretPrefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external/</span>
  <span class="nt">goDaddy</span><span class="p">:</span>
    <span class="nt">backendType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secretsManager</span>

<span class="nt">catalogs</span><span class="p">:</span>
   <span class="nt">mysqldb</span><span class="p">:</span> <span class="p p-Indicator">|-</span>
    <span class="no">connector.name=mysql</span>
    <span class="no">connection-url=jdbc:mysql://&lt;&lt;dns&gt;&gt;:3306</span>
    <span class="no">connection-user=secretEnv:external-starburst-creds-mysql:MYSQL_USER</span>
    <span class="no">connection-password=secretEnv:external-starburst-creds-mysql:MYSQL_PASSWORD</span>
</pre></div>
</div>


<span id="k8s-ex-sep-user-db"></span><h3 id="file-based-authentication">File-based authentication<a class="headerlink" href="#file-based-authentication" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-user-db"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>Using the htpasswd-generated file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">userDatabase</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">password.db</span>
  <span class="nt">users</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">thepassword</span>
</pre></div>
</div>
<p>Using an externally-created user database:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">userDatabase</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>


<span id="k8s-ex-rbac-enabled-clusters"></span><h3 id="rbac-enabled-clusters">RBAC-enabled clusters<a class="headerlink" href="#rbac-enabled-clusters" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="requirements.html#k8s-rbac-clusters"><span class="std std-ref">Return</span></a> to section in k8s requirements
documentation.</p>
<p>In the following example, a user <code class="docutils literal notranslate"><span class="pre">steve</span></code> is configured to work with
SEP in a namespace called <code class="docutils literal notranslate"><span class="pre">dev-sandbox</span></code>:</p>
<ol class="arabic simple">
<li><p>Create <em>RoleBinding</em> <code class="docutils literal notranslate"><span class="pre">steve-edit</span></code> to bind the edit <em>ClusterRole</em> to the
user in the specific namespace:</p></li>
</ol>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl create rolebinding steve-edit <span class="se">\</span>
  --clusterrole edit <span class="se">\</span>
  --user steve <span class="se">\</span>
  --namespace dev-sandbox
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>If <code class="docutils literal notranslate"><span class="pre">externalSecrets:</span></code> are in use, then a role with the following
permissions must be additionally bound to the user:</p></li>
</ol>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">external-secrets-edit</span>
<span class="nt">rules</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">apiGroups</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">kubernetes-client.io</span>
  <span class="nt">resources</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">externalsecrets</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">externalsecrets/status</span>
  <span class="nt">verbs</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">create</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">get</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">list</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">watch</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">update</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">patch</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">delete</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl create rolebinding steve-external-secrets-edit <span class="se">\</span>
  --clusterrole external-secrets-edit <span class="se">\</span>
  --user steve <span class="se">\</span>
  --namespace dev-sandbox
</pre></div>
</div>
</div></blockquote>
<p>The Starburst Enterprise Helm chart does not provide functionality to use a
service account for deployments. None of the containers deployed to the cluster
needs access to the Kubernetes API.</p>



<span id="k8s-ex-performance-considerations"></span><h2 id="performance-considerations">Performance considerations<a class="headerlink" href="#performance-considerations" title="Permalink to this headline">#</a></h2>

<span id="k8s-defaults-performance-query"></span><h3 id="concurrent-query-defaults">Concurrent query defaults<a class="headerlink" href="#concurrent-query-defaults" title="Permalink to this headline">#</a></h3>
<p>The following is the <code class="docutils literal notranslate"><span class="pre">query:</span></code> default in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file. Do not
place unchanged values in customization files. Instead, <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">follow our best
practices</a> for creating
YAML files for customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">query</span><span class="p">:</span>
  <span class="nt">maxConcurrentQueries</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
</pre></div>
</div>


<span id="k8s-ex-sep-concurrent-queries"></span><h3 id="concurrent-query-increase-example">Concurrent query increase example<a class="headerlink" href="#concurrent-query-increase-example" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-concurrent-queries"><span class="std std-ref">Return</span></a> to section in k8s
configuration documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">query</span><span class="p">:</span>
  <span class="nt">maxConcurrentQueries</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</div>


<span id="k8s-defaults-performance-spilling"></span><h3 id="spilling-defaults">Spilling defaults<a class="headerlink" href="#spilling-defaults" title="Permalink to this headline">#</a></h3>
<p>The following are the spilling-related defaults in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file. Do
not place unchanged values in customization files. Instead, <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">review and follow
our best practices</a> for
creating YAML files for customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">spilling</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">volume</span><span class="p">:</span>
    <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<span id="k8s-ex-sep-spilling"></span><h3 id="spilling-example">Spilling example<a class="headerlink" href="#spilling-example" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-spilling"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">spilling</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="nt">true</span><span class="p">:</span>
  <span class="nt">volume</span><span class="p">:</span>
    <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<span id="k8s-defaults-performance-cache"></span><h3 id="hive-connector-storage-caching-defaults">Hive connector storage caching defaults<a class="headerlink" href="#hive-connector-storage-caching-defaults" title="Permalink to this headline">#</a></h3>
<p>The following are the storage caching-related defaults in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code>
file. Do not place unchanged values in customization files. Instead, follow best
practices <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">for creating YAML files to customize SEP</a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">cache</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">diskUsagePercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
  <span class="nt">ttl</span><span class="p">:</span> <span class="s">"7d"</span>
  <span class="nt">volume</span><span class="p">:</span>
    <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>


<span id="k8s-ex-sep-hive-caching"></span><h3 id="hive-connector-storage-caching-example">Hive connector storage caching example<a class="headerlink" href="#hive-connector-storage-caching-example" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-hive-caching"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">cache</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">diskUsagePercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">75</span>
  <span class="nt">ttl</span><span class="p">:</span> <span class="s">"5d"</span>
</pre></div>
</div>



<h2 id="catalogs">Catalogs<a class="headerlink" href="#catalogs" title="Permalink to this headline">#</a></h2>

<span id="k8s-defaults-catalogs"></span><h3 id="default">Default<a class="headerlink" href="#default" title="Permalink to this headline">#</a></h3>
<p>The following is the default catalog entry in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file. Do not
place unchanged values in customization files. Instead, follow best practices
<a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">to create YAML files that define catalogs</a> in SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">catalogs</span><span class="p">:</span>
  <span class="nt">tpch</span><span class="p">:</span> <span class="p p-Indicator">|-</span>
    <span class="no">connector.name=tpch</span>
    <span class="no">tpch.splits-per-node=4</span>
</pre></div>
</div>


<span id="k8s-ex-sep-catalogs"></span><h3 id="catalog-examples">Catalog examples<a class="headerlink" href="#catalog-examples" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-catalogs"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>The following snippet adds the <code class="docutils literal notranslate"><span class="pre">tpcds-testdata</span></code> catalog. It uses
the <a class="reference internal" href="../connector/tpcds.html"><span class="doc">TPCDS connector</span></a> and only specifies the connector name.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">catalogs</span><span class="p">:</span>
  <span class="nt">tpcds-testdata</span><span class="p">:</span> <span class="p p-Indicator">|</span>
  <span class="l l-Scalar l-Scalar-Plain">connector.name=tpcds</span>
</pre></div>
</div>
<p>Multiple catalogs are configured one after the other:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">catalogs</span><span class="p">:</span>
  <span class="nt">tpch-testdata</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=tpch</span>
  <span class="nt">tpcds-testdata</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=tpcds</span>
  <span class="nt">tmpmemory</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=memory</span>
  <span class="nt">metrics</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=jmx</span>
  <span class="nt">devnull</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=blackhole</span>
  <span class="nt">datalake</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=hive</span>
    <span class="no">hive.metastore.uri=thrift://hive:9083</span>
  <span class="nt">s3</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">connector.name=hive</span>
    <span class="no">hive.metastore=glue</span>
</pre></div>
</div>
<p>The name of each catalog is defined by the chosen name for the node within
<code class="docutils literal notranslate"><span class="pre">catalogs</span></code>. The above examples results in catalog names such as
<code class="docutils literal notranslate"><span class="pre">tpch-testdata</span></code>, <code class="docutils literal notranslate"><span class="pre">tpcds-testdata</span></code>, <code class="docutils literal notranslate"><span class="pre">tmpmemory</span></code>, <code class="docutils literal notranslate"><span class="pre">metrics</span></code> and others.
These names are visible for CLI and other tool users with <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">CATALOGS</span></code> and
potentially in the user interface.</p>
<p>Each catalog properties file can use the configuration options supported by the
<a class="reference internal" href="../connector/starburst-connectors.html"><span class="doc">connector</span></a> designated by the
configured <code class="docutils literal notranslate"><span class="pre">connector.name</span></code>.</p>


<span id="k8s-ex-teradata-direct-connector"></span><h3 id="teradata-direct-connector">Teradata Direct connector<a class="headerlink" href="#teradata-direct-connector" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-catalogs"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>The <a class="reference internal" href="../connector/starburst-teradata.html#starburst-teradata-direct-connector"><span class="std std-ref">Starburst Teradata Direct connector</span></a> is supported for Kubernetes deployments
in AWS EKS and in Azure AKS. Follow <a class="reference internal" href="sep-config-teradata-direct.html"><span class="doc">the detailed instructions to configure
the necessary networking and components</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The configuration to use the Starburst Teradata Direct connector on Kubernetes
is complex. You need significant Kubernetes and networking knowledge. Contact
our Starburst Support team for assistance.</p>
</div>



<h2 id="additional-volumes">Additional volumes<a class="headerlink" href="#additional-volumes" title="Permalink to this headline">#</a></h2>

<span id="id8"></span><h3 id="k8s-defaults-additionalvolumes">Default<a class="headerlink" href="#k8s-defaults-additionalvolumes" title="Permalink to this headline">#</a></h3>
<p>The following is the <code class="docutils literal notranslate"><span class="pre">additionalVolumes:</span></code> default in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code>
file. Do not place unchanged values in customization files:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">additionalVolumes</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
</div>


<span id="k8s-ex-sep-volumes"></span><h3 id="adding-volumes-examples">Adding volumes examples<a class="headerlink" href="#adding-volumes-examples" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-volumes"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">additionalVolumes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/mnt/InContainer</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">emptyDir</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
  <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/starburst/cache1</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">hostPath</span><span class="p">:</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/media/nv1/starburst-cache</span>
  <span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/starburst/cache2</span>
    <span class="nt">volume</span><span class="p">:</span>
      <span class="nt">hostPath</span><span class="p">:</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/media/nv2/starburst-cache</span>
</pre></div>
</div>


<span id="k8s-ex-sep-adding-files"></span><h3 id="adding-files-examples">Adding files examples<a class="headerlink" href="#adding-files-examples" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-adding-files"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>As an example, if you want to copy a file to an already existing location like
<code class="docutils literal notranslate"><span class="pre">/usr/lib/starburst/plugin</span></code> you can mount the file to a Kubernetes volume like
a <a class="reference external" href="https://kubernetes.io/docs/concepts/configuration/configmap/">ConfigMap</a>,
and add the file as a <code class="docutils literal notranslate"><span class="pre">subPath</span></code> to the <code class="docutils literal notranslate"><span class="pre">path</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">additionalVolumes</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/usr/lib/starburst/plugin/x.jar</span>
    <span class="l l-Scalar l-Scalar-Plain">subPath</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">x.jar</span>
    <span class="l l-Scalar l-Scalar-Plain">volume</span><span class="p p-Indicator">:</span>
    <span class="nt">configMap</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="s">"configmap-in-volume"</span>
</pre></div>
</div>
<p>In this case, the key named <code class="docutils literal notranslate"><span class="pre">x.jar</span></code> from the ConfigMap is mounted as that file
in the location provided in <code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
<p>Large binaries, such as drivers, are added at cluster start time in the
<code class="docutils literal notranslate"><span class="pre">initFile:</span></code> <a class="reference internal" href="#k8s-ex-startup-script"><span class="std std-ref">top level node</span></a>.</p>



<span id="k8s-ex-sep-prometheus"></span><h2 id="prometheus">Prometheus<a class="headerlink" href="#prometheus" title="Permalink to this headline">#</a></h2>

<span id="id9"></span><h3 id="k8s-defaults-prometheus">Default<a class="headerlink" href="#k8s-defaults-prometheus" title="Permalink to this headline">#</a></h3>
<p><strong>&lt;&lt;</strong> <a class="reference internal" href="sep-configuration.html#helm-sep-prometheus"><span class="std std-ref">Return</span></a> to section in k8s configuration
documentation.</p>
<p>The following are the <code class="docutils literal notranslate"><span class="pre">prometheus:</span></code> defaults in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file. Do
not place unchanged values in customization files. Instead, YAML files for
customizations <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">using our best practices guide</a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">prometheus</span><span class="p">:</span>
  <span class="nt">enabled</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">agent</span><span class="p">:</span>
    <span class="nt">version</span><span class="p">:</span> <span class="s">"0.15.0"</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8081</span>
    <span class="nt">config</span><span class="p">:</span> <span class="s">"/etc/starburst/telemetry/prometheus.yaml"</span>
  <span class="nt">rules</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">pattern</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">trino.execution&lt;name=QueryManager&gt;&lt;&gt;(running_queries|queued_queries)</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$1</span>
      <span class="nt">attrNameSnakeCase</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GAUGE</span>
    <span class="p p-Indicator">-</span> <span class="nt">pattern</span><span class="p">:</span> <span class="s">'trino.execution&lt;name=QueryManager&gt;&lt;&gt;FailedQueries\.TotalCount'</span>
      <span class="nt">name</span><span class="p">:</span> <span class="s">'failed_queries'</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">COUNTER</span>
</pre></div>
</div>


<span id="k8s-ex-kubernetes-configs"></span><h3 id="kubernetes-management-and-monitoring">Kubernetes management and monitoring<a class="headerlink" href="#kubernetes-management-and-monitoring" title="Permalink to this headline">#</a></h3>


<span id="id10"></span><h3 id="k8s-defaults-k8s-monitoring">Default<a class="headerlink" href="#k8s-defaults-k8s-monitoring" title="Permalink to this headline">#</a></h3>
<p>The following are the Kubernetes-related defaults in the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file.
Do not place unchanged values in customization files. Instead, <a class="reference external" href="../../starburst-enterprise/k8s-helm-deployments.html">follow our
suggested best practices</a> for creating YAML files
for customizing SEP:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">readinessProbe</span><span class="p">:</span>
  <span class="nt">exec</span><span class="p">:</span>
    <span class="nt">command</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/bin/sh</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">-c</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">curl --max-time 5 -s http://localhost:8080/v1/info | grep \"starting\":false</span>
  <span class="nt">initialDelaySeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
  <span class="nt">periodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
  <span class="nt">timeoutSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="nt">livenessProbe</span><span class="p">:</span>
  <span class="nt">exec</span><span class="p">:</span>
    <span class="nt">command</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/bin/sh</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">-c</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">curl --max-time 5 -s http://localhost:8080/v1/info | grep \"starting\":false</span>
  <span class="nt">initialDelaySeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span>
  <span class="nt">periodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span>
  <span class="nt">timeoutSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>
  <span class="nt">failureThreshold</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="nt">commonLabels</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
</pre></div>
</div>





          </article>
        </div>
      </div>
    </main>
  </div>
<div class="md-grid md-main__inner" style="height: auto;">
  <div class="md-content">
    <div class="feedback-container md-content__inner md-typeset">
      <div class="feedback-thumbs">
        <p>Is the information on this page helpful?</p>
        <p class="feedback-option" title="yes">Yes</p>
        <p class="feedback-option" title="no">No</p>
      </div>
      <div class="feedback-message">
        <textarea class="feedback-body" placeholder="Additional feedback"></textarea>
        <button type="button" onclick="sendMessage()" class="feedback-button">Submit</button>
        <a onclick="skip()" class="feedback-skip">Skip</a>
      </div>
    </div>
  </div>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '');
</script>
<script>
function feedback() {
  var feedbackValue = "";
  var feedbackThumbs = document.querySelector(".feedback-thumbs");
  var feedbackMessage = document.querySelector(".feedback-message");
  var initialFeedbackMessageContents = feedbackMessage.innerHTML;
  var feedbackAnswer = localStorage.getItem('feedback-answer-' + window.location.pathname);
  var options = Array.from(document.querySelectorAll(".feedback-option"));

  if (feedbackAnswer) {
    Object.keys(options).map(i => options[i].getAttribute('title') == JSON.parse(feedbackAnswer)
      ? options[i].classList.add('active')
      : null
    );
  }

  var clickFunction = function(event){
    var page = window.location.pathname;
    var value = event.currentTarget.getAttribute('title');
    var eventValue = value == 'yes' ? 1 : 0;

    if(!event.currentTarget.classList.contains('active')) {
      localStorage.setItem('feedback-answer-' + page, JSON.stringify(value == 'yes' ? 'yes' : 'no'));
      feedbackValue = value;

      gtag('event', 'feedback', {
        'event_category': 'Docs Feedback',
        'event_label': page,
        'event_value': eventValue,
      });

      Object.keys(options).map(i => options[i].classList.remove('active'));
      event.currentTarget.classList.add('active');

      feedbackThumbs.style.display = "none";
      feedbackMessage.style.display = "flex";
    };
  };

  skip = function() {
    feedbackMessage.style.display = "none";
    feedbackThumbs.style.display = "flex";
    feedbackMessage.innerHTML = initialFeedbackMessageContents;
  }

  sendMessage = function(){
    var feedbackBody = document.querySelector(".feedback-body").value;

    if (feedbackBody) {
      var message = "Page url: " + window.location.pathname + "\n\n"
        + "Feedback positive?: " + feedbackValue + "\n\n" +  "Feedback Message: " + feedbackBody;
      var link = "mailto:docs-feedback@starburst.io?subject=" + encodeURIComponent("Feedback")+"&body="
        + encodeURIComponent(message);

      window.location.href = link;
      feedbackMessage.innerHTML = "<p>Thank you!</p>";

      setTimeout(function(){
          skip();
      }, 5000);
    } else {
      if(!document.querySelector("#feedback-skip")) {
        var alertMessage = document.createElement("p");
        alertMessage.id = "feedback-skip";
        alertMessage.style.color = "red";
        alertMessage.style.position = "absolute";
        alertMessage.style.bottom = "-0.5rem";
        alertMessage.innerHTML = "Please provide a message.";
        feedbackMessage.appendChild(alertMessage);

        setTimeout(function(){
          alertMessage.remove();
        }, 3000);
      }
    }
  }

  Object.keys(options).map(i => options[i].addEventListener('click', clickFunction , false));
}

feedback();
</script>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="sep-configuration.html" title="Configuring Starburst Enterprise in Kubernetes"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Configuring Starburst Enterprise in Kubernetes </span>
              </div>
            </a>
          
          
            <a href="hms-configuration.html" title="Configuring the Hive Metastore Service in Kubernetes"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Configuring the Hive Metastore Service in Kubernetes </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
  <div class="container md-grid">
    <div class="row">
      <div class="col-md-3">
        <p style="font-weight:900">Resources</p>
        <ul>
          <li class="footer-item"><a href="https://docs.starburst.io/latest/index.html">Starburst Enterprise reference documentation</a></li>
          <li class="footer-item"><a href="/videos/index.html">Video library</a></li>
          <li class="footer-item"><a href="/glossary.html">Glossary</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/oreilly-trino-guide/" target="_blank">Free O'Reilly book - Trino: The Definitive Guide</a></li>
          <li class="footer-item"><a href="https://trino.io/broadcast/" target="_blank">Trino Community Broadcast</a></li>
          <li class="footer-item"><a href="https://blog.starburstdata.com/" target="_blank">Starburst blog</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <p style="font-weight:900">Contact and more</p>
        <ul>
          <li class="footer-item"><a href="https://www.starburst.io" target="_blank">Starburst</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/info/starburst-intro-and-demo/" target="_blank">Join our weekly demos</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/#!" target="_blank">Start a trial</a></li>
          <li class="footer-item"><a href="/support.html" target="_blank">Get support</a></li>
          <li class="footer-item"><a href="https://www.starburst.io/contact/" target="_blank">Contact us</a></li>
        </ul>
      </div>
      <div class="col-md-3" style="text-align:right;">

        <a href="https://www.starburst.io/" target="_blank">
          
            <img src="../_static/Starburst_Logo_NoTag_White.png" height="26"
                  alt="Starburst Enterprise 370-e LTS logo">
        
        </a>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#copyright">Copyright © 2017-2021<br> Starburst Data</a>
        </li>
        <li class="footer-item" style="padding-right:10px;">
          <a href="/disclaimers.html#trademarks">Trademark information</a>
        </li>
      </div>
    </div>
  </div>
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>